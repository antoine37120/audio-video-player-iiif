(function(Ja,ps){typeof exports=="object"&&typeof module<"u"?module.exports=ps():typeof define=="function"&&define.amd?define(ps):(Ja=typeof globalThis<"u"?globalThis:Ja||self,Ja.PlayerIIIF=ps())})(this,(function(){"use strict";var Ja=document.createElement("style");Ja.textContent="/*$vite$:1*/",document.head.appendChild(Ja);var ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function hz(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function i(){var n=!1;try{n=this instanceof i}catch{}return n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var n=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return r[i]}})}),t}var tp,HC;function Kc(){if(HC)return tp;HC=1;var r;return typeof window<"u"?r=window:typeof ps<"u"?r=ps:typeof self<"u"?r=self:r={},tp=r,tp}var dz=Kc();const U=Nl(dz),fz=hz(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var rp,VC;function GC(){if(VC)return rp;VC=1;var r=typeof ps<"u"?ps:typeof window<"u"?window:{},e=fz,t;return typeof document<"u"?t=document:(t=r["__GLOBAL_DOCUMENT_CACHE@4"],t||(t=r["__GLOBAL_DOCUMENT_CACHE@4"]=e)),rp=t,rp}var pz=GC();const oe=Nl(pz);var Xc={exports:{}},ip={exports:{}},WC;function mz(){return WC||(WC=1,(function(r){function e(){return r.exports=e=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},r.exports.__esModule=!0,r.exports.default=r.exports,e.apply(null,arguments)}r.exports=e,r.exports.__esModule=!0,r.exports.default=r.exports})(ip)),ip.exports}var np,zC;function gz(){if(zC)return np;zC=1,np=e;var r=Object.prototype.toString;function e(t){if(!t)return!1;var i=r.call(t);return i==="[object Function]"||typeof t=="function"&&i!=="[object RegExp]"||typeof window<"u"&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}return np}var sp,YC;function vz(){if(YC)return sp;YC=1;function r(n,s){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a)return(a=a.call(n)).next.bind(a);if(Array.isArray(n)||(a=e(n))||s){a&&(n=a);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e(n,s){if(n){if(typeof n=="string")return t(n,s);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(n,s)}}function t(n,s){(s==null||s>n.length)&&(s=n.length);for(var a=0,o=new Array(s);a<s;a++)o[a]=n[a];return o}var i=(function(){function n(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var s=n.prototype;return s.getIsEnabled=function(){return this.enabled_},s.enable=function(){this.enabled_=!0},s.disable=function(){this.enabled_=!1},s.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},s.addInterceptor=function(o,l){this.typeToInterceptorsMap_.has(o)||this.typeToInterceptorsMap_.set(o,new Set);var u=this.typeToInterceptorsMap_.get(o);return u.has(l)?!1:(u.add(l),!0)},s.removeInterceptor=function(o,l){var u=this.typeToInterceptorsMap_.get(o);return u&&u.has(l)?(u.delete(l),!0):!1},s.clearInterceptorsByType=function(o){var l=this.typeToInterceptorsMap_.get(o);return l?(this.typeToInterceptorsMap_.delete(o),this.typeToInterceptorsMap_.set(o,new Set),!0):!1},s.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},s.getForType=function(o){return this.typeToInterceptorsMap_.get(o)||new Set},s.execute=function(o,l){for(var u=this.getForType(o),c=r(u),h;!(h=c()).done;){var f=h.value;try{l=f(l)}catch{}}return l},n})();return sp=i,sp}var ap,KC;function yz(){if(KC)return ap;KC=1;var r=(function(){function t(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var i=t.prototype;return i.getIsEnabled=function(){return this.enabled_},i.enable=function(){this.enabled_=!0},i.disable=function(){this.enabled_=!1},i.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},i.getMaxAttempts=function(){return this.maxAttempts_},i.setMaxAttempts=function(s){this.maxAttempts_=s},i.getDelayFactor=function(){return this.delayFactor_},i.setDelayFactor=function(s){this.delayFactor_=s},i.getFuzzFactor=function(){return this.fuzzFactor_},i.setFuzzFactor=function(s){this.fuzzFactor_=s},i.getInitialDelay=function(){return this.initialDelay_},i.setInitialDelay=function(s){this.initialDelay_=s},i.createRetry=function(s){var a=s===void 0?{}:s,o=a.maxAttempts,l=a.delayFactor,u=a.fuzzFactor,c=a.initialDelay;return new e({maxAttempts:o||this.maxAttempts_,delayFactor:l||this.delayFactor_,fuzzFactor:u||this.fuzzFactor_,initialDelay:c||this.initialDelay_})},t})(),e=(function(){function t(n){this.maxAttempts_=n.maxAttempts,this.delayFactor_=n.delayFactor,this.fuzzFactor_=n.fuzzFactor,this.currentDelay_=n.initialDelay,this.currentAttempt_=1}var i=t.prototype;return i.moveToNextAttempt=function(){this.currentAttempt_++;var s=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+s},i.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},i.getCurrentDelay=function(){return this.currentDelay_},i.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},i.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},i.getCurrentFuzzedDelay=function(){var s=this.getCurrentMinPossibleDelay(),a=this.getCurrentMaxPossibleDelay();return s+Math.random()*(a-s)},t})();return ap=r,ap}var op,XC;function _z(){if(XC)return op;XC=1;var r=Kc(),e=function(n,s){return s===void 0&&(s=!1),function(a,o,l){if(a){n(a);return}if(o.statusCode>=400&&o.statusCode<=599){var u=l;if(s)if(r.TextDecoder){var c=t(o.headers&&o.headers["content-type"]);try{u=new TextDecoder(c).decode(l)}catch{}}else u=String.fromCharCode.apply(null,new Uint8Array(l));n({cause:u});return}n(null,l)}};function t(i){return i===void 0&&(i=""),i.toLowerCase().split(";").reduce(function(n,s){var a=s.split("="),o=a[0],l=a[1];return o.trim()==="charset"?l.trim():n},"utf-8")}return op=e,op}var QC;function bz(){if(QC)return Xc.exports;QC=1;var r=Kc(),e=mz(),t=gz(),i=vz(),n=yz();u.httpHandler=_z(),u.requestInterceptorsStorage=new i,u.responseInterceptorsStorage=new i,u.retryManager=new n;var s=function(g){var v={};return g&&g.trim().split(`
`).forEach(function(b){var E=b.indexOf(":"),x=b.slice(0,E).trim().toLowerCase(),D=b.slice(E+1).trim();typeof v[x]>"u"?v[x]=D:Array.isArray(v[x])?v[x].push(D):v[x]=[v[x],D]}),v};Xc.exports=u,Xc.exports.default=u,u.XMLHttpRequest=r.XMLHttpRequest||f,u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,a(["get","put","post","patch","head","delete"],function(p){u[p==="delete"?"del":p]=function(g,v,b){return v=l(g,v,b),v.method=p.toUpperCase(),c(v)}});function a(p,g){for(var v=0;v<p.length;v++)g(p[v])}function o(p){for(var g in p)if(p.hasOwnProperty(g))return!1;return!0}function l(p,g,v){var b=p;return t(g)?(v=g,typeof p=="string"&&(b={uri:p})):b=e({},g,{uri:p}),b.callback=v,b}function u(p,g,v){return g=l(p,g,v),c(g)}function c(p){if(typeof p.callback>"u")throw new Error("callback argument missing");if(p.requestType&&u.requestInterceptorsStorage.getIsEnabled()){var g={uri:p.uri||p.url,headers:p.headers||{},body:p.body,metadata:p.metadata||{},retry:p.retry,timeout:p.timeout},v=u.requestInterceptorsStorage.execute(p.requestType,g);p.uri=v.uri,p.headers=v.headers,p.body=v.body,p.metadata=v.metadata,p.retry=v.retry,p.timeout=v.timeout}var b=!1,E=function(Y,X,ie){b||(b=!0,p.callback(Y,X,ie))};function x(){R.readyState===4&&!u.responseInterceptorsStorage.getIsEnabled()&&setTimeout(P,0)}function D(){var W=void 0;if(R.response?W=R.response:W=R.responseText||h(R),z)try{W=JSON.parse(W)}catch{}return W}function O(W){if(clearTimeout(J),clearTimeout(p.retryTimeout),W instanceof Error||(W=new Error(""+(W||"Unknown XMLHttpRequest Error"))),W.statusCode=0,!I&&u.retryManager.getIsEnabled()&&p.retry&&p.retry.shouldRetry()){p.retryTimeout=setTimeout(function(){p.retry.moveToNextAttempt(),p.xhr=R,c(p)},p.retry.getCurrentFuzzedDelay());return}if(p.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var Y={headers:Z.headers||{},body:Z.body,responseUrl:R.responseURL,responseType:R.responseType},X=u.responseInterceptorsStorage.execute(p.requestType,Y);Z.body=X.body,Z.headers=X.headers}return E(W,Z)}function P(){if(!I){var W;clearTimeout(J),clearTimeout(p.retryTimeout),p.useXDR&&R.status===void 0?W=200:W=R.status===1223?204:R.status;var Y=Z,X=null;if(W!==0?(Y={body:D(),statusCode:W,method:C,headers:{},url:S,rawRequest:R},R.getAllResponseHeaders&&(Y.headers=s(R.getAllResponseHeaders()))):X=new Error("Internal XMLHttpRequest Error"),p.requestType&&u.responseInterceptorsStorage.getIsEnabled()){var ie={headers:Y.headers||{},body:Y.body,responseUrl:R.responseURL,responseType:R.responseType},Q=u.responseInterceptorsStorage.execute(p.requestType,ie);Y.body=Q.body,Y.headers=Q.headers}return E(X,Y,Y.body)}}var R=p.xhr||null;R||(p.cors||p.useXDR?R=new u.XDomainRequest:R=new u.XMLHttpRequest);var A,I,S=R.url=p.uri||p.url,C=R.method=p.method||"GET",$=p.body||p.data,F=R.headers=p.headers||{},j=!!p.sync,z=!1,J,Z={body:void 0,headers:{},statusCode:0,method:C,url:S,rawRequest:R};if("json"in p&&p.json!==!1&&(z=!0,F.accept||F.Accept||(F.Accept="application/json"),C!=="GET"&&C!=="HEAD"&&(F["content-type"]||F["Content-Type"]||(F["Content-Type"]="application/json"),$=JSON.stringify(p.json===!0?$:p.json))),R.onreadystatechange=x,R.onload=P,R.onerror=O,R.onprogress=function(){},R.onabort=function(){I=!0,clearTimeout(p.retryTimeout)},R.ontimeout=O,R.open(C,S,!j,p.username,p.password),j||(R.withCredentials=!!p.withCredentials),!j&&p.timeout>0&&(J=setTimeout(function(){if(!I){I=!0,R.abort("timeout");var W=new Error("XMLHttpRequest timeout");W.code="ETIMEDOUT",O(W)}},p.timeout)),R.setRequestHeader)for(A in F)F.hasOwnProperty(A)&&R.setRequestHeader(A,F[A]);else if(p.headers&&!o(p.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in p&&(R.responseType=p.responseType),"beforeSend"in p&&typeof p.beforeSend=="function"&&p.beforeSend(R),R.send($||null),R}function h(p){try{if(p.responseType==="document")return p.responseXML;var g=p.responseXML&&p.responseXML.documentElement.nodeName==="parsererror";if(p.responseType===""&&!g)return p.responseXML}catch{}return null}function f(){}return Xc.exports}var Tz=bz();const ZC=Nl(Tz);var lp={exports:{}},up,JC;function Sz(){if(JC)return up;JC=1;var r=GC(),e=Object.create||(function(){function S(){}return function(C){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return S.prototype=C,new S}})();function t(S,C){this.name="ParsingError",this.code=S.code,this.message=C||S.message}t.prototype=e(Error.prototype),t.prototype.constructor=t,t.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function i(S){function C(F,j,z,J){return(F|0)*3600+(j|0)*60+(z|0)+(J|0)/1e3}var $=S.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return $?$[3]?C($[1],$[2],$[3].replace(":",""),$[4]):$[1]>59?C($[1],$[2],0,$[4]):C(0,$[1],$[2],$[4]):null}function n(){this.values=e(null)}n.prototype={set:function(S,C){!this.get(S)&&C!==""&&(this.values[S]=C)},get:function(S,C,$){return $?this.has(S)?this.values[S]:C[$]:this.has(S)?this.values[S]:C},has:function(S){return S in this.values},alt:function(S,C,$){for(var F=0;F<$.length;++F)if(C===$[F]){this.set(S,C);break}},integer:function(S,C){/^-?\d+$/.test(C)&&this.set(S,parseInt(C,10))},percent:function(S,C){return C.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(C=parseFloat(C),C>=0&&C<=100)?(this.set(S,C),!0):!1}};function s(S,C,$,F){var j=F?S.split(F):[S];for(var z in j)if(typeof j[z]=="string"){var J=j[z].split($);if(J.length===2){var Z=J[0].trim(),W=J[1].trim();C(Z,W)}}}function a(S,C,$){var F=S;function j(){var Z=i(S);if(Z===null)throw new t(t.Errors.BadTimeStamp,"Malformed timestamp: "+F);return S=S.replace(/^[^\sa-zA-Z-]+/,""),Z}function z(Z,W){var Y=new n;s(Z,function(X,ie){switch(X){case"region":for(var Q=$.length-1;Q>=0;Q--)if($[Q].id===ie){Y.set(X,$[Q].region);break}break;case"vertical":Y.alt(X,ie,["rl","lr"]);break;case"line":var he=ie.split(","),ve=he[0];Y.integer(X,ve),Y.percent(X,ve)&&Y.set("snapToLines",!1),Y.alt(X,ve,["auto"]),he.length===2&&Y.alt("lineAlign",he[1],["start","center","end"]);break;case"position":he=ie.split(","),Y.percent(X,he[0]),he.length===2&&Y.alt("positionAlign",he[1],["start","center","end"]);break;case"size":Y.percent(X,ie);break;case"align":Y.alt(X,ie,["start","center","end","left","right"]);break}},/:/,/\s/),W.region=Y.get("region",null),W.vertical=Y.get("vertical","");try{W.line=Y.get("line","auto")}catch{}W.lineAlign=Y.get("lineAlign","start"),W.snapToLines=Y.get("snapToLines",!0),W.size=Y.get("size",100);try{W.align=Y.get("align","center")}catch{W.align=Y.get("align","middle")}try{W.position=Y.get("position","auto")}catch{W.position=Y.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},W.align)}W.positionAlign=Y.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},W.align)}function J(){S=S.replace(/^\s+/,"")}if(J(),C.startTime=j(),J(),S.substr(0,3)!=="-->")throw new t(t.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+F);S=S.substr(3),J(),C.endTime=j(),J(),z(S,C)}var o=r.createElement&&r.createElement("textarea"),l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},u={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},c={v:"title",lang:"lang"},h={rt:"ruby"};function f(S,C){function $(){if(!C)return null;function ve(be){return C=C.substr(be.length),be}var pe=C.match(/^([^<]*)(<[^>]*>?)?/);return ve(pe[1]?pe[1]:pe[2])}function F(ve){return o.innerHTML=ve,ve=o.textContent,o.textContent="",ve}function j(ve,pe){return!h[pe.localName]||h[pe.localName]===ve.localName}function z(ve,pe){var be=l[ve];if(!be)return null;var Oe=S.document.createElement(be),Qe=c[ve];return Qe&&pe&&(Oe[Qe]=pe.trim()),Oe}for(var J=S.document.createElement("div"),Z=J,W,Y=[];(W=$())!==null;){if(W[0]==="<"){if(W[1]==="/"){Y.length&&Y[Y.length-1]===W.substr(2).replace(">","")&&(Y.pop(),Z=Z.parentNode);continue}var X=i(W.substr(1,W.length-2)),ie;if(X){ie=S.document.createProcessingInstruction("timestamp",X),Z.appendChild(ie);continue}var Q=W.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Q||(ie=z(Q[1],Q[3]),!ie)||!j(Z,ie))continue;if(Q[2]){var he=Q[2].split(".");he.forEach(function(ve){var pe=/^bg_/.test(ve),be=pe?ve.slice(3):ve;if(u.hasOwnProperty(be)){var Oe=pe?"background-color":"color",Qe=u[be];ie.style[Oe]=Qe}}),ie.className=he.join(" ")}Y.push(Q[1]),Z.appendChild(ie),Z=ie;continue}Z.appendChild(S.document.createTextNode(F(W)))}return J}var p=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function g(S){for(var C=0;C<p.length;C++){var $=p[C];if(S>=$[0]&&S<=$[1])return!0}return!1}function v(S){var C=[],$="",F;if(!S||!S.childNodes)return"ltr";function j(Z,W){for(var Y=W.childNodes.length-1;Y>=0;Y--)Z.push(W.childNodes[Y])}function z(Z){if(!Z||!Z.length)return null;var W=Z.pop(),Y=W.textContent||W.innerText;if(Y){var X=Y.match(/^.*(\n|\r)/);return X?(Z.length=0,X[0]):Y}if(W.tagName==="ruby")return z(Z);if(W.childNodes)return j(Z,W),z(Z)}for(j(C,S);$=z(C);)for(var J=0;J<$.length;J++)if(F=$.charCodeAt(J),g(F))return"rtl";return"ltr"}function b(S){if(typeof S.line=="number"&&(S.snapToLines||S.line>=0&&S.line<=100))return S.line;if(!S.track||!S.track.textTrackList||!S.track.textTrackList.mediaElement)return-1;for(var C=S.track,$=C.textTrackList,F=0,j=0;j<$.length&&$[j]!==C;j++)$[j].mode==="showing"&&F++;return++F*-1}function E(){}E.prototype.applyStyles=function(S,C){C=C||this.div;for(var $ in S)S.hasOwnProperty($)&&(C.style[$]=S[$])},E.prototype.formatStyle=function(S,C){return S===0?0:S+C};function x(S,C,$){E.call(this),this.cue=C,this.cueDiv=f(S,C.text);var F={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:C.vertical===""?"horizontal-tb":C.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(F,this.cueDiv),this.div=S.document.createElement("div"),F={direction:v(this.cueDiv),writingMode:C.vertical===""?"horizontal-tb":C.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:C.align==="middle"?"center":C.align,font:$.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(F),this.div.appendChild(this.cueDiv);var j=0;switch(C.positionAlign){case"start":case"line-left":j=C.position;break;case"center":j=C.position-C.size/2;break;case"end":case"line-right":j=C.position-C.size;break}C.vertical===""?this.applyStyles({left:this.formatStyle(j,"%"),width:this.formatStyle(C.size,"%")}):this.applyStyles({top:this.formatStyle(j,"%"),height:this.formatStyle(C.size,"%")}),this.move=function(z){this.applyStyles({top:this.formatStyle(z.top,"px"),bottom:this.formatStyle(z.bottom,"px"),left:this.formatStyle(z.left,"px"),right:this.formatStyle(z.right,"px"),height:this.formatStyle(z.height,"px"),width:this.formatStyle(z.width,"px")})}}x.prototype=e(E.prototype),x.prototype.constructor=x;function D(S){var C,$,F,j;if(S.div){$=S.div.offsetHeight,F=S.div.offsetWidth,j=S.div.offsetTop;var z=(z=S.div.childNodes)&&(z=z[0])&&z.getClientRects&&z.getClientRects();S=S.div.getBoundingClientRect(),C=z?Math.max(z[0]&&z[0].height||0,S.height/z.length):0}this.left=S.left,this.right=S.right,this.top=S.top||j,this.height=S.height||$,this.bottom=S.bottom||j+(S.height||$),this.width=S.width||F,this.lineHeight=C!==void 0?C:S.lineHeight}D.prototype.move=function(S,C){switch(C=C!==void 0?C:this.lineHeight,S){case"+x":this.left+=C,this.right+=C;break;case"-x":this.left-=C,this.right-=C;break;case"+y":this.top+=C,this.bottom+=C;break;case"-y":this.top-=C,this.bottom-=C;break}},D.prototype.overlaps=function(S){return this.left<S.right&&this.right>S.left&&this.top<S.bottom&&this.bottom>S.top},D.prototype.overlapsAny=function(S){for(var C=0;C<S.length;C++)if(this.overlaps(S[C]))return!0;return!1},D.prototype.within=function(S){return this.top>=S.top&&this.bottom<=S.bottom&&this.left>=S.left&&this.right<=S.right},D.prototype.overlapsOppositeAxis=function(S,C){switch(C){case"+x":return this.left<S.left;case"-x":return this.right>S.right;case"+y":return this.top<S.top;case"-y":return this.bottom>S.bottom}},D.prototype.intersectPercentage=function(S){var C=Math.max(0,Math.min(this.right,S.right)-Math.max(this.left,S.left)),$=Math.max(0,Math.min(this.bottom,S.bottom)-Math.max(this.top,S.top)),F=C*$;return F/(this.height*this.width)},D.prototype.toCSSCompatValues=function(S){return{top:this.top-S.top,bottom:S.bottom-this.bottom,left:this.left-S.left,right:S.right-this.right,height:this.height,width:this.width}},D.getSimpleBoxPosition=function(S){var C=S.div?S.div.offsetHeight:S.tagName?S.offsetHeight:0,$=S.div?S.div.offsetWidth:S.tagName?S.offsetWidth:0,F=S.div?S.div.offsetTop:S.tagName?S.offsetTop:0;S=S.div?S.div.getBoundingClientRect():S.tagName?S.getBoundingClientRect():S;var j={left:S.left,right:S.right,top:S.top||F,height:S.height||C,bottom:S.bottom||F+(S.height||C),width:S.width||$};return j};function O(S,C,$,F){function j(be,Oe){for(var Qe,Ze=new D(be),tr=1,Ir=0;Ir<Oe.length;Ir++){for(;be.overlapsOppositeAxis($,Oe[Ir])||be.within($)&&be.overlapsAny(F);)be.move(Oe[Ir]);if(be.within($))return be;var bt=be.intersectPercentage($);tr>bt&&(Qe=new D(be),tr=bt),be=new D(Ze)}return Qe||Ze}var z=new D(C),J=C.cue,Z=b(J),W=[];if(J.snapToLines){var Y;switch(J.vertical){case"":W=["+y","-y"],Y="height";break;case"rl":W=["+x","-x"],Y="width";break;case"lr":W=["-x","+x"],Y="width";break}var X=z.lineHeight,ie=X*Math.round(Z),Q=$[Y]+X,he=W[0];Math.abs(ie)>Q&&(ie=ie<0?-1:1,ie*=Math.ceil(Q/X)*X),Z<0&&(ie+=J.vertical===""?$.height:$.width,W=W.reverse()),z.move(he,ie)}else{var ve=z.lineHeight/$.height*100;switch(J.lineAlign){case"center":Z-=ve/2;break;case"end":Z-=ve;break}switch(J.vertical){case"":C.applyStyles({top:C.formatStyle(Z,"%")});break;case"rl":C.applyStyles({left:C.formatStyle(Z,"%")});break;case"lr":C.applyStyles({right:C.formatStyle(Z,"%")});break}W=["+y","-x","+x","-y"],z=new D(C)}var pe=j(z,W);C.move(pe.toCSSCompatValues($))}function P(){}P.StringDecoder=function(){return{decode:function(S){if(!S)return"";if(typeof S!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(S))}}},P.convertCueToDOMTree=function(S,C){return!S||!C?null:f(S,C)};var R=.05,A="sans-serif",I="1.5%";return P.processCues=function(S,C,$){if(!S||!C||!$)return null;for(;$.firstChild;)$.removeChild($.firstChild);var F=S.document.createElement("div");F.style.position="absolute",F.style.left="0",F.style.right="0",F.style.top="0",F.style.bottom="0",F.style.margin=I,$.appendChild(F);function j(X){for(var ie=0;ie<X.length;ie++)if(X[ie].hasBeenReset||!X[ie].displayState)return!0;return!1}if(!j(C)){for(var z=0;z<C.length;z++)F.appendChild(C[z].displayState);return}var J=[],Z=D.getSimpleBoxPosition(F),W=Math.round(Z.height*R*100)/100,Y={font:W+"px "+A};(function(){for(var X,ie,Q=0;Q<C.length;Q++)ie=C[Q],X=new x(S,ie,Y),F.appendChild(X.div),O(S,X,Z,J),ie.displayState=X.div,J.push(D.getSimpleBoxPosition(X))})()},P.Parser=function(S,C,$){$||($=C,C={}),C||(C={}),this.window=S,this.vttjs=C,this.state="INITIAL",this.buffer="",this.decoder=$||new TextDecoder("utf8"),this.regionList=[]},P.Parser.prototype={reportOrThrowError:function(S){if(S instanceof t)this.onparsingerror&&this.onparsingerror(S);else throw S},parse:function(S){var C=this;S&&(C.buffer+=C.decoder.decode(S,{stream:!0}));function $(){for(var X=C.buffer,ie=0;ie<X.length&&X[ie]!=="\r"&&X[ie]!==`
`;)++ie;var Q=X.substr(0,ie);return X[ie]==="\r"&&++ie,X[ie]===`
`&&++ie,C.buffer=X.substr(ie),Q}function F(X){var ie=new n;if(s(X,function(he,ve){switch(he){case"id":ie.set(he,ve);break;case"width":ie.percent(he,ve);break;case"lines":ie.integer(he,ve);break;case"regionanchor":case"viewportanchor":var pe=ve.split(",");if(pe.length!==2)break;var be=new n;if(be.percent("x",pe[0]),be.percent("y",pe[1]),!be.has("x")||!be.has("y"))break;ie.set(he+"X",be.get("x")),ie.set(he+"Y",be.get("y"));break;case"scroll":ie.alt(he,ve,["up"]);break}},/=/,/\s/),ie.has("id")){var Q=new(C.vttjs.VTTRegion||C.window.VTTRegion);Q.width=ie.get("width",100),Q.lines=ie.get("lines",3),Q.regionAnchorX=ie.get("regionanchorX",0),Q.regionAnchorY=ie.get("regionanchorY",100),Q.viewportAnchorX=ie.get("viewportanchorX",0),Q.viewportAnchorY=ie.get("viewportanchorY",100),Q.scroll=ie.get("scroll",""),C.onregion&&C.onregion(Q),C.regionList.push({id:ie.get("id"),region:Q})}}function j(X){var ie=new n;s(X,function(Q,he){switch(Q){case"MPEGT":ie.integer(Q+"S",he);break;case"LOCA":ie.set(Q+"L",i(he));break}},/[^\d]:/,/,/),C.ontimestampmap&&C.ontimestampmap({MPEGTS:ie.get("MPEGTS"),LOCAL:ie.get("LOCAL")})}function z(X){X.match(/X-TIMESTAMP-MAP/)?s(X,function(ie,Q){switch(ie){case"X-TIMESTAMP-MAP":j(Q);break}},/=/):s(X,function(ie,Q){switch(ie){case"Region":F(Q);break}},/:/)}try{var J;if(C.state==="INITIAL"){if(!/\r\n|\n/.test(C.buffer))return this;J=$();var Z=J.match(/^WEBVTT([ \t].*)?$/);if(!Z||!Z[0])throw new t(t.Errors.BadSignature);C.state="HEADER"}for(var W=!1;C.buffer;){if(!/\r\n|\n/.test(C.buffer))return this;switch(W?W=!1:J=$(),C.state){case"HEADER":/:/.test(J)?z(J):J||(C.state="ID");continue;case"NOTE":J||(C.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(J)){C.state="NOTE";break}if(!J)continue;C.cue=new(C.vttjs.VTTCue||C.window.VTTCue)(0,0,"");try{C.cue.align="center"}catch{C.cue.align="middle"}if(C.state="CUE",J.indexOf("-->")===-1){C.cue.id=J;continue}case"CUE":try{a(J,C.cue,C.regionList)}catch(X){C.reportOrThrowError(X),C.cue=null,C.state="BADCUE";continue}C.state="CUETEXT";continue;case"CUETEXT":var Y=J.indexOf("-->")!==-1;if(!J||Y&&(W=!0)){C.oncue&&C.oncue(C.cue),C.cue=null,C.state="ID";continue}C.cue.text&&(C.cue.text+=`
`),C.cue.text+=J.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":J||(C.state="ID");continue}}}catch(X){C.reportOrThrowError(X),C.state==="CUETEXT"&&C.cue&&C.oncue&&C.oncue(C.cue),C.cue=null,C.state=C.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var S=this;try{if(S.buffer+=S.decoder.decode(),(S.cue||S.state==="HEADER")&&(S.buffer+=`

`,S.parse()),S.state==="INITIAL")throw new t(t.Errors.BadSignature)}catch(C){S.reportOrThrowError(C)}return S.onflush&&S.onflush(),this}},up=P,up}var cp,eD;function xz(){if(eD)return cp;eD=1;var r="auto",e={"":1,lr:1,rl:1},t={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(a){if(typeof a!="string")return!1;var o=e[a.toLowerCase()];return o?a.toLowerCase():!1}function n(a){if(typeof a!="string")return!1;var o=t[a.toLowerCase()];return o?a.toLowerCase():!1}function s(a,o,l){this.hasBeenReset=!1;var u="",c=!1,h=a,f=o,p=l,g=null,v="",b=!0,E="auto",x="start",D="auto",O="auto",P=100,R="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return u},set:function(A){u=""+A}},pauseOnExit:{enumerable:!0,get:function(){return c},set:function(A){c=!!A}},startTime:{enumerable:!0,get:function(){return h},set:function(A){if(typeof A!="number")throw new TypeError("Start time must be set to a number.");h=A,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return f},set:function(A){if(typeof A!="number")throw new TypeError("End time must be set to a number.");f=A,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return p},set:function(A){p=""+A,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return g},set:function(A){g=A,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return v},set:function(A){var I=i(A);if(I===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");v=I,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return b},set:function(A){b=!!A,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return E},set:function(A){if(typeof A!="number"&&A!==r)throw new SyntaxError("Line: an invalid number or illegal string was specified.");E=A,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return x},set:function(A){var I=n(A);I?(x=I,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return D},set:function(A){if(A<0||A>100)throw new Error("Position must be between 0 and 100.");D=A,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return O},set:function(A){var I=n(A);I?(O=I,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return P},set:function(A){if(A<0||A>100)throw new Error("Size must be between 0 and 100.");P=A,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return R},set:function(A){var I=n(A);if(!I)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");R=I,this.hasBeenReset=!0}}}),this.displayState=void 0}return s.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},cp=s,cp}var hp,tD;function wz(){if(tD)return hp;tD=1;var r={"":!0,up:!0};function e(n){if(typeof n!="string")return!1;var s=r[n.toLowerCase()];return s?n.toLowerCase():!1}function t(n){return typeof n=="number"&&n>=0&&n<=100}function i(){var n=100,s=3,a=0,o=100,l=0,u=100,c="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(h){if(!t(h))throw new Error("Width must be between 0 and 100.");n=h}},lines:{enumerable:!0,get:function(){return s},set:function(h){if(typeof h!="number")throw new TypeError("Lines must be set to a number.");s=h}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(h){if(!t(h))throw new Error("RegionAnchorX must be between 0 and 100.");o=h}},regionAnchorX:{enumerable:!0,get:function(){return a},set:function(h){if(!t(h))throw new Error("RegionAnchorY must be between 0 and 100.");a=h}},viewportAnchorY:{enumerable:!0,get:function(){return u},set:function(h){if(!t(h))throw new Error("ViewportAnchorY must be between 0 and 100.");u=h}},viewportAnchorX:{enumerable:!0,get:function(){return l},set:function(h){if(!t(h))throw new Error("ViewportAnchorX must be between 0 and 100.");l=h}},scroll:{enumerable:!0,get:function(){return c},set:function(h){var f=e(h);f===!1?console.warn("Scroll: an invalid or illegal string was specified."):c=f}}})}return hp=i,hp}var rD;function Ez(){if(rD)return lp.exports;rD=1;var r=Kc(),e=lp.exports={WebVTT:Sz(),VTTCue:xz(),VTTRegion:wz()};r.vttjs=e,r.WebVTT=e.WebVTT;var t=e.VTTCue,i=e.VTTRegion,n=r.VTTCue,s=r.VTTRegion;return e.shim=function(){r.VTTCue=t,r.VTTRegion=i},e.restore=function(){r.VTTCue=n,r.VTTRegion=s},r.VTTCue||e.shim(),lp.exports}var Cz=Ez();const iD=Nl(Cz);function Ut(){return Ut=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Ut.apply(null,arguments)}var nD="https://example.com",Qc=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=U.location&&U.location.href||"");var i=/^\/\//.test(e),n=!U.location&&!/\/\//i.test(e);e=new U.URL(e,U.location||nD);var s=new URL(t,e);return n?s.href.slice(nD.length):i?s.href.slice(s.protocol.length):s.href},dp=(function(){function r(){this.listeners={}}var e=r.prototype;return e.on=function(i,n){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(n)},e.off=function(i,n){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(n);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},e.trigger=function(i){var n=this.listeners[i];if(n)if(arguments.length===2)for(var s=n.length,a=0;a<s;++a)n[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=n.length,u=0;u<l;++u)n[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(n){i.push(n)})},r})(),Dz=function(e){return U.atob?U.atob(e):Buffer.from(e,"base64").toString("binary")};function sD(r){for(var e=Dz(r),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}class Iz extends dp{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const Az="	",fp=function(r){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(r||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},Oz=function(){const t="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+t+")")},kr=function(r){const e={};if(!r)return e;const t=r.split(Oz());let i=t.length,n;for(;i--;)t[i]!==""&&(n=/([^=]*)=(.*)/.exec(t[i]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),e[n[0]]=n[1]);return e},aD=r=>{const e=r.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};class Pz extends dp{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){i=Ut(fp(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(i={type:"tag",tagType:"map"},t[1]){const a=kr(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=fp(a.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){i={type:"tag",tagType:"stream-inf"},t[1]&&(i.attributes=kr(t[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=aD(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=kr(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=kr(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=kr(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=kr(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(Az)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=kr(t[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=fp(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=kr(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=kr(t[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=kr(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=kr(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=kr(t[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),u=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):u?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t){i={type:"tag",tagType:"content-steering"},i.attributes=kr(t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),t){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=kr(t[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=aD(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(s),t){i={type:"tag",tagType:"define"},i.attributes=kr(t[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:n}){typeof i!="function"&&(i=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:i(s),customType:t,segment:n}),!0})}addTagMapper({expression:e,map:t}){const i=n=>e.test(n)?t(n):n;this.tagMappers.push(i)}}const Rz=r=>r.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),ms=function(r){const e={};return Object.keys(r).forEach(function(t){e[Rz(t)]=r[t]}),e},pp=function(r){const{serverControl:e,targetDuration:t,partTargetDuration:i}=r;if(!e)return;const n="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=t&&t*3,l=i&&i*2;t&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${n} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${n} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:`${n} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),i&&e[a]<l&&(this.trigger("warn",{message:`${n} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class kz extends dp{constructor(e={}){super(),this.lineStream=new Iz,this.parseStream=new Pz,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,i=[];let n={},s,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let h=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,p=0;const g={};this.on("end",()=>{n.uri||!n.parts&&!n.preloadHints||(!n.map&&s&&(n.map=s),!n.key&&a&&(n.key=a),!n.timeline&&typeof h=="number"&&(n.timeline=h),this.manifest.preloadSegment=n)}),this.parseStream.on("data",function(v){let b,E;if(t.manifest.definitions){for(const x in t.manifest.definitions)if(v.uri&&(v.uri=v.uri.replace(`{$${x}}`,t.manifest.definitions[x])),v.attributes)for(const D in v.attributes)typeof v.attributes[D]=="string"&&(v.attributes[D]=v.attributes[D].replace(`{$${x}}`,t.manifest.definitions[x]))}({tag(){({version(){v.version&&(this.manifest.version=v.version)},"allow-cache"(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const x={};"length"in v&&(n.byterange=x,x.length=v.length,"offset"in v||(v.offset=f)),"offset"in v&&(n.byterange=x,x.offset=v.offset),f=x.offset+x.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),v.title&&(n.title=v.title),v.duration>0&&(n.duration=v.duration),v.duration===0&&(n.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!v.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(v.attributes.METHOD==="NONE"){a=null;return}if(!v.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(v.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:v.attributes};return}if(v.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:v.attributes.URI};return}if(v.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(v.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(v.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),v.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(v.attributes.KEYID&&v.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:sD(v.attributes.URI.split(",")[1])};return}v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},typeof v.attributes.IV<"u"&&(a.iv=v.attributes.IV)},"media-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number});return}this.manifest.mediaSequence=v.number},"discontinuity-sequence"(){if(!isFinite(v.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number});return}this.manifest.discontinuitySequence=v.number,h=v.number},"playlist-type"(){if(!/VOD|EVENT/.test(v.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist});return}this.manifest.playlistType=v.playlistType},map(){s={},v.uri&&(s.uri=v.uri),v.byterange&&(s.byterange=v.byterange),a&&(s.key=a)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!v.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}n.attributes||(n.attributes={}),Ut(n.attributes,v.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const x=this.manifest.mediaGroups[v.attributes.TYPE];x[v.attributes["GROUP-ID"]]=x[v.attributes["GROUP-ID"]]||{},b=x[v.attributes["GROUP-ID"]],E={default:/yes/i.test(v.attributes.DEFAULT)},E.default?E.autoselect=!0:E.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(E.language=v.attributes.LANGUAGE),v.attributes.URI&&(E.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(E.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(E.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(E.forced=/yes/i.test(v.attributes.FORCED)),b[v.attributes.NAME]=E},discontinuity(){h+=1,n.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),n.dateTimeString=v.dateTimeString,n.dateTimeObject=v.dateTimeObject;const{lastProgramDateTime:x}=this;this.lastProgramDateTime=new Date(v.dateTimeString).getTime(),x===null&&this.manifest.segments.reduceRight((D,O)=>(O.programDateTime=D-O.duration*1e3,O.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(v.duration)||v.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration});return}this.manifest.targetDuration=v.duration,pp.call(this,this.manifest)},start(){if(!v.attributes||isNaN(v.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}},"cue-out"(){n.cueOut=v.data},"cue-out-cont"(){n.cueOutCont=v.data},"cue-in"(){n.cueIn=v.data},skip(){this.manifest.skip=ms(v.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",v.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const x=this.manifest.segments.length,D=ms(v.attributes);n.parts=n.parts||[],n.parts.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=p),p=D.byterange.offset+D.byterange.length);const O=n.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${O} for segment #${x}`,v.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((P,R)=>{P.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${R} lacks required attribute(s): LAST-PART`})})},"server-control"(){const x=this.manifest.serverControl=ms(v.attributes);x.hasOwnProperty("canBlockReload")||(x.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),pp.call(this,this.manifest),x.canSkipDateranges&&!x.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const x=this.manifest.segments.length,D=ms(v.attributes),O=D.type&&D.type==="PART";n.preloadHints=n.preloadHints||[],n.preloadHints.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=O?p:0,O&&(p=D.byterange.offset+D.byterange.length)));const P=n.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${P} for segment #${x}`,v.attributes,["TYPE","URI"]),!!D.type)for(let R=0;R<n.preloadHints.length-1;R++){const A=n.preloadHints[R];A.type&&A.type===D.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${P} for segment #${x} has the same TYPE ${D.type} as preload hint #${R}`})}},"rendition-report"(){const x=ms(v.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(x);const D=this.manifest.renditionReports.length-1,O=["LAST-MSN","URI"];o&&O.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${D}`,v.attributes,O)},"part-inf"(){this.manifest.partInf=ms(v.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",v.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),pp.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(ms(v.attributes));const x=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${x}`,v.attributes,["ID","START-DATE"]);const D=this.manifest.dateRanges[x];D.endDate&&D.startDate&&new Date(D.endDate)<new Date(D.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),D.duration&&D.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),D.plannedDuration&&D.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const O=!!D.endOnNext;if(O&&!D.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),O&&(D.duration||D.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),D.duration&&D.endDate){const R=D.startDate.getTime()+D.duration*1e3;this.manifest.dateRanges[x].endDate=new Date(R)}if(!g[D.id])g[D.id]=D;else{for(const R in g[D.id])if(D[R]&&JSON.stringify(g[D.id][R])!==JSON.stringify(D[R])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const P=this.manifest.dateRanges.findIndex(R=>R.id===D.id);this.manifest.dateRanges[P]=Ut(this.manifest.dateRanges[P],D),g[D.id]=Ut(g[D.id],D),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=ms(v.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",v.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const x=(D,O)=>{if(D in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${D}`});return}this.manifest.definitions[D]=O};if("QUERYPARAM"in v.attributes){if("NAME"in v.attributes||"IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const D=this.params.get(v.attributes.QUERYPARAM);if(!D){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${v.attributes.QUERYPARAM}`});return}x(v.attributes.QUERYPARAM,decodeURIComponent(D));return}if("NAME"in v.attributes){if("IMPORT"in v.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in v.attributes)||typeof v.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${v.attributes.NAME}`});return}x(v.attributes.NAME,v.attributes.VALUE);return}if("IMPORT"in v.attributes){if(!this.mainDefinitions[v.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${v.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}x(v.attributes.IMPORT,this.mainDefinitions[v.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:v.attributes,uri:v.uri,timeline:h}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",v.attributes,["BANDWIDTH","URI"])}}[v.tagType]||l).call(t)},uri(){n.uri=v.uri,i.push(n),this.manifest.targetDuration&&!("duration"in n)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),n.duration=this.manifest.targetDuration),a&&(n.key=a),n.timeline=h,s&&(n.map=s),p=0,this.lastProgramDateTime!==null&&(n.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=n.duration*1e3),n={}},comment(){},custom(){v.segment?(n.custom=n.custom||{},n.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,i){const n=[];i.forEach(function(s){t.hasOwnProperty(s)||n.push(s)}),n.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${n.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var Ws={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Mz=["video","audio","text"],oD=["Video","Audio","Text"],lD=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,n){var s=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(n).toString(16)).slice(-2);return"avc1."+s+"00"+a})},fn=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(n){n=n.trim();var s;Mz.forEach(function(a){var o=Ws[a].exec(n.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=n.substring(0,o[1].length),u=n.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),s||i.push({type:n,details:"",mediaType:"unknown"})}),i},$z=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var s=i[n];if(s.default&&s.playlists)return fn(s.playlists[0].attributes.CODECS)}return null},uD=function(e){return e===void 0&&(e=""),Ws.audio.test(e.trim().toLowerCase())},Nz=function(e){return e===void 0&&(e=""),Ws.text.test(e.trim().toLowerCase())},eo=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return lD(s.trim())}),i="video";t.length===1&&uD(t[0])?i="audio":t.length===1&&Nz(t[0])&&(i="application");var n="mp4";return t.every(function(s){return Ws.mp4.test(s)})?n="mp4":t.every(function(s){return Ws.webm.test(s)})?n="webm":t.every(function(s){return Ws.ogg.test(s)})&&(n="ogg"),i+"/"+n+';codecs="'+e+'"'}},Ll=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),U.MediaSource&&U.MediaSource.isTypeSupported&&U.MediaSource.isTypeSupported(eo(e))||t&&U.ManagedMediaSource&&U.ManagedMediaSource.isTypeSupported&&U.ManagedMediaSource.isTypeSupported(eo(e))||!1},mp=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<oD.length;i++){var n=oD[i];if(Ws["muxer"+n].test(t))return!0}return!1})},cD="mp4a.40.2",Lz="avc1.4d400d",Fz=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,qz=/^application\/dash\+xml/i,hD=function(e){return Fz.test(e)?"hls":qz.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},Bz=function(e){return e.toString(2).length},Uz=function(e){return Math.ceil(Bz(e)/8)},dD=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},jz=function(e){return dD(e)},Ce=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!jz(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},yr=U.BigInt||Number,gp=[yr("0x1"),yr("0x100"),yr("0x10000"),yr("0x1000000"),yr("0x100000000"),yr("0x10000000000"),yr("0x1000000000000"),yr("0x100000000000000"),yr("0x10000000000000000")];(function(){var r=new Uint16Array([65484]),e=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var Hz=function(e,t){var i=t===void 0?{}:t,n=i.signed,s=n===void 0?!1:n,a=i.le,o=a===void 0?!1:a;e=Ce(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,p,g){var v=o?g:Math.abs(g+1-e.length);return f+yr(p)*gp[v]},yr(0));if(s){var h=gp[e.length]/yr(2)-yr(1);c=yr(c),c>h&&(c-=h,c-=h,c-=yr(2))}return Number(c)},Vz=function(e,t){var i={},n=i.le,s=n===void 0?!1:n;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=yr(e);for(var a=Uz(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/gp[l]&yr(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},fD=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i},Gz=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Ce(t[0]);var n=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(n),a=0;return t.forEach(function(o){o=Ce(o),s.set(o,a),a+=o.byteLength}),s},wt=function(e,t,i){var n=i===void 0?{}:i,s=n.offset,a=s===void 0?0:s,o=n.mask,l=o===void 0?[]:o;e=Ce(e),t=Ce(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var f=l[h]?l[h]&e[a+h]:e[a+h];return c===f})},Wz=function(e,t,i){t.forEach(function(n){for(var s in e.mediaGroups[n])for(var a in e.mediaGroups[n][s]){var o=e.mediaGroups[n][s][a];i(o,n,s,a)}})},Fl={},qn={},zs={},pD;function Zc(){if(pD)return zs;pD=1;function r(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var l=0;l<s.length;l++)if(Object.prototype.hasOwnProperty.call(s,l)){var u=s[l];if(a.call(void 0,u,l,s))return u}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function t(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var i=e({HTML:"text/html",isHTML:function(s){return s===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),n=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===n.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return zs.assign=t,zs.find=r,zs.freeze=e,zs.MIME_TYPE=i,zs.NAMESPACE=n,zs}var mD;function gD(){if(mD)return qn;mD=1;var r=Zc(),e=r.find,t=r.NAMESPACE;function i(k){return k!==""}function n(k){return k?k.split(/[\t\n\f\r ]+/).filter(i):[]}function s(k,M){return k.hasOwnProperty(M)||(k[M]=!0),k}function a(k){if(!k)return[];var M=n(k);return Object.keys(M.reduce(s,{}))}function o(k){return function(M){return k&&k.indexOf(M)!==-1}}function l(k,M){for(var V in k)Object.prototype.hasOwnProperty.call(k,V)&&(M[V]=k[V])}function u(k,M){var V=k.prototype;if(!(V instanceof M)){let ee=function(){};ee.prototype=M.prototype,ee=new ee,l(V,ee),k.prototype=V=ee}V.constructor!=k&&(typeof k!="function"&&console.error("unknown Class:"+k),V.constructor=k)}var c={},h=c.ELEMENT_NODE=1,f=c.ATTRIBUTE_NODE=2,p=c.TEXT_NODE=3,g=c.CDATA_SECTION_NODE=4,v=c.ENTITY_REFERENCE_NODE=5,b=c.ENTITY_NODE=6,E=c.PROCESSING_INSTRUCTION_NODE=7,x=c.COMMENT_NODE=8,D=c.DOCUMENT_NODE=9,O=c.DOCUMENT_TYPE_NODE=10,P=c.DOCUMENT_FRAGMENT_NODE=11,R=c.NOTATION_NODE=12,A={},I={};A.INDEX_SIZE_ERR=(I[1]="Index size error",1),A.DOMSTRING_SIZE_ERR=(I[2]="DOMString size error",2);var S=A.HIERARCHY_REQUEST_ERR=(I[3]="Hierarchy request error",3);A.WRONG_DOCUMENT_ERR=(I[4]="Wrong document",4),A.INVALID_CHARACTER_ERR=(I[5]="Invalid character",5),A.NO_DATA_ALLOWED_ERR=(I[6]="No data allowed",6),A.NO_MODIFICATION_ALLOWED_ERR=(I[7]="No modification allowed",7);var C=A.NOT_FOUND_ERR=(I[8]="Not found",8);A.NOT_SUPPORTED_ERR=(I[9]="Not supported",9);var $=A.INUSE_ATTRIBUTE_ERR=(I[10]="Attribute in use",10);A.INVALID_STATE_ERR=(I[11]="Invalid state",11),A.SYNTAX_ERR=(I[12]="Syntax error",12),A.INVALID_MODIFICATION_ERR=(I[13]="Invalid modification",13),A.NAMESPACE_ERR=(I[14]="Invalid namespace",14),A.INVALID_ACCESS_ERR=(I[15]="Invalid access",15);function F(k,M){if(M instanceof Error)var V=M;else V=this,Error.call(this,I[k]),this.message=I[k],Error.captureStackTrace&&Error.captureStackTrace(this,F);return V.code=k,M&&(this.message=this.message+": "+M),V}F.prototype=Error.prototype,l(A,F);function j(){}j.prototype={length:0,item:function(k){return k>=0&&k<this.length?this[k]:null},toString:function(k,M){for(var V=[],ee=0;ee<this.length;ee++)si(this[ee],V,k,M);return V.join("")},filter:function(k){return Array.prototype.filter.call(this,k)},indexOf:function(k){return Array.prototype.indexOf.call(this,k)}};function z(k,M){this._node=k,this._refresh=M,J(this)}function J(k){var M=k._node._inc||k._node.ownerDocument._inc;if(k._inc!==M){var V=k._refresh(k._node);if(Of(k,"length",V.length),!k.$$length||V.length<k.$$length)for(var ee=V.length;ee in k;ee++)Object.prototype.hasOwnProperty.call(k,ee)&&delete k[ee];l(V,k),k._inc=M}}z.prototype.item=function(k){return J(this),this[k]||null},u(z,j);function Z(){}function W(k,M){for(var V=k.length;V--;)if(k[V]===M)return V}function Y(k,M,V,ee){if(ee?M[W(M,ee)]=V:M[M.length++]=V,k){V.ownerElement=k;var ue=k.ownerDocument;ue&&(ee&&Oe(ue,k,ee),be(ue,k,V))}}function X(k,M,V){var ee=W(M,V);if(ee>=0){for(var ue=M.length-1;ee<ue;)M[ee]=M[++ee];if(M.length=ue,k){var Ie=k.ownerDocument;Ie&&(Oe(Ie,k,V),V.ownerElement=null)}}else throw new F(C,new Error(k.tagName+"@"+V))}Z.prototype={length:0,item:j.prototype.item,getNamedItem:function(k){for(var M=this.length;M--;){var V=this[M];if(V.nodeName==k)return V}},setNamedItem:function(k){var M=k.ownerElement;if(M&&M!=this._ownerElement)throw new F($);var V=this.getNamedItem(k.nodeName);return Y(this._ownerElement,this,k,V),V},setNamedItemNS:function(k){var M=k.ownerElement,V;if(M&&M!=this._ownerElement)throw new F($);return V=this.getNamedItemNS(k.namespaceURI,k.localName),Y(this._ownerElement,this,k,V),V},removeNamedItem:function(k){var M=this.getNamedItem(k);return X(this._ownerElement,this,M),M},removeNamedItemNS:function(k,M){var V=this.getNamedItemNS(k,M);return X(this._ownerElement,this,V),V},getNamedItemNS:function(k,M){for(var V=this.length;V--;){var ee=this[V];if(ee.localName==M&&ee.namespaceURI==k)return ee}return null}};function ie(){}ie.prototype={hasFeature:function(k,M){return!0},createDocument:function(k,M,V){var ee=new pe;if(ee.implementation=this,ee.childNodes=new j,ee.doctype=V||null,V&&ee.appendChild(V),M){var ue=ee.createElementNS(k,M);ee.appendChild(ue)}return ee},createDocumentType:function(k,M,V){var ee=new ni;return ee.name=k,ee.nodeName=k,ee.publicId=M||"",ee.systemId=V||"",ee}};function Q(){}Q.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(k,M){return Ar(this,k,M)},replaceChild:function(k,M){Ar(this,k,M,St),M&&this.removeChild(M)},removeChild:function(k){return Ze(this,k)},appendChild:function(k){return this.insertBefore(k,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(k){return Rc(this.ownerDocument||this,this,k)},normalize:function(){for(var k=this.firstChild;k;){var M=k.nextSibling;M&&M.nodeType==p&&k.nodeType==p?(this.removeChild(M),k.appendData(M.data)):(k.normalize(),k=M)}},isSupported:function(k,M){return this.ownerDocument.implementation.hasFeature(k,M)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(k){for(var M=this;M;){var V=M._nsMap;if(V){for(var ee in V)if(Object.prototype.hasOwnProperty.call(V,ee)&&V[ee]===k)return ee}M=M.nodeType==f?M.ownerDocument:M.parentNode}return null},lookupNamespaceURI:function(k){for(var M=this;M;){var V=M._nsMap;if(V&&Object.prototype.hasOwnProperty.call(V,k))return V[k];M=M.nodeType==f?M.ownerDocument:M.parentNode}return null},isDefaultNamespace:function(k){var M=this.lookupPrefix(k);return M==null}};function he(k){return k=="<"&&"&lt;"||k==">"&&"&gt;"||k=="&"&&"&amp;"||k=='"'&&"&quot;"||"&#"+k.charCodeAt()+";"}l(c,Q),l(c,Q.prototype);function ve(k,M){if(M(k))return!0;if(k=k.firstChild)do if(ve(k,M))return!0;while(k=k.nextSibling)}function pe(){this.ownerDocument=this}function be(k,M,V){k&&k._inc++;var ee=V.namespaceURI;ee===t.XMLNS&&(M._nsMap[V.prefix?V.localName:""]=V.value)}function Oe(k,M,V,ee){k&&k._inc++;var ue=V.namespaceURI;ue===t.XMLNS&&delete M._nsMap[V.prefix?V.localName:""]}function Qe(k,M,V){if(k&&k._inc){k._inc++;var ee=M.childNodes;if(V)ee[ee.length++]=V;else{for(var ue=M.firstChild,Ie=0;ue;)ee[Ie++]=ue,ue=ue.nextSibling;ee.length=Ie,delete ee[ee.length]}}}function Ze(k,M){var V=M.previousSibling,ee=M.nextSibling;return V?V.nextSibling=ee:k.firstChild=ee,ee?ee.previousSibling=V:k.lastChild=V,M.parentNode=null,M.previousSibling=null,M.nextSibling=null,Qe(k.ownerDocument,k),M}function tr(k){return k&&(k.nodeType===Q.DOCUMENT_NODE||k.nodeType===Q.DOCUMENT_FRAGMENT_NODE||k.nodeType===Q.ELEMENT_NODE)}function Ir(k){return k&&(Wt(k)||Ot(k)||bt(k)||k.nodeType===Q.DOCUMENT_FRAGMENT_NODE||k.nodeType===Q.COMMENT_NODE||k.nodeType===Q.PROCESSING_INSTRUCTION_NODE)}function bt(k){return k&&k.nodeType===Q.DOCUMENT_TYPE_NODE}function Wt(k){return k&&k.nodeType===Q.ELEMENT_NODE}function Ot(k){return k&&k.nodeType===Q.TEXT_NODE}function Pt(k,M){var V=k.childNodes||[];if(e(V,Wt)||bt(M))return!1;var ee=e(V,bt);return!(M&&ee&&V.indexOf(ee)>V.indexOf(M))}function ji(k,M){var V=k.childNodes||[];function ee(Ie){return Wt(Ie)&&Ie!==M}if(e(V,ee))return!1;var ue=e(V,bt);return!(M&&ue&&V.indexOf(ue)>V.indexOf(M))}function Tt(k,M,V){if(!tr(k))throw new F(S,"Unexpected parent node type "+k.nodeType);if(V&&V.parentNode!==k)throw new F(C,"child not in parent");if(!Ir(M)||bt(M)&&k.nodeType!==Q.DOCUMENT_NODE)throw new F(S,"Unexpected node type "+M.nodeType+" for parent node type "+k.nodeType)}function mt(k,M,V){var ee=k.childNodes||[],ue=M.childNodes||[];if(M.nodeType===Q.DOCUMENT_FRAGMENT_NODE){var Ie=ue.filter(Wt);if(Ie.length>1||e(ue,Ot))throw new F(S,"More than one element or text in fragment");if(Ie.length===1&&!Pt(k,V))throw new F(S,"Element in fragment can not be inserted before doctype")}if(Wt(M)&&!Pt(k,V))throw new F(S,"Only one element can be added and only after doctype");if(bt(M)){if(e(ee,bt))throw new F(S,"Only one doctype is allowed");var dt=e(ee,Wt);if(V&&ee.indexOf(dt)<ee.indexOf(V))throw new F(S,"Doctype can only be inserted before an element");if(!V&&dt)throw new F(S,"Doctype can not be appended since element is present")}}function St(k,M,V){var ee=k.childNodes||[],ue=M.childNodes||[];if(M.nodeType===Q.DOCUMENT_FRAGMENT_NODE){var Ie=ue.filter(Wt);if(Ie.length>1||e(ue,Ot))throw new F(S,"More than one element or text in fragment");if(Ie.length===1&&!ji(k,V))throw new F(S,"Element in fragment can not be inserted before doctype")}if(Wt(M)&&!ji(k,V))throw new F(S,"Only one element can be added and only after doctype");if(bt(M)){if(e(ee,function(bi){return bt(bi)&&bi!==V}))throw new F(S,"Only one doctype is allowed");var dt=e(ee,Wt);if(V&&ee.indexOf(dt)<ee.indexOf(V))throw new F(S,"Doctype can only be inserted before an element")}}function Ar(k,M,V,ee){Tt(k,M,V),k.nodeType===Q.DOCUMENT_NODE&&(ee||mt)(k,M,V);var ue=M.parentNode;if(ue&&ue.removeChild(M),M.nodeType===P){var Ie=M.firstChild;if(Ie==null)return M;var dt=M.lastChild}else Ie=dt=M;var Rr=V?V.previousSibling:k.lastChild;Ie.previousSibling=Rr,dt.nextSibling=V,Rr?Rr.nextSibling=Ie:k.firstChild=Ie,V==null?k.lastChild=dt:V.previousSibling=dt;do{Ie.parentNode=k;var bi=k.ownerDocument||k;Ae(Ie,bi)}while(Ie!==dt&&(Ie=Ie.nextSibling));return Qe(k.ownerDocument||k,k),M.nodeType==P&&(M.firstChild=M.lastChild=null),M}function Ae(k,M){if(k.ownerDocument!==M){if(k.ownerDocument=M,k.nodeType===h&&k.attributes)for(var V=0;V<k.attributes.length;V++){var ee=k.attributes.item(V);ee&&(ee.ownerDocument=M)}for(var ue=k.firstChild;ue;)Ae(ue,M),ue=ue.nextSibling}}function et(k,M){M.parentNode&&M.parentNode.removeChild(M),M.parentNode=k,M.previousSibling=k.lastChild,M.nextSibling=null,M.previousSibling?M.previousSibling.nextSibling=M:k.firstChild=M,k.lastChild=M,Qe(k.ownerDocument,k,M);var V=k.ownerDocument||k;return Ae(M,V),M}pe.prototype={nodeName:"#document",nodeType:D,doctype:null,documentElement:null,_inc:1,insertBefore:function(k,M){if(k.nodeType==P){for(var V=k.firstChild;V;){var ee=V.nextSibling;this.insertBefore(V,M),V=ee}return k}return Ar(this,k,M),Ae(k,this),this.documentElement===null&&k.nodeType===h&&(this.documentElement=k),k},removeChild:function(k){return this.documentElement==k&&(this.documentElement=null),Ze(this,k)},replaceChild:function(k,M){Ar(this,k,M,St),Ae(k,this),M&&this.removeChild(M),Wt(k)&&(this.documentElement=k)},importNode:function(k,M){return Af(this,k,M)},getElementById:function(k){var M=null;return ve(this.documentElement,function(V){if(V.nodeType==h&&V.getAttribute("id")==k)return M=V,!0}),M},getElementsByClassName:function(k){var M=a(k);return new z(this,function(V){var ee=[];return M.length>0&&ve(V.documentElement,function(ue){if(ue!==V&&ue.nodeType===h){var Ie=ue.getAttribute("class");if(Ie){var dt=k===Ie;if(!dt){var Rr=a(Ie);dt=M.every(o(Rr))}dt&&ee.push(ue)}}}),ee})},createElement:function(k){var M=new Je;M.ownerDocument=this,M.nodeName=k,M.tagName=k,M.localName=k,M.childNodes=new j;var V=M.attributes=new Z;return V._ownerElement=M,M},createDocumentFragment:function(){var k=new ae;return k.ownerDocument=this,k.childNodes=new j,k},createTextNode:function(k){var M=new Gr;return M.ownerDocument=this,M.appendData(k),M},createComment:function(k){var M=new sn;return M.ownerDocument=this,M.appendData(k),M},createCDATASection:function(k){var M=new Pr;return M.ownerDocument=this,M.appendData(k),M},createProcessingInstruction:function(k,M){var V=new me;return V.ownerDocument=this,V.tagName=V.nodeName=V.target=k,V.nodeValue=V.data=M,V},createAttribute:function(k){var M=new Or;return M.ownerDocument=this,M.name=k,M.nodeName=k,M.localName=k,M.specified=!0,M},createEntityReference:function(k){var M=new Te;return M.ownerDocument=this,M.nodeName=k,M},createElementNS:function(k,M){var V=new Je,ee=M.split(":"),ue=V.attributes=new Z;return V.childNodes=new j,V.ownerDocument=this,V.nodeName=M,V.tagName=M,V.namespaceURI=k,ee.length==2?(V.prefix=ee[0],V.localName=ee[1]):V.localName=M,ue._ownerElement=V,V},createAttributeNS:function(k,M){var V=new Or,ee=M.split(":");return V.ownerDocument=this,V.nodeName=M,V.name=M,V.namespaceURI=k,V.specified=!0,ee.length==2?(V.prefix=ee[0],V.localName=ee[1]):V.localName=M,V}},u(pe,Q);function Je(){this._nsMap={}}Je.prototype={nodeType:h,hasAttribute:function(k){return this.getAttributeNode(k)!=null},getAttribute:function(k){var M=this.getAttributeNode(k);return M&&M.value||""},getAttributeNode:function(k){return this.attributes.getNamedItem(k)},setAttribute:function(k,M){var V=this.ownerDocument.createAttribute(k);V.value=V.nodeValue=""+M,this.setAttributeNode(V)},removeAttribute:function(k){var M=this.getAttributeNode(k);M&&this.removeAttributeNode(M)},appendChild:function(k){return k.nodeType===P?this.insertBefore(k,null):et(this,k)},setAttributeNode:function(k){return this.attributes.setNamedItem(k)},setAttributeNodeNS:function(k){return this.attributes.setNamedItemNS(k)},removeAttributeNode:function(k){return this.attributes.removeNamedItem(k.nodeName)},removeAttributeNS:function(k,M){var V=this.getAttributeNodeNS(k,M);V&&this.removeAttributeNode(V)},hasAttributeNS:function(k,M){return this.getAttributeNodeNS(k,M)!=null},getAttributeNS:function(k,M){var V=this.getAttributeNodeNS(k,M);return V&&V.value||""},setAttributeNS:function(k,M,V){var ee=this.ownerDocument.createAttributeNS(k,M);ee.value=ee.nodeValue=""+V,this.setAttributeNode(ee)},getAttributeNodeNS:function(k,M){return this.attributes.getNamedItemNS(k,M)},getElementsByTagName:function(k){return new z(this,function(M){var V=[];return ve(M,function(ee){ee!==M&&ee.nodeType==h&&(k==="*"||ee.tagName==k)&&V.push(ee)}),V})},getElementsByTagNameNS:function(k,M){return new z(this,function(V){var ee=[];return ve(V,function(ue){ue!==V&&ue.nodeType===h&&(k==="*"||ue.namespaceURI===k)&&(M==="*"||ue.localName==M)&&ee.push(ue)}),ee})}},pe.prototype.getElementsByTagName=Je.prototype.getElementsByTagName,pe.prototype.getElementsByTagNameNS=Je.prototype.getElementsByTagNameNS,u(Je,Q);function Or(){}Or.prototype.nodeType=f,u(Or,Q);function sr(){}sr.prototype={data:"",substringData:function(k,M){return this.data.substring(k,k+M)},appendData:function(k){k=this.data+k,this.nodeValue=this.data=k,this.length=k.length},insertData:function(k,M){this.replaceData(k,0,M)},appendChild:function(k){throw new Error(I[S])},deleteData:function(k,M){this.replaceData(k,M,"")},replaceData:function(k,M,V){var ee=this.data.substring(0,k),ue=this.data.substring(k+M);V=ee+V+ue,this.nodeValue=this.data=V,this.length=V.length}},u(sr,Q);function Gr(){}Gr.prototype={nodeName:"#text",nodeType:p,splitText:function(k){var M=this.data,V=M.substring(k);M=M.substring(0,k),this.data=this.nodeValue=M,this.length=M.length;var ee=this.ownerDocument.createTextNode(V);return this.parentNode&&this.parentNode.insertBefore(ee,this.nextSibling),ee}},u(Gr,sr);function sn(){}sn.prototype={nodeName:"#comment",nodeType:x},u(sn,sr);function Pr(){}Pr.prototype={nodeName:"#cdata-section",nodeType:g},u(Pr,sr);function ni(){}ni.prototype.nodeType=O,u(ni,Q);function an(){}an.prototype.nodeType=R,u(an,Q);function on(){}on.prototype.nodeType=b,u(on,Q);function Te(){}Te.prototype.nodeType=v,u(Te,Q);function ae(){}ae.prototype.nodeName="#document-fragment",ae.prototype.nodeType=P,u(ae,Q);function me(){}me.prototype.nodeType=E,u(me,Q);function fe(){}fe.prototype.serializeToString=function(k,M,V){return Se.call(k,M,V)},Q.prototype.toString=Se;function Se(k,M){var V=[],ee=this.nodeType==9&&this.documentElement||this,ue=ee.prefix,Ie=ee.namespaceURI;if(Ie&&ue==null){var ue=ee.lookupPrefix(Ie);if(ue==null)var dt=[{namespace:Ie,prefix:null}]}return si(this,V,k,M,dt),V.join("")}function He(k,M,V){var ee=k.prefix||"",ue=k.namespaceURI;if(!ue||ee==="xml"&&ue===t.XML||ue===t.XMLNS)return!1;for(var Ie=V.length;Ie--;){var dt=V[Ie];if(dt.prefix===ee)return dt.namespace!==ue}return!0}function ln(k,M,V){k.push(" ",M,'="',V.replace(/[<>&"\t\n\r]/g,he),'"')}function si(k,M,V,ee,ue){if(ue||(ue=[]),ee)if(k=ee(k),k){if(typeof k=="string"){M.push(k);return}}else return;switch(k.nodeType){case h:var Ie=k.attributes,dt=Ie.length,gt=k.firstChild,Rr=k.tagName;V=t.isHTML(k.namespaceURI)||V;var bi=Rr;if(!V&&!k.prefix&&k.namespaceURI){for(var Nn,Hi=0;Hi<Ie.length;Hi++)if(Ie.item(Hi).name==="xmlns"){Nn=Ie.item(Hi).value;break}if(!Nn)for(var un=ue.length-1;un>=0;un--){var Vi=ue[un];if(Vi.prefix===""&&Vi.namespace===k.namespaceURI){Nn=Vi.namespace;break}}if(Nn!==k.namespaceURI)for(var un=ue.length-1;un>=0;un--){var Vi=ue[un];if(Vi.namespace===k.namespaceURI){Vi.prefix&&(bi=Vi.prefix+":"+Rr);break}}}M.push("<",bi);for(var qt=0;qt<dt;qt++){var Gi=Ie.item(qt);Gi.prefix=="xmlns"?ue.push({prefix:Gi.localName,namespace:Gi.value}):Gi.nodeName=="xmlns"&&ue.push({prefix:"",namespace:Gi.value})}for(var qt=0;qt<dt;qt++){var Gi=Ie.item(qt);if(He(Gi,V,ue)){var ds=Gi.prefix||"",Ln=Gi.namespaceURI;ln(M,ds?"xmlns:"+ds:"xmlns",Ln),ue.push({prefix:ds,namespace:Ln})}si(Gi,M,V,ee,ue)}if(Rr===bi&&He(k,V,ue)){var ds=k.prefix||"",Ln=k.namespaceURI;ln(M,ds?"xmlns:"+ds:"xmlns",Ln),ue.push({prefix:ds,namespace:Ln})}if(gt||V&&!/^(?:meta|link|img|br|hr|input)$/i.test(Rr)){if(M.push(">"),V&&/^script$/i.test(Rr))for(;gt;)gt.data?M.push(gt.data):si(gt,M,V,ee,ue.slice()),gt=gt.nextSibling;else for(;gt;)si(gt,M,V,ee,ue.slice()),gt=gt.nextSibling;M.push("</",bi,">")}else M.push("/>");return;case D:case P:for(var gt=k.firstChild;gt;)si(gt,M,V,ee,ue.slice()),gt=gt.nextSibling;return;case f:return ln(M,k.name,k.value);case p:return M.push(k.data.replace(/[<&>]/g,he));case g:return M.push("<![CDATA[",k.data,"]]>");case x:return M.push("<!--",k.data,"-->");case O:var Ka=k.publicId,Ve=k.systemId;if(M.push("<!DOCTYPE ",k.name),Ka)M.push(" PUBLIC ",Ka),Ve&&Ve!="."&&M.push(" ",Ve),M.push(">");else if(Ve&&Ve!=".")M.push(" SYSTEM ",Ve,">");else{var Pf=k.internalSubset;Pf&&M.push(" [",Pf,"]"),M.push(">")}return;case E:return M.push("<?",k.target," ",k.data,"?>");case v:return M.push("&",k.nodeName,";");default:M.push("??",k.nodeName)}}function Af(k,M,V){var ee;switch(M.nodeType){case h:ee=M.cloneNode(!1),ee.ownerDocument=k;case P:break;case f:V=!0;break}if(ee||(ee=M.cloneNode(!1)),ee.ownerDocument=k,ee.parentNode=null,V)for(var ue=M.firstChild;ue;)ee.appendChild(Af(k,ue,V)),ue=ue.nextSibling;return ee}function Rc(k,M,V){var ee=new M.constructor;for(var ue in M)if(Object.prototype.hasOwnProperty.call(M,ue)){var Ie=M[ue];typeof Ie!="object"&&Ie!=ee[ue]&&(ee[ue]=Ie)}switch(M.childNodes&&(ee.childNodes=new j),ee.ownerDocument=k,ee.nodeType){case h:var dt=M.attributes,Rr=ee.attributes=new Z,bi=dt.length;Rr._ownerElement=ee;for(var Nn=0;Nn<bi;Nn++)ee.setAttributeNode(Rc(k,dt.item(Nn),!0));break;case f:V=!0}if(V)for(var Hi=M.firstChild;Hi;)ee.appendChild(Rc(k,Hi,V)),Hi=Hi.nextSibling;return ee}function Of(k,M,V){k[M]=V}try{if(Object.defineProperty){let k=function(M){switch(M.nodeType){case h:case P:var V=[];for(M=M.firstChild;M;)M.nodeType!==7&&M.nodeType!==8&&V.push(k(M)),M=M.nextSibling;return V.join("");default:return M.nodeValue}};Object.defineProperty(z.prototype,"length",{get:function(){return J(this),this.$$length}}),Object.defineProperty(Q.prototype,"textContent",{get:function(){return k(this)},set:function(M){switch(this.nodeType){case h:case P:for(;this.firstChild;)this.removeChild(this.firstChild);(M||String(M))&&this.appendChild(this.ownerDocument.createTextNode(M));break;default:this.data=M,this.value=M,this.nodeValue=M}}}),Of=function(M,V,ee){M["$$"+V]=ee}}}catch{}return qn.DocumentType=ni,qn.DOMException=F,qn.DOMImplementation=ie,qn.Element=Je,qn.Node=Q,qn.NodeList=j,qn.XMLSerializer=fe,qn}var ql={},vp={},vD;function zz(){return vD||(vD=1,(function(r){var e=Zc().freeze;r.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),r.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),r.entityMap=r.HTML_ENTITIES})(vp)),vp}var Jc={},yD;function Yz(){if(yD)return Jc;yD=1;var r=Zc().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),n=0,s=1,a=2,o=3,l=4,u=5,c=6,h=7;function f(S,C){this.message=S,this.locator=C,Error.captureStackTrace&&Error.captureStackTrace(this,f)}f.prototype=new Error,f.prototype.name=f.name;function p(){}p.prototype={parse:function(S,C,$){var F=this.domBuilder;F.startDocument(),O(C,C={}),g(S,C,$,F,this.errorHandler),F.endDocument()}};function g(S,C,$,F,j){function z(et){if(et>65535){et-=65536;var Je=55296+(et>>10),Or=56320+(et&1023);return String.fromCharCode(Je,Or)}else return String.fromCharCode(et)}function J(et){var Je=et.slice(1,-1);return Object.hasOwnProperty.call($,Je)?$[Je]:Je.charAt(0)==="#"?z(parseInt(Je.substr(1).replace("x","0x"))):(j.error("entity not found:"+et),et)}function Z(et){if(et>pe){var Je=S.substring(pe,et).replace(/&#?\w+;/g,J);Q&&W(pe),F.characters(Je,0,et-pe),pe=et}}function W(et,Je){for(;et>=X&&(Je=ie.exec(S));)Y=Je.index,X=Y+Je[0].length,Q.lineNumber++;Q.columnNumber=et-Y+1}for(var Y=0,X=0,ie=/.*(?:\r\n?|\n)|.*$/g,Q=F.locator,he=[{currentNSMap:C}],ve={},pe=0;;){try{var be=S.indexOf("<",pe);if(be<0){if(!S.substr(pe).match(/^\s*$/)){var Oe=F.doc,Qe=Oe.createTextNode(S.substr(pe));Oe.appendChild(Qe),F.currentElement=Qe}return}switch(be>pe&&Z(be),S.charAt(be+1)){case"/":var Tt=S.indexOf(">",be+3),Ze=S.substring(be+2,Tt).replace(/[ \t\n\r]+$/g,""),tr=he.pop();Tt<0?(Ze=S.substring(be+2).replace(/[\s<].*/,""),j.error("end tag name: "+Ze+" is not complete:"+tr.tagName),Tt=be+1+Ze.length):Ze.match(/\s</)&&(Ze=Ze.replace(/[\s<].*/,""),j.error("end tag name: "+Ze+" maybe not complete"),Tt=be+1+Ze.length);var Ir=tr.localNSMap,bt=tr.tagName==Ze,Wt=bt||tr.tagName&&tr.tagName.toLowerCase()==Ze.toLowerCase();if(Wt){if(F.endElement(tr.uri,tr.localName,Ze),Ir)for(var Ot in Ir)Object.prototype.hasOwnProperty.call(Ir,Ot)&&F.endPrefixMapping(Ot);bt||j.fatalError("end tag name: "+Ze+" is not match the current start tagName:"+tr.tagName)}else he.push(tr);Tt++;break;case"?":Q&&W(be),Tt=R(S,be,F);break;case"!":Q&&W(be),Tt=P(S,be,F,j);break;default:Q&&W(be);var Pt=new A,ji=he[he.length-1].currentNSMap,Tt=b(S,be,Pt,ji,J,j),mt=Pt.length;if(!Pt.closed&&D(S,Tt,Pt.tagName,ve)&&(Pt.closed=!0,$.nbsp||j.warning("unclosed xml attribute")),Q&&mt){for(var St=v(Q,{}),Ar=0;Ar<mt;Ar++){var Ae=Pt[Ar];W(Ae.offset),Ae.locator=v(Q,{})}F.locator=St,E(Pt,F,ji)&&he.push(Pt),F.locator=Q}else E(Pt,F,ji)&&he.push(Pt);r.isHTML(Pt.uri)&&!Pt.closed?Tt=x(S,Tt,Pt.tagName,J,F):Tt++}}catch(et){if(et instanceof f)throw et;j.error("element parse error: "+et),Tt=-1}Tt>pe?pe=Tt:Z(Math.max(be,pe)+1)}}function v(S,C){return C.lineNumber=S.lineNumber,C.columnNumber=S.columnNumber,C}function b(S,C,$,F,j,z){function J(Q,he,ve){$.attributeNames.hasOwnProperty(Q)&&z.fatalError("Attribute "+Q+" redefined"),$.addValue(Q,he.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,j),ve)}for(var Z,W,Y=++C,X=n;;){var ie=S.charAt(Y);switch(ie){case"=":if(X===s)Z=S.slice(C,Y),X=o;else if(X===a)X=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(X===o||X===s)if(X===s&&(z.warning('attribute value must after "="'),Z=S.slice(C,Y)),C=Y+1,Y=S.indexOf(ie,C),Y>0)W=S.slice(C,Y),J(Z,W,C-1),X=u;else throw new Error("attribute value no end '"+ie+"' match");else if(X==l)W=S.slice(C,Y),J(Z,W,C),z.warning('attribute "'+Z+'" missed start quot('+ie+")!!"),C=Y+1,X=u;else throw new Error('attribute value must after "="');break;case"/":switch(X){case n:$.setTagName(S.slice(C,Y));case u:case c:case h:X=h,$.closed=!0;case l:case s:break;case a:$.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return z.error("unexpected end of input"),X==n&&$.setTagName(S.slice(C,Y)),Y;case">":switch(X){case n:$.setTagName(S.slice(C,Y));case u:case c:case h:break;case l:case s:W=S.slice(C,Y),W.slice(-1)==="/"&&($.closed=!0,W=W.slice(0,-1));case a:X===a&&(W=Z),X==l?(z.warning('attribute "'+W+'" missed quot(")!'),J(Z,W,C)):((!r.isHTML(F[""])||!W.match(/^(?:disabled|checked|selected)$/i))&&z.warning('attribute "'+W+'" missed value!! "'+W+'" instead!!'),J(W,W,C));break;case o:throw new Error("attribute value missed!!")}return Y;case"":ie=" ";default:if(ie<=" ")switch(X){case n:$.setTagName(S.slice(C,Y)),X=c;break;case s:Z=S.slice(C,Y),X=a;break;case l:var W=S.slice(C,Y);z.warning('attribute "'+W+'" missed quot(")!!'),J(Z,W,C);case u:X=c;break}else switch(X){case a:$.tagName,(!r.isHTML(F[""])||!Z.match(/^(?:disabled|checked|selected)$/i))&&z.warning('attribute "'+Z+'" missed value!! "'+Z+'" instead2!!'),J(Z,Z,C),C=Y,X=s;break;case u:z.warning('attribute space is required"'+Z+'"!!');case c:X=s,C=Y;break;case o:X=l,C=Y;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}Y++}}function E(S,C,$){for(var F=S.tagName,j=null,ie=S.length;ie--;){var z=S[ie],J=z.qName,Z=z.value,Q=J.indexOf(":");if(Q>0)var W=z.prefix=J.slice(0,Q),Y=J.slice(Q+1),X=W==="xmlns"&&Y;else Y=J,W=null,X=J==="xmlns"&&"";z.localName=Y,X!==!1&&(j==null&&(j={},O($,$={})),$[X]=j[X]=Z,z.uri=r.XMLNS,C.startPrefixMapping(X,Z))}for(var ie=S.length;ie--;){z=S[ie];var W=z.prefix;W&&(W==="xml"&&(z.uri=r.XML),W!=="xmlns"&&(z.uri=$[W||""]))}var Q=F.indexOf(":");Q>0?(W=S.prefix=F.slice(0,Q),Y=S.localName=F.slice(Q+1)):(W=null,Y=S.localName=F);var he=S.uri=$[W||""];if(C.startElement(he,Y,F,S),S.closed){if(C.endElement(he,Y,F),j)for(W in j)Object.prototype.hasOwnProperty.call(j,W)&&C.endPrefixMapping(W)}else return S.currentNSMap=$,S.localNSMap=j,!0}function x(S,C,$,F,j){if(/^(?:script|textarea)$/i.test($)){var z=S.indexOf("</"+$+">",C),J=S.substring(C+1,z);if(/[&<]/.test(J))return/^script$/i.test($)?(j.characters(J,0,J.length),z):(J=J.replace(/&#?\w+;/g,F),j.characters(J,0,J.length),z)}return C+1}function D(S,C,$,F){var j=F[$];return j==null&&(j=S.lastIndexOf("</"+$+">"),j<C&&(j=S.lastIndexOf("</"+$)),F[$]=j),j<C}function O(S,C){for(var $ in S)Object.prototype.hasOwnProperty.call(S,$)&&(C[$]=S[$])}function P(S,C,$,F){var j=S.charAt(C+2);switch(j){case"-":if(S.charAt(C+3)==="-"){var z=S.indexOf("-->",C+4);return z>C?($.comment(S,C+4,z-C-4),z+3):(F.error("Unclosed comment"),-1)}else return-1;default:if(S.substr(C+3,6)=="CDATA["){var z=S.indexOf("]]>",C+9);return $.startCDATA(),$.characters(S,C+9,z-C-9),$.endCDATA(),z+3}var J=I(S,C),Z=J.length;if(Z>1&&/!doctype/i.test(J[0][0])){var W=J[1][0],Y=!1,X=!1;Z>3&&(/^public$/i.test(J[2][0])?(Y=J[3][0],X=Z>4&&J[4][0]):/^system$/i.test(J[2][0])&&(X=J[3][0]));var ie=J[Z-1];return $.startDTD(W,Y,X),$.endDTD(),ie.index+ie[0].length}}return-1}function R(S,C,$){var F=S.indexOf("?>",C);if(F){var j=S.substring(C,F).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return j?(j[0].length,$.processingInstruction(j[1],j[2]),F+2):-1}return-1}function A(){this.attributeNames={}}A.prototype={setTagName:function(S){if(!i.test(S))throw new Error("invalid tagName:"+S);this.tagName=S},addValue:function(S,C,$){if(!i.test(S))throw new Error("invalid attribute:"+S);this.attributeNames[S]=this.length,this[this.length++]={qName:S,value:C,offset:$}},length:0,getLocalName:function(S){return this[S].localName},getLocator:function(S){return this[S].locator},getQName:function(S){return this[S].qName},getURI:function(S){return this[S].uri},getValue:function(S){return this[S].value}};function I(S,C){var $,F=[],j=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(j.lastIndex=C,j.exec(S);$=j.exec(S);)if(F.push($),$[1])return F}return Jc.XMLReader=p,Jc.ParseError=f,Jc}var _D;function Kz(){if(_D)return ql;_D=1;var r=Zc(),e=gD(),t=zz(),i=Yz(),n=e.DOMImplementation,s=r.NAMESPACE,a=i.ParseError,o=i.XMLReader;function l(b){return b.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function u(b){this.options=b||{locator:{}}}u.prototype.parseFromString=function(b,E){var x=this.options,D=new o,O=x.domBuilder||new h,P=x.errorHandler,R=x.locator,A=x.xmlns||{},I=/\/x?html?$/.test(E),S=I?t.HTML_ENTITIES:t.XML_ENTITIES;R&&O.setDocumentLocator(R),D.errorHandler=c(P,O,R),D.domBuilder=x.domBuilder||O,I&&(A[""]=s.HTML),A.xml=A.xml||s.XML;var C=x.normalizeLineEndings||l;return b&&typeof b=="string"?D.parse(C(b),A,S):D.errorHandler.error("invalid doc source"),O.doc};function c(b,E,x){if(!b){if(E instanceof h)return E;b=E}var D={},O=b instanceof Function;x=x||{};function P(R){var A=b[R];!A&&O&&(A=b.length==2?function(I){b(R,I)}:b),D[R]=A&&function(I){A("[xmldom "+R+"]	"+I+p(x))}||function(){}}return P("warning"),P("error"),P("fatalError"),D}function h(){this.cdata=!1}function f(b,E){E.lineNumber=b.lineNumber,E.columnNumber=b.columnNumber}h.prototype={startDocument:function(){this.doc=new n().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(b,E,x,D){var O=this.doc,P=O.createElementNS(b,x||E),R=D.length;v(this,P),this.currentElement=P,this.locator&&f(this.locator,P);for(var A=0;A<R;A++){var b=D.getURI(A),I=D.getValue(A),x=D.getQName(A),S=O.createAttributeNS(b,x);this.locator&&f(D.getLocator(A),S),S.value=S.nodeValue=I,P.setAttributeNode(S)}},endElement:function(b,E,x){var D=this.currentElement;D.tagName,this.currentElement=D.parentNode},startPrefixMapping:function(b,E){},endPrefixMapping:function(b){},processingInstruction:function(b,E){var x=this.doc.createProcessingInstruction(b,E);this.locator&&f(this.locator,x),v(this,x)},ignorableWhitespace:function(b,E,x){},characters:function(b,E,x){if(b=g.apply(this,arguments),b){if(this.cdata)var D=this.doc.createCDATASection(b);else var D=this.doc.createTextNode(b);this.currentElement?this.currentElement.appendChild(D):/^\s*$/.test(b)&&this.doc.appendChild(D),this.locator&&f(this.locator,D)}},skippedEntity:function(b){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(b){(this.locator=b)&&(b.lineNumber=0)},comment:function(b,E,x){b=g.apply(this,arguments);var D=this.doc.createComment(b);this.locator&&f(this.locator,D),v(this,D)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(b,E,x){var D=this.doc.implementation;if(D&&D.createDocumentType){var O=D.createDocumentType(b,E,x);this.locator&&f(this.locator,O),v(this,O),this.doc.doctype=O}},warning:function(b){console.warn("[xmldom warning]	"+b,p(this.locator))},error:function(b){console.error("[xmldom error]	"+b,p(this.locator))},fatalError:function(b){throw new a(b,this.locator)}};function p(b){if(b)return`
@`+(b.systemId||"")+"#[line:"+b.lineNumber+",col:"+b.columnNumber+"]"}function g(b,E,x){return typeof b=="string"?b.substr(E,x):b.length>=E+x||E?new java.lang.String(b,E,x)+"":b}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(b){h.prototype[b]=function(){return null}});function v(b,E){b.currentElement?b.currentElement.appendChild(E):b.doc.appendChild(E)}return ql.__DOMHandler=h,ql.normalizeLineEndings=l,ql.DOMParser=u,ql}var bD;function Xz(){if(bD)return Fl;bD=1;var r=gD();return Fl.DOMImplementation=r.DOMImplementation,Fl.XMLSerializer=r.XMLSerializer,Fl.DOMParser=Kz().DOMParser,Fl}var Qz=Xz();const TD=r=>!!r&&typeof r=="object",ar=(...r)=>r.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):TD(e[i])&&TD(t[i])?e[i]=ar(e[i],t[i]):e[i]=t[i]}),e),{}),SD=r=>Object.keys(r).map(e=>r[e]),Zz=(r,e)=>{const t=[];for(let i=r;i<e;i++)t.push(i);return t},to=r=>r.reduce((e,t)=>e.concat(t),[]),xD=r=>{if(!r.length)return[];const e=[];for(let t=0;t<r.length;t++)e.push(r[t]);return e},Jz=(r,e)=>r.reduce((t,i,n)=>(i[e]&&t.push(n),t),[]),eY=(r,e)=>SD(r.reduce((t,i)=>(i.forEach(n=>{t[e(n)]=n}),t),{}));var ro={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const Bl=({baseUrl:r="",source:e="",range:t="",indexRange:i=""})=>{const n={uri:e,resolvedUri:Qc(r||"",e)};if(t||i){const a=(t||i).split("-");let o=U.BigInt?U.BigInt(a[0]):parseInt(a[0],10),l=U.BigInt?U.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=U.BigInt(l)-U.BigInt(o)+U.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),n.byterange={length:u,offset:o}}return n},tY=r=>{let e;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=U.BigInt(r.offset)+U.BigInt(r.length)-U.BigInt(1):e=r.offset+r.length-1,`${r.offset}-${e}`},wD=r=>(r&&typeof r!="number"&&(r=parseInt(r,10)),isNaN(r)?null:r),rY={static(r){const{duration:e,timescale:t=1,sourceDuration:i,periodDuration:n}=r,s=wD(r.endNumber),a=e/t;return typeof s=="number"?{start:0,end:s}:typeof n=="number"?{start:0,end:n/a}:{start:0,end:i/a}},dynamic(r){const{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:n=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=r,u=wD(r.endNumber),c=(e+t)/1e3,h=i+a,p=c+o-h,g=Math.ceil(p*n/s),v=Math.floor((c-h-l)*n/s),b=Math.floor((c-h)*n/s);return{start:Math.max(0,v),end:typeof u=="number"?u:Math.min(g,b)}}},iY=r=>e=>{const{duration:t,timescale:i=1,periodStart:n,startNumber:s=1}=r;return{number:s+e,duration:t/i,timeline:n,time:e*t}},yp=r=>{const{type:e,duration:t,timescale:i=1,periodDuration:n,sourceDuration:s}=r,{start:a,end:o}=rY[e](r),l=Zz(a,o).map(iY(r));if(e==="static"){const u=l.length-1,c=typeof n=="number"?n:s;l[u].duration=c-t/i*u}return l},ED=r=>{const{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:n="",periodStart:s,presentationTime:a,number:o=0,duration:l}=r;if(!e)throw new Error(ro.NO_BASE_URL);const u=Bl({baseUrl:e,source:t.sourceURL,range:t.range}),c=Bl({baseUrl:e,source:e,indexRange:n});if(c.map=u,l){const h=yp(r);h.length&&(c.duration=h[0].duration,c.timeline=h[0].timeline)}else i&&(c.duration=i,c.timeline=s);return c.presentationTime=a||s,c.number=o,[c]},_p=(r,e,t)=>{const i=r.sidx.map?r.sidx.map:null,n=r.sidx.duration,s=r.timeline||0,a=r.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(b=>b.referenceType!==1),c=[],h=r.endList?"static":"dynamic",f=r.sidx.timeline;let p=f,g=r.mediaSequence||0,v;typeof e.firstOffset=="bigint"?v=U.BigInt(o)+e.firstOffset:v=o+e.firstOffset;for(let b=0;b<u.length;b++){const E=e.references[b],x=E.referencedSize,D=E.subsegmentDuration;let O;typeof v=="bigint"?O=v+U.BigInt(x)-U.BigInt(1):O=v+x-1;const P=`${v}-${O}`,A=ED({baseUrl:t,timescale:l,timeline:s,periodStart:f,presentationTime:p,number:g,duration:D,sourceDuration:n,indexRange:P,type:h})[0];i&&(A.map=i),c.push(A),typeof v=="bigint"?v+=U.BigInt(x):v+=x,p+=D/l,g++}return r.segments=c,r},nY=["AUDIO","SUBTITLES"],sY=1/60,CD=r=>eY(r,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),aY=(r,e)=>{for(let t=0;t<r.length;t++)if(r[t].attributes.NAME===e)return r[t];return null},DD=r=>{let e=[];return Wz(r,nY,(t,i,n,s)=>{e=e.concat(t.playlists||[])}),e},ID=({playlist:r,mediaSequence:e})=>{r.mediaSequence=e,r.segments.forEach((t,i)=>{t.number=r.mediaSequence+i})},oY=({oldPlaylists:r,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline});const n=aY(r,i.attributes.NAME);if(!n||i.sidx)return;const s=i.segments[0],a=n.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<sY});if(a===-1){ID({playlist:i,mediaSequence:n.mediaSequence+n.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!n.segments.length&&i.timeline>n.timeline||n.segments.length&&i.timeline>n.segments[n.segments.length-1].timeline)&&i.discontinuitySequence--;return}n.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),ID({playlist:i,mediaSequence:n.segments[a].number})})},lY=({oldManifest:r,newManifest:e})=>{const t=r.playlists.concat(DD(r)),i=e.playlists.concat(DD(e));return e.timelineStarts=CD([r.timelineStarts,e.timelineStarts]),oY({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},eh=r=>r&&r.uri+"-"+tY(r.byterange),bp=r=>{const e=r.reduce(function(i,n){return i[n.attributes.baseUrl]||(i[n.attributes.baseUrl]=[]),i[n.attributes.baseUrl].push(n),i},{});let t=[];return Object.values(e).forEach(i=>{const n=SD(i.reduce((s,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return s[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[o].segments.push(...a.segments)),a.attributes.contentProtection&&(s[o].attributes.contentProtection=a.attributes.contentProtection)):(s[o]=a,s[o].attributes.timelineStarts=[]),s[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(n)}),t.map(i=>(i.discontinuityStarts=Jz(i.segments||[],"discontinuity"),i))},Tp=(r,e)=>{const t=eh(r.sidx),i=t&&e[t]&&e[t].sidx;return i&&_p(r,i,r.sidx.resolvedUri),r},uY=(r,e={})=>{if(!Object.keys(e).length)return r;for(const t in r)r[t]=Tp(r[t],e);return r},cY=({attributes:r,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:n,discontinuityStarts:s},a)=>{const o={attributes:{NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuitySequence:n,discontinuityStarts:s,timelineStarts:r.timelineStarts,mediaSequence:i,segments:e};return r.contentProtection&&(o.contentProtection=r.contentProtection),r.serviceLocation&&(o.attributes.serviceLocation=r.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},hY=({attributes:r,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:n})=>{typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);const s={NAME:r.id,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1};r.codecs&&(s.CODECS=r.codecs);const a={attributes:s,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:i,discontinuitySequence:n,mediaSequence:t,segments:e};return r.serviceLocation&&(a.attributes.serviceLocation=r.serviceLocation),a},dY=(r,e={},t=!1)=>{let i;const n=r.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const h=o?` (${o})`:"";u=`${a.attributes.lang}${h}`}s[u]||(s[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=Tp(cY(a,t),e);return s[u].playlists.push(c),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),s},{});if(!i){const s=Object.keys(n)[0];n[s].default=!0}return n},fY=(r,e={})=>r.reduce((t,i)=>{const n=i.attributes.label||i.attributes.lang||"text",s=i.attributes.lang||"und";return t[n]||(t[n]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[n].playlists.push(Tp(hY(i),e)),t},{}),pY=r=>r.reduce((e,t)=>(t&&t.forEach(i=>{const{channel:n,language:s}=i;e[s]={autoselect:!1,default:!1,instreamId:n,language:s},i.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[s]["3D"]=i["3D"])}),e),{}),mY=({attributes:r,segments:e,sidx:t,discontinuityStarts:i})=>{const n={attributes:{NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth,"PROGRAM-ID":1},uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,discontinuityStarts:i,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(n.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(n.contentProtection=r.contentProtection),r.serviceLocation&&(n.attributes.serviceLocation=r.serviceLocation),t&&(n.sidx=t),n},gY=({attributes:r})=>r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video",vY=({attributes:r})=>r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio",yY=({attributes:r})=>r.mimeType==="text/vtt"||r.contentType==="text",_Y=(r,e)=>{r.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,n)=>{i.number=n})})},AD=r=>r?Object.keys(r).reduce((e,t)=>{const i=r[t];return e.concat(i.playlists)},[]):[],bY=({dashPlaylists:r,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:n,eventStream:s})=>{if(!r.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=r[0].attributes,c=bp(r.filter(gY)).map(mY),h=bp(r.filter(vY)),f=bp(r.filter(yY)),p=r.map(O=>O.attributes.captionServices).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:uY(c,i)};u>=0&&(g.minimumUpdatePeriod=u*1e3),e&&(g.locations=e),t&&(g.contentSteering=t),o==="dynamic"&&(g.suggestedPresentationDelay=l),s&&s.length>0&&(g.eventStream=s);const v=g.playlists.length===0,b=h.length?dY(h,i,v):null,E=f.length?fY(f,i):null,x=c.concat(AD(b),AD(E)),D=x.map(({timelineStarts:O})=>O);return g.timelineStarts=CD(D),_Y(x,g.timelineStarts),b&&(g.mediaGroups.AUDIO.audio=b),E&&(g.mediaGroups.SUBTITLES.subs=E),p.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=pY(p)),n?lY({oldManifest:n,newManifest:g}):g},TY=(r,e,t)=>{const{NOW:i,clientOffset:n,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=r,u=(i+n)/1e3,c=s+o,f=u+l-c;return Math.ceil((f*a-e)/t)},OD=(r,e)=>{const{type:t,minimumUpdatePeriod:i=0,media:n="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=r,u=[];let c=-1;for(let h=0;h<e.length;h++){const f=e[h],p=f.d,g=f.r||0,v=f.t||0;c<0&&(c=v),v&&v>c&&(c=v);let b;if(g<0){const D=h+1;D===e.length?t==="dynamic"&&i>0&&n.indexOf("$Number$")>0?b=TY(r,c,p):b=(s*a-c)/p:b=(e[D].t-c)/p}else b=g+1;const E=o+u.length+b;let x=o+u.length;for(;x<E;)u.push({number:x,duration:p/a,time:c,timeline:l}),c+=p,x++}return u},SY=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,xY=r=>(e,t,i,n)=>{if(e==="$$")return"$";if(typeof r[t]>"u")return e;const s=""+r[t];return t==="RepresentationID"||(i?n=parseInt(n,10):n=1,s.length>=n)?s:`${new Array(n-s.length+1).join("0")}${s}`},PD=(r,e)=>r.replace(SY,xY(e)),wY=(r,e)=>!r.duration&&!e?[{number:r.startNumber||1,duration:r.sourceDuration,time:0,timeline:r.periodStart}]:r.duration?yp(r):OD(r,e),EY=(r,e)=>{const t={RepresentationID:r.id,Bandwidth:r.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=r,n=Bl({baseUrl:r.baseUrl,source:PD(i.sourceURL,t),range:i.range});return wY(r,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=PD(r.media||"",t),l=r.timescale||1,u=r.presentationTimeOffset||0,c=r.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:Qc(r.baseUrl||"",o),map:n,number:a.number,presentationTime:c}})},CY=(r,e)=>{const{baseUrl:t,initialization:i={}}=r,n=Bl({baseUrl:t,source:i.sourceURL,range:i.range}),s=Bl({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=n,s},DY=(r,e)=>{const{duration:t,segmentUrls:i=[],periodStart:n}=r;if(!t&&!e||t&&e)throw new Error(ro.SEGMENT_TIME_UNSPECIFIED);const s=i.map(l=>CY(r,l));let a;return t&&(a=yp(r)),e&&(a=OD(r,e)),a.map((l,u)=>{if(s[u]){const c=s[u],h=r.timescale||1,f=r.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=n+(l.time-f)/h,c}}).filter(l=>l)},IY=({attributes:r,segmentInfo:e})=>{let t,i;e.template?(i=EY,t=ar(r,e.template)):e.base?(i=ED,t=ar(r,e.base)):e.list&&(i=DY,t=ar(r,e.list));const n={attributes:r};if(!i)return n;const s=i(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else s.length?t.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return n.attributes=t,n.segments=s,e.base&&t.indexRange&&(n.sidx=s[0],n.segments=[]),n},AY=r=>r.map(IY),Et=(r,e)=>xD(r.childNodes).filter(({tagName:t})=>t===e),Ul=r=>r.textContent.trim(),OY=r=>parseFloat(r.split("/").reduce((e,t)=>e/t)),io=r=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(r);if(!o)return 0;const[l,u,c,h,f,p]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(h||0)*3600+parseFloat(f||0)*60+parseFloat(p||0)},PY=r=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(r)&&(r+="Z"),Date.parse(r)),RD={mediaPresentationDuration(r){return io(r)},availabilityStartTime(r){return PY(r)/1e3},minimumUpdatePeriod(r){return io(r)},suggestedPresentationDelay(r){return io(r)},type(r){return r},timeShiftBufferDepth(r){return io(r)},start(r){return io(r)},width(r){return parseInt(r,10)},height(r){return parseInt(r,10)},bandwidth(r){return parseInt(r,10)},frameRate(r){return OY(r)},startNumber(r){return parseInt(r,10)},timescale(r){return parseInt(r,10)},presentationTimeOffset(r){return parseInt(r,10)},duration(r){const e=parseInt(r,10);return isNaN(e)?io(r):e},d(r){return parseInt(r,10)},t(r){return parseInt(r,10)},r(r){return parseInt(r,10)},presentationTime(r){return parseInt(r,10)},DEFAULT(r){return r}},Yt=r=>r&&r.attributes?xD(r.attributes).reduce((e,t)=>{const i=RD[t.name]||RD.DEFAULT;return e[t.name]=i(t.value),e},{}):{},RY={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},th=(r,e)=>e.length?to(r.map(function(t){return e.map(function(i){const n=Ul(i),s=Qc(t.baseUrl,n),a=ar(Yt(i),{baseUrl:s});return s!==n&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):r,Sp=r=>{const e=Et(r,"SegmentTemplate")[0],t=Et(r,"SegmentList")[0],i=t&&Et(t,"SegmentURL").map(h=>ar({tag:"SegmentURL"},Yt(h))),n=Et(r,"SegmentBase")[0],s=t||e,a=s&&Et(s,"SegmentTimeline")[0],o=t||n||e,l=o&&Et(o,"Initialization")[0],u=e&&Yt(e);u&&l?u.initialization=l&&Yt(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&Et(a,"S").map(h=>Yt(h)),list:t&&ar(Yt(t),{segmentUrls:i,initialization:Yt(l)}),base:n&&ar(Yt(n),{initialization:Yt(l)})};return Object.keys(c).forEach(h=>{c[h]||delete c[h]}),c},kY=(r,e,t)=>i=>{const n=Et(i,"BaseURL"),s=th(e,n),a=ar(r,Yt(i)),o=Sp(i);return s.map(l=>({segmentInfo:ar(t,o),attributes:ar(a,l)}))},MY=r=>r.reduce((e,t)=>{const i=Yt(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const n=RY[i.schemeIdUri];if(n){e[n]={attributes:i};const s=Et(t,"cenc:pssh")[0];if(s){const a=Ul(s);e[n].pssh=a&&sD(a)}}return e},{}),$Y=r=>{if(r.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{let i,n;return n=t,/^CC\d=/.test(t)?[i,n]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:n}});if(r.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof r.value!="string"?[]:r.value.split(";")).map(t=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[n,s=""]=t.split("=");i.channel=n,i.language=t,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},NY=r=>to(Et(r.node,"EventStream").map(e=>{const t=Yt(e),i=t.schemeIdUri;return Et(e,"Event").map(n=>{const s=Yt(n),a=s.presentationTime||0,o=t.timescale||1,l=s.duration||0,u=a/o+r.attributes.start;return{schemeIdUri:i,value:t.value,id:s.id,start:u,end:u+l/o,messageData:Ul(n)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),LY=(r,e,t)=>i=>{const n=Yt(i),s=th(e,Et(i,"BaseURL")),a=Et(i,"Role")[0],o={role:Yt(a)};let l=ar(r,n,o);const u=Et(i,"Accessibility")[0],c=$Y(Yt(u));c&&(l=ar(l,{captionServices:c}));const h=Et(i,"Label")[0];if(h&&h.childNodes.length){const b=h.childNodes[0].nodeValue.trim();l=ar(l,{label:b})}const f=MY(Et(i,"ContentProtection"));Object.keys(f).length&&(l=ar(l,{contentProtection:f}));const p=Sp(i),g=Et(i,"Representation"),v=ar(t,p);return to(g.map(kY(l,s,v)))},FY=(r,e)=>(t,i)=>{const n=th(e,Et(t.node,"BaseURL")),s=ar(r,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const a=Et(t.node,"AdaptationSet"),o=Sp(t.node);return to(a.map(LY(s,n,o)))},qY=(r,e)=>{if(r.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!r.length)return null;const t=ar({serverURL:Ul(r[0])},Yt(r[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},BY=({attributes:r,priorPeriodAttributes:e,mpdType:t})=>typeof r.start=="number"?r.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,UY=(r,e={})=>{const{manifestUri:t="",NOW:i=Date.now(),clientOffset:n=0,eventHandler:s=function(){}}=e,a=Et(r,"Period");if(!a.length)throw new Error(ro.INVALID_NUMBER_OF_PERIOD);const o=Et(r,"Location"),l=Yt(r),u=th([{baseUrl:t}],Et(r,"BaseURL")),c=Et(r,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=n,o.length&&(l.locations=o.map(Ul));const h=[];return a.forEach((f,p)=>{const g=Yt(f),v=h[p-1];g.start=BY({attributes:g,priorPeriodAttributes:v?v.attributes:null,mpdType:l.type}),h.push({node:f,attributes:g})}),{locations:l.locations,contentSteeringInfo:qY(c,s),representationInfo:to(h.map(FY(l,u))),eventStream:to(h.map(NY))}},kD=r=>{if(r==="")throw new Error(ro.DASH_EMPTY_MANIFEST);const e=new Qz.DOMParser;let t,i;try{t=e.parseFromString(r,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(ro.DASH_INVALID_XML);return i},jY=r=>{const e=Et(r,"UTCTiming")[0];if(!e)return null;const t=Yt(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(ro.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},HY=(r,e={})=>{const t=UY(kD(r),e),i=AY(t.representationInfo);return bY({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},VY=r=>jY(kD(r));var xp,MD;function GY(){if(MD)return xp;MD=1;var r=Math.pow(2,32),e=function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n;return i.getBigUint64?(n=i.getBigUint64(0),n<Number.MAX_SAFE_INTEGER?Number(n):n):i.getUint32(0)*r+i.getUint32(4)};return xp={getUint64:e,MAX_UINT32:r},xp}var wp,$D;function WY(){if($D)return wp;$D=1;var r=GY().getUint64,e=function(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8)},s=12;n.version===0?(n.earliestPresentationTime=i.getUint32(s),n.firstOffset=i.getUint32(s+4),s+=8):(n.earliestPresentationTime=r(t.subarray(s)),n.firstOffset=r(t.subarray(s+8)),s+=16),s+=2;var a=i.getUint16(s);for(s+=2;a>0;s+=12,a--)n.references.push({referenceType:(t[s]&128)>>>7,referencedSize:i.getUint32(s)&2147483647,subsegmentDuration:i.getUint32(s+4),startsWithSap:!!(t[s+8]&128),sapType:(t[s+8]&112)>>>4,sapDeltaTime:i.getUint32(s+8)&268435455});return n};return wp=e,wp}var zY=WY();const YY=Nl(zY);var KY=Ce([73,68,51]),XY=function(e,t){t===void 0&&(t=0),e=Ce(e);var i=e[t+5],n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(i&16)>>4;return s?n+20:n+10},jl=function r(e,t){return t===void 0&&(t=0),e=Ce(e),e.length-t<10||!wt(e,KY,{offset:t})?t:(t+=XY(e,t),r(e,t))},ND=function(e){return typeof e=="string"?fD(e):e},QY=function(e){return Array.isArray(e)?e.map(function(t){return ND(t)}):[ND(e)]},ZY=function r(e,t,i){i===void 0&&(i=!1),t=QY(t),e=Ce(e);var n=[];if(!t.length)return n;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(s+8,l);wt(o,t[0])&&(t.length===1?n.push(u):n.push.apply(n,r(u,t.slice(1),i))),s=l}return n},rh={EBML:Ce([26,69,223,163]),DocType:Ce([66,130]),Segment:Ce([24,83,128,103]),SegmentInfo:Ce([21,73,169,102]),Tracks:Ce([22,84,174,107]),Track:Ce([174]),TrackNumber:Ce([215]),DefaultDuration:Ce([35,227,131]),TrackEntry:Ce([174]),TrackType:Ce([131]),FlagDefault:Ce([136]),CodecID:Ce([134]),CodecPrivate:Ce([99,162]),VideoTrack:Ce([224]),AudioTrack:Ce([225]),Cluster:Ce([31,67,182,117]),Timestamp:Ce([231]),TimestampScale:Ce([42,215,177]),BlockGroup:Ce([160]),BlockDuration:Ce([155]),Block:Ce([161]),SimpleBlock:Ce([163])},Ep=[128,64,32,16,8,4,2,1],JY=function(e){for(var t=1,i=0;i<Ep.length&&!(e&Ep[i]);i++)t++;return t},ih=function(e,t,i,n){i===void 0&&(i=!0),n===void 0&&(n=!1);var s=JY(e[t]),a=e.subarray(t,t+s);return i&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=Ep[s-1]),{length:s,value:Hz(a,{signed:n}),bytes:a}},LD=function r(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return r(t)}):typeof e=="number"?Vz(e):e},eK=function(e){return Array.isArray(e)?e.map(function(t){return LD(t)}):[LD(e)]},tK=function r(e,t,i){if(i>=t.length)return t.length;var n=ih(t,i,!1);if(wt(e.bytes,n.bytes))return i;var s=ih(t,i+n.length);return r(e,t,i+s.length+s.value+n.length)},FD=function r(e,t){t=eK(t),e=Ce(e);var i=[];if(!t.length)return i;for(var n=0;n<e.length;){var s=ih(e,n,!1),a=ih(e,n+s.length),o=n+s.length+a.length;a.value===127&&(a.value=tK(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);wt(t[0],s.bytes)&&(t.length===1?i.push(u):i=i.concat(r(u,t.slice(1))));var c=s.length+a.length+u.length;n+=c}return i},rK=Ce([0,0,0,1]),iK=Ce([0,0,1]),nK=Ce([0,0,3]),sK=function(e){for(var t=[],i=1;i<e.length-2;)wt(e.subarray(i,i+3),nK)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var n=e.length-t.length,s=new Uint8Array(n),a=0;for(i=0;i<n;a++,i++)a===t[0]&&(a++,t.shift()),s[i]=e[a];return s},qD=function(e,t,i,n){e=Ce(e),i=[].concat(i);for(var s=0,a,o=0;s<e.length&&(o<n||a);){var l=void 0;if(wt(e.subarray(s),rK)?l=4:wt(e.subarray(s),iK)&&(l=3),!l){s++;continue}if(o++,a)return sK(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),i.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},aK=function(e,t,i){return qD(e,"h264",t,i)},oK=function(e,t,i){return qD(e,"h265",t,i)},Mr={webm:Ce([119,101,98,109]),matroska:Ce([109,97,116,114,111,115,107,97]),flac:Ce([102,76,97,67]),ogg:Ce([79,103,103,83]),ac3:Ce([11,119]),riff:Ce([82,73,70,70]),avi:Ce([65,86,73]),wav:Ce([87,65,86,69]),"3gp":Ce([102,116,121,112,51,103]),mp4:Ce([102,116,121,112]),fmp4:Ce([115,116,121,112]),mov:Ce([102,116,121,112,113,116]),moov:Ce([109,111,111,118]),moof:Ce([109,111,111,102])},no={aac:function(e){var t=jl(e);return wt(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=jl(e);return wt(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=FD(e,[rh.EBML,rh.DocType])[0];return wt(t,Mr.webm)},mkv:function(e){var t=FD(e,[rh.EBML,rh.DocType])[0];return wt(t,Mr.matroska)},mp4:function(e){if(no["3gp"](e)||no.mov(e))return!1;if(wt(e,Mr.mp4,{offset:4})||wt(e,Mr.fmp4,{offset:4})||wt(e,Mr.moof,{offset:4})||wt(e,Mr.moov,{offset:4}))return!0},mov:function(e){return wt(e,Mr.mov,{offset:4})},"3gp":function(e){return wt(e,Mr["3gp"],{offset:4})},ac3:function(e){var t=jl(e);return wt(e,Mr.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=jl(e);return wt(e,Mr.flac,{offset:t})},ogg:function(e){return wt(e,Mr.ogg)},avi:function(e){return wt(e,Mr.riff)&&wt(e,Mr.avi,{offset:8})},wav:function(e){return wt(e,Mr.riff)&&wt(e,Mr.wav,{offset:8})},h264:function(e){return aK(e,7,3).length},h265:function(e){return oK(e,[32,33],3).length}},Cp=Object.keys(no).filter(function(r){return r!=="ts"&&r!=="h264"&&r!=="h265"}).concat(["ts","h264","h265"]);Cp.forEach(function(r){var e=no[r];no[r]=function(t){return e(Ce(t))}});var lK=no,Dp=function(e){e=Ce(e);for(var t=0;t<Cp.length;t++){var i=Cp[t];if(lK[i](e))return i}return""},uK=function(e){return ZY(e,["moof"]).length>0},Ip,BD;function cK(){if(BD)return Ip;BD=1;var r=9e4,e,t,i,n,s,a,o;return e=function(l){return l*r},t=function(l,u){return l*u},i=function(l){return l/r},n=function(l,u){return l/u},s=function(l,u){return e(n(l,u))},a=function(l,u){return t(i(l),u)},o=function(l,u,c){return i(c?l:l-u)},Ip={ONE_SECOND_IN_TS:r,secondsToVideoTs:e,secondsToAudioTs:t,videoTsToSeconds:i,audioTsToSeconds:n,audioTsToVideoTs:s,videoTsToAudioTs:a,metadataTsToSeconds:o},Ip}var Ys=cK();var Ap="8.23.4";const Bn={},gs=function(r,e){return Bn[r]=Bn[r]||[],e&&(Bn[r]=Bn[r].concat(e)),Bn[r]},hK=function(r,e){gs(r,e)},UD=function(r,e){const t=gs(r).indexOf(e);return t<=-1?!1:(Bn[r]=Bn[r].slice(),Bn[r].splice(t,1),!0)},dK=function(r,e){gs(r,[].concat(e).map(t=>{const i=(...n)=>(UD(r,i),t(...n));return i}))},nh={prefixed:!0},sh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],jD=sh[0];let Hl;for(let r=0;r<sh.length;r++)if(sh[r][1]in oe){Hl=sh[r];break}if(Hl){for(let r=0;r<Hl.length;r++)nh[jD[r]]=Hl[r];nh.prefixed=Hl[0]!==jD[0]}let zr=[];const fK=(r,e,t)=>(i,n,s)=>{const a=e.levels[n],o=new RegExp(`^(${a})$`);let l=r;if(i!=="log"&&s.unshift(i.toUpperCase()+":"),t&&(l=`%c${r}`,s.unshift(t)),s.unshift(l+":"),zr){zr.push([].concat(s));const c=zr.length-1e3;zr.splice(0,c>0?c:0)}if(!U.console)return;let u=U.console[i];!u&&i==="debug"&&(u=U.console.info||U.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(s)?"apply":"call"](U.console,s)};function Op(r,e=":",t=""){let i="info",n;function s(...a){n("log",i,a)}return n=fK(r,s,t),s.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,h=`${r} ${u} ${a}`;return Op(h,u,c)},s.createNewLogger=(a,o,l)=>Op(a,o,l),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},s.level=a=>{if(typeof a=="string"){if(!s.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);i=a}return i},s.history=()=>zr?[].concat(zr):[],s.history.filter=a=>(zr||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),s.history.clear=()=>{zr&&(zr.length=0)},s.history.disable=()=>{zr!==null&&(zr.length=0,zr=null)},s.history.enable=()=>{zr===null&&(zr=[])},s.error=(...a)=>n("error",i,a),s.warn=(...a)=>n("warn",i,a),s.debug=(...a)=>n("debug",i,a),s}const qe=Op("VIDEOJS"),HD=qe.createLogger,pK=Object.prototype.toString,VD=function(r){return pn(r)?Object.keys(r):[]};function so(r,e){VD(r).forEach(t=>e(r[t],t))}function GD(r,e,t=0){return VD(r).reduce((i,n)=>e(i,r[n],n),t)}function pn(r){return!!r&&typeof r=="object"}function ao(r){return pn(r)&&pK.call(r)==="[object Object]"&&r.constructor===Object}function at(...r){const e={};return r.forEach(t=>{t&&so(t,(i,n)=>{if(!ao(i)){e[n]=i;return}ao(e[n])||(e[n]={}),e[n]=at(e[n],i)})}),e}function WD(r={}){const e=[];for(const t in r)if(r.hasOwnProperty(t)){const i=r[t];e.push(i)}return e}function ah(r,e,t,i=!0){const n=a=>Object.defineProperty(r,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return n(a),a}};return i&&(s.set=n),Object.defineProperty(r,e,s)}var mK=Object.freeze({__proto__:null,each:so,reduce:GD,isObject:pn,isPlain:ao,merge:at,values:WD,defineLazyProperty:ah});let Pp=!1,zD=null,Wi=!1,YD,KD=!1,oo=!1,lo=!1,mn=!1,Rp=null,oh=null;const gK=!!(U.cast&&U.cast.framework&&U.cast.framework.CastReceiverContext);let XD=null,lh=!1,uh=!1,ch=!1,hh=!1,dh=!1,fh=!1,ph=!1;const Vl=!!(uo()&&("ontouchstart"in U||U.navigator.maxTouchPoints||U.DocumentTouch&&U.document instanceof U.DocumentTouch)),vs=U.navigator&&U.navigator.userAgentData;if(vs&&vs.platform&&vs.brands&&(Wi=vs.platform==="Android",oo=!!vs.brands.find(r=>r.brand==="Microsoft Edge"),lo=!!vs.brands.find(r=>r.brand==="Chromium"),mn=!oo&&lo,Rp=oh=(vs.brands.find(r=>r.brand==="Chromium")||{}).version||null,uh=vs.platform==="Windows"),!lo){const r=U.navigator&&U.navigator.userAgent||"";Pp=/iPod/i.test(r),zD=(function(){const e=r.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null})(),Wi=/Android/i.test(r),YD=(function(){const e=r.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null})(),KD=/Firefox/i.test(r),oo=/Edg/i.test(r),lo=/Chrome/i.test(r)||/CriOS/i.test(r),mn=!oo&&lo,Rp=oh=(function(){const e=r.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null})(),XD=(function(){const e=/MSIE\s(\d+)\.\d/.exec(r);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(r)&&/rv:11.0/.test(r)&&(t=11),t})(),dh=/Tizen/i.test(r),fh=/Web0S/i.test(r),ph=dh||fh,lh=/Safari/i.test(r)&&!mn&&!Wi&&!oo&&!ph,uh=/Windows/i.test(r),ch=/iPad/i.test(r)||lh&&Vl&&!/iPhone/i.test(r),hh=/iPhone/i.test(r)&&!ch}const xr=hh||ch||Pp,mh=(lh||xr)&&!mn;var QD=Object.freeze({__proto__:null,get IS_IPOD(){return Pp},get IOS_VERSION(){return zD},get IS_ANDROID(){return Wi},get ANDROID_VERSION(){return YD},get IS_FIREFOX(){return KD},get IS_EDGE(){return oo},get IS_CHROMIUM(){return lo},get IS_CHROME(){return mn},get CHROMIUM_VERSION(){return Rp},get CHROME_VERSION(){return oh},IS_CHROMECAST_RECEIVER:gK,get IE_VERSION(){return XD},get IS_SAFARI(){return lh},get IS_WINDOWS(){return uh},get IS_IPAD(){return ch},get IS_IPHONE(){return hh},get IS_TIZEN(){return dh},get IS_WEBOS(){return fh},get IS_SMART_TV(){return ph},TOUCH_ENABLED:Vl,IS_IOS:xr,IS_ANY_SAFARI:mh});function ZD(r){return typeof r=="string"&&!!r.trim()}function vK(r){if(r.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function uo(){return oe===U.document}function co(r){return pn(r)&&r.nodeType===1}function JD(){try{return U.parent!==U.self}catch{return!0}}function eI(r){return function(e,t){if(!ZD(e))return oe[r](null);ZD(t)&&(t=oe.querySelector(t));const i=co(t)?t:oe;return i[r]&&i[r](e)}}function De(r="div",e={},t={},i){const n=oe.createElement(r);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?ys(n,a):(n[s]!==a||s==="tabIndex")&&(n[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){n.setAttribute(s,t[s])}),i&&Mp(n,i),n}function ys(r,e){return typeof r.textContent>"u"?r.innerText=e:r.textContent=e,r}function kp(r,e){e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}function Gl(r,e){return vK(e),r.classList.contains(e)}function Ks(r,...e){return r.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),r}function gh(r,...e){return r?(r.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),r):(qe.warn("removeClass was called with an element that doesn't exist"),null)}function tI(r,e,t){return typeof t=="function"&&(t=t(r,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>r.classList.toggle(i,t)),r}function rI(r,e){Object.getOwnPropertyNames(e).forEach(function(t){const i=e[t];i===null||typeof i>"u"||i===!1?r.removeAttribute(t):r.setAttribute(t,i===!0?"":i)})}function _s(r){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(r&&r.attributes&&r.attributes.length>0){const i=r.attributes;for(let n=i.length-1;n>=0;n--){const s=i[n].name;let a=i[n].value;t.includes(s)&&(a=a!==null),e[s]=a}}return e}function iI(r,e){return r.getAttribute(e)}function ho(r,e,t){r.setAttribute(e,t)}function vh(r,e){r.removeAttribute(e)}function nI(){oe.body.focus(),oe.onselectstart=function(){return!1}}function sI(){oe.onselectstart=function(){return!0}}function fo(r){if(r&&r.getBoundingClientRect&&r.parentNode){const e=r.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(po(r,"height"))),t.width||(t.width=parseFloat(po(r,"width"))),t}}function Wl(r){if(!r||r&&!r.offsetParent)return{left:0,top:0,width:0,height:0};const e=r.offsetWidth,t=r.offsetHeight;let i=0,n=0;for(;r.offsetParent&&r!==oe[nh.fullscreenElement];)i+=r.offsetLeft,n+=r.offsetTop,r=r.offsetParent;return{left:i,top:n,width:e,height:t}}function yh(r,e){const t={x:0,y:0};if(xr){let c=r;for(;c&&c.nodeName.toLowerCase()!=="html";){const h=po(c,"transform");if(/^matrix/.test(h)){const f=h.slice(7,-1).split(/,\s/).map(Number);t.x+=f[4],t.y+=f[5]}else if(/^matrix3d/.test(h)){const f=h.slice(9,-1).split(/,\s/).map(Number);t.x+=f[12],t.y+=f[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&U.WebKitCSSMatrix){const f=U.getComputedStyle(c.assignedSlot.parentElement).transform,p=new U.WebKitCSSMatrix(f);t.x+=p.m41,t.y+=p.m42}c=c.parentNode||c.host}}const i={},n=Wl(e.target),s=Wl(r),a=s.width,o=s.height;let l=e.offsetY-(s.top-n.top),u=e.offsetX-(s.left-n.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,xr&&(u-=t.x,l-=t.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,u/a)),i}function aI(r){return pn(r)&&r.nodeType===3}function _h(r){for(;r.firstChild;)r.removeChild(r.firstChild);return r}function oI(r){return typeof r=="function"&&(r=r()),(Array.isArray(r)?r:[r]).map(e=>{if(typeof e=="function"&&(e=e()),co(e)||aI(e))return e;if(typeof e=="string"&&/\S/.test(e))return oe.createTextNode(e)}).filter(e=>e)}function Mp(r,e){return oI(e).forEach(t=>r.appendChild(t)),r}function lI(r,e){return Mp(_h(r),e)}function zl(r){return r.button===void 0&&r.buttons===void 0||r.button===0&&r.buttons===void 0||r.type==="mouseup"&&r.button===0&&r.buttons===0||r.type==="mousedown"&&r.button===0&&r.buttons===0?!0:!(r.button!==0||r.buttons!==1)}const bs=eI("querySelector"),uI=eI("querySelectorAll");function po(r,e){if(!r||!e)return"";if(typeof U.getComputedStyle=="function"){let t;try{t=U.getComputedStyle(r)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function cI(r){[...oe.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(n=>n.cssText).join(""),i=oe.createElement("style");i.textContent=t,r.document.head.appendChild(i)}catch{const i=oe.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,r.document.head.appendChild(i)}})}var hI=Object.freeze({__proto__:null,isReal:uo,isEl:co,isInFrame:JD,createEl:De,textContent:ys,prependTo:kp,hasClass:Gl,addClass:Ks,removeClass:gh,toggleClass:tI,setAttributes:rI,getAttributes:_s,getAttribute:iI,setAttribute:ho,removeAttribute:vh,blockTextSelection:nI,unblockTextSelection:sI,getBoundingClientRect:fo,findPosition:Wl,getPointerPosition:yh,isTextNode:aI,emptyEl:_h,normalizeContent:oI,appendContent:Mp,insertContent:lI,isSingleLeftClick:zl,$:bs,$$:uI,computedStyle:po,copyStyleSheetsToWindow:cI});let dI=!1,$p;const yK=function(){if($p.options.autoSetup===!1)return;const r=Array.prototype.slice.call(oe.getElementsByTagName("video")),e=Array.prototype.slice.call(oe.getElementsByTagName("audio")),t=Array.prototype.slice.call(oe.getElementsByTagName("video-js")),i=r.concat(e,t);if(i&&i.length>0)for(let n=0,s=i.length;n<s;n++){const a=i[n];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&$p(a);else{Np(1);break}}else dI||Np(1)};function Np(r,e){uo()&&(e&&($p=e),U.setTimeout(yK,r))}function Lp(){dI=!0,U.removeEventListener("load",Lp)}uo()&&(oe.readyState==="complete"?Lp():U.addEventListener("load",Lp));const fI=function(r){const e=oe.createElement("style");return e.className=r,e},pI=function(r,e){r.styleSheet?r.styleSheet.cssText=e:r.textContent=e};var $r=new WeakMap;let _K=3;function Si(){return _K++}function mI(r,e){if(!$r.has(r))return;const t=$r.get(r);t.handlers[e].length===0&&(delete t.handlers[e],r.removeEventListener?r.removeEventListener(e,t.dispatcher,!1):r.detachEvent&&r.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&$r.delete(r)}function Fp(r,e,t,i){t.forEach(function(n){r(e,n,i)})}function bh(r){if(r.fixed_)return r;function e(){return!0}function t(){return!1}if(!r||!r.isPropagationStopped||!r.isImmediatePropagationStopped){const i=r||U.event;r={};const n=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in i)n.includes(s)||s==="returnValue"&&i.preventDefault||(r[s]=i[s]);if(r.target||(r.target=r.srcElement||oe),r.relatedTarget||(r.relatedTarget=r.fromElement===r.target?r.toElement:r.fromElement),r.preventDefault=function(){i.preventDefault&&i.preventDefault(),r.returnValue=!1,i.returnValue=!1,r.defaultPrevented=!0},r.defaultPrevented=!1,r.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),r.cancelBubble=!0,i.cancelBubble=!0,r.isPropagationStopped=e},r.isPropagationStopped=t,r.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),r.isImmediatePropagationStopped=e,r.stopPropagation()},r.isImmediatePropagationStopped=t,r.clientX!==null&&r.clientX!==void 0){const s=oe.documentElement,a=oe.body;r.pageX=r.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}r.which=r.charCode||r.keyCode,r.button!==null&&r.button!==void 0&&(r.button=r.button&1?0:r.button&4?1:r.button&2?2:0)}return r.fixed_=!0,r}let Th;const bK=function(){if(typeof Th!="boolean"){Th=!1;try{const r=Object.defineProperty({},"passive",{get(){Th=!0}});U.addEventListener("test",null,r),U.removeEventListener("test",null,r)}catch{}}return Th},TK=["touchstart","touchmove"];function ai(r,e,t){if(Array.isArray(e))return Fp(ai,r,e,t);$r.has(r)||$r.set(r,{});const i=$r.get(r);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=Si()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(n,s){if(i.disabled)return;n=bh(n);const a=i.handlers[n.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!n.isImmediatePropagationStopped();l++)try{o[l].call(r,n,s)}catch(c){qe.error(c)}}}),i.handlers[e].length===1)if(r.addEventListener){let n=!1;bK()&&TK.indexOf(e)>-1&&(n={passive:!0}),r.addEventListener(e,i.dispatcher,n)}else r.attachEvent&&r.attachEvent("on"+e,i.dispatcher)}function wr(r,e,t){if(!$r.has(r))return;const i=$r.get(r);if(!i.handlers)return;if(Array.isArray(e))return Fp(wr,r,e,t);const n=function(a,o){i.handlers[o]=[],mI(a,o)};if(e===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&n(r,a);return}const s=i.handlers[e];if(s){if(!t){n(r,e);return}if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);mI(r,e)}}function mo(r,e,t){const i=$r.has(r)?$r.get(r):{},n=r.parentNode||r.ownerDocument;if(typeof e=="string"?e={type:e,target:r}:e.target||(e.target=r),e=bh(e),i.dispatcher&&i.dispatcher.call(r,e,t),n&&!e.isPropagationStopped()&&e.bubbles===!0)mo.call(null,n,e,t);else if(!n&&!e.defaultPrevented&&e.target&&e.target[e.type]){$r.has(e.target)||$r.set(e.target,{});const s=$r.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function Sh(r,e,t){if(Array.isArray(e))return Fp(Sh,r,e,t);const i=function(){wr(r,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Si(),ai(r,e,i)}function qp(r,e,t){const i=function(){wr(r,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Si(),ai(r,e,i)}var SK=Object.freeze({__proto__:null,fixEvent:bh,on:ai,off:wr,trigger:mo,one:Sh,any:qp});const xi=30,ft=function(r,e,t){e.guid||(e.guid=Si());const i=e.bind(r);return i.guid=t?t+"_"+e.guid:e.guid,i},gn=function(r,e){let t=U.performance.now();return function(...n){const s=U.performance.now();s-t>=e&&(r(...n),t=s)}},gI=function(r,e,t,i=U){let n;const s=()=>{i.clearTimeout(n),n=null},a=function(){const o=this,l=arguments;let u=function(){n=null,u=null,t||r.apply(o,l)};!n&&t&&r.apply(o,l),i.clearTimeout(n),n=i.setTimeout(u,e)};return a.cancel=s,a};var xK=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:xi,bind_:ft,throttle:gn,debounce:gI});let Yl;class oi{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},ai(this,e,t),this.addEventListener=i}off(e,t){wr(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Sh(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},qp(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=bh(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),mo(this,e)}queueTrigger(e){Yl||(Yl=new Map);const t=e.type||e;let i=Yl.get(this);i||(i=new Map,Yl.set(this,i));const n=i.get(t);i.delete(t),U.clearTimeout(n);const s=U.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,Yl.delete(this)),this.trigger(e)},0);i.set(t,s)}}oi.prototype.allowedEvents_={},oi.prototype.addEventListener=oi.prototype.on,oi.prototype.removeEventListener=oi.prototype.off,oi.prototype.dispatchEvent=oi.prototype.trigger;const xh=r=>typeof r.name=="function"?r.name():typeof r.name=="string"?r.name:r.name_?r.name_:r.constructor&&r.constructor.name?r.constructor.name:typeof r,Un=r=>r instanceof oi||!!r.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof r[e]=="function"),wK=(r,e)=>{Un(r)?e():(r.eventedCallbacks||(r.eventedCallbacks=[]),r.eventedCallbacks.push(e))},Bp=r=>typeof r=="string"&&/\S/.test(r)||Array.isArray(r)&&!!r.length,wh=(r,e,t)=>{if(!r||!r.nodeName&&!Un(r))throw new Error(`Invalid target for ${xh(e)}#${t}; must be a DOM node or evented object.`)},vI=(r,e,t)=>{if(!Bp(r))throw new Error(`Invalid event type for ${xh(e)}#${t}; must be a non-empty string or array.`)},yI=(r,e,t)=>{if(typeof r!="function")throw new Error(`Invalid listener for ${xh(e)}#${t}; must be a function.`)},Up=(r,e,t)=>{const i=e.length<3||e[0]===r||e[0]===r.eventBusEl_;let n,s,a;return i?(n=r.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):(n=e[0],s=e[1],a=e[2]),wh(n,r,t),vI(s,r,t),yI(a,r,t),a=ft(r,a),{isTargetingSelf:i,target:n,type:s,listener:a}},Xs=(r,e,t,i)=>{wh(r,r,e),r.nodeName?SK[e](r,t,i):r[e](t,i)},EK={on(...r){const{isTargetingSelf:e,target:t,type:i,listener:n}=Up(this,r,"on");if(Xs(t,"on",i,n),!e){const s=()=>this.off(t,i,n);s.guid=n.guid;const a=()=>this.off("dispose",s);a.guid=n.guid,Xs(this,"on","dispose",s),Xs(t,"on","dispose",a)}},one(...r){const{isTargetingSelf:e,target:t,type:i,listener:n}=Up(this,r,"one");if(e)Xs(t,"one",i,n);else{const s=(...a)=>{this.off(t,i,s),n.apply(null,a)};s.guid=n.guid,Xs(t,"one",i,s)}},any(...r){const{isTargetingSelf:e,target:t,type:i,listener:n}=Up(this,r,"any");if(e)Xs(t,"any",i,n);else{const s=(...a)=>{this.off(t,i,s),n.apply(null,a)};s.guid=n.guid,Xs(t,"any",i,s)}},off(r,e,t){if(!r||Bp(r))wr(this.eventBusEl_,r,e);else{const i=r,n=e;wh(i,this,"off"),vI(n,this,"off"),yI(t,this,"off"),t=ft(this,t),this.off("dispose",t),i.nodeName?(wr(i,n,t),wr(i,"dispose",t)):Un(i)&&(i.off(n,t),i.off("dispose",t))}},trigger(r,e){wh(this.eventBusEl_,this,"trigger");const t=r&&typeof r!="string"?r.type:r;if(!Bp(t))throw new Error(`Invalid event type for ${xh(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return mo(this.eventBusEl_,r,e)}};function jp(r,e={}){const{eventBusKey:t}=e;if(t){if(!r[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);r.eventBusEl_=r[t]}else r.eventBusEl_=De("span",{className:"vjs-event-bus"});return Object.assign(r,EK),r.eventedCallbacks&&r.eventedCallbacks.forEach(i=>{i()}),r.on("dispose",()=>{r.off(),[r,r.el_,r.eventBusEl_].forEach(function(i){i&&$r.has(i)&&$r.delete(i)}),U.setTimeout(()=>{r.eventBusEl_=null},0)}),r}const CK={state:{},setState(r){typeof r=="function"&&(r=r());let e;return so(r,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&Un(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function _I(r,e){return Object.assign(r,CK),r.state=Object.assign({},r.state,e),typeof r.handleStateChanged=="function"&&Un(r)&&r.on("statechanged",r.handleStateChanged),r}const Kl=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toLowerCase())},Lt=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},bI=function(r,e){return Lt(r)===Lt(e)};var DK=Object.freeze({__proto__:null,toLowerCase:Kl,toTitleCase:Lt,titleCaseEquals:bI});class re{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=at({},this.options_),t=this.options_=at(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const n=e&&e.id&&e.id()||"no_player";this.id_=`${n}_component_${Si()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(n=>this.addClass(n)),["on","off","one","any","trigger"].forEach(n=>{this[n]=void 0}),t.evented!==!1&&(jp(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),_I(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=at(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return De(e,t,i)}localize(e,t,i=e){const n=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[n],o=n&&n.split("-")[0],l=s&&s[o];let u=i;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,h){const f=t[h-1];let p=f;return typeof f>"u"&&(p=c),p})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,n)=>i.concat(n),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",n=De("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=oe.createElementNS(i,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=oe.createElementNS(i,"use");return s.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),n.appendChild(s),this.iconIsSet_?t.replaceChild(n,t.querySelector(".vjs-icon-placeholder")):t.appendChild(n),this.iconIsSet_=!0,n}addChild(e,t={},i=this.children_.length){let n,s;if(typeof e=="string"){s=Lt(e);const a=t.componentClass||s;t.name=s;const o=re.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;n=new o(this.player_||this,t)}else n=e;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(i,0,n),n.parentComponent_=this,typeof n.id=="function"&&(this.childIndex_[n.id()]=n),s=s||n.name&&Lt(n.name()),s&&(this.childNameIndex_[s]=n,this.childNameIndex_[Kl(s)]=n),typeof n.el=="function"&&n.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:co(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(n.el(),a)}return n}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Lt(e.name())]=null,this.childNameIndex_[Kl(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let n;const s=re.getComponent("Tech");Array.isArray(e)?n=e:n=Object.keys(e),n.concat(Object.keys(this.options_).filter(function(a){return!n.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=re.getComponent(a.opts.componentClass||Lt(a.name));return o&&!s.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return bs(e,t||this.contentEl())}$$(e,t){return uI(e,t||this.contentEl())}hasClass(e){return Gl(this.el_,e)}addClass(...e){Ks(this.el_,...e)}removeClass(...e){gh(this.el_,...e)}toggleClass(e,t){tI(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return iI(this.el_,e)}setAttribute(e,t){ho(this.el_,e,t)}removeAttribute(e){vh(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const n=this.el_.style[e],s=n.indexOf("px");return parseInt(s!==-1?n.slice(0,s):this.el_["offset"+Lt(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=po(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const i=`offset${Lt(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,n=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=U.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>i&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,s===!0&&U.performance.now()-e<n&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=ft(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const i=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=ft(this,e),this.clearTimersOnDispose_(),i=U.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),U.clearTimeout(e)),e}setInterval(e,t){e=ft(this,e),this.clearTimersOnDispose_();const i=U.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),U.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=ft(this,e),t=U.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=ft(this,t);const i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),U.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,n)=>this[t](n))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(s){const a=U.getComputedStyle(s,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function i(s){return!(!t(s.parentElement)||!t(s)||s.style.opacity==="0"||U.getComputedStyle(s).height==="0px"||U.getComputedStyle(s).width==="0px")}function n(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const a={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(a.x<0||a.x>(oe.documentElement.clientWidth||U.innerWidth)||a.y<0||a.y>(oe.documentElement.clientHeight||U.innerHeight))return!1;let o=oe.elementFromPoint(a.x,a.y);for(;o;){if(o===s)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(n(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=re.getComponent("Tech"),n=i&&i.isTech(t),s=re===t||re.prototype.isPrototypeOf(t.prototype);if(n||!s){let o;throw n?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Lt(e),re.components_||(re.components_={});const a=re.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0){for(let u=0;u<l.length;u++)if(o[l[u]]!==null)throw new Error("Can not register Player component after player has been created.")}}return re.components_[e]=t,re.components_[Kl(e)]=t,t}static getComponent(e){if(!(!e||!re.components_))return re.components_[e]}}re.registerComponent("Component",re);function IK(r,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${r}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function TI(r,e,t,i){return IK(r,i,t.length-1),t[i][e]}function Hp(r){let e;return r===void 0||r.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:r.length,start:TI.bind(null,"start",0,r),end:TI.bind(null,"end",1,r)},U.Symbol&&U.Symbol.iterator&&(e[U.Symbol.iterator]=()=>(r||[]).values()),e}function zi(r,e){return Array.isArray(r)?Hp(r):r===void 0||e===void 0?Hp():Hp([[r,e]])}const SI=function(r,e){r=r<0?0:r;let t=Math.floor(r%60),i=Math.floor(r/60%60),n=Math.floor(r/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(r)||r===1/0)&&(n=i=t="-"),n=n>0||a>0?n+":":"",i=((n||s>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,n+i+t};let Vp=SI;function xI(r){Vp=r}function wI(){Vp=SI}function Qs(r,e=r){return Vp(r,e)}var AK=Object.freeze({__proto__:null,createTimeRanges:zi,createTimeRange:zi,setFormatTime:xI,resetFormatTime:wI,formatTime:Qs});function EI(r,e){let t=0,i,n;if(!e)return 0;(!r||!r.length)&&(r=zi(0,0));for(let s=0;s<r.length;s++)i=r.start(s),n=r.end(s),n>e&&(n=e),t+=n-i;return t/e}function kt(r){if(r instanceof kt)return r;typeof r=="number"?this.code=r:typeof r=="string"?this.message=r:pn(r)&&(typeof r.code=="number"&&(this.code=r.code),Object.assign(this,r)),this.message||(this.message=kt.defaultMessages[this.code]||"")}kt.prototype.code=0,kt.prototype.message="",kt.prototype.status=null,kt.prototype.metadata=null,kt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],kt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."},kt.MEDIA_ERR_CUSTOM=0,kt.prototype.MEDIA_ERR_CUSTOM=0,kt.MEDIA_ERR_ABORTED=1,kt.prototype.MEDIA_ERR_ABORTED=1,kt.MEDIA_ERR_NETWORK=2,kt.prototype.MEDIA_ERR_NETWORK=2,kt.MEDIA_ERR_DECODE=3,kt.prototype.MEDIA_ERR_DECODE=3,kt.MEDIA_ERR_SRC_NOT_SUPPORTED=4,kt.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4,kt.MEDIA_ERR_ENCRYPTED=5,kt.prototype.MEDIA_ERR_ENCRYPTED=5;function Xl(r){return r!=null&&typeof r.then=="function"}function vn(r){Xl(r)&&r.then(null,e=>{})}const Gp=function(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,n)=>(r[i]&&(t[i]=r[i]),t),{cues:r.cues&&Array.prototype.map.call(r.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})};var Wp={textTracksToJson:function(r){const e=r.$$("track"),t=Array.prototype.map.call(e,n=>n.track);return Array.prototype.map.call(e,function(n){const s=Gp(n.track);return n.src&&(s.src=n.src),s}).concat(Array.prototype.filter.call(r.textTracks(),function(n){return t.indexOf(n)===-1}).map(Gp))},jsonToTextTracks:function(r,e){return r.forEach(function(t){const i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(n=>i.addCue(n))}),e.textTracks()},trackToJson:Gp};const zp="vjs-modal-dialog";class go extends re{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=De("div",{className:`${zp}-content`},{role:"document"}),this.descEl_=De("p",{className:`${zp}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),ys(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${zp} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const n=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,n=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),lI(t,e),this.trigger("modalfill"),n?i.insertBefore(t,n):i.appendChild(t);const s=this.getChild("closeButton");s&&i.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),_h(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=oe.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let n;for(let s=0;s<t.length;s++)if(i===t[s]){n=s;break}oe.activeElement===this.el_&&(n=0),e.shiftKey&&n===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&n===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof U.HTMLAnchorElement||t instanceof U.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof U.HTMLInputElement||t instanceof U.HTMLSelectElement||t instanceof U.HTMLTextAreaElement||t instanceof U.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof U.HTMLIFrameElement||t instanceof U.HTMLObjectElement||t instanceof U.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}go.prototype.options_={pauseOnOpen:!0,temporary:!0},re.registerComponent("ModalDialog",go);class Zs extends oi{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Un(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,n=this.length;i<n;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,n=this.length;i<n;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}Zs.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const r in Zs.prototype.allowedEvents_)Zs.prototype["on"+r]=null;const Yp=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].enabled=!1)};class CI extends Zs{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Yp(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Yp(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Yp(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const Kp=function(r,e){for(let t=0;t<r.length;t++)!Object.keys(r[t]).length||e.id===r[t].id||(r[t].selected=!1)};class DI extends Zs{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Kp(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Kp(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Kp(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class Xp extends Zs{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(e=>e.toJSON())}}class OK{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,n=this.trackElements_.length;i<n;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class Eh{constructor(e){Eh.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const n=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<n)for(i=t;i<n;i++)s.call(this,i)}getCueById(e){let t=null;for(let i=0,n=this.length;i<n;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}const PK={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},RK={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},kK={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},II={disabled:"disabled",hidden:"hidden",showing:"showing"};class Qp extends oi{constructor(e={}){super();const t={id:e.id||"vjs_track_"+Si(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const n in t)Object.defineProperty(this,n,{get(){return t[n]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(n){n!==i&&(i=n,this.trigger("labelchange"))}})}}const Zp=function(r){return new URL(r,oe.baseURI)},AI=function(r){return new URL(r,oe.baseURI).href},Jp=function(r){if(typeof r=="string"){const t=r.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return t?t[1].toLowerCase():""}return""},Ch=function(r,e=U.location){return Zp(r).origin!==e.origin};var MK=Object.freeze({__proto__:null,parseUrl:Zp,getAbsoluteURL:AI,getFileExtension:Jp,isCrossOrigin:Ch});const OI=function(r,e){const t=new U.WebVTT.Parser(U,U.vttjs,U.WebVTT.StringDecoder()),i=[];t.oncue=function(n){e.addCue(n)},t.onparsingerror=function(n){i.push(n)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(r),i.length>0&&(U.console&&U.console.groupCollapsed&&U.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(n=>qe.error(n)),U.console&&U.console.groupEnd&&U.console.groupEnd()),t.flush()},PI=function(r,e){const t={uri:r},i=Ch(r);i&&(t.cors=i);const n=e.tech_.crossOrigin()==="use-credentials";n&&(t.withCredentials=n),ZC(t,ft(this,function(s,a,o){if(s)return qe.error(s,a);e.loaded_=!0,typeof U.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){qe.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return OI(o,e)}):OI(o,e)}))};class Ql extends Qp{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=at(e,{kind:kK[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=II[t.mode]||"disabled";const n=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new Eh(this.cues_),a=new Eh(this.activeCues_);let o=!1;this.timeupdateHandler=ft(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return n},set(){}},mode:{get(){return i},set(u){II[u]&&i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&PI(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let h=0,f=this.cues.length;h<f;h++){const p=this.cues[h];p.startTime<=u&&p.endTime>=u&&c.push(p)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let h=0;h<c.length;h++)this.activeCues_.indexOf(c[h])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&PI(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new U.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const n in e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let n=0;n<i.length;n++)i[n]!==this&&i[n].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}toJSON(){return Wp.trackToJson(this)}removeCue(e){let t=this.cues_.length;for(;t--;){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}Ql.prototype.allowedEvents_={cuechange:"cuechange"};class RI extends Qp{constructor(e={}){const t=at(e,{kind:RK[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(n){typeof n!="boolean"||n===i||(i=n,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class kI extends Qp{constructor(e={}){const t=at(e,{kind:PK[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(n){typeof n!="boolean"||n===i||(i=n,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class jn extends oi{constructor(e={}){super();let t;const i=new Ql(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=jn.NONE,i.addEventListener("loadeddata",()=>{t=jn.LOADED,this.trigger({type:"load",target:this})})}}jn.prototype.allowedEvents_={load:"load"},jn.NONE=0,jn.LOADING=1,jn.LOADED=2,jn.ERROR=3;const wi={audio:{ListClass:CI,TrackClass:RI,capitalName:"Audio"},video:{ListClass:DI,TrackClass:kI,capitalName:"Video"},text:{ListClass:Xp,TrackClass:Ql,capitalName:"Text"}};Object.keys(wi).forEach(function(r){wi[r].getterName=`${r}Tracks`,wi[r].privateName=`${r}Tracks_`});const vo={remoteText:{ListClass:Xp,TrackClass:Ql,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:OK,TrackClass:jn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Nr=Object.assign({},wi,vo);vo.names=Object.keys(vo),wi.names=Object.keys(wi),Nr.names=[].concat(vo.names).concat(wi.names);function $K(r,e,t,i,n={}){const s=r.textTracks();n.kind=e,t&&(n.label=t),i&&(n.language=i),n.tech=r;const a=new Nr.text.TrackClass(n);return s.addTrack(a),a}class Me extends re{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Nr.names.forEach(i=>{const n=Nr[i];e&&e[n.getterName]&&(this[n.privateName]=e[n.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Nr.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ft(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return zi(0,0)}bufferedPercent(){return EI(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(wi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const i=this[`${t}Tracks`]()||[];let n=i.length;for(;n--;){const s=i[n];t==="text"&&this.removeRemoteTextTrack(s),i.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new kt(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?zi(0,0):zi()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){wi.names.forEach(e=>{const t=wi[e],i=()=>{this.trigger(`${e}trackchange`)},n=this[t.getterName]();n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),this.on("dispose",()=>{n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!U.WebVTT)if(oe.body.contains(this.el())){if(!this.options_["vtt.js"]&&ao(iD)&&Object.keys(iD).length>0){this.trigger("vttjsloaded");return}const e=oe.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),U.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),n=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",n),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",n),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return $K(this,e,t,i)}createRemoteTextTrack(e){const t=at(e,{tech:this});return new vo.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=Si();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Me.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Me||e instanceof Me||e===Me}static registerTech(e,t){if(Me.techs_||(Me.techs_={}),!Me.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Me.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Me.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Lt(e),Me.techs_[e]=t,Me.techs_[Kl(e)]=t,e!=="Tech"&&Me.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Me.techs_&&Me.techs_[e])return Me.techs_[e];if(e=Lt(e),U&&U.videojs&&U.videojs[e])return qe.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),U.videojs[e]}}}Nr.names.forEach(function(r){const e=Nr[r];Me.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),Me.prototype.featuresVolumeControl=!0,Me.prototype.featuresMuteControl=!0,Me.prototype.featuresFullscreenResize=!1,Me.prototype.featuresPlaybackRate=!1,Me.prototype.featuresProgressEvents=!1,Me.prototype.featuresSourceset=!1,Me.prototype.featuresTimeupdateEvents=!1,Me.prototype.featuresNativeTextTracks=!1,Me.prototype.featuresVideoFrameCallback=!1,Me.withSourceHandlers=function(r){r.registerSourceHandler=function(t,i){let n=r.sourceHandlers;n||(n=r.sourceHandlers=[]),i===void 0&&(i=n.length),n.splice(i,0,t)},r.canPlayType=function(t){const i=r.sourceHandlers||[];let n;for(let s=0;s<i.length;s++)if(n=i[s].canPlayType(t),n)return n;return""},r.selectSourceHandler=function(t,i){const n=r.sourceHandlers||[];let s;for(let a=0;a<n.length;a++)if(s=n[a].canHandleSource(t,i),s)return n[a];return null},r.canPlaySource=function(t,i){const n=r.selectSourceHandler(t,i);return n?n.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){const i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(t){let i=r.selectSourceHandler(t,this.options_);i||(r.nativeSourceHandler?i=r.nativeSourceHandler:qe.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==r.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},re.registerComponent("Tech",Me),Me.registerTech("Tech",Me),Me.defaultTechOrder_=[];const Js={},Dh={},Ih={};function NK(r,e){Js[r]=Js[r]||[],Js[r].push(e)}function LK(r,e,t){r.setTimeout(()=>ea(e,Js[e.type],t,r),1)}function FK(r,e){r.forEach(t=>t.setTech&&t.setTech(e))}function qK(r,e,t){return r.reduceRight(em(t),e[t]())}function BK(r,e,t,i){return e[t](r.reduce(em(t),i))}function MI(r,e,t,i=null){const n="call"+Lt(t),s=r.reduce(em(n),i),a=s===Ih,o=a?null:e[t](s);return HK(r,t,o,a),o}const UK={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},jK={setCurrentTime:1,setMuted:1,setVolume:1},$I={play:1,pause:1};function em(r){return(e,t)=>e===Ih?Ih:t[r]?t[r](e):e}function HK(r,e,t,i){for(let n=r.length-1;n>=0;n--){const s=r[n];s[e]&&s[e](i,t)}}function VK(r){Dh.hasOwnProperty(r.id())&&delete Dh[r.id()]}function GK(r,e){const t=Dh[r.id()];let i=null;if(t==null)return i=e(r),Dh[r.id()]=[[e,i]],i;for(let n=0;n<t.length;n++){const[s,a]=t[n];s===e&&(i=a)}return i===null&&(i=e(r),t.push([e,i])),i}function ea(r={},e=[],t,i,n=[],s=!1){const[a,...o]=e;if(typeof a=="string")ea(r,Js[a],t,i,n,s);else if(a){const l=GK(i,a);if(!l.setSource)return n.push(l),ea(r,o,t,i,n,s);l.setSource(Object.assign({},r),function(u,c){if(u)return ea(r,o,t,i,n,s);n.push(l),ea(c,r.type===c.type?o:Js[c.type],t,i,n,s)})}else o.length?ea(r,o,t,i,n,s):s?t(r,n):ea(r,Js["*"],t,i,n,!0)}const WK={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Ah=function(r=""){const e=Jp(r);return WK[e.toLowerCase()]||""},zK=(r,e)=>{if(!e)return"";if(r.cache_.source.src===e&&r.cache_.source.type)return r.cache_.source.type;const t=r.cache_.sources.filter(n=>n.src===e);if(t.length)return t[0].type;const i=r.$$("source");for(let n=0;n<i.length;n++){const s=i[n];if(s.type&&s.src&&s.src===e)return s.type}return Ah(e)},NI=function(r){if(Array.isArray(r)){let e=[];r.forEach(function(t){t=NI(t),Array.isArray(t)?e=e.concat(t):pn(t)&&e.push(t)}),r=e}else typeof r=="string"&&r.trim()?r=[LI({src:r})]:pn(r)&&typeof r.src=="string"&&r.src&&r.src.trim()?r=[LI(r)]:r=[];return r};function LI(r){if(!r.type){const e=Ah(r.src);e&&(r.type=e)}return r}var YK=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const FI=dh?10009:fh?461:8,yo={codes:{play:415,pause:19,ff:417,rw:412,back:FI},names:{415:"play",19:"pause",417:"ff",412:"rw",[FI]:"back"},isEventKey(r,e){return e=e.toLowerCase(),!!(this.names[r.keyCode]&&this.names[r.keyCode]===e)},getEventName(r){if(this.names[r.keyCode])return this.names[r.keyCode];if(this.codes[r.code]){const e=this.codes[r.code];return this.names[e]}return null}},qI=5;class KK extends oi{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const i=t.key.substring(5).toLowerCase();this.move(i)}else if(yo.isEventKey(t,"play")||yo.isEventKey(t,"pause")||yo.isEventKey(t,"ff")||yo.isEventKey(t,"rw")){t.preventDefault();const i=yo.getEventName(t);this.performMediaAction_(i)}else yo.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+qI);break;case"rw":this.userSeek_(this.player_.currentTime()-qI);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let i=null;const n=this.getCurrentComponent(e.target);t&&(i=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!t)&&(n&&n.name()==="CloseButton"?this.refocusComponent():(this.pause(),n&&n.el()&&(this.lastFocusedComponent_=n)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function i(n){for(const s of n)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&t.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&i(s.children_)}return e.children_.forEach(n=>{if(n.hasOwnProperty("el_"))if(n.getIsFocusable&&n.getIsAvailableToBeFocused&&n.getIsFocusable()&&n.getIsAvailableToBeFocused(n.el())){t.push(n);return}else n.hasOwnProperty("children_")&&n.children_.length>0?i(n.children_):n.hasOwnProperty("items")&&n.items.length>0?i(n.items):this.findSuitableDOMChild(n)&&t.push(n);if(n.name_==="ErrorDisplay"&&n.opened_){const s=n.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},h={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:h}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let n=0;n<i.children.length;n++){const s=i.children[n],a=t(s);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===t)return i}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const i=t.getPositions(),n=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(i.boundingClientRect,a.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(i.center,n,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,i){let n=1/0,s=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,i);l<n&&(n=l,s=a)}return s}isInDirection_(e,t,i){switch(i){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,i){const n=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);let a;switch(i){case"right":case"left":a=n+s*100;break;case"up":a=s*2+n*.5;break;case"down":a=s*5+n;break;default:a=n+s}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}class XK extends re{constructor(e,t,i){const n=at({createEl:!1},t);if(super(e,n,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const o=Lt(a[s]);let l=Me.getTech(o);if(o||(l=re.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}}re.registerComponent("MediaLoader",XK);class Oh extends re{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&qe.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const n=De(e,t,i);return this.player_.options_.experimentalSvgIcons||n.appendChild(De("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=De("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,ys(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}re.registerComponent("ClickableComponent",Oh);class tm extends Oh{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return De("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(De("picture",{className:"vjs-poster",tabIndex:-1},{},De("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?vn(this.player_.play()):this.player_.pause())}}tm.prototype.crossorigin=tm.prototype.crossOrigin,re.registerComponent("PosterImage",tm);const Ei="#222",BI="#ccc",QK={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function rm(r,e){let t;if(r.length===4)t=r[1]+r[1]+r[2]+r[2]+r[3]+r[3];else if(r.length===7)t=r.slice(1);else throw new Error("Invalid color code provided, "+r+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function yn(r,e,t){try{r.style[e]=t}catch{return}}function UI(r){return r?`${r}px`:""}class ZK extends re{constructor(e,t,i){super(e,t,i);const n=a=>this.updateDisplay(a),s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("useractive",n),e.on("userinactive",n),e.on("texttrackchange",n),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(ft(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const a=U.screen.orientation||U,o=U.screen.orientation?"change":"orientationchange";a.addEventListener(o,s),e.on("dispose",()=>a.removeEventListener(o,s));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let n,s,a;for(let o=0;o<t.length;o++){const l=t[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,n=null,s=null):l.default&&(l.kind==="descriptions"&&!n?n=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":n&&(n.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof U.WebVTT=="function"&&U.WebVTT.processCues(U,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,n=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?i=a:n=a)}if(n?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!U.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",yn(a,"position","relative"),yn(a,"height",u-l+"px"),yn(a,"top","unset"),ph?yn(a,"bottom",u+"px"):yn(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const h=c.style.inset.split(" ");h.length===3&&Object.assign(c.style,{top:h[0],right:h[1],bottom:h[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!U.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,n=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(i-n)>.1&&(i>n?s=Math.round((e-t*n)/2):a=Math.round((t-e/n)/2)),yn(this.el_,"insetInline",UI(s)),yn(this.el_,"insetBlock",UI(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let n=i.length;for(;n--;){const s=i[n];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&yn(a.firstChild,"color",rm(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&yn(a.firstChild,"backgroundColor",rm(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?yn(a,"backgroundColor",rm(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Ei}, 2px 2px 4px ${Ei}, 2px 2px 5px ${Ei}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Ei}, 2px 2px ${Ei}, 3px 3px ${Ei}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${BI}, 0 1px ${BI}, -1px -1px ${Ei}, 0 -1px ${Ei}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Ei}, 0 0 4px ${Ei}, 0 0 4px ${Ei}, 0 0 4px ${Ei}`)),t.fontPercent&&t.fontPercent!==1){const o=U.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=QK[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof U.WebVTT!="function"||e.every(i=>!i.activeCues))return;const t=[];for(let i=0;i<e.length;++i){const n=e[i];for(let s=0;s<n.activeCues.length;++s)t.push(n.activeCues[s])}U.WebVTT.processCues(U,t,this.el_);for(let i=0;i<e.length;++i){const n=e[i];for(let s=0;s<n.activeCues.length;++s){const a=n.activeCues[s].displayState;Ks(a,"vjs-text-track-cue","vjs-text-track-cue-"+(n.language?n.language:i)),n.language&&ho(a,"lang",n.language)}this.player_.textTrackSettings&&this.updateDisplayState(n)}}}re.registerComponent("TextTrackDisplay",ZK);class JK extends re{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=De("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),n=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(i),n}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}re.registerComponent("LoadingSpinner",JK);class Er extends Oh{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const n=De(e,t,i);return this.player_.options_.experimentalSvgIcons||n.appendChild(De("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(n),n}addChild(e,t={}){const i=this.constructor.name;return qe.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),re.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}re.registerComponent("Button",Er);class jI extends Er{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(e.type==="tap"||this.mouseused_&&"clientX"in e&&"clientY"in e){vn(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),n=i&&i.getChild("playToggle");if(!n){this.player_.tech(!0).focus();return}const s=()=>n.focus();Xl(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}jI.prototype.controlText_="Play Video",re.registerComponent("BigPlayButton",jI);class eX extends Er{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}re.registerComponent("CloseButton",eX);class HI extends Er{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?vn(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}HI.prototype.controlText_="Play",re.registerComponent("PlayToggle",HI);class _o extends re{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=De("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return t.appendChild(i),this.contentEl_=De("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Qs(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,qe.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=oe.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}_o.prototype.labelText_="Time",_o.prototype.controlText_="Time",re.registerComponent("TimeDisplay",_o);class im extends _o{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():e&&e.target&&typeof e.target.pendingSeekTime=="function"?t=e.target.pendingSeekTime():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}im.prototype.labelText_="Current Time",im.prototype.controlText_="Current Time",re.registerComponent("CurrentTimeDisplay",im);class nm extends _o{constructor(e,t){super(e,t);const i=n=>this.updateContent(n);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}nm.prototype.labelText_="Duration",nm.prototype.controlText_="Duration",re.registerComponent("DurationDisplay",nm);class tX extends re{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}re.registerComponent("TimeDivider",tX);class sm extends _o{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(De("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}sm.prototype.labelText_="Remaining Time",sm.prototype.controlText_="Remaining Time",re.registerComponent("RemainingTimeDisplay",sm);class rX extends re{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=De("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(De("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(oe.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}re.registerComponent("LiveDisplay",rX);class VI extends Er{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=De("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}VI.prototype.controlText_="Seek to live, currently playing live",re.registerComponent("SeekToLive",VI);function Zl(r,e,t){return r=Number(r),Math.min(t,Math.max(e,isNaN(r)?e:r))}var iX=Object.freeze({__proto__:null,clamp:Zl});class am extends re{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!mn&&e.preventDefault(),nI(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;sI(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Zl(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=yh(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,i=t&&t.enabled,n=t&&t.horizontalSeek;i?n&&e.key==="ArrowLeft"||!n&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):n&&e.key==="ArrowRight"||!n&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(e)):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}re.registerComponent("Slider",am);const om=(r,e)=>Zl(r/e*100,0,100).toFixed(2)+"%";class nX extends re{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=De("span",{className:"vjs-control-text"}),i=De("span",{textContent:this.localize("Loaded")}),n=oe.createTextNode(": ");return this.percentageEl_=De("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,i=this.player_.buffered(),n=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=om(s,n);this.percent_!==o&&(this.el_.style.width=o,ys(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){const u=i.start(l),c=i.end(l);let h=a[l];h||(h=this.el_.appendChild(De()),a[l]=h),!(h.dataset.start===u&&h.dataset.end===c)&&(h.dataset.start=u,h.dataset.end=c,h.style.left=om(u,s),h.style.width=om(c-u,s))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}}re.registerComponent("LoadProgressBar",nX);class sX extends re{constructor(e,t){super(e,t),this.update=gn(ft(this,this.update),xi)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const n=Wl(this.el_),s=fo(this.player_.el()),a=e.width*t;if(!s||!n)return;let o=e.left-s.left+a,l=e.width-a+(s.right-e.right);l||(l=e.width-a,o=a);let u=n.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>n.width&&(u=n.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){ys(this.el_,e)}updateTime(e,t,i,n){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+Qs(l,o)}else s=Qs(i,a);this.update(e,t,s),n&&n()})}}re.registerComponent("TimeTooltip",sX);class lm extends re{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=gn(ft(this,this.update),xi)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t,i){const n=this.getChild("timeTooltip");if(!n)return;const s=i&&i.target&&typeof i.target.pendingSeekTime=="function"?i.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,s)}}lm.prototype.options_={children:[]},!xr&&!Wi&&lm.prototype.options_.children.push("timeTooltip"),re.registerComponent("PlayProgressBar",lm);class GI extends re{constructor(e,t){super(e,t),this.update=gn(ft(this,this.update),xi)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}}GI.prototype.options_={children:["timeTooltip"]},re.registerComponent("MouseTimeDisplay",GI);class Ph extends am{constructor(e,t){t=at(Ph.prototype.options_,t),t.children=[...t.children];const i=e.options_.disableSeekWhileScrubbingOnMobile&&(xr||Wi)||e.options_.disableSeekWhileScrubbingOnSTV;(!xr&&!Wi||i)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbing_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=ft(this,this.update),this.update=gn(this.update_,xi),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in oe&&"visibilityState"in oe&&this.on(oe,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){oe.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,xi))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(oe.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),n=this.player_.liveTracker;let s=this.player_.duration();n&&n.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Qs(i,s),Qs(s,s)],"{1} of {2}")),this.currentTime_=i,this.duration_=s),this.bar&&this.bar.update(fo(this.el()),this.getProgress(),e)}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(e){if(e!==void 0)if(e!==null){const t=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(e,t))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){zl(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!zl(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const n=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())i=n*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(n>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(i=a+n*s.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(i):this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?vn(this.player_.play()):this.update_()}handlePendingSeek_(e){this.player_.paused()||this.player_.pause();const t=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(t+e),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(e){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const i=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in oe&&"visibilityState"in oe&&this.off(oe,"visibilitychange",this.toggleVisibility_),super.dispose()}}Ph.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12},re.registerComponent("SeekBar",Ph);class WI extends re{constructor(e,t){super(e,t),this.handleMouseMove=gn(ft(this,this.handleMouseMove),xi),this.throttledHandleMouseSeek=gn(ft(this,this.handleMouseSeek),xi),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),n=t.getChild("mouseTimeDisplay");if(!i&&!n)return;const s=t.el(),a=Wl(s);let o=yh(s,e).x;o=Zl(o,0,1),n&&n.update(a,o),i&&i.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&vn(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}WI.prototype.options_={children:["seekBar"]},re.registerComponent("ProgressControl",WI);class zI extends Er{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){oe.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in U?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof oe.exitPictureInPicture=="function"&&super.show()}}zI.prototype.controlText_="Picture-in-Picture",re.registerComponent("PictureInPictureToggle",zI);class YI extends Er{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),oe[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}YI.prototype.controlText_="Fullscreen",re.registerComponent("FullscreenToggle",YI);const aX=function(r,e){e.tech_&&!e.tech_.featuresVolumeControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};class oX extends re{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}re.registerComponent("VolumeLevel",oX);class lX extends re{constructor(e,t){super(e,t),this.update=gn(ft(this,this.update),xi)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,n){if(!i){const s=fo(this.el_),a=fo(this.player_.el()),o=e.width*t;if(!a||!s)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=s.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>s.width&&(c=s.width),this.el_.style.right=`-${c}px`}this.write(`${n}%`)}write(e){ys(this.el_,e)}updateVolume(e,t,i,n,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,n.toFixed(0)),s&&s()})}}re.registerComponent("VolumeLevelTooltip",lX);class KI extends re{constructor(e,t){super(e,t),this.update=gn(ft(this,this.update),xi)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const n=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,n,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}KI.prototype.options_={children:["volumeLevelTooltip"]},re.registerComponent("MouseVolumeLevelDisplay",KI);class Rh extends am{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){zl(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),n=fo(i),s=this.vertical();let a=yh(i,e);a=s?a.y:a.x,a=Zl(a,0,1),t.update(n,a,s)}zl(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}Rh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!xr&&!Wi&&Rh.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Rh.prototype.playerEvent="volumechange",re.registerComponent("VolumeBar",Rh);class XI extends re{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||ao(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),aX(this,e),this.throttledHandleMouseMove=gn(ft(this,this.handleMouseMove),xi),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}XI.prototype.options_={children:["volumeBar"]},re.registerComponent("VolumeControl",XI);const uX=function(r,e){e.tech_&&!e.tech_.featuresMuteControl&&r.addClass("vjs-hidden"),r.on(e,"loadstart",function(){e.tech_.featuresMuteControl?r.removeClass("vjs-hidden"):r.addClass("vjs-hidden")})};class QI extends Er{constructor(e,t){super(e,t),uX(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){const n=i<.1?.1:i;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),xr&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),gh(this.el_,[0,1,2,3].reduce((i,n)=>i+`${n?" ":""}vjs-vol-${n}`,"")),Ks(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}QI.prototype.controlText_="Mute",re.registerComponent("MuteToggle",QI);class ZI extends re{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||ao(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),ai(oe,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),wr(oe,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}ZI.prototype.options_={children:["muteToggle","volumeControl"]},re.registerComponent("VolumePanel",ZI);class JI extends Er{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()?i.seekableEnd():this.player_.duration();let s;t+this.skipTime<=n?s=t+this.skipTime:s=n,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}JI.prototype.controlText_="Skip Forward",re.registerComponent("SkipForward",JI);class eA extends Er{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,n=i&&i.isLive()&&i.seekableStart();let s;n&&t-this.skipTime<=n?s=n:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}eA.prototype.controlText_="Skip Backward",re.registerComponent("SkipBackward",eA);class tA extends re{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof re&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof re&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=De(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),ai(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||oe.activeElement;if(!this.children().some(i=>i.el()===t)){const i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter(n=>n.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}re.registerComponent("Menu",tA);class um extends re{constructor(e,t={}){super(e,t),this.menuButton_=new Er(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Er.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const n=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",n),this.on(this.menuButton_,"click",n),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),ai(oe,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new tA(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=De("li",{className:"vjs-menu-title",textContent:Lt(this.options_.title),tabIndex:-1}),i=new re(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=Er.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),wr(oe,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),xr&&JD())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}re.registerComponent("MenuButton",um);class cm extends um{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const n=ft(this,this.update);i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),i.addEventListener("labelchange",n),this.player_.on("ready",n),this.player_.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n),i.removeEventListener("labelchange",n)})}}re.registerComponent("TrackButton",cm);class Jl extends Oh{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const n=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),s=De("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?n.appendChild(s):n.replaceChild(s,n.querySelector(".vjs-icon-placeholder")),n}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}re.registerComponent("MenuItem",Jl);class eu extends Jl{constructor(e,t){const i=t.track,n=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),n.addEventListener("change",s),n.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),n.removeEventListener("change",s),n.removeEventListener("selectedlanguagechange",a)}),n.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof U.Event!="object")try{o=new U.Event("change")}catch{}o||(o=oe.createEvent("Event"),o.initEvent("change",!0,!0)),n.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let n=0;n<i.length;n++){const s=i[n];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}re.registerComponent("TextTrackMenuItem",eu);class rA extends eu{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let n=0,s=t.length;n<s;n++){const a=t[n];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let n=0,s=t.length;n<s;n++){const a=t[n];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}re.registerComponent("OffTextTrackMenuItem",rA);class bo extends cm{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=eu){let i;this.label_&&(i=`${this.label_} off`),e.push(new rA(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const n=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<n.length;s++){const a=n[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}re.registerComponent("TextTrackButton",bo);class iA extends Jl{constructor(e,t){const i=t.track,n=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=n.text,t.selected=n.startTime<=s&&s<n.endTime,super(e,t),this.track=i,this.cue=n}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}re.registerComponent("ChaptersTrackMenuItem",iA);class hm extends bo{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(n=>{n.selected(this.track_.activeCues[0]===n.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Lt(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,n=t.length;i<n;i++){const s=t[i],a=new iA(this.player_,{track:this.track_,cue:s});e.push(a)}return e}}hm.prototype.kind_="chapters",hm.prototype.controlText_="Chapters",re.registerComponent("ChaptersButton",hm);class dm extends bo{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");const n=e.textTracks(),s=ft(this,this.handleTracksChange);n.addEventListener("change",s),this.on("dispose",function(){n.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let n=0,s=t.length;n<s;n++){const a=t[n];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}dm.prototype.kind_="descriptions",dm.prototype.controlText_="Descriptions",re.registerComponent("DescriptionsButton",dm);class fm extends bo{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}fm.prototype.kind_="subtitles",fm.prototype.controlText_="Subtitles",re.registerComponent("SubtitlesButton",fm);class pm extends eu{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}re.registerComponent("CaptionSettingsMenuItem",pm);class mm extends bo{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new pm(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}mm.prototype.kind_="captions",mm.prototype.controlText_="Captions",re.registerComponent("CaptionsButton",mm);class nA extends eu{createEl(e,t,i){const n=super.createEl(e,t,i),s=n.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",n):s.appendChild(De("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(De("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),n}}re.registerComponent("SubsCapsMenuItem",nA);class gm extends bo{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Lt(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new pm(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,nA),e}}gm.prototype.kinds_=["captions","subtitles"],gm.prototype.controlText_="Subtitles",re.registerComponent("SubsCapsButton",gm);class sA extends Jl{constructor(e,t){const i=t.track,n=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};n.addEventListener("change",s),this.on("dispose",()=>{n.removeEventListener("change",s)})}createEl(e,t,i){const n=super.createEl(e,t,i),s=n.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(De("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(De("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),n}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const n=t[i];n!==this.track&&(n.enabled=n===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}re.registerComponent("AudioTrackMenuItem",sA);class aA extends cm{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const n=t[i];e.push(new sA(this.player_,{track:n,selectable:!0,multiSelectable:!1}))}return e}}aA.prototype.controlText_="Audio Track",re.registerComponent("AudioTrackButton",aA);class vm extends Jl{constructor(e,t){const i=t.rate,n=parseFloat(i,10);t.label=i,t.selected=n===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=n,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}vm.prototype.contentElType="button",re.registerComponent("PlaybackRateMenuItem",vm);class oA extends um{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=De("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new vm(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}oA.prototype.controlText_="Playback Rate",re.registerComponent("PlaybackRateMenuButton",oA);class lA extends re{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}re.registerComponent("Spacer",lA);class cX extends lA{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}re.registerComponent("CustomControlSpacer",cX);class uA extends re{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}uA.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},re.registerComponent("ControlBar",uA);class cA extends go{constructor(e,t){super(e,t),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}cA.prototype.options_=Object.assign({},go.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),re.registerComponent("ErrorDisplay",cA);class hA extends re{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),De("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Si()}`)+"-"+t[1].replace(/\W+/g,""),n=De("option",{id:i,value:this.localize(t[0]),textContent:this.localize(t[1])});return n.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),n}))}}re.registerComponent("TextTrackSelect",hA);class ta extends re{constructor(e,t={}){super(e,t);const i=De("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const n=this.options_.selects;for(const s of n){const a=this.options_.selectConfigs[s],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${Si()}`;if(this.options_.type==="colors"){u=De("span",{className:o});const f=De("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});f.setAttribute("for",c),u.appendChild(f)}const h=new hA(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(h),this.options_.type==="colors"&&(u.appendChild(h.el()),this.el().appendChild(u))}}createEl(){return De("fieldset",{className:this.options_.className})}}re.registerComponent("TextTrackFieldset",ta);class dA extends re{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,n=new ta(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(n);const s=new ta(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const a=new ta(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return De("div",{className:"vjs-track-settings-colors"})}}re.registerComponent("TextTrackSettingsColors",dA);class fA extends re{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,n=new ta(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(n);const s=new ta(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const a=new ta(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return De("div",{className:"vjs-track-settings-font"})}}re.registerComponent("TextTrackSettingsFont",fA);class pA extends re{constructor(e,t={}){super(e,t);const i=new Er(e,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});i.el().classList.remove("vjs-control","vjs-button"),i.el().textContent=this.localize("Reset"),this.addChild(i);const n=this.localize("Done"),s=new Er(e,{controlText:n,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=n,this.addChild(s)}createEl(){return De("div",{className:"vjs-track-settings-controls"})}}re.registerComponent("TrackSettingsControls",pA);const ym="vjs-text-track-settings",mA=["#000","Black"],gA=["#00F","Blue"],vA=["#0FF","Cyan"],yA=["#0F0","Green"],_A=["#F0F","Magenta"],bA=["#F00","Red"],TA=["#FFF","White"],SA=["#FF0","Yellow"],_m=["1","Opaque"],bm=["0.5","Semi-Transparent"],xA=["0","Transparent"],Ts={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[mA,TA,bA,yA,gA,SA,_A,vA],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[_m,bm,xA],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[TA,mA,bA,yA,gA,SA,_A,vA],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:r=>r==="1.00"?null:Number(r)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[_m,bm],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[xA,bm,_m],className:"vjs-window-opacity vjs-opacity"}};Ts.windowColor.options=Ts.backgroundColor.options;function wA(r,e){if(e&&(r=e(r)),r&&r!=="none")return r}function hX(r,e){const t=r.options[r.options.selectedIndex].value;return wA(t,e)}function dX(r,e,t){if(e){for(let i=0;i<r.options.length;i++)if(wA(r.options[i].value,t)===e){r.selectedIndex=i;break}}}class fX extends go{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=De("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new dA(e,{textTrackComponentid:this.id_,selectConfigs:Ts,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const i=new fA(e,{textTrackComponentid:this.id_,selectConfigs:Ts,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);const n=new pA(e);this.addChild(n)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),so(Ts,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return GD(Ts,(e,t,i)=>{const n=hX(this.$(t.selector),t.parser);return n!==void 0&&(e[i]=n),e},{})}setValues(e){so(Ts,(t,i)=>{dX(this.$(t.selector),e[i],t.parser)})}setDefaults(){so(Ts,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(U.localStorage.getItem(ym))}catch(t){qe.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?U.localStorage.setItem(ym,JSON.stringify(e)):U.localStorage.removeItem(ym)}catch(t){qe.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}re.registerComponent("TextTrackSettings",fX);class pX extends re{constructor(e,t){let i=t.ResizeObserver||U.ResizeObserver;t.ResizeObserver===null&&(i=!1);const n=at({createEl:!i,reportTouchActivity:!1},t);super(e,n),this.ResizeObserver=t.ResizeObserver||U.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=gI(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){wr(this,"resize",s),wr(this,"unload",a),a=null};ai(this.el_.contentWindow,"unload",a),ai(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}re.registerComponent("ResizeManager",pX);const mX={trackingThreshold:20,liveTolerance:15};class gX extends re{constructor(e,t){const i=at(mX,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=n=>this.handlePlay(n),this.handleFirstTimeupdate_=n=>this.handleFirstTimeupdate(n),this.handleSeeked_=n=>this.handleSeeked(n),this.seekToLiveEdge_=n=>this.seekToLiveEdge(n),this.reset_(),this.on(this.player_,"durationchange",n=>this.handleDurationchange(n)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(U.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const n=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(n-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||n===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,xi),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}re.registerComponent("LiveTracker",gX);class vX extends re{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:De("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Si()}`}),description:De("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Si()}`})},De("div",{className:"vjs-title-bar"},{},WD(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(n=>{const s=this.state[n],a=this.els[n],o=i[n];_h(a),s&&ys(a,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}re.registerComponent("TitleBar",vX);const yX={initialDisplay:4e3,position:[],takeFocus:!1};class _X extends Er{constructor(e,t){t=at(yX,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=De("button",{},{type:"button",class:this.buildCSSClass()},De("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}re.registerComponent("TransientButton",_X);const Tm=r=>{const e=r.el();if(e.hasAttribute("src"))return r.triggerSourceset(e.src),!0;const t=r.$$("source"),i=[];let n="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(n=i[0]),r.triggerSourceset(n),!0):!1},bX=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(r){const e=oe.createElement(this.nodeName.toLowerCase());e.innerHTML=r;const t=oe.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",U.Element.prototype.appendChild.call(this,t),this.innerHTML}}),EA=(r,e)=>{let t={};for(let i=0;i<r.length&&(t=Object.getOwnPropertyDescriptor(r[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},TX=r=>EA([r.el(),U.HTMLMediaElement.prototype,U.Element.prototype,bX],"innerHTML"),CA=function(r){const e=r.el();if(e.resetSourceWatch_)return;const t={},i=TX(r),n=s=>(...a)=>{const o=s.apply(e,a);return Tm(r),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=n(t[s]))}),Object.defineProperty(e,"innerHTML",at(i,{set:n(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",i)},r.one("sourceset",e.resetSourceWatch_)},SX=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?AI(U.Element.prototype.getAttribute.call(this,"src")):""},set(r){return U.Element.prototype.setAttribute.call(this,"src",r),r}}),xX=r=>EA([r.el(),U.HTMLMediaElement.prototype,SX],"src"),wX=function(r){if(!r.featuresSourceset)return;const e=r.el();if(e.resetSourceset_)return;const t=xX(r),i=e.setAttribute,n=e.load;Object.defineProperty(e,"src",at(t,{set:s=>{const a=t.set.call(e,s);return r.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=i.call(e,s,a);return/src/i.test(s)&&r.triggerSourceset(e.src),o},e.load=()=>{const s=n.call(e);return Tm(r)||(r.triggerSourceset(""),CA(r)),s},e.currentSrc?r.triggerSourceset(e.currentSrc):Tm(r)||CA(r),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=n,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class ge extends Me{constructor(e,t){super(e,t);const i=e.source;let n=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!n&&!this.el_.hasAttribute("crossorigin")&&Ch(l.src)&&(n=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&n&&qe.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Vl||hh)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),ge.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){wX(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const n=()=>{for(let s=0;s<t.length;s++){const a=t[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",n),e.addEventListener("change",n)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",n)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(n=>{this.el()[`${i}Tracks`].removeEventListener(n,this[`${i}TracksListeners_`][n])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=wi[e],i=this.el()[t.getterName],n=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;const s={change:o=>{const l={type:"change",target:n,currentTarget:n,srcElement:n};n.trigger(l),e==="text"&&this[vo.remoteText.getterName]().trigger(l)},addtrack(o){n.addTrack(o.track)},removetrack(o){n.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<n.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===n[l]){u=!0;break}u||o.push(n[l])}for(;o.length;)n.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];i.addEventListener(o,l),this.on("dispose",u=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){wi.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),ge.disposeMediaElement(e),e=i}else{e=oe.createElement("video");const i=this.options_.tag&&_s(this.options_.tag),n=at({},i);(!Vl||this.options_.nativeControlsForTouch!==!0)&&delete n.controls,rI(e,Object.assign(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&ho(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const n=t[i],s=this.options_[n];typeof s<"u"&&(s?ho(e,n,n):vh(e,n),e[n]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const n=function(){i=!0};this.on("loadstart",n);const s=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",s),i||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&mh?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){qe(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Wi&&mn&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)vn(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return qe.error("Invalid source URL."),!1;const i={src:e};t&&(i.type=t);const n=De("source",{},i);return this.el_.appendChild(n),!0}removeSourceElement(e){if(!e)return qe.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const i of t)if(i.src===e)return this.el_.removeChild(i),!0;return qe.warn(`No matching source element found with src: ${e}`),!1}reset(){ge.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=oe.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),U.performance&&(e.creationTime=U.performance.now()),e}}ah(ge,"TEST_VID",function(){if(!uo())return;const r=oe.createElement("video"),e=oe.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",r.appendChild(e),r}),ge.isSupported=function(){try{ge.TEST_VID.volume=.5}catch{return!1}return!!(ge.TEST_VID&&ge.TEST_VID.canPlayType)},ge.canPlayType=function(r){return ge.TEST_VID.canPlayType(r)},ge.canPlaySource=function(r,e){return ge.canPlayType(r.type)},ge.canControlVolume=function(){try{const r=ge.TEST_VID.volume;ge.TEST_VID.volume=r/2+.1;const e=r!==ge.TEST_VID.volume;return e&&xr?(U.setTimeout(()=>{ge&&ge.prototype&&(ge.prototype.featuresVolumeControl=r!==ge.TEST_VID.volume)}),!1):e}catch{return!1}},ge.canMuteVolume=function(){try{const r=ge.TEST_VID.muted;return ge.TEST_VID.muted=!r,ge.TEST_VID.muted?ho(ge.TEST_VID,"muted","muted"):vh(ge.TEST_VID,"muted","muted"),r!==ge.TEST_VID.muted}catch{return!1}},ge.canControlPlaybackRate=function(){if(Wi&&mn&&oh<58)return!1;try{const r=ge.TEST_VID.playbackRate;return ge.TEST_VID.playbackRate=r/2+.1,r!==ge.TEST_VID.playbackRate}catch{return!1}},ge.canOverrideAttributes=function(){try{const r=()=>{};Object.defineProperty(oe.createElement("video"),"src",{get:r,set:r}),Object.defineProperty(oe.createElement("audio"),"src",{get:r,set:r}),Object.defineProperty(oe.createElement("video"),"innerHTML",{get:r,set:r}),Object.defineProperty(oe.createElement("audio"),"innerHTML",{get:r,set:r})}catch{return!1}return!0},ge.supportsNativeTextTracks=function(){return mh||xr&&mn},ge.supportsNativeVideoTracks=function(){return!!(ge.TEST_VID&&ge.TEST_VID.videoTracks)},ge.supportsNativeAudioTracks=function(){return!!(ge.TEST_VID&&ge.TEST_VID.audioTracks)},ge.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([r,e]){ah(ge.prototype,r,()=>ge[e](),!0)}),ge.prototype.featuresVolumeControl=ge.canControlVolume(),ge.prototype.movingMediaElementInDOM=!xr,ge.prototype.featuresFullscreenResize=!0,ge.prototype.featuresProgressEvents=!0,ge.prototype.featuresTimeupdateEvents=!0,ge.prototype.featuresVideoFrameCallback=!!(ge.TEST_VID&&ge.TEST_VID.requestVideoFrameCallback),ge.disposeMediaElement=function(r){if(r){for(r.parentNode&&r.parentNode.removeChild(r);r.hasChildNodes();)r.removeChild(r.firstChild);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()}},ge.resetMediaElement=function(r){if(!r)return;const e=r.querySelectorAll("source");let t=e.length;for(;t--;)r.removeChild(e[t]);r.removeAttribute("src"),typeof r.load=="function"&&(function(){try{r.load()}catch{}})()},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(r){ge.prototype[r]=function(){return this.el_[r]||this.el_.hasAttribute(r)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(r){ge.prototype["set"+Lt(r)]=function(e){this.el_[r]=e,e?this.el_.setAttribute(r,r):this.el_.removeAttribute(r)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(r){ge.prototype[r]=function(){return this.el_[r]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(r){ge.prototype["set"+Lt(r)]=function(e){this.el_[r]=e}}),["pause","load","play"].forEach(function(r){ge.prototype[r]=function(){return this.el_[r]()}}),Me.withSourceHandlers(ge),ge.nativeSourceHandler={},ge.nativeSourceHandler.canPlayType=function(r){try{return ge.TEST_VID.canPlayType(r)}catch{return""}},ge.nativeSourceHandler.canHandleSource=function(r,e){if(r.type)return ge.nativeSourceHandler.canPlayType(r.type);if(r.src){const t=Jp(r.src);return ge.nativeSourceHandler.canPlayType(`video/${t}`)}return""},ge.nativeSourceHandler.handleSource=function(r,e,t){e.setSrc(r.src)},ge.nativeSourceHandler.dispose=function(){},ge.registerSourceHandler(ge.nativeSourceHandler),Me.registerTech("Html5",ge);const DA=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Sm={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},xm=["tiny","xsmall","small","medium","large","xlarge","huge"],kh={};xm.forEach(r=>{const e=r.charAt(0)==="x"?`x-${r.substring(1)}`:r;kh[r]=`vjs-layout-${e}`});const EX={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class tt extends re{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${Si()}`,t=Object.assign(tt.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=HD(this.id_),this.fsApi_=nh,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&_s(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=tt.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),jp(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(ai(oe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const n=at(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=n,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new U.DOMParser().parseFromString(YK,"image/svg+xml");if(o.querySelector("parsererror"))qe.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new KK(this),this.addClass("vjs-spatial-navigation-enabled")),Vl&&this.addClass("vjs-touch-enabled"),xr||this.addClass("vjs-workinghover"),tt.players[this.id_]=this;const s=Ap.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),wr(oe,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),wr(oe,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),tt.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),VK(this),Nr.names.forEach(e=>{const t=Nr[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const n=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:n||(t=this.el_=super.createEl("div"));const s=_s(e);if(n){for(t=this.el_=e,e=this.tag=oe.createElement("video");t.children.length;)e.appendChild(t.firstChild);Gl(t,"video-js")||Ks(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",mn&&uh&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(l){n&&l==="class"||t.setAttribute(l,s[l]),n&&e.setAttribute(l,s[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>QD[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),U.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=fI("vjs-styles-dimensions");const l=bs(".vjs-styles-defaults"),u=bs("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);Ks(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),kp(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){qe.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}const n=parseFloat(t);if(isNaN(n)){qe.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=n,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Un(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),wK(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(U.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,i,n;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const s=i.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?n="dimensions-"+this.id():n=this.id()+"-dimensions",this.addClass(n),pI(this.styleEl_,`
      .${n} {
        width: ${e}px;
        height: ${t}px;
      }

      .${n}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=Lt(e),n=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Me.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${n}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Nr.names.forEach(l=>{const u=Nr[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[n]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Me.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(ft(this,this.handleTechReady_),!0),Wp.jsonToTextTracks(this.textTracksJson_||[],this.tech_),DA.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Lt(l)}_`](u))}),Object.keys(Sm).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${Sm[l]}_`].bind(this),event:u});return}this[`handleTech${Sm[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&kp(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Nr.names.forEach(e=>{const t=Nr[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=Wp.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&qe.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":Ap}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const n=this.muted();this.muted(!0);const s=()=>{this.muted(n)};this.playTerminatedQueue_.push(s);const a=this.play();if(Xl(a))return a.catch(o=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),Xl(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!Xl(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=zK(this,t)),this.cache_.source=at({},e,{src:t,type:i});const n=this.cache_.sources.filter(l=>l.src&&l.src===t),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=_s(a[l]);s.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!n.length?this.cache_.sources=s:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const i=this.currentSource().src,n=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(n)&&(!this.lastSource_||this.lastSource_.tech!==n&&this.lastSource_.player!==i)&&(t=()=>{}),t(n),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?vn(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!oe.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let n=oe[this.fsApi_.fullscreenElement]===i;!n&&i.matches&&(n=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(n)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in jK)return BK(this.middleware_,this.tech_,e,t);if(e in $I)return MI(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw qe(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in UK)return qK(this.middleware_,this.tech_,e);if(e in $I)return MI(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(qe(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(qe(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(qe(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=vn){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(mh||xr);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}const n=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),n===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(n)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||zi(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=zi(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=zi(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return EI(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((i,n)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){s(),i()}function o(u,c){s(),n(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(i,n))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,i)=>{function n(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){n(),t()}function a(l,u){n(),i(u)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(n,n),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=oe[this.fsApi_.exitFullscreen]();return e&&vn(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=oe.documentElement.style.overflow,ai(oe,"keydown",this.boundFullWindowOnEscKey_),oe.documentElement.style.overflow="hidden",Ks(oe.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,wr(oe,"keydown",this.boundFullWindowOnEscKey_),oe.documentElement.style.overflow=this.docOrigOverflow,gh(oe.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&U.documentPictureInPicture){const e=oe.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(De("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),U.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(cI(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",i=>{const n=i.target.querySelector(".video-js");e.parentNode.replaceChild(n,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in oe&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(U.documentPictureInPicture&&U.documentPictureInPicture.window)return U.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in oe)return oe.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(n=>{const s=n.tagName.toLowerCase();if(n.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(n.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>e.key.toLowerCase()==="f",muteKey:n=a=>e.key.toLowerCase()==="m",playPauseKey:s=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const a=re.getComponent("FullscreenToggle");oe[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else n.call(this,e)?(e.preventDefault(),e.stopPropagation(),re.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),re.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,n=this.options_.techOrder;i<n.length;i++){const s=n[i];let a=Me.getTech(s);if(a||(a=re.getComponent(s)),!a){qe.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,Me.getTech(o)]).filter(([o,l])=>l?l.isSupported():(qe.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,l,u){let c;return o.some(h=>l.some(f=>{if(c=u(h,f),c)return!0})),c};let n;const s=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?n=i(e,t,s(a)):n=i(t,e,a),n||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=NI(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),LK(this,i[0],(n,s)=>{if(this.middleware_=s,t||(this.cache_.sources=i),this.updateSourceCaches_(n),this.src_(n)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}FK(s,this.tech_)}),i.length>1){const n=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},s=()=>{this.off("error",n)};this.one("error",n),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",n),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?bI(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();vn(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Un(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:n}=this.controlBar||{},{seekBar:s}=i||{};e&&e.updateContent(),t&&t.updateContent(),n&&n.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(gs("beforeerror").forEach(t=>{const i=t(this,e);if(!(pn(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new kt(e),this.addClass("vjs-error"),qe.error(`(CODE:${this.error_.code} ${kt.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),gs("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const n=ft(this,this.reportUserActivity),s=function(h){(h.screenX!==t||h.screenY!==i)&&(t=h.screenX,i=h.screenY,n())},a=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},o=function(h){n(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!xr&&!Wi&&(l.on("mouseenter",function(h){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(h){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",n),this.on("keyup",n);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const h=this.options_.inactivityTimeout;h<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},h))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(n=>{n!==t&&n.el_&&!n.hasClass("vjs-hidden")&&(n.hide(),this.audioOnlyCache_.hiddenChildren.push(n))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Un(this)&&this.trigger("languagechange"))}languages(){return at(tt.prototype.options_.languages,this.languages_)}toJSON(){const e=at(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let n=t[i];n=at(n),n.player=void 0,e.tracks[i]=n}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new go(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<xm.length;i++){const n=xm[i],s=this.breakpoints_[n];if(t<=s){if(e===n)return;e&&this.removeClass(kh[e]),this.addClass(kh[n]),this.breakpoint_=n;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},EX,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return kh[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=at(e);const{artist:n,artwork:s,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!s&&o&&(this.cache_.media.artwork=[{src:o,type:Ah(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(h=>this.addRemoteTextTrack(h,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||n||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),n={src:t,textTracks:i};return e&&(n.poster=e,n.artwork=[{src:n.poster,type:Ah(n.poster)}]),n}return at(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=_s(e),n=i["data-setup"];if(Gl(e,"vjs-fill")&&(i.fill=!0),Gl(e,"vjs-fluid")&&(i.fluid=!0),n!==null)try{Object.assign(i,JSON.parse(n||"{}"))}catch(s){qe.error("data-setup",s)}if(Object.assign(t,i),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(_s(l)):u==="track"&&t.tracks.push(_s(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}tt.prototype.videoTracks=()=>{},tt.prototype.audioTracks=()=>{},tt.prototype.textTracks=()=>{},tt.prototype.remoteTextTracks=()=>{},tt.prototype.remoteTextTrackEls=()=>{},Nr.names.forEach(function(r){const e=Nr[r];tt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),tt.prototype.crossorigin=tt.prototype.crossOrigin,tt.players={};const tu=U.navigator;tt.prototype.options_={techOrder:Me.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:tu&&(tu.languages&&tu.languages[0]||tu.userLanguage||tu.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1},DA.forEach(function(r){tt.prototype[`handleTech${Lt(r)}_`]=function(){return this.trigger(r)}}),re.registerComponent("Player",tt);const Mh="plugin",To="activePlugins_",So={},$h=r=>So.hasOwnProperty(r),Nh=r=>$h(r)?So[r]:void 0,IA=(r,e)=>{r[To]=r[To]||{},r[To][e]=!0},Lh=(r,e,t)=>{const i=(t?"before":"")+"pluginsetup";r.trigger(i,e),r.trigger(i+":"+e.name,e)},CX=function(r,e){const t=function(){Lh(this,{name:r,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return IA(this,r),Lh(this,{name:r,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},AA=(r,e)=>(e.prototype.name=r,function(...t){Lh(this,{name:r,plugin:e,instance:null},!0);const i=new e(this,...t);return this[r]=()=>i,Lh(this,i.getEventHash()),i});class Yr{constructor(e){if(this.constructor===Yr)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),jp(this),delete this.trigger,_I(this,this.constructor.defaultState),IA(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return mo(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[To][e]=!1,this.player=this.state=null,t[e]=AA(e,So[e])}static isBasic(e){const t=typeof e=="string"?Nh(e):e;return typeof t=="function"&&!Yr.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if($h(e))qe.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(tt.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return So[e]=t,e!==Mh&&(Yr.isBasic(t)?tt.prototype[e]=CX(e,t):tt.prototype[e]=AA(e,t)),t}static deregisterPlugin(e){if(e===Mh)throw new Error("Cannot de-register base plugin.");$h(e)&&(delete So[e],delete tt.prototype[e])}static getPlugins(e=Object.keys(So)){let t;return e.forEach(i=>{const n=Nh(i);n&&(t=t||{},t[i]=n)}),t}static getPluginVersion(e){const t=Nh(e);return t&&t.VERSION||""}}Yr.getPlugin=Nh,Yr.BASE_PLUGIN_NAME=Mh,Yr.registerPlugin(Mh,Yr),tt.prototype.usingPlugin=function(r){return!!this[To]&&this[To][r]===!0},tt.prototype.hasPlugin=function(r){return!!$h(r)};function DX(r,e){let t=!1;return function(...i){return t||qe.warn(r),t=!0,e.apply(this,i)}}function Yi(r,e,t,i){return DX(`${e} is deprecated and will be removed in ${r}.0; please use ${t} instead.`,i)}var IX={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const OA=r=>r.indexOf("#")===0?r.slice(1):r;function K(r,e,t){let i=K.getPlayer(r);if(i)return e&&qe.warn(`Player "${r}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;const n=typeof r=="string"?bs("#"+OA(r)):r;if(!co(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in n?n.getRootNode()instanceof U.ShadowRoot:!1)?n.getRootNode():n.ownerDocument.body;(!n.ownerDocument.defaultView||!a.contains(n))&&qe.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player")?n.parentNode:n).cloneNode(!0)),gs("beforesetup").forEach(l=>{const u=l(n,at(e));if(!pn(u)||Array.isArray(u)){qe.error("please return an object in beforesetup hooks");return}e=at(e,u)});const o=re.getComponent("Player");return i=new o(n,e,t),gs("setup").forEach(l=>l(i)),i}if(K.hooks_=Bn,K.hooks=gs,K.hook=hK,K.hookOnce=dK,K.removeHook=UD,U.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&uo()){let r=bs(".vjs-styles-defaults");if(!r){r=fI("vjs-styles-defaults");const e=bs("head");e&&e.insertBefore(r,e.firstChild),pI(r,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}Np(1,K),K.VERSION=Ap,K.options=tt.prototype.options_,K.getPlayers=()=>tt.players,K.getPlayer=r=>{const e=tt.players;let t;if(typeof r=="string"){const i=OA(r),n=e[i];if(n)return n;t=bs("#"+i)}else t=r;if(co(t)){const{player:i,playerId:n}=t;if(i||e[n])return i||e[n]}},K.getAllPlayers=()=>Object.keys(tt.players).map(r=>tt.players[r]).filter(Boolean),K.players=tt.players,K.getComponent=re.getComponent,K.registerComponent=(r,e)=>(Me.isTech(e)&&qe.warn(`The ${r} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),re.registerComponent.call(re,r,e)),K.getTech=Me.getTech,K.registerTech=Me.registerTech,K.use=NK,Object.defineProperty(K,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(K.middleware,"TERMINATOR",{value:Ih,writeable:!1,enumerable:!0}),K.browser=QD,K.obj=mK,K.mergeOptions=Yi(9,"videojs.mergeOptions","videojs.obj.merge",at),K.defineLazyProperty=Yi(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",ah),K.bind=Yi(9,"videojs.bind","native Function.prototype.bind",ft),K.registerPlugin=Yr.registerPlugin,K.deregisterPlugin=Yr.deregisterPlugin,K.plugin=(r,e)=>(qe.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Yr.registerPlugin(r,e)),K.getPlugins=Yr.getPlugins,K.getPlugin=Yr.getPlugin,K.getPluginVersion=Yr.getPluginVersion,K.addLanguage=function(r,e){return r=(""+r).toLowerCase(),K.options.languages=at(K.options.languages,{[r]:e}),K.options.languages[r]},K.log=qe,K.createLogger=HD,K.time=AK,K.createTimeRange=Yi(9,"videojs.createTimeRange","videojs.time.createTimeRanges",zi),K.createTimeRanges=Yi(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",zi),K.formatTime=Yi(9,"videojs.formatTime","videojs.time.formatTime",Qs),K.setFormatTime=Yi(9,"videojs.setFormatTime","videojs.time.setFormatTime",xI),K.resetFormatTime=Yi(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",wI),K.parseUrl=Yi(9,"videojs.parseUrl","videojs.url.parseUrl",Zp),K.isCrossOrigin=Yi(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",Ch),K.EventTarget=oi,K.any=qp,K.on=ai,K.one=Sh,K.off=wr,K.trigger=mo,K.xhr=ZC,K.TrackList=Zs,K.TextTrack=Ql,K.TextTrackList=Xp,K.AudioTrack=RI,K.AudioTrackList=CI,K.VideoTrack=kI,K.VideoTrackList=DI,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(r=>{K[r]=function(){return qe.warn(`videojs.${r}() is deprecated; use videojs.dom.${r}() instead`),hI[r].apply(null,arguments)}}),K.computedStyle=Yi(9,"videojs.computedStyle","videojs.dom.computedStyle",po),K.dom=hI,K.fn=xK,K.num=iX,K.str=DK,K.url=MK,K.Error=IX;class AX{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}}class Fh extends K.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new AX(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,n=this.length;i<n;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const n=this[t];if(n.id===e)return n}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}Fh.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const r in Fh.prototype.allowedEvents_)Fh.prototype["on"+r]=null;var PA="4.1.0";const OX=function(r,e){const t=r.qualityLevels,i=new Fh,n=function(){i.dispose(),r.qualityLevels=t,r.off("dispose",n)};return r.on("dispose",n),r.qualityLevels=()=>i,r.qualityLevels.VERSION=PA,i},RA=function(r){return OX(this,K.obj.merge({},r))};K.registerPlugin("qualityLevels",RA),RA.VERSION=PA;const Kr=Qc,qh=(r,e)=>e&&e.responseURL&&r!==e.responseURL?e.responseURL:r,Ci=r=>K.log.debug?K.log.debug.bind(K,"VHS:",`${r} >`):function(){};function rt(...r){const e=K.obj||K;return(e.merge||e.mergeOptions).apply(e,r)}function or(...r){const e=K.time||K;return(e.createTimeRanges||e.createTimeRanges).apply(e,r)}function PX(r){if(r.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<r.length;t++){const i=r.start(t),n=r.end(t);e+=`${i} --> ${n}. Duration (${n-i})
`}return e}const _n=1/30,bn=_n*3,kA=function(r,e){const t=[];let i;if(r&&r.length)for(i=0;i<r.length;i++)e(r.start(i),r.end(i))&&t.push([r.start(i),r.end(i)]);return or(t)},xo=function(r,e){return kA(r,function(t,i){return t-bn<=e&&i+bn>=e})},Bh=function(r,e){return kA(r,function(t){return t-_n>=e})},RX=function(r){if(r.length<2)return or();const e=[];for(let t=1;t<r.length;t++){const i=r.end(t-1),n=r.start(t);e.push([i,n])}return or(e)},kX=function(r,e){let t=null,i=null,n=0;const s=[],a=[];if(!r||!r.length||!e||!e.length)return or();let o=r.length;for(;o--;)s.push({time:r.start(o),type:"start"}),s.push({time:r.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(n++,n===2&&(t=s[o].time)):s[o].type==="end"&&(n--,n===1&&(i=s[o].time)),t!==null&&i!==null&&(a.push([t,i]),t=null,i=null);return or(a)},MA=r=>{const e=[];if(!r||!r.length)return"";for(let t=0;t<r.length;t++)e.push(r.start(t)+" => "+r.end(t));return e.join(", ")},MX=function(r,e,t=1){return((r.length?r.end(r.length-1):0)-e)/t},ra=r=>{const e=[];for(let t=0;t<r.length;t++)e.push({start:r.start(t),end:r.end(t)});return e},$X=function(r,e){if(r===e)return!1;if(!r&&e||!e&&r||r.length!==e.length)return!0;for(let t=0;t<r.length;t++)if(r.start(t)!==e.start(t)||r.end(t)!==e.end(t))return!0;return!1},wm=function(r){if(!(!r||!r.length||!r.end))return r.end(r.length-1)},Em=function(r,e){let t=0;if(!r||!r.length)return t;for(let i=0;i<r.length;i++){const n=r.start(i),s=r.end(i);if(!(e>s)){if(e>n&&e<=s){t+=s-e;continue}t+=s-n}}return t},Cm=(r,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=r.partTargetDuration)}),t},Dm=r=>(r.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(n,s){e.push({duration:n.duration,segmentIndex:i,partIndex:s,part:n,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),$A=r=>{const e=r.segments&&r.segments.length&&r.segments[r.segments.length-1];return e&&e.parts||[]},NA=({preloadSegment:r})=>{if(!r)return;const{parts:e,preloadHints:t}=r;let i=(t||[]).reduce((n,s)=>n+(s.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},LA=(r,e)=>{if(e.endList)return 0;if(r&&r.suggestedPresentationDelay)return r.suggestedPresentationDelay;const t=$A(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},NX=function(r,e){let t=0,i=e-r.mediaSequence,n=r.segments[i];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;i--;){if(n=r.segments[i],typeof n.end<"u")return{result:t+n.end,precise:!0};if(t+=Cm(r,n),typeof n.start<"u")return{result:t+n.start,precise:!0}}return{result:t,precise:!1}},LX=function(r,e){let t=0,i,n=e-r.mediaSequence;for(;n<r.segments.length;n++){if(i=r.segments[n],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=Cm(r,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},FA=function(r,e,t){if(typeof e>"u"&&(e=r.mediaSequence+r.segments.length),e<r.mediaSequence)return 0;const i=NX(r,e);if(i.precise)return i.result;const n=LX(r,e);return n.precise?n.result:i.result+t},qA=function(r,e,t){if(!r)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(r.totalDuration)return r.totalDuration;if(!r.endList)return U.Infinity}return FA(r,e,t)},ru=function({defaultDuration:r,durationList:e,startIndex:t,endIndex:i}){let n=0;if(t>i&&([t,i]=[i,t]),t<0){for(let s=t;s<Math.min(0,i);s++)n+=r;t=0}for(let s=t;s<i;s++)n+=e[s].duration;return n},BA=function(r,e,t,i){if(!r||!r.segments)return null;if(r.endList)return qA(r);if(e===null)return null;e=e||0;let n=FA(r,r.mediaSequence+r.segments.length,e);return t&&(i=typeof i=="number"?i:LA(null,r),n-=i),Math.max(0,n)},FX=function(r,e,t){const n=e||0;let s=BA(r,e,!0,t);return s===null?or():(s<n&&(s=n),or(n,s))},qX=function({playlist:r,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:n,exactManifestTimings:s}){let a=e-n;const o=Dm(r);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+_n<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n-ru({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=r.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const h=c.duration>_n,f=a===0,p=h&&a+_n>=0;if(!((f||p)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-_n>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:n+ru({defaultDuration:r.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},UA=function(r){return r.excludeUntil&&r.excludeUntil>Date.now()},Im=function(r){return r.excludeUntil&&r.excludeUntil===1/0},Uh=function(r){const e=UA(r);return!r.disabled&&!e},BX=function(r){return r.disabled},UX=function(r){for(let e=0;e<r.segments.length;e++)if(r.segments[e].key)return!0;return!1},jA=function(r,e){return e.attributes&&e.attributes[r]},jX=function(r,e,t,i=0){return jA("BANDWIDTH",t)?(r*t.attributes.BANDWIDTH-i*8)/e:NaN},Am=(r,e)=>{if(r.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return r.playlists.filter(i=>Uh(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},Om=(r,e)=>!r&&!e||!r&&e||r&&!e?!1:!!(r===e||r.id&&e.id&&r.id===e.id||r.resolvedUri&&e.resolvedUri&&r.resolvedUri===e.resolvedUri||r.uri&&e.uri&&r.uri===e.uri),HA=function(r,e){const t=r&&r.mediaGroups&&r.mediaGroups.AUDIO||{};let i=!1;for(const n in t){for(const s in t[n])if(i=e(t[n][s]),i)break;if(i)break}return!!i},iu=r=>{if(!r||!r.playlists||!r.playlists.length)return HA(r,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<r.playlists.length;e++){const t=r.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(s=>uD(s))||HA(r,s=>Om(t,s))))return!1}return!0};var Xr={liveEdgeDelay:LA,duration:qA,seekable:FX,getMediaInfoForTime:qX,isEnabled:Uh,isDisabled:BX,isExcluded:UA,isIncompatible:Im,playlistEnd:BA,isAes:UX,hasAttribute:jA,estimateSegmentRequestTime:jX,isLowestEnabledRendition:Am,isAudioOnly:iu,playlistMatch:Om,segmentDurationWithParts:Cm};const{log:VA}=K,wo=(r,e)=>`${r}-${e}`,GA=(r,e,t)=>`placeholder-uri-${r}-${e}-${t}`,HX=({onwarn:r,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:n=[],llhls:s})=>{const a=new kz;r&&a.on("warn",r),e&&a.on("info",e),i.forEach(u=>a.addParser(u)),n.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,h)=>Math.max(c,h.duration),0)),r&&r({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=$A(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,h)=>Math.max(c,h.duration),0);r&&(r({message:`manifest has no partTargetDuration defaulting to ${u}`}),VA.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},Eo=(r,e)=>{r.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(r.mediaGroups[t])for(const i in r.mediaGroups[t])for(const n in r.mediaGroups[t][i]){const s=r.mediaGroups[t][i][n];e(s,t,i,n)}})},WA=({playlist:r,uri:e,id:t})=>{r.id=t,r.playlistErrors_=0,e&&(r.uri=e),r.attributes=r.attributes||{}},VX=r=>{let e=r.playlists.length;for(;e--;){const t=r.playlists[e];WA({playlist:t,id:wo(e,t.uri)}),t.resolvedUri=Kr(r.uri,t.uri),r.playlists[t.id]=t,r.playlists[t.uri]=t,t.attributes.BANDWIDTH||VA.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},GX=r=>{Eo(r,e=>{e.uri&&(e.resolvedUri=Kr(r.uri,e.uri))})},WX=(r,e)=>{const t=wo(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:U.location.href,resolvedUri:U.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},zA=(r,e,t=GA)=>{r.uri=e;for(let n=0;n<r.playlists.length;n++)if(!r.playlists[n].uri){const s=`placeholder-uri-${n}`;r.playlists[n].uri=s}const i=iu(r);Eo(r,(n,s,a,o)=>{if(!n.playlists||!n.playlists.length){if(i&&s==="AUDIO"&&!n.uri)for(let l=0;l<r.playlists.length;l++){const u=r.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}n.playlists=[Ut({},n)]}n.playlists.forEach(function(l,u){const c=t(s,a,o,l),h=wo(u,c);l.uri?l.resolvedUri=l.resolvedUri||Kr(r.uri,l.uri):(l.uri=u===0?c:h,l.resolvedUri=l.uri),l.id=l.id||h,l.attributes=l.attributes||{},r.playlists[l.id]=l,r.playlists[l.uri]=l})}),VX(r),GX(r)};class YA{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((n,s)=>(n.set(s.id,s),n),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((i,n)=>{if(!this.processedDateRanges_.has(n)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){const s=e[i.class].push(i);i.classListIndex=s-1}else e[i.class]=[i],i.classListIndex=0});for(const i of t){const n=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&n[i.classListIndex+1]?i.endTime=n[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,n)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(n)})}}const KA=22,ia=({requestType:r,request:e,error:t,parseFailure:i})=>{const n=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:r},o=n&&!s||i;if(t&&s)a.error=Ut({},t),a.errorType=K.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=K.Error.NetworkRequestAborted;else if(e.timedout)a.errorType=K.Error.NetworkRequestTimeout;else if(o){const l=i?K.Error.NetworkBodyParserFailed:K.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},zX=Ci("CodecUtils"),XA=function(r){const e=r.attributes||{};if(e.CODECS)return fn(e.CODECS)},QA=(r,e)=>{const t=e.attributes||{};return r&&r.mediaGroups&&r.mediaGroups.AUDIO&&t.AUDIO&&r.mediaGroups.AUDIO[t.AUDIO]},YX=(r,e)=>{if(!QA(r,e))return!0;const t=e.attributes||{},i=r.mediaGroups.AUDIO[t.AUDIO];for(const n in i)if(!i[n].uri&&!i[n].playlists)return!0;return!1},nu=function(r){const e={};return r.forEach(({mediaType:t,type:i,details:n})=>{e[t]=e[t]||[],e[t].push(lD(`${i}${n}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){zX(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},ZA=function(r){let e=0;return r.audio&&e++,r.video&&e++,e},su=function(r,e){const t=e.attributes||{},i=nu(XA(e)||[]);if(QA(r,e)&&!i.audio&&!YX(r,e)){const n=nu($z(r,t.AUDIO)||[]);n.audio&&(i.audio=n.audio)}return i},{EventTarget:KX}=K,XX=(r,e)=>{if(e.endList||!e.serverControl)return r;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let n=e.mediaSequence+e.segments.length;if(i){const s=i.parts||[],a=NA(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&n--}t._HLS_msn=n}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const i=new U.URL(r);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(n){t.hasOwnProperty(n)&&i.searchParams.set(n,t[n])}),r=i.toString()}return r},QX=(r,e)=>{if(!r)return e;const t=rt(r,e);if(r.preloadHints&&!e.preloadHints&&delete t.preloadHints,r.parts&&!e.parts)delete t.parts;else if(r.parts&&e.parts)for(let i=0;i<e.parts.length;i++)r.parts&&r.parts[i]&&(t.parts[i]=rt(r.parts[i],e.parts[i]));return!r.skipped&&e.skipped&&(t.skipped=!1),r.preload&&!e.preload&&(t.preload=!1),t},ZX=(r,e,t)=>{const i=r.slice(),n=e.slice();t=t||0;const s=[];let a;for(let o=0;o<n.length;o++){const l=i[o+t],u=n[o];l?(a=l.map||a,s.push(QX(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},JA=(r,e)=>{!r.resolvedUri&&r.uri&&(r.resolvedUri=Kr(e,r.uri)),r.key&&!r.key.resolvedUri&&(r.key.resolvedUri=Kr(e,r.key.uri)),r.map&&!r.map.resolvedUri&&(r.map.resolvedUri=Kr(e,r.map.uri)),r.map&&r.map.key&&!r.map.key.resolvedUri&&(r.map.key.resolvedUri=Kr(e,r.map.key.uri)),r.parts&&r.parts.length&&r.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=Kr(e,t.uri))}),r.preloadHints&&r.preloadHints.length&&r.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=Kr(e,t.uri))})},eO=function(r){const e=r.segments||[],t=r.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=r.targetDuration,t.preload=!0,e.push(t)}return e},tO=(r,e)=>r===e||r.segments&&e.segments&&r.segments.length===e.segments.length&&r.endList===e.endList&&r.mediaSequence===e.mediaSequence&&r.preloadSegment===e.preloadSegment,Pm=(r,e,t=tO)=>{const i=rt(r,{}),n=i.playlists[e.id];if(!n||t(n,e))return null;e.segments=eO(e);const s=rt(n,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,n.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=ZX(n.segments,e.segments,e.mediaSequence-n.mediaSequence)}s.segments.forEach(a=>{JA(a,s.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=s);return i.playlists[e.id]=s,i.playlists[e.uri]=s,Eo(r,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),i},Rm=(r,e)=>{const t=r.segments||[],i=t[t.length-1],n=i&&i.parts&&i.parts[i.parts.length-1],s=n&&n.duration||i&&i.duration;return e&&s?s*1e3:(r.partTargetDuration||r.targetDuration||10)*500},rO=(r,e,t)=>{if(!r)return;const i=[];return r.forEach(n=>{if(!n.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=n.attributes;i.push({id:n.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:i}};class Co extends KX{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=Ci("PlaylistLoader");const{withCredentials:n=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=n,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new YA,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=Kr(this.main.uri,e.uri);this.llhls&&(t=XX(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,n)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){const{uri:n,id:s}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${n}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:ia({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{const i=HX({onwarn:({message:n})=>this.logger_(`m3u8-parser warn for ${e}: ${n}`),oninfo:({message:n})=>this.logger_(`m3u8-parser info for ${e}: ${n}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!i.playlists||!i.playlists.length||this.excludeAudioOnlyVariants(i.playlists),i}catch(i){this.error=i,this.error.metadata={errorType:K.Error.StreamingHlsPlaylistParserError,error:i}}}excludeAudioOnlyVariants(e){const t=i=>{const n=i.attributes||{},{width:s,height:a}=n.RESOLUTION||{};if(s&&a)return!0;const o=XA(i)||[];return!!nu(o).video};e.some(t)&&e.forEach(i=>{t(i)||(i.excludeUntil=1/0)})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:n}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:i,manifestString:e});a.lastRequest=Date.now(),WA({playlist:a,uri:i,id:n});const o=Pm(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[n]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Rm(this.media(),!!o)),s.parsedPlaylist=rO(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),U.clearTimeout(this.mediaUpdateTimeout),U.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new YA,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(U.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=U.setTimeout(this.media.bind(this,e,!1),o);return}const i=this.state,n=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,n&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Rm(e,!0)),!n)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=qh(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(U.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(U.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=U.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(U.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=U.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=U.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,i)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:ia({requestType:i.requestType,request:i,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=qh(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});const n=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=rO(n.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(n)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,zA(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=eO(i),i.segments.forEach(n=>{JA(n,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||U.location.href;this.main=WX(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const i=this.main,n=e.ID;let s=i.playlists.length;for(;s--;){const a=i.playlists[s];if(a.attributes["PATHWAY-ID"]===n){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=wo(n,u),h=this.createCloneAttributes_(n,a.attributes),f=this.createClonePlaylist_(a,c,e,h);i.playlists[s]=f,i.playlists[c]=f,i.playlists[u]=f}else i.playlists.splice(s,1);delete i.playlists[l],delete i.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const i=this.main,n=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||!i.mediaGroups[s][n])){for(const a in i.mediaGroups[s])if(a===n){for(const o in i.mediaGroups[s][a])i.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const h=i.playlists[u.id],f=h.id,p=h.resolvedUri;delete i.playlists[f],delete i.playlists[p]});delete i.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const i=this.main,n=i.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=wo(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);i.playlists[n]=l,i.playlists[a]=l,i.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,i=e["BASE-ID"],n=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!n.mediaGroups[s]||n.mediaGroups[s][t]))for(const a in n.mediaGroups[s]){if(a===i)n.mediaGroups[s][t]={};else continue;for(const o in n.mediaGroups[s][a]){const l=n.mediaGroups[s][a][o];n.mediaGroups[s][t][o]=Ut({},l);const u=n.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((h,f)=>{const p=n.playlists[h.id],g=GA(s,t,o),v=wo(t,g);if(p&&!n.playlists[v]){const b=this.createClonePlaylist_(p,v,e),E=b.resolvedUri;n.playlists[v]=b,n.playlists[E]=b}u.playlists[f]=this.createClonePlaylist_(h,v,e)})}}})}createClonePlaylist_(e,t,i,n){const s=this.createCloneURI_(e.resolvedUri,i),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),n&&(a.attributes=n),rt(e,a)}createCloneURI_(e,t){const i=new URL(e);i.hostname=t["URI-REPLACEMENT"].HOST;const n=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(n))i.searchParams.set(s,n[s]);return i.href}createCloneAttributes_(e,t){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(n=>{t[n]&&(i[n]=e)}),i}getKeyIdSet(e){const t=new Set;if(!e||!e.contentProtection)return t;for(const i in e.contentProtection)if(e.contentProtection[i]&&e.contentProtection[i].attributes&&e.contentProtection[i].attributes.keyId){const n=e.contentProtection[i].attributes.keyId;t.add(n.toLowerCase())}return t}}const km=function(r,e,t,i){const n=r.responseType==="arraybuffer"?r.response:r.responseText;!e&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(r.timedout=!0),!e&&!r.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),i(e,r)},JX=(r,e)=>{if(!r||!r.size)return;let t=e;return r.forEach(i=>{t=i(t)}),t},eQ=(r,e,t,i)=>{!r||!r.size||r.forEach(n=>{n(e,t,i)})},iO=function(){const r=function e(t,i){t=rt({timeout:45e3},t);const n=e.beforeRequest||K.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||K.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||K.Vhs.xhr._responseCallbackSet;n&&typeof n=="function"&&(K.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(n));const o=K.Vhs.xhr.original===!0?K.xhr:K.Vhs.xhr,l=JX(s,t);s.delete(n);const u=o(l||t,function(h,f){return eQ(a,u,h,f),km(u,h,f,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return r.original=!0,r},tQ=function(r){let e;const t=r.offset;return typeof r.offset=="bigint"||typeof r.length=="bigint"?e=U.BigInt(r.offset)+U.BigInt(r.length)-U.BigInt(1):e=r.offset+r.length-1,"bytes="+t+"-"+e},Mm=function(r){const e={};return r.byterange&&(e.Range=tQ(r.byterange)),e},rQ=function(r,e){return r.start(e)+"-"+r.end(e)},iQ=function(r,e){const t=r.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},nQ=function(r){return r>=32&&r<126?String.fromCharCode(r):"."},nO=function(r){const e={};return Object.keys(r).forEach(t=>{const i=r[t];dD(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},jh=function(r){const e=r.byterange||{length:1/0,offset:0};return[e.length,e.offset,r.resolvedUri].join(",")},sO=function(r){return r.resolvedUri},aO=r=>{const e=Array.prototype.slice.call(r),t=16;let i="",n,s;for(let a=0;a<e.length/t;a++)n=e.slice(a*t,a*t+t).map(iQ).join(""),s=e.slice(a*t,a*t+t).map(nQ).join(""),i+=n+" "+s+`
`;return i};var sQ=Object.freeze({__proto__:null,createTransferableMessage:nO,initSegmentId:jh,segmentKeyId:sO,hexDump:aO,tagDump:({bytes:r})=>aO(r),textRanges:r=>{let e="",t;for(t=0;t<r.length;t++)e+=rQ(r,t)+" ";return e}});const oO=.25,aQ=(r,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,n=e.videoTimingInfo.transmuxedPresentationStart+t,s=r-n;return new Date(e.dateTimeObject.getTime()+s*1e3)},oQ=r=>r.transmuxedPresentationEnd-r.transmuxedPresentationStart-r.transmuxerPrependedSeconds,lQ=(r,e)=>{let t;try{t=new Date(r)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const n=e.segments[e.segments.length-1],s=n.dateTimeObject,a=n.videoTimingInfo?oQ(n.videoTimingInfo):n.duration+n.duration*oO,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(i=n),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Xr.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},uQ=(r,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let s=0;s<e.segments.length&&(i=e.segments[s],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(r<=t));s++);const n=e.segments[e.segments.length-1];if(n.videoTimingInfo&&n.videoTimingInfo.transmuxedPresentationEnd<r)return null;if(r>t){if(r>t+n.duration*oO)return null;i=n}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},cQ=(r,e)=>{let t,i;try{t=new Date(r),i=new Date(e)}catch{}const n=t.getTime();return(i.getTime()-n)/1e3},hQ=r=>{if(!r.segments||r.segments.length===0)return!1;for(let e=0;e<r.segments.length;e++)if(!r.segments[e].dateTimeObject)return!1;return!0},dQ=({playlist:r,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!r||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const i=uQ(e,r);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const n={mediaSeconds:e},s=aQ(e,i.segment);return s&&(n.programDateTime=s.toISOString()),t(null,n)},lO=({programTime:r,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:n=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!hQ(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=lQ(r,e);if(!o)return a({message:`${r} was not found in the stream`});const l=o.segment,u=cQ(l.dateTimeObject,r);if(o.type==="estimate"){if(t===0)return a({message:`${r} is not buffered yet. Try again`});i(o.estimatedStart+u),s.one("seeked",()=>{lO({programTime:r,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:n,tech:s,callback:a})});return}const c=l.start+u,h=()=>a(null,s.currentTime());s.one("seeked",h),n&&s.pause(),i(c)},$m=(r,e)=>{if(r.readyState===4)return e()},fQ=(r,e,t,i)=>{let n=[],s,a=!1;const o=function(h,f,p,g){return f.abort(),a=!0,t(h,f,p,g)},l=function(h,f){if(a)return;if(h)return h.metadata=ia({requestType:i,request:f,error:h}),o(h,f,"",n);const p=f.responseText.substring(n&&n.byteLength||0,f.responseText.length);if(n=Gz(n,fD(p,!0)),s=s||jl(n),n.length<10||s&&n.length<s+2)return $m(f,()=>o(h,f,"",n));const g=Dp(n);return g==="ts"&&n.length<188?$m(f,()=>o(h,f,"",n)):!g&&n.length<376?$m(f,()=>o(h,f,"",n)):o(null,f,g,n)},c=e({uri:r,beforeSend(h){h.overrideMimeType("text/plain; charset=x-user-defined"),h.addEventListener("progress",function({total:f,loaded:p}){return km(h,null,{statusCode:h.status},l)})}},function(h,f){return km(c,h,f,l)});return c},{EventTarget:pQ}=K,uO=function(r,e){if(!tO(r,e)||r.sidx&&e.sidx&&(r.sidx.offset!==e.sidx.offset||r.sidx.length!==e.sidx.length))return!1;if(!r.sidx&&e.sidx||r.sidx&&!e.sidx||r.segments&&!e.segments||!r.segments&&e.segments)return!1;if(!r.segments&&!e.segments)return!0;for(let t=0;t<r.segments.length;t++){const i=r.segments[t],n=e.segments[t];if(i.uri!==n.uri)return!1;if(!i.byterange&&!n.byterange)continue;const s=i.byterange,a=n.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},mQ=(r,e,t,i)=>{const n=i.attributes.NAME||t;return`placeholder-uri-${r}-${e}-${n}`},gQ=({mainXml:r,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:n})=>{const s=HY(r,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:n});return zA(s,e,mQ),s},vQ=(r,e)=>{Eo(r,(t,i,n,s)=>{(!e.mediaGroups[i][n]||!(s in e.mediaGroups[i][n]))&&delete r.mediaGroups[i][n][s]})},yQ=(r,e,t)=>{let i=!0,n=rt(r,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=eh(a.sidx);t&&t[l]&&t[l].sidx&&_p(a,t[l].sidx,a.sidx.resolvedUri)}const o=Pm(n,a,uO);o&&(n=o,i=!1)}return Eo(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=Pm(n,s.playlists[0],uO);c&&(n=c,l in n.mediaGroups[a][o]||(n.mediaGroups[a][o][l]=s),n.mediaGroups[a][o][l].playlists[0]=n.playlists[u],i=!1)}}),vQ(n,e),e.minimumUpdatePeriod!==r.minimumUpdatePeriod&&(i=!1),i?null:n},_Q=(r,e)=>(!r.map&&!e.map||!!(r.map&&e.map&&r.map.byterange.offset===e.map.byterange.offset&&r.map.byterange.length===e.map.byterange.length))&&r.uri===e.uri&&r.byterange.offset===e.byterange.offset&&r.byterange.length===e.byterange.length,cO=(r,e)=>{const t={};for(const i in r){const s=r[i].sidx;if(s){const a=eh(s);if(!e[a])break;const o=e[a].sidxInfo;_Q(o,s)&&(t[a]=e[a])}}return t},bQ=(r,e)=>{let i=cO(r.playlists,e);return Eo(r,(n,s,a,o)=>{if(n.playlists&&n.playlists.length){const l=n.playlists;i=rt(i,cO(l,e))}}),i};class Nm extends pQ{constructor(e,t,i={},n){super(),this.isPaused_=!0,this.mainPlaylistLoader_=n||this,n||(this.isMain_=!0);const{withCredentials:s=!1}=i;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Ci("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){const n=e.sidx&&eh(e.sidx);if(!e.sidx||!n||this.mainPlaylistLoader_.sidxMapping_[n]){U.clearTimeout(this.mediaRequest_),this.mediaRequest_=U.setTimeout(()=>i(!1),0);return}const s=qh(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:h}=u;let f;try{f=YY(Ce(u.response).subarray(8))}catch(p){p.metadata=ia({requestType:h,request:u,parseFailure:!0}),this.requestErrored_(p,u,t);return}return c[n]={sidxInfo:e.sidx,sidx:f},_p(e,f,e.sidx.resolvedUri),i(!0)},o="dash-sidx";this.request=fQ(s,this.vhs_.xhr,(l,u,c,h)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const g=c||"unknown";return a({status:u.status,message:`Unsupported ${g} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:p}=e.sidx.byterange;if(h.length>=p+f)return a(l,{response:h.subarray(f,f+p),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:Mm({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},U.clearTimeout(this.minimumUpdatePeriodTimeout_),U.clearTimeout(this.mediaRequest_),U.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,n=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,U.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),U.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(U.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,U.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=U.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){U.clearTimeout(this.mediaRequest_),this.mediaRequest_=U.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,n)=>{if(i){const{requestType:a}=n;i.metadata=ia({requestType:a,request:n,error:i})}if(this.requestErrored_(i,n)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=n.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?this.mainLoaded_=Date.parse(n.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=qh(this.mainPlaylistLoader_.srcUrl,n),s){this.handleMain_(),this.syncClientServerClock_(()=>e(n,s));return}return e(n,s)})}syncClientServerClock_(e){const t=VY(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Kr(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,n)=>{if(!this.request)return;if(i){const{requestType:a}=n;return this.error.metadata=ia({requestType:a,request:n,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!n.responseHeaders||!n.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(n.responseHeaders.date):s=Date.parse(n.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){U.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let i;try{i=gQ({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:K.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(i=yQ(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const n=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(n&&n!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=n),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:s,endList:a}=i,o=[];i.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(U.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=U.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=bQ(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const n=()=>{this.media().endList||(this.mediaUpdateTimeout=U.setTimeout(()=>{this.trigger("mediaupdatetimeout"),n()},Rm(this.media(),!!i)))};n()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const n=e.contentProtection[i].attributes["cenc:default_KID"];n&&t.add(n.replace(/-/g,"").toLowerCase())}return t}}}var lr={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const TQ=r=>{const e=new Uint8Array(new ArrayBuffer(r.length));for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e.buffer},hO=function(r){return r.on=r.addEventListener,r.off=r.removeEventListener,r},SQ=function(r){try{return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(r),URL.createObjectURL(t.getBlob())}},dO=function(r){return function(){const e=SQ(r),t=hO(new Worker(e));t.objURL=e;const i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},fO=function(r){return`var browserWorkerPolyFill = ${hO.toString()};
browserWorkerPolyFill(self);
`+r},pO=function(r){return r.toString().replace(/^function.+?{/,"").slice(0,-1)},xQ=fO(pO(function(){var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var d={};this.on=function(m,_){d[m]||(d[m]=[]),d[m]=d[m].concat(_)},this.off=function(m,_){var y;return d[m]?(y=d[m].indexOf(_),d[m]=d[m].slice(),d[m].splice(y,1),y>-1):!1},this.trigger=function(m){var _,y,T,w;if(_=d[m],!!_)if(arguments.length===2)for(T=_.length,y=0;y<T;++y)_[y].call(this,arguments[1]);else{for(w=[],y=arguments.length,y=1;y<arguments.length;++y)w.push(arguments[y]);for(T=_.length,y=0;y<T;++y)_[y].apply(this,w)}},this.dispose=function(){d={}}}};e.prototype.pipe=function(d){return this.on("data",function(m){d.push(m)}),this.on("done",function(m){d.flush(m)}),this.on("partialdone",function(m){d.partialFlush(m)}),this.on("endedtimeline",function(m){d.endTimeline(m)}),this.on("reset",function(m){d.reset(m)}),d},e.prototype.push=function(d){this.trigger("data",d)},e.prototype.flush=function(d){this.trigger("done",d)},e.prototype.partialFlush=function(d){this.trigger("partialdone",d)},e.prototype.endTimeline=function(d){this.trigger("endedtimeline",d)},e.prototype.reset=function(d){this.trigger("reset",d)};var t=e,i=Math.pow(2,32),n=function(d){var m=new DataView(d.buffer,d.byteOffset,d.byteLength),_;return m.getBigUint64?(_=m.getBigUint64(0),_<Number.MAX_SAFE_INTEGER?Number(_):_):m.getUint32(0)*i+m.getUint32(4)},s={getUint64:n,MAX_UINT32:i},a=s.MAX_UINT32,o,l,u,c,h,f,p,g,v,b,E,x,D,O,P,R,A,I,S,C,$,F,j,z,J,Z,W,Y,X,ie,Q,he,ve,pe,be,Oe;(function(){var d;if(j={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(d in j)j.hasOwnProperty(d)&&(j[d]=[d.charCodeAt(0),d.charCodeAt(1),d.charCodeAt(2),d.charCodeAt(3)]);z=new Uint8Array([105,115,111,109]),Z=new Uint8Array([97,118,99,49]),J=new Uint8Array([0,0,0,1]),W=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Y=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),X={video:W,audio:Y},he=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Q=new Uint8Array([0,0,0,0,0,0,0,0]),ve=new Uint8Array([0,0,0,0,0,0,0,0]),pe=ve,be=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Oe=ve,ie=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(d){var m=[],_=0,y,T,w;for(y=1;y<arguments.length;y++)m.push(arguments[y]);for(y=m.length;y--;)_+=m[y].byteLength;for(T=new Uint8Array(_+8),w=new DataView(T.buffer,T.byteOffset,T.byteLength),w.setUint32(0,T.byteLength),T.set(d,4),y=0,_=8;y<m.length;y++)T.set(m[y],_),_+=m[y].byteLength;return T},l=function(){return o(j.dinf,o(j.dref,he))},u=function(d){return o(j.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},c=function(){return o(j.ftyp,z,J,z,Z)},R=function(d){return o(j.hdlr,X[d])},h=function(d){return o(j.mdat,d)},P=function(d){var m=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(m[12]=d.samplerate>>>24&255,m[13]=d.samplerate>>>16&255,m[14]=d.samplerate>>>8&255,m[15]=d.samplerate&255),o(j.mdhd,m)},O=function(d){return o(j.mdia,P(d),R(d.type),p(d))},f=function(d){return o(j.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},p=function(d){return o(j.minf,d.type==="video"?o(j.vmhd,ie):o(j.smhd,Q),l(),I(d))},g=function(d,m){for(var _=[],y=m.length;y--;)_[y]=C(m[y]);return o.apply(null,[j.moof,f(d)].concat(_))},v=function(d){for(var m=d.length,_=[];m--;)_[m]=x(d[m]);return o.apply(null,[j.moov,E(4294967295)].concat(_).concat(b(d)))},b=function(d){for(var m=d.length,_=[];m--;)_[m]=$(d[m]);return o.apply(null,[j.mvex].concat(_))},E=function(d){var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(j.mvhd,m)},A=function(d){var m=d.samples||[],_=new Uint8Array(4+m.length),y,T;for(T=0;T<m.length;T++)y=m[T].flags,_[T+4]=y.dependsOn<<4|y.isDependedOn<<2|y.hasRedundancy;return o(j.sdtp,_)},I=function(d){return o(j.stbl,S(d),o(j.stts,Oe),o(j.stsc,pe),o(j.stsz,be),o(j.stco,ve))},(function(){var d,m;S=function(_){return o(j.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),_.type==="video"?d(_):m(_))},d=function(_){var y=_.sps||[],T=_.pps||[],w=[],N=[],L,B;for(L=0;L<y.length;L++)w.push((y[L].byteLength&65280)>>>8),w.push(y[L].byteLength&255),w=w.concat(Array.prototype.slice.call(y[L]));for(L=0;L<T.length;L++)N.push((T[L].byteLength&65280)>>>8),N.push(T[L].byteLength&255),N=N.concat(Array.prototype.slice.call(T[L]));if(B=[j.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(_.width&65280)>>8,_.width&255,(_.height&65280)>>8,_.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(j.avcC,new Uint8Array([1,_.profileIdc,_.profileCompatibility,_.levelIdc,255].concat([y.length],w,[T.length],N))),o(j.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],_.sarRatio){var H=_.sarRatio[0],G=_.sarRatio[1];B.push(o(j.pasp,new Uint8Array([(H&4278190080)>>24,(H&16711680)>>16,(H&65280)>>8,H&255,(G&4278190080)>>24,(G&16711680)>>16,(G&65280)>>8,G&255])))}return o.apply(null,B)},m=function(_){return o(j.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(_.channelcount&65280)>>8,_.channelcount&255,(_.samplesize&65280)>>8,_.samplesize&255,0,0,0,0,(_.samplerate&65280)>>8,_.samplerate&255,0,0]),u(_))}})(),D=function(d){var m=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return o(j.tkhd,m)},C=function(d){var m,_,y,T,w,N,L;return m=o(j.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),N=Math.floor(d.baseMediaDecodeTime/a),L=Math.floor(d.baseMediaDecodeTime%a),_=o(j.tfdt,new Uint8Array([1,0,0,0,N>>>24&255,N>>>16&255,N>>>8&255,N&255,L>>>24&255,L>>>16&255,L>>>8&255,L&255])),w=92,d.type==="audio"?(y=F(d,w),o(j.traf,m,_,y)):(T=A(d),y=F(d,T.length+w),o(j.traf,m,_,y,T))},x=function(d){return d.duration=d.duration||4294967295,o(j.trak,D(d),O(d))},$=function(d){var m=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(m[m.length-1]=0),o(j.trex,m)},(function(){var d,m,_;_=function(y,T){var w=0,N=0,L=0,B=0;return y.length&&(y[0].duration!==void 0&&(w=1),y[0].size!==void 0&&(N=2),y[0].flags!==void 0&&(L=4),y[0].compositionTimeOffset!==void 0&&(B=8)),[0,0,w|N|L|B,1,(y.length&4278190080)>>>24,(y.length&16711680)>>>16,(y.length&65280)>>>8,y.length&255,(T&4278190080)>>>24,(T&16711680)>>>16,(T&65280)>>>8,T&255]},m=function(y,T){var w,N,L,B,H,G;for(B=y.samples||[],T+=20+16*B.length,L=_(B,T),N=new Uint8Array(L.length+B.length*16),N.set(L),w=L.length,G=0;G<B.length;G++)H=B[G],N[w++]=(H.duration&4278190080)>>>24,N[w++]=(H.duration&16711680)>>>16,N[w++]=(H.duration&65280)>>>8,N[w++]=H.duration&255,N[w++]=(H.size&4278190080)>>>24,N[w++]=(H.size&16711680)>>>16,N[w++]=(H.size&65280)>>>8,N[w++]=H.size&255,N[w++]=H.flags.isLeading<<2|H.flags.dependsOn,N[w++]=H.flags.isDependedOn<<6|H.flags.hasRedundancy<<4|H.flags.paddingValue<<1|H.flags.isNonSyncSample,N[w++]=H.flags.degradationPriority&61440,N[w++]=H.flags.degradationPriority&15,N[w++]=(H.compositionTimeOffset&4278190080)>>>24,N[w++]=(H.compositionTimeOffset&16711680)>>>16,N[w++]=(H.compositionTimeOffset&65280)>>>8,N[w++]=H.compositionTimeOffset&255;return o(j.trun,N)},d=function(y,T){var w,N,L,B,H,G;for(B=y.samples||[],T+=20+8*B.length,L=_(B,T),w=new Uint8Array(L.length+B.length*8),w.set(L),N=L.length,G=0;G<B.length;G++)H=B[G],w[N++]=(H.duration&4278190080)>>>24,w[N++]=(H.duration&16711680)>>>16,w[N++]=(H.duration&65280)>>>8,w[N++]=H.duration&255,w[N++]=(H.size&4278190080)>>>24,w[N++]=(H.size&16711680)>>>16,w[N++]=(H.size&65280)>>>8,w[N++]=H.size&255;return o(j.trun,w)},F=function(y,T){return y.type==="audio"?d(y,T):m(y,T)}})();var Qe={ftyp:c,mdat:h,moof:g,moov:v,initSegment:function(d){var m=c(),_=v(d),y;return y=new Uint8Array(m.byteLength+_.byteLength),y.set(m),y.set(_,m.byteLength),y}},Ze=function(d){var m,_,y=[],T=[];for(T.byteLength=0,T.nalCount=0,T.duration=0,y.byteLength=0,m=0;m<d.length;m++)_=d[m],_.nalUnitType==="access_unit_delimiter_rbsp"?(y.length&&(y.duration=_.dts-y.dts,T.byteLength+=y.byteLength,T.nalCount+=y.length,T.duration+=y.duration,T.push(y)),y=[_],y.byteLength=_.data.byteLength,y.pts=_.pts,y.dts=_.dts):(_.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(y.keyFrame=!0),y.duration=_.dts-y.dts,y.byteLength+=_.data.byteLength,y.push(_));return T.length&&(!y.duration||y.duration<=0)&&(y.duration=T[T.length-1].duration),T.byteLength+=y.byteLength,T.nalCount+=y.length,T.duration+=y.duration,T.push(y),T},tr=function(d){var m,_,y=[],T=[];for(y.byteLength=0,y.nalCount=0,y.duration=0,y.pts=d[0].pts,y.dts=d[0].dts,T.byteLength=0,T.nalCount=0,T.duration=0,T.pts=d[0].pts,T.dts=d[0].dts,m=0;m<d.length;m++)_=d[m],_.keyFrame?(y.length&&(T.push(y),T.byteLength+=y.byteLength,T.nalCount+=y.nalCount,T.duration+=y.duration),y=[_],y.nalCount=_.length,y.byteLength=_.byteLength,y.pts=_.pts,y.dts=_.dts,y.duration=_.duration):(y.duration+=_.duration,y.nalCount+=_.length,y.byteLength+=_.byteLength,y.push(_));return T.length&&y.duration<=0&&(y.duration=T[T.length-1].duration),T.byteLength+=y.byteLength,T.nalCount+=y.nalCount,T.duration+=y.duration,T.push(y),T},Ir=function(d){var m;return!d[0][0].keyFrame&&d.length>1&&(m=d.shift(),d.byteLength-=m.byteLength,d.nalCount-=m.nalCount,d[0][0].dts=m.dts,d[0][0].pts=m.pts,d[0][0].duration+=m.duration),d},bt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Wt=function(d,m){var _=bt();return _.dataOffset=m,_.compositionTimeOffset=d.pts-d.dts,_.duration=d.duration,_.size=4*d.length,_.size+=d.byteLength,d.keyFrame&&(_.flags.dependsOn=2,_.flags.isNonSyncSample=0),_},Ot=function(d,m){var _,y,T,w,N,L=m||0,B=[];for(_=0;_<d.length;_++)for(w=d[_],y=0;y<w.length;y++)N=w[y],T=Wt(N,L),L+=T.size,B.push(T);return B},Pt=function(d){var m,_,y,T,w,N,L=0,B=d.byteLength,H=d.nalCount,G=B+4*H,te=new Uint8Array(G),de=new DataView(te.buffer);for(m=0;m<d.length;m++)for(T=d[m],_=0;_<T.length;_++)for(w=T[_],y=0;y<w.length;y++)N=w[y],de.setUint32(L,N.data.byteLength),L+=4,te.set(N.data,L),L+=N.data.byteLength;return te},ji=function(d,m){var _,y=m||0,T=[];return _=Wt(d,y),T.push(_),T},Tt=function(d){var m,_,y=0,T=d.byteLength,w=d.length,N=T+4*w,L=new Uint8Array(N),B=new DataView(L.buffer);for(m=0;m<d.length;m++)_=d[m],B.setUint32(y,_.data.byteLength),y+=4,L.set(_.data,y),y+=_.data.byteLength;return L},mt={groupNalsIntoFrames:Ze,groupFramesIntoGops:tr,extendFirstKeyFrame:Ir,generateSampleTable:Ot,concatenateNalData:Pt,generateSampleTableForFrame:ji,concatenateNalDataForFrame:Tt},St=[33,16,5,32,164,27],Ar=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ae=function(d){for(var m=[];d--;)m.push(0);return m},et=function(d){return Object.keys(d).reduce(function(m,_){return m[_]=new Uint8Array(d[_].reduce(function(y,T){return y.concat(T)},[])),m},{})},Je,Or=function(){if(!Je){var d={96e3:[St,[227,64],Ae(154),[56]],88200:[St,[231],Ae(170),[56]],64e3:[St,[248,192],Ae(240),[56]],48e3:[St,[255,192],Ae(268),[55,148,128],Ae(54),[112]],44100:[St,[255,192],Ae(268),[55,163,128],Ae(84),[112]],32e3:[St,[255,192],Ae(268),[55,234],Ae(226),[112]],24e3:[St,[255,192],Ae(268),[55,255,128],Ae(268),[111,112],Ae(126),[224]],16e3:[St,[255,192],Ae(268),[55,255,128],Ae(268),[111,255],Ae(269),[223,108],Ae(195),[1,192]],12e3:[Ar,Ae(268),[3,127,248],Ae(268),[6,255,240],Ae(268),[13,255,224],Ae(268),[27,253,128],Ae(259),[56]],11025:[Ar,Ae(268),[3,127,248],Ae(268),[6,255,240],Ae(268),[13,255,224],Ae(268),[27,255,192],Ae(268),[55,175,128],Ae(108),[112]],8e3:[Ar,Ae(268),[3,121,16],Ae(47),[7]]};Je=et(d)}return Je},sr=9e4,Gr,sn,Pr,ni,an,on,Te;Gr=function(d){return d*sr},sn=function(d,m){return d*m},Pr=function(d){return d/sr},ni=function(d,m){return d/m},an=function(d,m){return Gr(ni(d,m))},on=function(d,m){return sn(Pr(d),m)},Te=function(d,m,_){return Pr(_?d:d-m)};var ae={ONE_SECOND_IN_TS:sr,secondsToVideoTs:Gr,secondsToAudioTs:sn,videoTsToSeconds:Pr,audioTsToSeconds:ni,audioTsToVideoTs:an,videoTsToAudioTs:on,metadataTsToSeconds:Te},me=Or,fe=ae,Se=function(d){var m,_,y=0;for(m=0;m<d.length;m++)_=d[m],y+=_.data.byteLength;return y},He=function(d,m,_,y){var T,w=0,N=0,L=0,B=0,H,G,te;if(m.length&&(T=fe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),w=Math.ceil(fe.ONE_SECOND_IN_TS/(d.samplerate/1024)),_&&y&&(N=T-Math.max(_,y),L=Math.floor(N/w),B=L*w),!(L<1||B>fe.ONE_SECOND_IN_TS/2))){for(H=me()[d.samplerate],H||(H=m[0].data),G=0;G<L;G++)te=m[0],m.splice(0,0,{data:H,dts:te.dts-w,pts:te.pts-w});return d.baseMediaDecodeTime-=Math.floor(fe.videoTsToAudioTs(B,d.samplerate)),B}},ln=function(d,m,_){return m.minSegmentDts>=_?d:(m.minSegmentDts=1/0,d.filter(function(y){return y.dts>=_?(m.minSegmentDts=Math.min(m.minSegmentDts,y.dts),m.minSegmentPts=m.minSegmentDts,!0):!1}))},si=function(d){var m,_,y=[];for(m=0;m<d.length;m++)_=d[m],y.push({size:_.data.byteLength,duration:1024});return y},Af=function(d){var m,_,y=0,T=new Uint8Array(Se(d));for(m=0;m<d.length;m++)_=d[m],T.set(_.data,y),y+=_.data.byteLength;return T},Rc={prefixWithSilence:He,trimAdtsFramesByEarliestDts:ln,generateSampleTable:si,concatenateFrameData:Af},Of=ae.ONE_SECOND_IN_TS,k=function(d,m){typeof m.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=m.pts),d.minSegmentPts===void 0?d.minSegmentPts=m.pts:d.minSegmentPts=Math.min(d.minSegmentPts,m.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=m.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,m.pts)),typeof m.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=m.dts),d.minSegmentDts===void 0?d.minSegmentDts=m.dts:d.minSegmentDts=Math.min(d.minSegmentDts,m.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=m.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,m.dts))},M=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},V=function(d,m){var _,y,T=d.minSegmentDts;return m||(T-=d.timelineStartInfo.dts),_=d.timelineStartInfo.baseMediaDecodeTime,_+=T,_=Math.max(0,_),d.type==="audio"&&(y=d.samplerate/Of,_*=y,_=Math.floor(_)),_},ee={clearDtsInfo:M,calculateTrackBaseMediaDecodeTime:V,collectDtsInfo:k},ue=4,Ie=128,dt=function(d){for(var m=0,_={payloadType:-1,payloadSize:0},y=0,T=0;m<d.byteLength&&d[m]!==Ie;){for(;d[m]===255;)y+=255,m++;for(y+=d[m++];d[m]===255;)T+=255,m++;if(T+=d[m++],!_.payload&&y===ue){var w=String.fromCharCode(d[m+3],d[m+4],d[m+5],d[m+6]);if(w==="GA94"){_.payloadType=y,_.payloadSize=T,_.payload=d.subarray(m,m+T);break}else _.payload=void 0}m+=T,y=0,T=0}return _},Rr=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},bi=function(d,m){var _=[],y,T,w,N;if(!(m[0]&64))return _;for(T=m[0]&31,y=0;y<T;y++)w=y*3,N={type:m[w+2]&3,pts:d},m[w+2]&4&&(N.ccData=m[w+3]<<8|m[w+4],_.push(N));return _},Nn=function(d){for(var m=d.byteLength,_=[],y=1,T,w;y<m-2;)d[y]===0&&d[y+1]===0&&d[y+2]===3?(_.push(y+2),y+=2):y++;if(_.length===0)return d;T=m-_.length,w=new Uint8Array(T);var N=0;for(y=0;y<T;N++,y++)N===_[0]&&(N++,_.shift()),w[y]=d[N];return w},Hi={parseSei:dt,parseUserData:Rr,parseCaptionPackets:bi,discardEmulationPreventionBytes:Nn,USER_DATA_REGISTERED_ITU_T_T35:ue},un=t,Vi=Hi,qt=function(d){d=d||{},qt.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Rt(0,0),new Rt(0,1),new Rt(1,0),new Rt(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(m){m.on("data",this.trigger.bind(this,"data")),m.on("partialdone",this.trigger.bind(this,"partialdone")),m.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};qt.prototype=new un,qt.prototype.push=function(d){var m,_,y;if(d.nalUnitType==="sei_rbsp"&&(m=Vi.parseSei(d.escapedRBSP),!!m.payload&&m.payloadType===Vi.USER_DATA_REGISTERED_ITU_T_T35&&(_=Vi.parseUserData(m),!!_))){if(d.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(d.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}y=Vi.parseCaptionPackets(d.pts,_),this.captionPackets_=this.captionPackets_.concat(y),this.latestDts_!==d.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=d.dts}},qt.prototype.flushCCStreams=function(d){this.ccStreams_.forEach(function(m){return d==="flush"?m.flush():m.partialFlush()},this)},qt.prototype.flushStream=function(d){if(!this.captionPackets_.length){this.flushCCStreams(d);return}this.captionPackets_.forEach(function(m,_){m.presortIndex=_}),this.captionPackets_.sort(function(m,_){return m.pts===_.pts?m.presortIndex-_.presortIndex:m.pts-_.pts}),this.captionPackets_.forEach(function(m){m.type<2?this.dispatchCea608Packet(m):this.dispatchCea708Packet(m)},this),this.captionPackets_.length=0,this.flushCCStreams(d)},qt.prototype.flush=function(){return this.flushStream("flush")},qt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},qt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(d){d.reset()})},qt.prototype.dispatchCea608Packet=function(d){this.setsTextOrXDSActive(d)?this.activeCea608Channel_[d.type]=null:this.setsChannel1Active(d)?this.activeCea608Channel_[d.type]=0:this.setsChannel2Active(d)&&(this.activeCea608Channel_[d.type]=1),this.activeCea608Channel_[d.type]!==null&&this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)},qt.prototype.setsChannel1Active=function(d){return(d.ccData&30720)===4096},qt.prototype.setsChannel2Active=function(d){return(d.ccData&30720)===6144},qt.prototype.setsTextOrXDSActive=function(d){return(d.ccData&28928)===256||(d.ccData&30974)===4138||(d.ccData&30974)===6186},qt.prototype.dispatchCea708Packet=function(d){this.parse708captions_&&this.cc708Stream_.push(d)};var Gi={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ds=function(d){var m=Gi[d]||d;return d&4096&&d===m?"":String.fromCharCode(m)},Ln=function(d){return 32<=d&&d<=127||160<=d&&d<=255},gt=function(d){this.windowNum=d,this.reset()};gt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},gt.prototype.getText=function(){return this.rows.join(`
`)},gt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},gt.prototype.newLine=function(d){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(d),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},gt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},gt.prototype.addText=function(d){this.rows[this.rowIdx]+=d},gt.prototype.backspace=function(){if(!this.isEmpty()){var d=this.rows[this.rowIdx];this.rows[this.rowIdx]=d.substr(0,d.length-1)}};var Ka=function(d,m,_){this.serviceNum=d,this.text="",this.currentWindow=new gt(-1),this.windows=[],this.stream=_,typeof m=="string"&&this.createTextDecoder(m)};Ka.prototype.init=function(d,m){this.startPts=d;for(var _=0;_<8;_++)this.windows[_]=new gt(_),typeof m=="function"&&(this.windows[_].beforeRowOverflow=m)},Ka.prototype.setCurrentWindow=function(d){this.currentWindow=this.windows[d]},Ka.prototype.createTextDecoder=function(d){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(d)}catch(m){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+d+" encoding. "+m})}};var Ve=function(d){d=d||{},Ve.prototype.init.call(this);var m=this,_=d.captionServices||{},y={},T;Object.keys(_).forEach(w=>{T=_[w],/^SERVICE/.test(w)&&(y[w]=T.encoding)}),this.serviceEncodings=y,this.current708Packet=null,this.services={},this.push=function(w){w.type===3?(m.new708Packet(),m.add708Bytes(w)):(m.current708Packet===null&&m.new708Packet(),m.add708Bytes(w))}};Ve.prototype=new un,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(d){var m=d.ccData,_=m>>>8,y=m&255;this.current708Packet.ptsVals.push(d.pts),this.current708Packet.data.push(_),this.current708Packet.data.push(y)},Ve.prototype.push708Packet=function(){var d=this.current708Packet,m=d.data,_=null,y=null,T=0,w=m[T++];for(d.seq=w>>6,d.sizeCode=w&63;T<m.length;T++)w=m[T++],_=w>>5,y=w&31,_===7&&y>0&&(w=m[T++],_=w),this.pushServiceBlock(_,T,y),y>0&&(T+=y-1)},Ve.prototype.pushServiceBlock=function(d,m,_){var y,T=m,w=this.current708Packet.data,N=this.services[d];for(N||(N=this.initService(d,T));T<m+_&&T<w.length;T++)y=w[T],Ln(y)?T=this.handleText(T,N):y===24?T=this.multiByteCharacter(T,N):y===16?T=this.extendedCommands(T,N):128<=y&&y<=135?T=this.setCurrentWindow(T,N):152<=y&&y<=159?T=this.defineWindow(T,N):y===136?T=this.clearWindows(T,N):y===140?T=this.deleteWindows(T,N):y===137?T=this.displayWindows(T,N):y===138?T=this.hideWindows(T,N):y===139?T=this.toggleWindows(T,N):y===151?T=this.setWindowAttributes(T,N):y===144?T=this.setPenAttributes(T,N):y===145?T=this.setPenColor(T,N):y===146?T=this.setPenLocation(T,N):y===143?N=this.reset(T,N):y===8?N.currentWindow.backspace():y===12?N.currentWindow.clearText():y===13?N.currentWindow.pendingNewLine=!0:y===14?N.currentWindow.clearText():y===141&&T++},Ve.prototype.extendedCommands=function(d,m){var _=this.current708Packet.data,y=_[++d];return Ln(y)&&(d=this.handleText(d,m,{isExtended:!0})),d},Ve.prototype.getPts=function(d){return this.current708Packet.ptsVals[Math.floor(d/2)]},Ve.prototype.initService=function(d,m){var y="SERVICE"+d,_=this,y,T;return y in this.serviceEncodings&&(T=this.serviceEncodings[y]),this.services[d]=new Ka(d,T,_),this.services[d].init(this.getPts(m),function(w){_.flushDisplayed(w,_.services[d])}),this.services[d]},Ve.prototype.handleText=function(d,m,_){var y=_&&_.isExtended,T=_&&_.isMultiByte,w=this.current708Packet.data,N=y?4096:0,L=w[d],B=w[d+1],H=m.currentWindow,G,te;function de(ne){return ne.map(Ee=>("0"+(Ee&255).toString(16)).slice(-2)).join("")}if(T?(te=[L,B],d++):te=[L],m.textDecoder_&&!y)G=m.textDecoder_.decode(new Uint8Array(te));else if(T){const ne=de(te);G=String.fromCharCode(parseInt(ne,16))}else G=ds(N|L);return H.pendingNewLine&&!H.isEmpty()&&H.newLine(this.getPts(d)),H.pendingNewLine=!1,H.addText(G),d},Ve.prototype.multiByteCharacter=function(d,m){var _=this.current708Packet.data,y=_[d+1],T=_[d+2];return Ln(y)&&Ln(T)&&(d=this.handleText(++d,m,{isMultiByte:!0})),d},Ve.prototype.setCurrentWindow=function(d,m){var _=this.current708Packet.data,y=_[d],T=y&7;return m.setCurrentWindow(T),d},Ve.prototype.defineWindow=function(d,m){var _=this.current708Packet.data,y=_[d],T=y&7;m.setCurrentWindow(T);var w=m.currentWindow;return y=_[++d],w.visible=(y&32)>>5,w.rowLock=(y&16)>>4,w.columnLock=(y&8)>>3,w.priority=y&7,y=_[++d],w.relativePositioning=(y&128)>>7,w.anchorVertical=y&127,y=_[++d],w.anchorHorizontal=y,y=_[++d],w.anchorPoint=(y&240)>>4,w.rowCount=y&15,y=_[++d],w.columnCount=y&63,y=_[++d],w.windowStyle=(y&56)>>3,w.penStyle=y&7,w.virtualRowCount=w.rowCount+1,d},Ve.prototype.setWindowAttributes=function(d,m){var _=this.current708Packet.data,y=_[d],T=m.currentWindow.winAttr;return y=_[++d],T.fillOpacity=(y&192)>>6,T.fillRed=(y&48)>>4,T.fillGreen=(y&12)>>2,T.fillBlue=y&3,y=_[++d],T.borderType=(y&192)>>6,T.borderRed=(y&48)>>4,T.borderGreen=(y&12)>>2,T.borderBlue=y&3,y=_[++d],T.borderType+=(y&128)>>5,T.wordWrap=(y&64)>>6,T.printDirection=(y&48)>>4,T.scrollDirection=(y&12)>>2,T.justify=y&3,y=_[++d],T.effectSpeed=(y&240)>>4,T.effectDirection=(y&12)>>2,T.displayEffect=y&3,d},Ve.prototype.flushDisplayed=function(d,m){for(var _=[],y=0;y<8;y++)m.windows[y].visible&&!m.windows[y].isEmpty()&&_.push(m.windows[y].getText());m.endPts=d,m.text=_.join(`

`),this.pushCaption(m),m.startPts=d},Ve.prototype.pushCaption=function(d){d.text!==""&&(this.trigger("data",{startPts:d.startPts,endPts:d.endPts,text:d.text,stream:"cc708_"+d.serviceNum}),d.text="",d.startPts=d.endPts)},Ve.prototype.displayWindows=function(d,m){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,m);for(var w=0;w<8;w++)y&1<<w&&(m.windows[w].visible=1);return d},Ve.prototype.hideWindows=function(d,m){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,m);for(var w=0;w<8;w++)y&1<<w&&(m.windows[w].visible=0);return d},Ve.prototype.toggleWindows=function(d,m){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,m);for(var w=0;w<8;w++)y&1<<w&&(m.windows[w].visible^=1);return d},Ve.prototype.clearWindows=function(d,m){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,m);for(var w=0;w<8;w++)y&1<<w&&m.windows[w].clearText();return d},Ve.prototype.deleteWindows=function(d,m){var _=this.current708Packet.data,y=_[++d],T=this.getPts(d);this.flushDisplayed(T,m);for(var w=0;w<8;w++)y&1<<w&&m.windows[w].reset();return d},Ve.prototype.setPenAttributes=function(d,m){var _=this.current708Packet.data,y=_[d],T=m.currentWindow.penAttr;return y=_[++d],T.textTag=(y&240)>>4,T.offset=(y&12)>>2,T.penSize=y&3,y=_[++d],T.italics=(y&128)>>7,T.underline=(y&64)>>6,T.edgeType=(y&56)>>3,T.fontStyle=y&7,d},Ve.prototype.setPenColor=function(d,m){var _=this.current708Packet.data,y=_[d],T=m.currentWindow.penColor;return y=_[++d],T.fgOpacity=(y&192)>>6,T.fgRed=(y&48)>>4,T.fgGreen=(y&12)>>2,T.fgBlue=y&3,y=_[++d],T.bgOpacity=(y&192)>>6,T.bgRed=(y&48)>>4,T.bgGreen=(y&12)>>2,T.bgBlue=y&3,y=_[++d],T.edgeRed=(y&48)>>4,T.edgeGreen=(y&12)>>2,T.edgeBlue=y&3,d},Ve.prototype.setPenLocation=function(d,m){var _=this.current708Packet.data,y=_[d],T=m.currentWindow.penLoc;return m.currentWindow.pendingNewLine=!0,y=_[++d],T.row=y&15,y=_[++d],T.column=y&63,d},Ve.prototype.reset=function(d,m){var _=this.getPts(d);return this.flushDisplayed(_,m),this.initService(m.serviceNum,d)};var Pf={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Rf=function(d){return d===null?"":(d=Pf[d]||d,String.fromCharCode(d))},kf=14,Fye=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Xa=function(){for(var d=[],m=kf+1;m--;)d.push({text:"",indent:0,offset:0});return d},Rt=function(d,m){Rt.prototype.init.call(this),this.field_=d||0,this.dataChannel_=m||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(_){var y,T,w,N,L;if(y=_.ccData&32639,y===this.lastControlCode_){this.lastControlCode_=null;return}if((y&61440)===4096?this.lastControlCode_=y:y!==this.PADDING_&&(this.lastControlCode_=null),w=y>>>8,N=y&255,y!==this.PADDING_)if(y===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(y===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(_.pts),this.flushDisplayed(_.pts),T=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=T,this.startPts_=_.pts;else if(y===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(_.pts);else if(y===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(_.pts);else if(y===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(_.pts);else if(y===this.CARRIAGE_RETURN_)this.clearFormatting(_.pts),this.flushDisplayed(_.pts),this.shiftRowsUp_(),this.startPts_=_.pts;else if(y===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(y===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(_.pts),this.displayed_=Xa();else if(y===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Xa();else if(y===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(_.pts),this.displayed_=Xa()),this.mode_="paintOn",this.startPts_=_.pts;else if(this.isSpecialCharacter(w,N))w=(w&3)<<8,L=Rf(w|N),this[this.mode_](_.pts,L),this.column_++;else if(this.isExtCharacter(w,N))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),w=(w&3)<<8,L=Rf(w|N),this[this.mode_](_.pts,L),this.column_++;else if(this.isMidRowCode(w,N))this.clearFormatting(_.pts),this[this.mode_](_.pts," "),this.column_++,(N&14)===14&&this.addFormatting(_.pts,["i"]),(N&1)===1&&this.addFormatting(_.pts,["u"]);else if(this.isOffsetControlCode(w,N)){const H=N&3;this.nonDisplayed_[this.row_].offset=H,this.column_+=H}else if(this.isPAC(w,N)){var B=Fye.indexOf(y&7968);if(this.mode_==="rollUp"&&(B-this.rollUpRows_+1<0&&(B=this.rollUpRows_-1),this.setRollUp(_.pts,B)),B!==this.row_&&B>=0&&B<=14&&(this.clearFormatting(_.pts),this.row_=B),N&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(_.pts,["u"]),(y&16)===16){const H=(y&14)>>1;this.column_=H*4,this.nonDisplayed_[this.row_].indent+=H}this.isColorPAC(N)&&(N&14)===14&&this.addFormatting(_.pts,["i"])}else this.isNormalChar(w)&&(N===0&&(N=null),L=Rf(w),L+=Rf(N),this[this.mode_](_.pts,L),this.column_+=L.length)}};Rt.prototype=new un,Rt.prototype.flushDisplayed=function(d){const m=y=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+y+"."})},_=[];this.displayed_.forEach((y,T)=>{if(y&&y.text&&y.text.length){try{y.text=y.text.trim()}catch{m(T)}y.text.length&&_.push({text:y.text,line:T+1,position:10+Math.min(70,y.indent*10)+y.offset*2.5})}else y==null&&m(T)}),_.length&&this.trigger("data",{startPts:this.startPts_,endPts:d,content:_,stream:this.name_})},Rt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Xa(),this.nonDisplayed_=Xa(),this.lastControlCode_=null,this.column_=0,this.row_=kf,this.rollUpRows_=2,this.formatting_=[]},Rt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Rt.prototype.isSpecialCharacter=function(d,m){return d===this.EXT_&&m>=48&&m<=63},Rt.prototype.isExtCharacter=function(d,m){return(d===this.EXT_+1||d===this.EXT_+2)&&m>=32&&m<=63},Rt.prototype.isMidRowCode=function(d,m){return d===this.EXT_&&m>=32&&m<=47},Rt.prototype.isOffsetControlCode=function(d,m){return d===this.OFFSET_&&m>=33&&m<=35},Rt.prototype.isPAC=function(d,m){return d>=this.BASE_&&d<this.BASE_+8&&m>=64&&m<=127},Rt.prototype.isColorPAC=function(d){return d>=64&&d<=79||d>=96&&d<=127},Rt.prototype.isNormalChar=function(d){return d>=32&&d<=127},Rt.prototype.setRollUp=function(d,m){if(this.mode_!=="rollUp"&&(this.row_=kf,this.mode_="rollUp",this.flushDisplayed(d),this.nonDisplayed_=Xa(),this.displayed_=Xa()),m!==void 0&&m!==this.row_)for(var _=0;_<this.rollUpRows_;_++)this.displayed_[m-_]=this.displayed_[this.row_-_],this.displayed_[this.row_-_]={text:"",indent:0,offset:0};m===void 0&&(m=this.row_),this.topRow_=m-this.rollUpRows_+1},Rt.prototype.addFormatting=function(d,m){this.formatting_=this.formatting_.concat(m);var _=m.reduce(function(y,T){return y+"<"+T+">"},"");this[this.mode_](d,_)},Rt.prototype.clearFormatting=function(d){if(this.formatting_.length){var m=this.formatting_.reverse().reduce(function(_,y){return _+"</"+y+">"},"");this.formatting_=[],this[this.mode_](d,m)}},Rt.prototype.popOn=function(d,m){var _=this.nonDisplayed_[this.row_].text;_+=m,this.nonDisplayed_[this.row_].text=_},Rt.prototype.rollUp=function(d,m){var _=this.displayed_[this.row_].text;_+=m,this.displayed_[this.row_].text=_},Rt.prototype.shiftRowsUp_=function(){var d;for(d=0;d<this.topRow_;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.row_+1;d<kf+1;d++)this.displayed_[d]={text:"",indent:0,offset:0};for(d=this.topRow_;d<this.row_;d++)this.displayed_[d]=this.displayed_[d+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Rt.prototype.paintOn=function(d,m){var _=this.displayed_[this.row_].text;_+=m,this.displayed_[this.row_].text=_};var TW={CaptionStream:qt,Cea608Stream:Rt,Cea708Stream:Ve},Mf={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},qye=t,Bye=8589934592,Uye=4294967296,SW="shared",IC=function(d,m){var _=1;for(d>m&&(_=-1);Math.abs(m-d)>Uye;)d+=_*Bye;return d},AC=function(d){var m,_;AC.prototype.init.call(this),this.type_=d||SW,this.push=function(y){if(y.type==="metadata"){this.trigger("data",y);return}this.type_!==SW&&y.type!==this.type_||(_===void 0&&(_=y.dts),y.dts=IC(y.dts,_),y.pts=IC(y.pts,_),m=y.dts,this.trigger("data",y))},this.flush=function(){_=m,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){_=void 0,m=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};AC.prototype=new qye;var xW={TimestampRolloverStream:AC,handleRollover:IC},jye=(d,m,_)=>{if(!d)return-1;for(var y=_;y<d.length;y++)if(d[y]===m)return y;return-1},Hye={typedArrayIndexOf:jye},$f=Hye.typedArrayIndexOf,Nf={Utf8:3},wW=function(d,m,_){var y,T="";for(y=m;y<_;y++)T+="%"+("00"+d[y].toString(16)).slice(-2);return T},kc=function(d,m,_){return decodeURIComponent(wW(d,m,_))},Mc=function(d,m,_){return unescape(wW(d,m,_))},$c=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Nc={APIC:function(d){var m=1,_,y,T="-->";d.data[0]===Nf.Utf8&&(_=$f(d.data,0,m),!(_<0)&&(d.mimeType=Mc(d.data,m,_),m=_+1,d.pictureType=d.data[m],m++,y=$f(d.data,0,m),!(y<0)&&(d.description=kc(d.data,m,y),m=y+1,d.mimeType===T?d.url=Mc(d.data,m,d.data.length):d.pictureData=d.data.subarray(m,d.data.length))))},"T*":function(d){d.data[0]===Nf.Utf8&&(d.value=kc(d.data,1,d.data.length).replace(/\0*$/,""),d.values=d.value.split("\0"))},TXXX:function(d){var m;d.data[0]===Nf.Utf8&&(m=$f(d.data,0,1),m!==-1&&(d.description=kc(d.data,1,m),d.value=kc(d.data,m+1,d.data.length).replace(/\0*$/,""),d.data=d.value))},"W*":function(d){d.url=Mc(d.data,0,d.data.length).replace(/\0.*$/,"")},WXXX:function(d){var m;d.data[0]===Nf.Utf8&&(m=$f(d.data,0,1),m!==-1&&(d.description=kc(d.data,1,m),d.url=Mc(d.data,m+1,d.data.length).replace(/\0.*$/,"")))},PRIV:function(d){var m;for(m=0;m<d.data.length;m++)if(d.data[m]===0){d.owner=Mc(d.data,0,m);break}d.privateData=d.data.subarray(m+1),d.data=d.privateData}},Vye=function(d){var m,_,y=10,T=0,w=[];if(!(d.length<10||d[0]!==73||d[1]!==68||d[2]!==51)){T=$c(d.subarray(6,10)),T+=10;var N=d[5]&64;N&&(y+=4,y+=$c(d.subarray(10,14)),T-=$c(d.subarray(16,20)));do{if(m=$c(d.subarray(y+4,y+8)),m<1)break;_=String.fromCharCode(d[y],d[y+1],d[y+2],d[y+3]);var L={id:_,data:d.subarray(y+10,y+m+10)};L.key=L.id,Nc[L.id]?Nc[L.id](L):L.id[0]==="T"?Nc["T*"](L):L.id[0]==="W"&&Nc["W*"](L),w.push(L),y+=10,y+=m}while(y<T);return w}},EW={parseId3Frames:Vye,parseSyncSafeInteger:$c,frameParsers:Nc},Gye=t,Wye=Mf,Hs=EW,Lf;Lf=function(d){var m={descriptor:d&&d.descriptor},_=0,y=[],T=0,w;if(Lf.prototype.init.call(this),this.dispatchType=Wye.METADATA_STREAM_TYPE.toString(16),m.descriptor)for(w=0;w<m.descriptor.length;w++)this.dispatchType+=("00"+m.descriptor[w].toString(16)).slice(-2);this.push=function(N){var L,B,H,G,te,de;if(N.type==="timed-metadata"){if(N.dataAlignmentIndicator&&(T=0,y.length=0),y.length===0&&(N.data.length<10||N.data[0]!==73||N.data[1]!==68||N.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(y.push(N),T+=N.data.byteLength,y.length===1&&(_=Hs.parseSyncSafeInteger(N.data.subarray(6,10)),_+=10),!(T<_)){for(L={data:new Uint8Array(_),frames:[],pts:y[0].pts,dts:y[0].dts},te=0;te<_;)L.data.set(y[0].data.subarray(0,_-te),te),te+=y[0].data.byteLength,T-=y[0].data.byteLength,y.shift();B=10,L.data[5]&64&&(B+=4,B+=Hs.parseSyncSafeInteger(L.data.subarray(10,14)),_-=Hs.parseSyncSafeInteger(L.data.subarray(16,20)));do{if(H=Hs.parseSyncSafeInteger(L.data.subarray(B+4,B+8)),H<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(de=String.fromCharCode(L.data[B],L.data[B+1],L.data[B+2],L.data[B+3]),G={id:de,data:L.data.subarray(B+10,B+H+10)},G.key=G.id,Hs.frameParsers[G.id]?Hs.frameParsers[G.id](G):G.id[0]==="T"?Hs.frameParsers["T*"](G):G.id[0]==="W"&&Hs.frameParsers["W*"](G),G.owner==="com.apple.streaming.transportStreamTimestamp"){var ne=G.data,Ee=(ne[3]&1)<<30|ne[4]<<22|ne[5]<<14|ne[6]<<6|ne[7]>>>2;Ee*=4,Ee+=ne[7]&3,G.timeStamp=Ee,L.pts===void 0&&L.dts===void 0&&(L.pts=G.timeStamp,L.dts=G.timeStamp),this.trigger("timestamp",G)}L.frames.push(G),B+=10,B+=H}while(B<_);this.trigger("data",L)}}}},Lf.prototype=new Gye;var zye=Lf,OC=t,PC=TW,cn=Mf,Yye=xW.TimestampRolloverStream,Ff,Lc,qf,kl=188,RC=71;Ff=function(){var d=new Uint8Array(kl),m=0;Ff.prototype.init.call(this),this.push=function(_){var y=0,T=kl,w;for(m?(w=new Uint8Array(_.byteLength+m),w.set(d.subarray(0,m)),w.set(_,m),m=0):w=_;T<w.byteLength;){if(w[y]===RC&&w[T]===RC){this.trigger("data",w.subarray(y,T)),y+=kl,T+=kl;continue}y++,T++}y<w.byteLength&&(d.set(w.subarray(y),0),m=w.byteLength-y)},this.flush=function(){m===kl&&d[0]===RC&&(this.trigger("data",d),m=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){m=0,this.trigger("reset")}},Ff.prototype=new OC,Lc=function(){var d,m,_,y;Lc.prototype.init.call(this),y=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,w){var N=0;w.payloadUnitStartIndicator&&(N+=T[N]+1),w.type==="pat"?m(T.subarray(N),w):_(T.subarray(N),w)},m=function(T,w){w.section_number=T[7],w.last_section_number=T[8],y.pmtPid=(T[10]&31)<<8|T[11],w.pmtPid=y.pmtPid},_=function(T,w){var N,L,B,H;if(T[5]&1){for(y.programMapTable={video:null,audio:null,"timed-metadata":{}},N=(T[1]&15)<<8|T[2],L=3+N-4,B=(T[10]&15)<<8|T[11],H=12+B;H<L;){var G=T[H],te=(T[H+1]&31)<<8|T[H+2];G===cn.H264_STREAM_TYPE&&y.programMapTable.video===null?y.programMapTable.video=te:G===cn.ADTS_STREAM_TYPE&&y.programMapTable.audio===null?y.programMapTable.audio=te:G===cn.METADATA_STREAM_TYPE&&(y.programMapTable["timed-metadata"][te]=G),H+=((T[H+3]&15)<<8|T[H+4])+5}w.programMapTable=y.programMapTable}},this.push=function(T){var w={},N=4;if(w.payloadUnitStartIndicator=!!(T[1]&64),w.pid=T[1]&31,w.pid<<=8,w.pid|=T[2],(T[3]&48)>>>4>1&&(N+=T[N]+1),w.pid===0)w.type="pat",d(T.subarray(N),w),this.trigger("data",w);else if(w.pid===this.pmtPid)for(w.type="pmt",d(T.subarray(N),w),this.trigger("data",w);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([T,N,w]):this.processPes_(T,N,w)},this.processPes_=function(T,w,N){N.pid===this.programMapTable.video?N.streamType=cn.H264_STREAM_TYPE:N.pid===this.programMapTable.audio?N.streamType=cn.ADTS_STREAM_TYPE:N.streamType=this.programMapTable["timed-metadata"][N.pid],N.type="pes",N.data=T.subarray(w),this.trigger("data",N)}},Lc.prototype=new OC,Lc.STREAM_TYPES={h264:27,adts:15},qf=function(){var d=this,m=!1,_={data:[],size:0},y={data:[],size:0},T={data:[],size:0},w,N=function(B,H){var G;const te=B[0]<<16|B[1]<<8|B[2];H.data=new Uint8Array,te===1&&(H.packetLength=6+(B[4]<<8|B[5]),H.dataAlignmentIndicator=(B[6]&4)!==0,G=B[7],G&192&&(H.pts=(B[9]&14)<<27|(B[10]&255)<<20|(B[11]&254)<<12|(B[12]&255)<<5|(B[13]&254)>>>3,H.pts*=4,H.pts+=(B[13]&6)>>>1,H.dts=H.pts,G&64&&(H.dts=(B[14]&14)<<27|(B[15]&255)<<20|(B[16]&254)<<12|(B[17]&255)<<5|(B[18]&254)>>>3,H.dts*=4,H.dts+=(B[18]&6)>>>1)),H.data=B.subarray(9+B[8]))},L=function(B,H,G){var te=new Uint8Array(B.size),de={type:H},ne=0,Ee=0,Fe=!1,vr;if(!(!B.data.length||B.size<9)){for(de.trackId=B.data[0].pid,ne=0;ne<B.data.length;ne++)vr=B.data[ne],te.set(vr.data,Ee),Ee+=vr.data.byteLength;N(te,de),Fe=H==="video"||de.packetLength<=B.size,(G||Fe)&&(B.size=0,B.data.length=0),Fe&&d.trigger("data",de)}};qf.prototype.init.call(this),this.push=function(B){({pat:function(){},pes:function(){var H,G;switch(B.streamType){case cn.H264_STREAM_TYPE:H=_,G="video";break;case cn.ADTS_STREAM_TYPE:H=y,G="audio";break;case cn.METADATA_STREAM_TYPE:H=T,G="timed-metadata";break;default:return}B.payloadUnitStartIndicator&&L(H,G,!0),H.data.push(B),H.size+=B.data.byteLength},pmt:function(){var H={type:"metadata",tracks:[]};w=B.programMapTable,w.video!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"}),w.audio!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"}),m=!0,d.trigger("data",H)}})[B.type]()},this.reset=function(){_.size=0,_.data.length=0,y.size=0,y.data.length=0,this.trigger("reset")},this.flushStreams_=function(){L(_,"video"),L(y,"audio"),L(T,"timed-metadata")},this.flush=function(){if(!m&&w){var B={type:"metadata",tracks:[]};w.video!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"}),w.audio!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"}),d.trigger("data",B)}m=!1,this.flushStreams_(),this.trigger("done")}},qf.prototype=new OC;var CW={PAT_PID:0,MP2T_PACKET_LENGTH:kl,TransportPacketStream:Ff,TransportParseStream:Lc,ElementaryStream:qf,TimestampRolloverStream:Yye,CaptionStream:PC.CaptionStream,Cea608Stream:PC.Cea608Stream,Cea708Stream:PC.Cea708Stream,MetadataStream:zye};for(var kC in cn)cn.hasOwnProperty(kC)&&(CW[kC]=cn[kC]);var Kye=CW,Xye=t,Qye=ae.ONE_SECOND_IN_TS,Bf,DW=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Bf=function(d){var m,_=0;Bf.prototype.init.call(this),this.skipWarn_=function(y,T){this.trigger("log",{level:"warn",message:`adts skiping bytes ${y} to ${T} in frame ${_} outside syncword`})},this.push=function(y){var T=0,w,N,L,B,H;if(d||(_=0),y.type==="audio"){m&&m.length?(L=m,m=new Uint8Array(L.byteLength+y.data.byteLength),m.set(L),m.set(y.data,L.byteLength)):m=y.data;for(var G;T+7<m.length;){if(m[T]!==255||(m[T+1]&246)!==240){typeof G!="number"&&(G=T),T++;continue}if(typeof G=="number"&&(this.skipWarn_(G,T),G=null),N=(~m[T+1]&1)*2,w=(m[T+3]&3)<<11|m[T+4]<<3|(m[T+5]&224)>>5,B=((m[T+6]&3)+1)*1024,H=B*Qye/DW[(m[T+2]&60)>>>2],m.byteLength-T<w)break;this.trigger("data",{pts:y.pts+_*H,dts:y.dts+_*H,sampleCount:B,audioobjecttype:(m[T+2]>>>6&3)+1,channelcount:(m[T+2]&1)<<2|(m[T+3]&192)>>>6,samplerate:DW[(m[T+2]&60)>>>2],samplingfrequencyindex:(m[T+2]&60)>>>2,samplesize:16,data:m.subarray(T+7+N,T+w)}),_++,T+=w}typeof G=="number"&&(this.skipWarn_(G,T),G=null),m=m.subarray(T)}},this.flush=function(){_=0,this.trigger("done")},this.reset=function(){m=void 0,this.trigger("reset")},this.endTimeline=function(){m=void 0,this.trigger("endedtimeline")}},Bf.prototype=new Xye;var Zye=Bf,IW;IW=function(d){var m=d.byteLength,_=0,y=0;this.length=function(){return 8*m},this.bitsAvailable=function(){return 8*m+y},this.loadWord=function(){var T=d.byteLength-m,w=new Uint8Array(4),N=Math.min(4,m);if(N===0)throw new Error("no bytes available");w.set(d.subarray(T,T+N)),_=new DataView(w.buffer).getUint32(0),y=N*8,m-=N},this.skipBits=function(T){var w;y>T?(_<<=T,y-=T):(T-=y,w=Math.floor(T/8),T-=w*8,m-=w,this.loadWord(),_<<=T,y-=T)},this.readBits=function(T){var w=Math.min(y,T),N=_>>>32-w;return y-=w,y>0?_<<=w:m>0&&this.loadWord(),w=T-w,w>0?N<<w|this.readBits(w):N},this.skipLeadingZeros=function(){var T;for(T=0;T<y;++T)if((_&2147483648>>>T)!==0)return _<<=T,y-=T,T;return this.loadWord(),T+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var T=this.skipLeadingZeros();return this.readBits(T+1)-1},this.readExpGolomb=function(){var T=this.readUnsignedExpGolomb();return 1&T?1+T>>>1:-1*(T>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Jye=IW,AW=t,e0e=Jye,Uf,jf,OW;jf=function(){var d=0,m,_;jf.prototype.init.call(this),this.push=function(y){var T;_?(T=new Uint8Array(_.byteLength+y.data.byteLength),T.set(_),T.set(y.data,_.byteLength),_=T):_=y.data;for(var w=_.byteLength;d<w-3;d++)if(_[d+2]===1){m=d+5;break}for(;m<w;)switch(_[m]){case 0:if(_[m-1]!==0){m+=2;break}else if(_[m-2]!==0){m++;break}d+3!==m-2&&this.trigger("data",_.subarray(d+3,m-2));do m++;while(_[m]!==1&&m<w);d=m-2,m+=3;break;case 1:if(_[m-1]!==0||_[m-2]!==0){m+=3;break}this.trigger("data",_.subarray(d+3,m-2)),d=m-2,m+=3;break;default:m+=3;break}_=_.subarray(d),m-=d,d=0},this.reset=function(){_=null,d=0,this.trigger("reset")},this.flush=function(){_&&_.byteLength>3&&this.trigger("data",_.subarray(d+3)),_=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},jf.prototype=new AW,OW={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Uf=function(){var d=new jf,m,_,y,T,w,N,L;Uf.prototype.init.call(this),m=this,this.push=function(B){B.type==="video"&&(_=B.trackId,y=B.pts,T=B.dts,d.push(B))},d.on("data",function(B){var H={trackId:_,pts:y,dts:T,data:B,nalUnitTypeCode:B[0]&31};switch(H.nalUnitTypeCode){case 5:H.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:H.nalUnitType="sei_rbsp",H.escapedRBSP=w(B.subarray(1));break;case 7:H.nalUnitType="seq_parameter_set_rbsp",H.escapedRBSP=w(B.subarray(1)),H.config=N(H.escapedRBSP);break;case 8:H.nalUnitType="pic_parameter_set_rbsp";break;case 9:H.nalUnitType="access_unit_delimiter_rbsp";break}m.trigger("data",H)}),d.on("done",function(){m.trigger("done")}),d.on("partialdone",function(){m.trigger("partialdone")}),d.on("reset",function(){m.trigger("reset")}),d.on("endedtimeline",function(){m.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},L=function(B,H){var G=8,te=8,de,ne;for(de=0;de<B;de++)te!==0&&(ne=H.readExpGolomb(),te=(G+ne+256)%256),G=te===0?G:te},w=function(B){for(var H=B.byteLength,G=[],te=1,de,ne;te<H-2;)B[te]===0&&B[te+1]===0&&B[te+2]===3?(G.push(te+2),te+=2):te++;if(G.length===0)return B;de=H-G.length,ne=new Uint8Array(de);var Ee=0;for(te=0;te<de;Ee++,te++)Ee===G[0]&&(Ee++,G.shift()),ne[te]=B[Ee];return ne},N=function(B){var H=0,G=0,te=0,de=0,ne,Ee,Fe,vr,Ti,Gs,Vc,Gc,Wc,zc,ep,xt=[1,1],Yc,dn;if(ne=new e0e(B),Ee=ne.readUnsignedByte(),vr=ne.readUnsignedByte(),Fe=ne.readUnsignedByte(),ne.skipUnsignedExpGolomb(),OW[Ee]&&(Ti=ne.readUnsignedExpGolomb(),Ti===3&&ne.skipBits(1),ne.skipUnsignedExpGolomb(),ne.skipUnsignedExpGolomb(),ne.skipBits(1),ne.readBoolean()))for(ep=Ti!==3?8:12,dn=0;dn<ep;dn++)ne.readBoolean()&&(dn<6?L(16,ne):L(64,ne));if(ne.skipUnsignedExpGolomb(),Gs=ne.readUnsignedExpGolomb(),Gs===0)ne.readUnsignedExpGolomb();else if(Gs===1)for(ne.skipBits(1),ne.skipExpGolomb(),ne.skipExpGolomb(),Vc=ne.readUnsignedExpGolomb(),dn=0;dn<Vc;dn++)ne.skipExpGolomb();if(ne.skipUnsignedExpGolomb(),ne.skipBits(1),Gc=ne.readUnsignedExpGolomb(),Wc=ne.readUnsignedExpGolomb(),zc=ne.readBits(1),zc===0&&ne.skipBits(1),ne.skipBits(1),ne.readBoolean()&&(H=ne.readUnsignedExpGolomb(),G=ne.readUnsignedExpGolomb(),te=ne.readUnsignedExpGolomb(),de=ne.readUnsignedExpGolomb()),ne.readBoolean()&&ne.readBoolean()){switch(Yc=ne.readUnsignedByte(),Yc){case 1:xt=[1,1];break;case 2:xt=[12,11];break;case 3:xt=[10,11];break;case 4:xt=[16,11];break;case 5:xt=[40,33];break;case 6:xt=[24,11];break;case 7:xt=[20,11];break;case 8:xt=[32,11];break;case 9:xt=[80,33];break;case 10:xt=[18,11];break;case 11:xt=[15,11];break;case 12:xt=[64,33];break;case 13:xt=[160,99];break;case 14:xt=[4,3];break;case 15:xt=[3,2];break;case 16:xt=[2,1];break;case 255:{xt=[ne.readUnsignedByte()<<8|ne.readUnsignedByte(),ne.readUnsignedByte()<<8|ne.readUnsignedByte()];break}}xt&&xt[0]/xt[1]}return{profileIdc:Ee,levelIdc:Fe,profileCompatibility:vr,width:(Gc+1)*16-H*2-G*2,height:(2-zc)*(Wc+1)*16-te*2-de*2,sarRatio:xt}}},Uf.prototype=new AW;var t0e={H264Stream:Uf},r0e=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],PW=function(d,m){var _=d[m+6]<<21|d[m+7]<<14|d[m+8]<<7|d[m+9],y=d[m+5],T=(y&16)>>4;return _=_>=0?_:0,T?_+20:_+10},RW=function(d,m){return d.length-m<10||d[m]!==73||d[m+1]!==68||d[m+2]!==51?m:(m+=PW(d,m),RW(d,m))},i0e=function(d){var m=RW(d,0);return d.length>=m+2&&(d[m]&255)===255&&(d[m+1]&240)===240&&(d[m+1]&22)===16},kW=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},n0e=function(d,m,_){var y,T="";for(y=m;y<_;y++)T+="%"+("00"+d[y].toString(16)).slice(-2);return T},s0e=function(d,m,_){return unescape(n0e(d,m,_))},a0e=function(d,m){var _=(d[m+5]&224)>>5,y=d[m+4]<<3,T=d[m+3]&6144;return T|y|_},o0e=function(d,m){return d[m]===73&&d[m+1]===68&&d[m+2]===51?"timed-metadata":d[m]&!0&&(d[m+1]&240)===240?"audio":null},l0e=function(d){for(var m=0;m+5<d.length;){if(d[m]!==255||(d[m+1]&246)!==240){m++;continue}return r0e[(d[m+2]&60)>>>2]}return null},u0e=function(d){var m,_,y,T;m=10,d[5]&64&&(m+=4,m+=kW(d.subarray(10,14)));do{if(_=kW(d.subarray(m+4,m+8)),_<1)return null;if(T=String.fromCharCode(d[m],d[m+1],d[m+2],d[m+3]),T==="PRIV"){y=d.subarray(m+10,m+_+10);for(var w=0;w<y.byteLength;w++)if(y[w]===0){var N=s0e(y,0,w);if(N==="com.apple.streaming.transportStreamTimestamp"){var L=y.subarray(w+1),B=(L[3]&1)<<30|L[4]<<22|L[5]<<14|L[6]<<6|L[7]>>>2;return B*=4,B+=L[7]&3,B}break}}m+=10,m+=_}while(m<d.byteLength);return null},MC={isLikelyAacData:i0e,parseId3TagSize:PW,parseAdtsSize:a0e,parseType:o0e,parseSampleRate:l0e,parseAacTimestamp:u0e},c0e=t,MW=MC,Hf;Hf=function(){var d=new Uint8Array,m=0;Hf.prototype.init.call(this),this.setTimestamp=function(_){m=_},this.push=function(_){var y=0,T=0,w,N,L,B;for(d.length?(B=d.length,d=new Uint8Array(_.byteLength+B),d.set(d.subarray(0,B)),d.set(_,B)):d=_;d.length-T>=3;){if(d[T]===73&&d[T+1]===68&&d[T+2]===51){if(d.length-T<10||(y=MW.parseId3TagSize(d,T),T+y>d.length))break;N={type:"timed-metadata",data:d.subarray(T,T+y)},this.trigger("data",N),T+=y;continue}else if((d[T]&255)===255&&(d[T+1]&240)===240){if(d.length-T<7||(y=MW.parseAdtsSize(d,T),T+y>d.length))break;L={type:"audio",data:d.subarray(T,T+y),pts:m,dts:m},this.trigger("data",L),T+=y;continue}T++}w=d.length-T,w>0?d=d.subarray(T):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Hf.prototype=new c0e;var h0e=Hf,d0e=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],f0e=d0e,p0e=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],m0e=p0e,Vf=t,Fc=Qe,qc=mt,Gf=Rc,hn=ee,fs=Kye,Wf=ae,$W=Zye,g0e=t0e.H264Stream,v0e=h0e,y0e=MC.isLikelyAacData,_0e=ae.ONE_SECOND_IN_TS,NW=f0e,LW=m0e,zf,Bc,Yf,Qa,b0e=function(d,m){m.stream=d,this.trigger("log",m)},FW=function(d,m){for(var _=Object.keys(m),y=0;y<_.length;y++){var T=_[y];T==="headOfPipeline"||!m[T].on||m[T].on("log",b0e.bind(d,T))}},qW=function(d,m){var _;if(d.length!==m.length)return!1;for(_=0;_<d.length;_++)if(d[_]!==m[_])return!1;return!0},BW=function(d,m,_,y,T,w){var N=_-m,L=y-m,B=T-_;return{start:{dts:d,pts:d+N},end:{dts:d+L,pts:d+B},prependedContentDuration:w,baseMediaDecodeTime:d}};Bc=function(d,m){var _=[],y,T=0,w=0,N=1/0;m=m||{},y=m.firstSequenceNumber||0,Bc.prototype.init.call(this),this.push=function(L){hn.collectDtsInfo(d,L),d&&NW.forEach(function(B){d[B]=L[B]}),_.push(L)},this.setEarliestDts=function(L){T=L},this.setVideoBaseMediaDecodeTime=function(L){N=L},this.setAudioAppendStart=function(L){w=L},this.flush=function(){var L,B,H,G,te,de,ne;if(_.length===0){this.trigger("done","AudioSegmentStream");return}L=Gf.trimAdtsFramesByEarliestDts(_,d,T),d.baseMediaDecodeTime=hn.calculateTrackBaseMediaDecodeTime(d,m.keepOriginalTimestamps),ne=Gf.prefixWithSilence(d,L,w,N),d.samples=Gf.generateSampleTable(L),H=Fc.mdat(Gf.concatenateFrameData(L)),_=[],B=Fc.moof(y,[d]),G=new Uint8Array(B.byteLength+H.byteLength),y++,G.set(B),G.set(H,B.byteLength),hn.clearDtsInfo(d),te=Math.ceil(_0e*1024/d.samplerate),L.length&&(de=L.length*te,this.trigger("segmentTimingInfo",BW(Wf.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),L[0].dts,L[0].pts,L[0].dts+de,L[0].pts+de,ne||0)),this.trigger("timingInfo",{start:L[0].pts,end:L[0].pts+de})),this.trigger("data",{track:d,boxes:G}),this.trigger("done","AudioSegmentStream")},this.reset=function(){hn.clearDtsInfo(d),_=[],this.trigger("reset")}},Bc.prototype=new Vf,zf=function(d,m){var _,y=[],T=[],w,N;m=m||{},_=m.firstSequenceNumber||0,zf.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(L){hn.collectDtsInfo(d,L),L.nalUnitType==="seq_parameter_set_rbsp"&&!w&&(w=L.config,d.sps=[L.data],LW.forEach(function(B){d[B]=w[B]},this)),L.nalUnitType==="pic_parameter_set_rbsp"&&!N&&(N=L.data,d.pps=[L.data]),y.push(L)},this.flush=function(){for(var L,B,H,G,te,de,ne=0,Ee,Fe;y.length&&y[0].nalUnitType!=="access_unit_delimiter_rbsp";)y.shift();if(y.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(L=qc.groupNalsIntoFrames(y),H=qc.groupFramesIntoGops(L),H[0][0].keyFrame||(B=this.getGopForFusion_(y[0],d),B?(ne=B.duration,H.unshift(B),H.byteLength+=B.byteLength,H.nalCount+=B.nalCount,H.pts=B.pts,H.dts=B.dts,H.duration+=B.duration):H=qc.extendFirstKeyFrame(H)),T.length){var vr;if(m.alignGopsAtEnd?vr=this.alignGopsAtEnd_(H):vr=this.alignGopsAtStart_(H),!vr){this.gopCache_.unshift({gop:H.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}hn.clearDtsInfo(d),H=vr}hn.collectDtsInfo(d,H),d.samples=qc.generateSampleTable(H),te=Fc.mdat(qc.concatenateNalData(H)),d.baseMediaDecodeTime=hn.calculateTrackBaseMediaDecodeTime(d,m.keepOriginalTimestamps),this.trigger("processedGopsInfo",H.map(function(Ti){return{pts:Ti.pts,dts:Ti.dts,byteLength:Ti.byteLength}})),Ee=H[0],Fe=H[H.length-1],this.trigger("segmentTimingInfo",BW(d.baseMediaDecodeTime,Ee.dts,Ee.pts,Fe.dts+Fe.duration,Fe.pts+Fe.duration,ne)),this.trigger("timingInfo",{start:H[0].pts,end:H[H.length-1].pts+H[H.length-1].duration}),this.gopCache_.unshift({gop:H.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),y=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),G=Fc.moof(_,[d]),de=new Uint8Array(G.byteLength+te.byteLength),_++,de.set(G),de.set(te,G.byteLength),this.trigger("data",{track:d,boxes:de}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),y=[],this.gopCache_.length=0,T.length=0,this.trigger("reset")},this.resetStream_=function(){hn.clearDtsInfo(d),w=void 0,N=void 0},this.getGopForFusion_=function(L){var B=45e3,H=1/0,G,te,de,ne,Ee;for(Ee=0;Ee<this.gopCache_.length;Ee++)ne=this.gopCache_[Ee],de=ne.gop,!(!(d.pps&&qW(d.pps[0],ne.pps[0]))||!(d.sps&&qW(d.sps[0],ne.sps[0])))&&(de.dts<d.timelineStartInfo.dts||(G=L.dts-de.dts-de.duration,G>=-1e4&&G<=B&&(!te||H>G)&&(te=ne,H=G)));return te?te.gop:null},this.alignGopsAtStart_=function(L){var B,H,G,te,de,ne,Ee,Fe;for(de=L.byteLength,ne=L.nalCount,Ee=L.duration,B=H=0;B<T.length&&H<L.length&&(G=T[B],te=L[H],G.pts!==te.pts);){if(te.pts>G.pts){B++;continue}H++,de-=te.byteLength,ne-=te.nalCount,Ee-=te.duration}return H===0?L:H===L.length?null:(Fe=L.slice(H),Fe.byteLength=de,Fe.duration=Ee,Fe.nalCount=ne,Fe.pts=Fe[0].pts,Fe.dts=Fe[0].dts,Fe)},this.alignGopsAtEnd_=function(L){var B,H,G,te,de,ne;for(B=T.length-1,H=L.length-1,de=null,ne=!1;B>=0&&H>=0;){if(G=T[B],te=L[H],G.pts===te.pts){ne=!0;break}if(G.pts>te.pts){B--;continue}B===T.length-1&&(de=H),H--}if(!ne&&de===null)return null;var Ee;if(ne?Ee=H:Ee=de,Ee===0)return L;var Fe=L.slice(Ee),vr=Fe.reduce(function(Ti,Gs){return Ti.byteLength+=Gs.byteLength,Ti.duration+=Gs.duration,Ti.nalCount+=Gs.nalCount,Ti},{byteLength:0,duration:0,nalCount:0});return Fe.byteLength=vr.byteLength,Fe.duration=vr.duration,Fe.nalCount=vr.nalCount,Fe.pts=Fe[0].pts,Fe.dts=Fe[0].dts,Fe},this.alignGopsWith=function(L){T=L}},zf.prototype=new Vf,Qa=function(d,m){this.numberOfTracks=0,this.metadataStream=m,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Qa.prototype.init.call(this),this.push=function(_){if(_.content||_.text)return this.pendingCaptions.push(_);if(_.frames)return this.pendingMetadata.push(_);this.pendingTracks.push(_.track),this.pendingBytes+=_.boxes.byteLength,_.track.type==="video"&&(this.videoTrack=_.track,this.pendingBoxes.push(_.boxes)),_.track.type==="audio"&&(this.audioTrack=_.track,this.pendingBoxes.unshift(_.boxes))}},Qa.prototype=new Vf,Qa.prototype.flush=function(d){var m=0,_={captions:[],captionStreams:{},metadata:[],info:{}},y,T,w,N=0,L;if(this.pendingTracks.length<this.numberOfTracks){if(d!=="VideoSegmentStream"&&d!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(N=this.videoTrack.timelineStartInfo.pts,LW.forEach(function(B){_.info[B]=this.videoTrack[B]},this)):this.audioTrack&&(N=this.audioTrack.timelineStartInfo.pts,NW.forEach(function(B){_.info[B]=this.audioTrack[B]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?_.type=this.pendingTracks[0].type:_.type="combined",this.emittedTracks+=this.pendingTracks.length,w=Fc.initSegment(this.pendingTracks),_.initSegment=new Uint8Array(w.byteLength),_.initSegment.set(w),_.data=new Uint8Array(this.pendingBytes),L=0;L<this.pendingBoxes.length;L++)_.data.set(this.pendingBoxes[L],m),m+=this.pendingBoxes[L].byteLength;for(L=0;L<this.pendingCaptions.length;L++)y=this.pendingCaptions[L],y.startTime=Wf.metadataTsToSeconds(y.startPts,N,this.keepOriginalTimestamps),y.endTime=Wf.metadataTsToSeconds(y.endPts,N,this.keepOriginalTimestamps),_.captionStreams[y.stream]=!0,_.captions.push(y);for(L=0;L<this.pendingMetadata.length;L++)T=this.pendingMetadata[L],T.cueTime=Wf.metadataTsToSeconds(T.pts,N,this.keepOriginalTimestamps),_.metadata.push(T);for(_.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",_),L=0;L<_.captions.length;L++)y=_.captions[L],this.trigger("caption",y);for(L=0;L<_.metadata.length;L++)T=_.metadata[L],this.trigger("id3Frame",T)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Qa.prototype.setRemux=function(d){this.remuxTracks=d},Yf=function(d){var m=this,_=!0,y,T;Yf.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var w={};this.transmuxPipeline_=w,w.type="aac",w.metadataStream=new fs.MetadataStream,w.aacStream=new v0e,w.audioTimestampRolloverStream=new fs.TimestampRolloverStream("audio"),w.timedMetadataTimestampRolloverStream=new fs.TimestampRolloverStream("timed-metadata"),w.adtsStream=new $W,w.coalesceStream=new Qa(d,w.metadataStream),w.headOfPipeline=w.aacStream,w.aacStream.pipe(w.audioTimestampRolloverStream).pipe(w.adtsStream),w.aacStream.pipe(w.timedMetadataTimestampRolloverStream).pipe(w.metadataStream).pipe(w.coalesceStream),w.metadataStream.on("timestamp",function(N){w.aacStream.setTimestamp(N.timeStamp)}),w.aacStream.on("data",function(N){N.type!=="timed-metadata"&&N.type!=="audio"||w.audioSegmentStream||(T=T||{timelineStartInfo:{baseMediaDecodeTime:m.baseMediaDecodeTime},codec:"adts",type:"audio"},w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Bc(T,d),w.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream),m.trigger("trackinfo",{hasAudio:!!T,hasVideo:!!y}))}),w.coalesceStream.on("data",this.trigger.bind(this,"data")),w.coalesceStream.on("done",this.trigger.bind(this,"done")),FW(this,w)},this.setupTsPipeline=function(){var w={};this.transmuxPipeline_=w,w.type="ts",w.metadataStream=new fs.MetadataStream,w.packetStream=new fs.TransportPacketStream,w.parseStream=new fs.TransportParseStream,w.elementaryStream=new fs.ElementaryStream,w.timestampRolloverStream=new fs.TimestampRolloverStream,w.adtsStream=new $W,w.h264Stream=new g0e,w.captionStream=new fs.CaptionStream(d),w.coalesceStream=new Qa(d,w.metadataStream),w.headOfPipeline=w.packetStream,w.packetStream.pipe(w.parseStream).pipe(w.elementaryStream).pipe(w.timestampRolloverStream),w.timestampRolloverStream.pipe(w.h264Stream),w.timestampRolloverStream.pipe(w.adtsStream),w.timestampRolloverStream.pipe(w.metadataStream).pipe(w.coalesceStream),w.h264Stream.pipe(w.captionStream).pipe(w.coalesceStream),w.elementaryStream.on("data",function(N){var L;if(N.type==="metadata"){for(L=N.tracks.length;L--;)!y&&N.tracks[L].type==="video"?(y=N.tracks[L],y.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime):!T&&N.tracks[L].type==="audio"&&(T=N.tracks[L],T.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime);y&&!w.videoSegmentStream&&(w.coalesceStream.numberOfTracks++,w.videoSegmentStream=new zf(y,d),w.videoSegmentStream.on("log",m.getLogTrigger_("videoSegmentStream")),w.videoSegmentStream.on("timelineStartInfo",function(B){T&&!d.keepOriginalTimestamps&&(T.timelineStartInfo=B,w.audioSegmentStream.setEarliestDts(B.dts-m.baseMediaDecodeTime))}),w.videoSegmentStream.on("processedGopsInfo",m.trigger.bind(m,"gopInfo")),w.videoSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"videoSegmentTimingInfo")),w.videoSegmentStream.on("baseMediaDecodeTime",function(B){T&&w.audioSegmentStream.setVideoBaseMediaDecodeTime(B)}),w.videoSegmentStream.on("timingInfo",m.trigger.bind(m,"videoTimingInfo")),w.h264Stream.pipe(w.videoSegmentStream).pipe(w.coalesceStream)),T&&!w.audioSegmentStream&&(w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Bc(T,d),w.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),w.audioSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"audioSegmentTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream)),m.trigger("trackinfo",{hasAudio:!!T,hasVideo:!!y})}}),w.coalesceStream.on("data",this.trigger.bind(this,"data")),w.coalesceStream.on("id3Frame",function(N){N.dispatchType=w.metadataStream.dispatchType,m.trigger("id3Frame",N)}),w.coalesceStream.on("caption",this.trigger.bind(this,"caption")),w.coalesceStream.on("done",this.trigger.bind(this,"done")),FW(this,w)},this.setBaseMediaDecodeTime=function(w){var N=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=w),T&&(T.timelineStartInfo.dts=void 0,T.timelineStartInfo.pts=void 0,hn.clearDtsInfo(T),N.audioTimestampRolloverStream&&N.audioTimestampRolloverStream.discontinuity()),y&&(N.videoSegmentStream&&(N.videoSegmentStream.gopCache_=[]),y.timelineStartInfo.dts=void 0,y.timelineStartInfo.pts=void 0,hn.clearDtsInfo(y),N.captionStream.reset()),N.timestampRolloverStream&&N.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(w){T&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(w)},this.setRemux=function(w){var N=this.transmuxPipeline_;d.remux=w,N&&N.coalesceStream&&N.coalesceStream.setRemux(w)},this.alignGopsWith=function(w){y&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(w)},this.getLogTrigger_=function(w){var N=this;return function(L){L.stream=w,N.trigger("log",L)}},this.push=function(w){if(_){var N=y0e(w);N&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!N&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),_=!1}this.transmuxPipeline_.headOfPipeline.push(w)},this.flush=function(){_=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Yf.prototype=new Vf;var T0e={Transmuxer:Yf},S0e=function(d){return d>>>0},x0e=function(d){return("00"+d.toString(16)).slice(-2)},Kf={toUnsigned:S0e,toHexString:x0e},w0e=function(d){var m="";return m+=String.fromCharCode(d[0]),m+=String.fromCharCode(d[1]),m+=String.fromCharCode(d[2]),m+=String.fromCharCode(d[3]),m},UW=w0e,E0e=Kf.toUnsigned,C0e=UW,jW=function(d,m){var _=[],y,T,w,N,L;if(!m.length)return null;for(y=0;y<d.byteLength;)T=E0e(d[y]<<24|d[y+1]<<16|d[y+2]<<8|d[y+3]),w=C0e(d.subarray(y+4,y+8)),N=T>1?y+T:d.byteLength,w===m[0]&&(m.length===1?_.push(d.subarray(y+8,N)):(L=jW(d.subarray(y+8,N),m.slice(1)),L.length&&(_=_.concat(L)))),y=N;return _},$C=jW,D0e=Kf.toUnsigned,I0e=s.getUint64,A0e=function(d){var m={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return m.version===1?m.baseMediaDecodeTime=I0e(d.subarray(4)):m.baseMediaDecodeTime=D0e(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),m},NC=A0e,O0e=function(d){var m=new DataView(d.buffer,d.byteOffset,d.byteLength),_={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:m.getUint32(4)},y=_.flags[2]&1,T=_.flags[2]&2,w=_.flags[2]&8,N=_.flags[2]&16,L=_.flags[2]&32,B=_.flags[0]&65536,H=_.flags[0]&131072,G;return G=8,y&&(G+=4,_.baseDataOffset=m.getUint32(12),G+=4),T&&(_.sampleDescriptionIndex=m.getUint32(G),G+=4),w&&(_.defaultSampleDuration=m.getUint32(G),G+=4),N&&(_.defaultSampleSize=m.getUint32(G),G+=4),L&&(_.defaultSampleFlags=m.getUint32(G)),B&&(_.durationIsEmpty=!0),!y&&H&&(_.baseDataOffsetIsMoof=!0),_},HW=O0e,P0e=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},R0e=P0e,VW=R0e,k0e=function(d){var m={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},_=new DataView(d.buffer,d.byteOffset,d.byteLength),y=m.flags[2]&1,T=m.flags[2]&4,w=m.flags[1]&1,N=m.flags[1]&2,L=m.flags[1]&4,B=m.flags[1]&8,H=_.getUint32(4),G=8,te;for(y&&(m.dataOffset=_.getInt32(G),G+=4),T&&H&&(te={flags:VW(d.subarray(G,G+4))},G+=4,w&&(te.duration=_.getUint32(G),G+=4),N&&(te.size=_.getUint32(G),G+=4),B&&(m.version===1?te.compositionTimeOffset=_.getInt32(G):te.compositionTimeOffset=_.getUint32(G),G+=4),m.samples.push(te),H--);H--;)te={},w&&(te.duration=_.getUint32(G),G+=4),N&&(te.size=_.getUint32(G),G+=4),L&&(te.flags=VW(d.subarray(G,G+4)),G+=4),B&&(m.version===1?te.compositionTimeOffset=_.getInt32(G):te.compositionTimeOffset=_.getUint32(G),G+=4),m.samples.push(te);return m},GW=k0e,WW={tfdt:NC,trun:GW},zW={parseTfdt:WW.tfdt,parseTrun:WW.trun},M0e=function(d){for(var m=0,_=String.fromCharCode(d[m]),y="";_!=="\0";)y+=_,m++,_=String.fromCharCode(d[m]);return y+=_,y},$0e={uint8ToCString:M0e},Xf=$0e.uint8ToCString,N0e=s.getUint64,L0e=function(d){var m=4,_=d[0],y,T,w,N,L,B,H,G;if(_===0){y=Xf(d.subarray(m)),m+=y.length,T=Xf(d.subarray(m)),m+=T.length;var te=new DataView(d.buffer);w=te.getUint32(m),m+=4,L=te.getUint32(m),m+=4,B=te.getUint32(m),m+=4,H=te.getUint32(m),m+=4}else if(_===1){var te=new DataView(d.buffer);w=te.getUint32(m),m+=4,N=N0e(d.subarray(m)),m+=8,B=te.getUint32(m),m+=4,H=te.getUint32(m),m+=4,y=Xf(d.subarray(m)),m+=y.length,T=Xf(d.subarray(m)),m+=T.length}G=new Uint8Array(d.subarray(m,d.byteLength));var de={scheme_id_uri:y,value:T,timescale:w||1,presentation_time:N,presentation_time_delta:L,event_duration:B,id:H,message_data:G};return q0e(_,de)?de:void 0},F0e=function(d,m,_,y){return d||d===0?d/m:y+_/m},q0e=function(d,m){var _=m.scheme_id_uri!=="\0",y=d===0&&YW(m.presentation_time_delta)&&_,T=d===1&&YW(m.presentation_time)&&_;return!(d>1)&&y||T},YW=function(d){return d!==void 0||d!==null},B0e={parseEmsgBox:L0e,scaleTime:F0e},Uc;typeof window<"u"?Uc=window:typeof r<"u"?Uc=r:typeof self<"u"?Uc=self:Uc={};var KW=Uc,Qf=Kf.toUnsigned,jc=Kf.toHexString,zt=$C,Ml=UW,LC=B0e,U0e=HW,j0e=GW,H0e=NC,V0e=s.getUint64,XW,QW,ZW,JW,ez,FC,tz,qC=KW,G0e=EW.parseId3Frames;XW=function(d){var m={},_=zt(d,["moov","trak"]);return _.reduce(function(y,T){var w,N,L,B,H;return w=zt(T,["tkhd"])[0],!w||(N=w[0],L=N===0?12:20,B=Qf(w[L]<<24|w[L+1]<<16|w[L+2]<<8|w[L+3]),H=zt(T,["mdia","mdhd"])[0],!H)?null:(N=H[0],L=N===0?12:20,y[B]=Qf(H[L]<<24|H[L+1]<<16|H[L+2]<<8|H[L+3]),y)},m)},QW=function(d,m){var _;_=zt(m,["moof","traf"]);var y=_.reduce(function(T,w){var N=zt(w,["tfhd"])[0],L=Qf(N[4]<<24|N[5]<<16|N[6]<<8|N[7]),B=d[L]||9e4,H=zt(w,["tfdt"])[0],G=new DataView(H.buffer,H.byteOffset,H.byteLength),te;H[0]===1?te=V0e(H.subarray(4,12)):te=G.getUint32(4);let de;return typeof te=="bigint"?de=te/qC.BigInt(B):typeof te=="number"&&!isNaN(te)&&(de=te/B),de<Number.MAX_SAFE_INTEGER&&(de=Number(de)),de<T&&(T=de),T},1/0);return typeof y=="bigint"||isFinite(y)?y:0},ZW=function(d,m){var _=zt(m,["moof","traf"]),y=0,T=0,w;if(_&&_.length){var N=zt(_[0],["tfhd"])[0],L=zt(_[0],["trun"])[0],B=zt(_[0],["tfdt"])[0];if(N){var H=U0e(N);w=H.trackId}if(B){var G=H0e(B);y=G.baseMediaDecodeTime}if(L){var te=j0e(L);te.samples&&te.samples.length&&(T=te.samples[0].compositionTimeOffset||0)}}var de=d[w]||9e4;typeof y=="bigint"&&(T=qC.BigInt(T),de=qC.BigInt(de));var ne=(y+T)/de;return typeof ne=="bigint"&&ne<Number.MAX_SAFE_INTEGER&&(ne=Number(ne)),ne},JW=function(d){var m=zt(d,["moov","trak"]),_=[];return m.forEach(function(y){var T=zt(y,["mdia","hdlr"]),w=zt(y,["tkhd"]);T.forEach(function(N,L){var B=Ml(N.subarray(8,12)),H=w[L],G,te,de;B==="vide"&&(G=new DataView(H.buffer,H.byteOffset,H.byteLength),te=G.getUint8(0),de=te===0?G.getUint32(12):G.getUint32(20),_.push(de))})}),_},FC=function(d){var m=d[0],_=m===0?12:20;return Qf(d[_]<<24|d[_+1]<<16|d[_+2]<<8|d[_+3])},ez=function(d){var m=zt(d,["moov","trak"]),_=[];return m.forEach(function(y){var T={},w=zt(y,["tkhd"])[0],N,L;w&&(N=new DataView(w.buffer,w.byteOffset,w.byteLength),L=N.getUint8(0),T.id=L===0?N.getUint32(12):N.getUint32(20));var B=zt(y,["mdia","hdlr"])[0];if(B){var H=Ml(B.subarray(8,12));H==="vide"?T.type="video":H==="soun"?T.type="audio":T.type=H}var G=zt(y,["mdia","minf","stbl","stsd"])[0];if(G){var te=G.subarray(8);T.codec=Ml(te.subarray(4,8));var de=zt(te,[T.codec])[0],ne,Ee;de&&(/^[asm]vc[1-9]$/i.test(T.codec)?(ne=de.subarray(78),Ee=Ml(ne.subarray(4,8)),Ee==="avcC"&&ne.length>11?(T.codec+=".",T.codec+=jc(ne[9]),T.codec+=jc(ne[10]),T.codec+=jc(ne[11])):T.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(T.codec)?(ne=de.subarray(28),Ee=Ml(ne.subarray(4,8)),Ee==="esds"&&ne.length>20&&ne[19]!==0?(T.codec+="."+jc(ne[19]),T.codec+="."+jc(ne[20]>>>2&63).replace(/^0/,"")):T.codec="mp4a.40.2"):T.codec=T.codec.toLowerCase())}var Fe=zt(y,["mdia","mdhd"])[0];Fe&&(T.timescale=FC(Fe)),_.push(T)}),_},tz=function(d,m=0){var _=zt(d,["emsg"]);return _.map(y=>{var T=LC.parseEmsgBox(new Uint8Array(y)),w=G0e(T.message_data);return{cueTime:LC.scaleTime(T.presentation_time,T.timescale,T.presentation_time_delta,m),duration:LC.scaleTime(T.event_duration,T.timescale),frames:w}})};var Hc={findBox:zt,parseType:Ml,timescale:XW,startTime:QW,compositionStartTime:ZW,videoTrackIds:JW,tracks:ez,getTimescaleFromMediaHeader:FC,getEmsgID3:tz};const{parseTrun:W0e}=zW,{findBox:rz}=Hc;var iz=KW,z0e=function(d){var m=rz(d,["moof","traf"]),_=rz(d,["mdat"]),y=[];return _.forEach(function(T,w){var N=m[w];y.push({mdat:T,traf:N})}),y},Y0e=function(d,m,_){var y=m,T=_.defaultSampleDuration||0,w=_.defaultSampleSize||0,N=_.trackId,L=[];return d.forEach(function(B){var H=W0e(B),G=H.samples;G.forEach(function(te){te.duration===void 0&&(te.duration=T),te.size===void 0&&(te.size=w),te.trackId=N,te.dts=y,te.compositionTimeOffset===void 0&&(te.compositionTimeOffset=0),typeof y=="bigint"?(te.pts=y+iz.BigInt(te.compositionTimeOffset),y+=iz.BigInt(te.duration)):(te.pts=y+te.compositionTimeOffset,y+=te.duration)}),L=L.concat(G)}),L},nz={getMdatTrafPairs:z0e,parseSamples:Y0e},K0e=Hi.discardEmulationPreventionBytes,X0e=TW.CaptionStream,BC=$C,Q0e=NC,Z0e=HW,{getMdatTrafPairs:J0e,parseSamples:e_e}=nz,t_e=function(d,m){for(var _=d,y=0;y<m.length;y++){var T=m[y];if(_<T.size)return T;_-=T.size}return null},r_e=function(d,m,_){var y=new DataView(d.buffer,d.byteOffset,d.byteLength),T={logs:[],seiNals:[]},w,N,L,B;for(N=0;N+4<d.length;N+=L)if(L=y.getUint32(N),N+=4,!(L<=0))switch(d[N]&31){case 6:var H=d.subarray(N+1,N+1+L),G=t_e(N,m);if(w={nalUnitType:"sei_rbsp",size:L,data:H,escapedRBSP:K0e(H),trackId:_},G)w.pts=G.pts,w.dts=G.dts,B=G;else if(B)w.pts=B.pts,w.dts=B.dts;else{T.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+N+" for trackId "+_+". See mux.js#223."});break}T.seiNals.push(w);break}return T},i_e=function(d,m){var _={},y=J0e(d);return y.forEach(function(T){var w=T.mdat,N=T.traf,L=BC(N,["tfhd"]),B=Z0e(L[0]),H=B.trackId,G=BC(N,["tfdt"]),te=G.length>0?Q0e(G[0]).baseMediaDecodeTime:0,de=BC(N,["trun"]),ne,Ee;m===H&&de.length>0&&(ne=e_e(de,te,B),Ee=r_e(w,ne,H),_[H]||(_[H]={seiNals:[],logs:[]}),_[H].seiNals=_[H].seiNals.concat(Ee.seiNals),_[H].logs=_[H].logs.concat(Ee.logs))}),_},n_e=function(d,m,_){var y;if(m===null)return null;y=i_e(d,m);var T=y[m]||{};return{seiNals:T.seiNals,logs:T.logs,timescale:_}},s_e=function(){var d=!1,m,_,y,T,w,N;this.isInitialized=function(){return d},this.init=function(L){m=new X0e,d=!0,N=L?L.isPartial:!1,m.on("data",function(B){B.startTime=B.startPts/T,B.endTime=B.endPts/T,w.captions.push(B),w.captionStreams[B.stream]=!0}),m.on("log",function(B){w.logs.push(B)})},this.isNewInit=function(L,B){return L&&L.length===0||B&&typeof B=="object"&&Object.keys(B).length===0?!1:y!==L[0]||T!==B[y]},this.parse=function(L,B,H){var G;if(this.isInitialized()){if(!B||!H)return null;if(this.isNewInit(B,H))y=B[0],T=H[y];else if(y===null||!T)return _.push(L),null}else return null;for(;_.length>0;){var te=_.shift();this.parse(te,B,H)}return G=n_e(L,y,T),G&&G.logs&&(w.logs=w.logs.concat(G.logs)),G===null||!G.seiNals?w.logs.length?{logs:w.logs,captions:[],captionStreams:[]}:null:(this.pushNals(G.seiNals),this.flushStream(),w)},this.pushNals=function(L){if(!this.isInitialized()||!L||L.length===0)return null;L.forEach(function(B){m.push(B)})},this.flushStream=function(){if(!this.isInitialized())return null;N?m.partialFlush():m.flush()},this.clearParsedCaptions=function(){w.captions=[],w.captionStreams={},w.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;m.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){_=[],y=null,T=null,w?this.clearParsedCaptions():w={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},a_e=s_e;const{parseTfdt:o_e}=zW,Vs=$C,{getTimescaleFromMediaHeader:l_e}=Hc,{parseSamples:u_e,getMdatTrafPairs:c_e}=nz;var sz=function(){let d=9e4;this.init=function(m){const _=Vs(m,["moov","trak","mdia","mdhd"])[0];_&&(d=l_e(_))},this.parseSegment=function(m){const _=[],y=c_e(m);let T=0;return y.forEach(function(w){const N=w.mdat,L=w.traf,B=Vs(L,["tfdt"])[0],H=Vs(L,["tfhd"])[0],G=Vs(L,["trun"]);if(B&&(T=o_e(B).baseMediaDecodeTime),G.length&&H){const te=u_e(G,T,H);let de=0;te.forEach(function(ne){const Ee="utf-8",Fe=new TextDecoder(Ee),vr=N.slice(de,de+ne.size);if(Vs(vr,["vtte"])[0]){de+=ne.size;return}Vs(vr,["vttc"]).forEach(function(Vc){const Gc=Vs(Vc,["payl"])[0],Wc=Vs(Vc,["sttg"])[0],zc=ne.pts/d,ep=(ne.pts+ne.duration)/d;let xt,Yc;if(Gc)try{xt=Fe.decode(Gc)}catch(dn){console.error(dn)}if(Wc)try{Yc=Fe.decode(Wc)}catch(dn){console.error(dn)}ne.duration&&xt&&_.push({cueText:xt,start:zc,end:ep,settings:Yc})}),de+=ne.size})}}),_}},UC=Mf,az=function(d){var m=d[1]&31;return m<<=8,m|=d[2],m},Zf=function(d){return!!(d[1]&64)},Jf=function(d){var m=0;return(d[3]&48)>>>4>1&&(m+=d[4]+1),m},h_e=function(d,m){var _=az(d);return _===0?"pat":_===m?"pmt":m?"pes":null},d_e=function(d){var m=Zf(d),_=4+Jf(d);return m&&(_+=d[_]+1),(d[_+10]&31)<<8|d[_+11]},f_e=function(d){var m={},_=Zf(d),y=4+Jf(d);if(_&&(y+=d[y]+1),!!(d[y+5]&1)){var T,w,N;T=(d[y+1]&15)<<8|d[y+2],w=3+T-4,N=(d[y+10]&15)<<8|d[y+11];for(var L=12+N;L<w;){var B=y+L;m[(d[B+1]&31)<<8|d[B+2]]=d[B],L+=((d[B+3]&15)<<8|d[B+4])+5}return m}},p_e=function(d,m){var _=az(d),y=m[_];switch(y){case UC.H264_STREAM_TYPE:return"video";case UC.ADTS_STREAM_TYPE:return"audio";case UC.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},m_e=function(d){var m=Zf(d);if(!m)return null;var _=4+Jf(d);if(_>=d.byteLength)return null;var y=null,T;return T=d[_+7],T&192&&(y={},y.pts=(d[_+9]&14)<<27|(d[_+10]&255)<<20|(d[_+11]&254)<<12|(d[_+12]&255)<<5|(d[_+13]&254)>>>3,y.pts*=4,y.pts+=(d[_+13]&6)>>>1,y.dts=y.pts,T&64&&(y.dts=(d[_+14]&14)<<27|(d[_+15]&255)<<20|(d[_+16]&254)<<12|(d[_+17]&255)<<5|(d[_+18]&254)>>>3,y.dts*=4,y.dts+=(d[_+18]&6)>>>1)),y},jC=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},g_e=function(d){for(var m=4+Jf(d),_=d.subarray(m),y=0,T=0,w=!1,N;T<_.byteLength-3;T++)if(_[T+2]===1){y=T+5;break}for(;y<_.byteLength;)switch(_[y]){case 0:if(_[y-1]!==0){y+=2;break}else if(_[y-2]!==0){y++;break}T+3!==y-2&&(N=jC(_[T+3]&31),N==="slice_layer_without_partitioning_rbsp_idr"&&(w=!0));do y++;while(_[y]!==1&&y<_.length);T=y-2,y+=3;break;case 1:if(_[y-1]!==0||_[y-2]!==0){y+=3;break}N=jC(_[T+3]&31),N==="slice_layer_without_partitioning_rbsp_idr"&&(w=!0),T=y-2,y+=3;break;default:y+=3;break}return _=_.subarray(T),y-=T,T=0,_&&_.byteLength>3&&(N=jC(_[T+3]&31),N==="slice_layer_without_partitioning_rbsp_idr"&&(w=!0)),w},v_e={parseType:h_e,parsePat:d_e,parsePmt:f_e,parsePayloadUnitStartIndicator:Zf,parsePesType:p_e,parsePesTime:m_e,videoPacketContainsKeyFrame:g_e},oz=Mf,$l=xW.handleRollover,st={};st.ts=v_e,st.aac=MC;var Za=ae.ONE_SECOND_IN_TS,Wr=188,Fn=71,y_e=function(d,m){for(var _=0,y=Wr,T,w;y<d.byteLength;){if(d[_]===Fn&&d[y]===Fn){switch(T=d.subarray(_,y),w=st.ts.parseType(T,m.pid),w){case"pat":m.pid=st.ts.parsePat(T);break;case"pmt":var N=st.ts.parsePmt(T);m.table=m.table||{},Object.keys(N).forEach(function(L){m.table[L]=N[L]});break}_+=Wr,y+=Wr;continue}_++,y++}},lz=function(d,m,_){for(var y=0,T=Wr,w,N,L,B,H,G=!1;T<=d.byteLength;){if(d[y]===Fn&&(d[T]===Fn||T===d.byteLength)){switch(w=d.subarray(y,T),N=st.ts.parseType(w,m.pid),N){case"pes":L=st.ts.parsePesType(w,m.table),B=st.ts.parsePayloadUnitStartIndicator(w),L==="audio"&&B&&(H=st.ts.parsePesTime(w),H&&(H.type="audio",_.audio.push(H),G=!0));break}if(G)break;y+=Wr,T+=Wr;continue}y++,T++}for(T=d.byteLength,y=T-Wr,G=!1;y>=0;){if(d[y]===Fn&&(d[T]===Fn||T===d.byteLength)){switch(w=d.subarray(y,T),N=st.ts.parseType(w,m.pid),N){case"pes":L=st.ts.parsePesType(w,m.table),B=st.ts.parsePayloadUnitStartIndicator(w),L==="audio"&&B&&(H=st.ts.parsePesTime(w),H&&(H.type="audio",_.audio.push(H),G=!0));break}if(G)break;y-=Wr,T-=Wr;continue}y--,T--}},__e=function(d,m,_){for(var y=0,T=Wr,w,N,L,B,H,G,te,de,ne=!1,Ee={data:[],size:0};T<d.byteLength;){if(d[y]===Fn&&d[T]===Fn){switch(w=d.subarray(y,T),N=st.ts.parseType(w,m.pid),N){case"pes":if(L=st.ts.parsePesType(w,m.table),B=st.ts.parsePayloadUnitStartIndicator(w),L==="video"&&(B&&!ne&&(H=st.ts.parsePesTime(w),H&&(H.type="video",_.video.push(H),ne=!0)),!_.firstKeyFrame)){if(B&&Ee.size!==0){for(G=new Uint8Array(Ee.size),te=0;Ee.data.length;)de=Ee.data.shift(),G.set(de,te),te+=de.byteLength;if(st.ts.videoPacketContainsKeyFrame(G)){var Fe=st.ts.parsePesTime(G);Fe?(_.firstKeyFrame=Fe,_.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Ee.size=0}Ee.data.push(w),Ee.size+=w.byteLength}break}if(ne&&_.firstKeyFrame)break;y+=Wr,T+=Wr;continue}y++,T++}for(T=d.byteLength,y=T-Wr,ne=!1;y>=0;){if(d[y]===Fn&&d[T]===Fn){switch(w=d.subarray(y,T),N=st.ts.parseType(w,m.pid),N){case"pes":L=st.ts.parsePesType(w,m.table),B=st.ts.parsePayloadUnitStartIndicator(w),L==="video"&&B&&(H=st.ts.parsePesTime(w),H&&(H.type="video",_.video.push(H),ne=!0));break}if(ne)break;y-=Wr,T-=Wr;continue}y--,T--}},b_e=function(d,m){if(d.audio&&d.audio.length){var _=m;(typeof _>"u"||isNaN(_))&&(_=d.audio[0].dts),d.audio.forEach(function(w){w.dts=$l(w.dts,_),w.pts=$l(w.pts,_),w.dtsTime=w.dts/Za,w.ptsTime=w.pts/Za})}if(d.video&&d.video.length){var y=m;if((typeof y>"u"||isNaN(y))&&(y=d.video[0].dts),d.video.forEach(function(w){w.dts=$l(w.dts,y),w.pts=$l(w.pts,y),w.dtsTime=w.dts/Za,w.ptsTime=w.pts/Za}),d.firstKeyFrame){var T=d.firstKeyFrame;T.dts=$l(T.dts,y),T.pts=$l(T.pts,y),T.dtsTime=T.dts/Za,T.ptsTime=T.pts/Za}}},T_e=function(d){for(var m=!1,_=0,y=null,T=null,w=0,N=0,L;d.length-N>=3;){var B=st.aac.parseType(d,N);switch(B){case"timed-metadata":if(d.length-N<10){m=!0;break}if(w=st.aac.parseId3TagSize(d,N),w>d.length){m=!0;break}T===null&&(L=d.subarray(N,N+w),T=st.aac.parseAacTimestamp(L)),N+=w;break;case"audio":if(d.length-N<7){m=!0;break}if(w=st.aac.parseAdtsSize(d,N),w>d.length){m=!0;break}y===null&&(L=d.subarray(N,N+w),y=st.aac.parseSampleRate(L)),_++,N+=w;break;default:N++;break}if(m)return null}if(y===null||T===null)return null;var H=Za/y,G={audio:[{type:"audio",dts:T,pts:T},{type:"audio",dts:T+_*1024*H,pts:T+_*1024*H}]};return G},S_e=function(d){var m={pid:null,table:null},_={};y_e(d,m);for(var y in m.table)if(m.table.hasOwnProperty(y)){var T=m.table[y];switch(T){case oz.H264_STREAM_TYPE:_.video=[],__e(d,m,_),_.video.length===0&&delete _.video;break;case oz.ADTS_STREAM_TYPE:_.audio=[],lz(d,m,_),_.audio.length===0&&delete _.audio;break}}return _},x_e=function(d,m){var _=st.aac.isLikelyAacData(d),y;return _?y=T_e(d):y=S_e(d),!y||!y.audio&&!y.video?null:(b_e(y,m),y)},w_e={inspect:x_e,parseAudioPes_:lz};const E_e=function(d,m){m.on("data",function(_){const y=_.initSegment;_.initSegment={data:y.buffer,byteOffset:y.byteOffset,byteLength:y.byteLength};const T=_.data;_.data=T.buffer,d.postMessage({action:"data",segment:_,byteOffset:T.byteOffset,byteLength:T.byteLength},[_.data])}),m.on("done",function(_){d.postMessage({action:"done"})}),m.on("gopInfo",function(_){d.postMessage({action:"gopInfo",gopInfo:_})}),m.on("videoSegmentTimingInfo",function(_){const y={start:{decode:ae.videoTsToSeconds(_.start.dts),presentation:ae.videoTsToSeconds(_.start.pts)},end:{decode:ae.videoTsToSeconds(_.end.dts),presentation:ae.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:ae.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(y.prependedContentDuration=ae.videoTsToSeconds(_.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:y})}),m.on("audioSegmentTimingInfo",function(_){const y={start:{decode:ae.videoTsToSeconds(_.start.dts),presentation:ae.videoTsToSeconds(_.start.pts)},end:{decode:ae.videoTsToSeconds(_.end.dts),presentation:ae.videoTsToSeconds(_.end.pts)},baseMediaDecodeTime:ae.videoTsToSeconds(_.baseMediaDecodeTime)};_.prependedContentDuration&&(y.prependedContentDuration=ae.videoTsToSeconds(_.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:y})}),m.on("id3Frame",function(_){d.postMessage({action:"id3Frame",id3Frame:_})}),m.on("caption",function(_){d.postMessage({action:"caption",caption:_})}),m.on("trackinfo",function(_){d.postMessage({action:"trackinfo",trackInfo:_})}),m.on("audioTimingInfo",function(_){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:ae.videoTsToSeconds(_.start),end:ae.videoTsToSeconds(_.end)}})}),m.on("videoTimingInfo",function(_){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:ae.videoTsToSeconds(_.start),end:ae.videoTsToSeconds(_.end)}})}),m.on("log",function(_){d.postMessage({action:"log",log:_})})};class uz{constructor(m,_){this.options=_||{},this.self=m,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new T0e.Transmuxer(this.options),E_e(this.self,this.transmuxer)}pushMp4Captions(m){this.captionParser||(this.captionParser=new a_e,this.captionParser.init());const _=new Uint8Array(m.data,m.byteOffset,m.byteLength),y=this.captionParser.parse(_,m.trackIds,m.timescales);this.self.postMessage({action:"mp4Captions",captions:y&&y.captions||[],logs:y&&y.logs||[],data:_.buffer},[_.buffer])}initMp4WebVttParser(m){this.webVttParser||(this.webVttParser=new sz);const _=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.webVttParser.init(_)}getMp4WebVttText(m){this.webVttParser||(this.webVttParser=new sz);const _=new Uint8Array(m.data,m.byteOffset,m.byteLength),y=this.webVttParser.parseSegment(_);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:y||[],data:_.buffer},[_.buffer])}probeMp4StartTime({timescales:m,data:_}){const y=Hc.startTime(m,_);this.self.postMessage({action:"probeMp4StartTime",startTime:y,data:_},[_.buffer])}probeMp4Tracks({data:m}){const _=Hc.tracks(m);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:m},[m.buffer])}probeEmsgID3({data:m,offset:_}){const y=Hc.getEmsgID3(m,_);this.self.postMessage({action:"probeEmsgID3",id3Frames:y,emsgData:m},[m.buffer])}probeTs({data:m,baseStartTime:_}){const y=typeof _=="number"&&!isNaN(_)?_*ae.ONE_SECOND_IN_TS:void 0,T=w_e.inspect(m,y);let w=null;T&&(w={hasVideo:T.video&&T.video.length===2||!1,hasAudio:T.audio&&T.audio.length===2||!1},w.hasVideo&&(w.videoStart=T.video[0].ptsTime),w.hasAudio&&(w.audioStart=T.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:w,data:m},[m.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(m){const _=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.transmuxer.push(_)}reset(){this.transmuxer.reset()}setTimestampOffset(m){const _=m.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ae.secondsToVideoTs(_)))}setAudioAppendStart(m){this.transmuxer.setAudioAppendStart(Math.ceil(ae.secondsToVideoTs(m.appendStart)))}setRemux(m){this.transmuxer.setRemux(m.remux)}flush(m){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(m){this.transmuxer.alignGopsWith(m.gopsToAlignWith.slice())}}self.onmessage=function(d){if(d.data.action==="init"&&d.data.options){this.messageHandlers=new uz(self,d.data.options);return}this.messageHandlers||(this.messageHandlers=new uz(self)),d.data&&d.data.action&&d.data.action!=="init"&&this.messageHandlers[d.data.action]&&this.messageHandlers[d.data.action](d.data)}}));var wQ=dO(xQ);const EQ=(r,e,t)=>{const{type:i,initSegment:n,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=r.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=r.data.segment.boxes||{data:r.data.segment.data},h={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(n.data,n.byteOffset,n.byteLength)};typeof l<"u"&&(h.videoFrameDtsTime=l),typeof u<"u"&&(h.videoFramePtsTime=u),t(h)},CQ=({transmuxedData:r,callback:e})=>{r.buffer=[],e(r)},DQ=(r,e)=>{e.gopInfo=r.data.gopInfo},mO=r=>{const{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:n,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:h,onId3:f,onCaptions:p,onDone:g,onEndedTimeline:v,onTransmuxerLog:b,isEndOfTimeline:E,segment:x,triggerSegmentEventFn:D}=r,O={buffer:[]};let P=E;const R=I=>{e.currentTransmux===r&&(I.data.action==="data"&&EQ(I,O,a),I.data.action==="trackinfo"&&o(I.data.trackInfo),I.data.action==="gopInfo"&&DQ(I,O),I.data.action==="audioTimingInfo"&&l(I.data.audioTimingInfo),I.data.action==="videoTimingInfo"&&u(I.data.videoTimingInfo),I.data.action==="videoSegmentTimingInfo"&&c(I.data.videoSegmentTimingInfo),I.data.action==="audioSegmentTimingInfo"&&h(I.data.audioSegmentTimingInfo),I.data.action==="id3Frame"&&f([I.data.id3Frame],I.data.id3Frame.dispatchType),I.data.action==="caption"&&p(I.data.caption),I.data.action==="endedtimeline"&&(P=!1,v()),I.data.action==="log"&&b(I.data.log),I.data.type==="transmuxed"&&(P||(e.onmessage=null,CQ({transmuxedData:O,callback:g}),gO(e))))},A=()=>{const I={message:"Received an error message from the transmuxer worker",metadata:{errorType:K.Error.StreamingFailedToTransmuxSegment,segmentInfo:na({segment:x})}};g(null,I)};if(e.onmessage=R,e.onerror=A,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(n)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const I=t instanceof ArrayBuffer?t:t.buffer,S=t instanceof ArrayBuffer?0:t.byteOffset;D({type:"segmenttransmuxingstart",segment:x}),e.postMessage({action:"push",data:I,byteOffset:S,byteLength:t.byteLength},[I])}E&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},gO=r=>{r.currentTransmux=null,r.transmuxQueue.length&&(r.currentTransmux=r.transmuxQueue.shift(),typeof r.currentTransmux=="function"?r.currentTransmux():mO(r.currentTransmux))},vO=(r,e)=>{r.postMessage({action:e}),gO(r)},yO=(r,e)=>{if(!e.currentTransmux){e.currentTransmux=r,vO(e,r);return}e.transmuxQueue.push(vO.bind(null,e,r))},IQ=r=>{yO("reset",r)},AQ=r=>{yO("endTimeline",r)},_O=r=>{if(!r.transmuxer.currentTransmux){r.transmuxer.currentTransmux=r,mO(r);return}r.transmuxer.transmuxQueue.push(r)};var Lm={reset:IQ,endTimeline:AQ,transmux:_O,createTransmuxer:r=>{const e=new wQ;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:r}),e}};const Do=function(r){const e=r.transmuxer,t=r.endAction||r.action,i=r.callback,n=Ut({},r,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,r.byteOffset||0,r.byteLength||a.data.data.byteLength),r.data&&(r.data=a.data.data)),i(a.data))};if(e.addEventListener("message",s),r.data){const a=r.data instanceof ArrayBuffer;n.byteOffset=a?0:r.data.byteOffset,n.byteLength=r.data.byteLength;const o=[a?r.data:r.data.buffer];e.postMessage(n,o)}else e.postMessage(n)},Tn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},bO="wvtt",Fm=r=>{r.forEach(e=>{e.abort()})},OQ=r=>({bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0}),PQ=r=>{const e=r.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=r.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},qm=(r,e)=>{const{requestType:t}=e,i=ia({requestType:t,request:e,error:r});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Tn.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Tn.ABORTED,xhr:e,metadata:i}:r?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Tn.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Tn.FAILURE,xhr:e,metadata:i}:null},TO=(r,e,t,i)=>(n,s)=>{const a=s.response,o=qm(n,s);if(o)return t(o,r);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:Tn.FAILURE,xhr:s},r);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let h=0;h<e.length;h++)e[h].bytes=u;const c={uri:s.uri};return i({type:"segmentkeyloadcomplete",segment:r,keyInfo:c}),t(null,r)},RQ=(r,e)=>{e===bO&&r.transmuxer.postMessage({action:"initMp4WebVttParser",data:r.map.bytes})},kQ=(r,e,t)=>{e===bO&&Do({action:"getMp4WebVttText",data:r.bytes,transmuxer:r.transmuxer,callback:({data:i,mp4VttCues:n})=>{r.bytes=i,t(null,r,{mp4VttCues:n})}})},SO=(r,e)=>{const t=Dp(r.map.bytes);if(t!=="mp4"){const i=r.map.resolvedUri||r.map.uri,n=t||"unknown";return e({internal:!0,message:`Found unsupported ${n} container for initialization segment at URL: ${i}`,code:Tn.FAILURE,metadata:{mediaType:n}})}Do({action:"probeMp4Tracks",data:r.map.bytes,transmuxer:r.transmuxer,callback:({tracks:i,data:n})=>(r.map.bytes=n,i.forEach(function(s){r.map.tracks=r.map.tracks||{},!r.map.tracks[s.type]&&(r.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(r.map.timescales=r.map.timescales||{},r.map.timescales[s.id]=s.timescale),s.type==="text"&&RQ(r,s.codec))}),e(null))})},MQ=({segment:r,finishProcessingFn:e,triggerSegmentEventFn:t})=>(i,n)=>{const s=qm(i,n);if(s)return e(s,r);const a=new Uint8Array(n.response);if(t({type:"segmentloaded",segment:r}),r.map.key)return r.map.encryptedBytes=a,e(null,r);r.map.bytes=a,SO(r,function(o){if(o)return o.xhr=n,o.status=n.status,e(o,r);e(null,r)})},$Q=({segment:r,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:i})=>(n,s)=>{const a=qm(n,s);if(a)return e(a,r);i({type:"segmentloaded",segment:r});const o=t==="arraybuffer"||!s.responseText?s.response:TQ(s.responseText.substring(r.lastReachedChar||0));return r.stats=OQ(s),r.key?r.encryptedBytes=new Uint8Array(o):r.bytes=new Uint8Array(o),e(null,r)},NQ=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{const g=r.map&&r.map.tracks||{},v=!!(g.audio&&g.video);let b=i.bind(null,r,"audio","start");const E=i.bind(null,r,"audio","end");let x=i.bind(null,r,"video","start");const D=i.bind(null,r,"video","end"),O=()=>_O({bytes:e,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:v,onData:P=>{P.type=P.type==="combined"?"video":P.type,c(r,P)},onTrackInfo:P=>{t&&(v&&(P.isMuxed=!0),t(r,P))},onAudioTimingInfo:P=>{b&&typeof P.start<"u"&&(b(P.start),b=null),E&&typeof P.end<"u"&&E(P.end)},onVideoTimingInfo:P=>{x&&typeof P.start<"u"&&(x(P.start),x=null),D&&typeof P.end<"u"&&D(P.end)},onVideoSegmentTimingInfo:P=>{const R={pts:{start:P.start.presentation,end:P.end.presentation},dts:{start:P.start.decode,end:P.end.decode}};p({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:R}),n(P)},onAudioSegmentTimingInfo:P=>{const R={pts:{start:P.start.pts,end:P.end.pts},dts:{start:P.start.dts,end:P.end.dts}};p({type:"segmenttransmuxingtiminginfoavailable",segment:r,timingInfo:R}),s(P)},onId3:(P,R)=>{a(r,P,R)},onCaptions:P=>{o(r,[P])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(P,R)=>{h&&(P.type=P.type==="combined"?"video":P.type,p({type:"segmenttransmuxingcomplete",segment:r}),h(R,r,P))},segment:r,triggerSegmentEventFn:p});Do({action:"probeTs",transmuxer:r.transmuxer,data:e,baseStartTime:r.baseStartTime,callback:P=>{r.bytes=e=P.data;const R=P.result;R&&(t(r,{hasAudio:R.hasAudio,hasVideo:R.hasVideo,isMuxed:v}),t=null),O()}})},xO=({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{let g=new Uint8Array(e);if(uK(g)){r.isFmp4=!0;const{tracks:v}=r.map;if(v.text&&(!v.audio||!v.video)){c(r,{data:g,type:"text"}),kQ(r,v.text.codec,h);return}const E={isFmp4:!0,hasVideo:!!v.video,hasAudio:!!v.audio};v.audio&&v.audio.codec&&v.audio.codec!=="enca"&&(E.audioCodec=v.audio.codec),v.video&&v.video.codec&&v.video.codec!=="encv"&&(E.videoCodec=v.video.codec),v.video&&v.audio&&(E.isMuxed=!0),t(r,E);const x=(D,O)=>{c(r,{data:g,type:E.hasAudio&&!E.isMuxed?"audio":"video"}),O&&O.length&&a(r,O),D&&D.length&&o(r,D),h(null,r,{})};Do({action:"probeMp4StartTime",timescales:r.map.timescales,data:g,transmuxer:r.transmuxer,callback:({data:D,startTime:O})=>{e=D.buffer,r.bytes=g=D,E.hasAudio&&!E.isMuxed&&i(r,"audio","start",O),E.hasVideo&&i(r,"video","start",O),Do({action:"probeEmsgID3",data:g,transmuxer:r.transmuxer,offset:O,callback:({emsgData:P,id3Frames:R})=>{if(e=P.buffer,r.bytes=g=P,!v.video||!P.byteLength||!r.transmuxer){x(void 0,R);return}Do({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:g,timescales:r.map.timescales,trackIds:[v.video.id],callback:A=>{e=A.data.buffer,r.bytes=g=A.data,A.logs.forEach(function(I){f(rt(I,{stream:"mp4CaptionParser"}))}),x(A.captions,R)}})}})}});return}if(!r.transmuxer){h(null,r,{});return}if(typeof r.container>"u"&&(r.container=Dp(g)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),h(null,r,{});return}NQ({segment:r,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})},wO=function({id:r,key:e,encryptedBytes:t,decryptionWorker:i,segment:n,doneFn:s},a){const o=u=>{if(u.data.source===r){i.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};i.onerror=()=>{const u="An error occurred in the decryption worker",c=na({segment:n}),h={message:u,metadata:{error:new Error(u),errorType:K.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:n.key.resolvedUri||n.map.key.resolvedUri}}};s(h,n)},i.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(nO({source:r,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},LQ=({decryptionWorker:r,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{p({type:"segmentdecryptionstart"}),wO({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:r,segment:e,doneFn:h},g=>{e.bytes=g,p({type:"segmentdecryptioncomplete",segment:e}),xO({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})})},FQ=({activeXhrs:r,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})=>{let g=0,v=!1;return(b,E)=>{if(!v){if(b)return v=!0,Fm(r),h(b,E);if(g+=1,g===r.length){const x=function(){if(E.encryptedBytes)return LQ({decryptionWorker:e,segment:E,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p});xO({segment:E,bytes:E.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:h,onTransmuxerLog:f,triggerSegmentEventFn:p})};if(E.endOfAllRequests=Date.now(),E.map&&E.map.encryptedBytes&&!E.map.bytes)return p({type:"segmentdecryptionstart",segment:E}),wO({decryptionWorker:e,id:E.requestId+"-init",encryptedBytes:E.map.encryptedBytes,key:E.map.key,segment:E,doneFn:h},D=>{E.map.bytes=D,p({type:"segmentdecryptioncomplete",segment:E}),SO(E,O=>{if(O)return Fm(r),h(O,E);x()})});x()}}}},qQ=({loadendState:r,abortFn:e})=>t=>{t.target.aborted&&e&&!r.calledAbortFn&&(e(),r.calledAbortFn=!0)},BQ=({segment:r,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:n,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>h=>{if(!h.target.aborted)return r.stats=rt(r.stats,PQ(h)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),e(h,r)},UQ=({xhr:r,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:n,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g,doneFn:v,onTransmuxerLog:b,triggerSegmentEventFn:E})=>{const x=[],D=FQ({activeXhrs:x,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g,doneFn:v,onTransmuxerLog:b,triggerSegmentEventFn:E});if(i.key&&!i.key.bytes){const I=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&I.push(i.map.key);const S=rt(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),C=TO(i,I,D,E),$={uri:i.key.resolvedUri};E({type:"segmentkeyloadstart",segment:i,keyInfo:$});const F=r(S,C);x.push(F)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const F=rt(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),j=TO(i,[i.map.key],D,E),z={uri:i.map.key.resolvedUri};E({type:"segmentkeyloadstart",segment:i,keyInfo:z});const J=r(F,j);x.push(J)}const S=rt(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:Mm(i.map),requestType:"segment-media-initialization"}),C=MQ({segment:i,finishProcessingFn:D,triggerSegmentEventFn:E});E({type:"segmentloadstart",segment:i});const $=r(S,C);x.push($)}const O=rt(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:Mm(i),requestType:"segment"}),P=$Q({segment:i,finishProcessingFn:D,responseType:O.responseType,triggerSegmentEventFn:E});E({type:"segmentloadstart",segment:i});const R=r(O,P);R.addEventListener("progress",BQ({segment:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:h,isEndOfTimeline:f,endedTimelineFn:p,dataFn:g})),x.push(R);const A={};return x.forEach(I=>{I.addEventListener("loadend",qQ({loadendState:A,abortFn:n}))}),()=>Fm(x)},Hh=Ci("PlaylistSelector"),EO=function(r){if(!r||!r.playlist)return;const e=r.playlist;return JSON.stringify({id:e.id,bandwidth:r.bandwidth,width:r.width,height:r.height,codecs:e.attributes&&e.attributes.CODECS||""})},Io=function(r,e){if(!r)return"";const t=U.getComputedStyle(r);return t?t[e]:""},Ao=function(r,e){const t=r.slice();r.sort(function(i,n){const s=e(i,n);return s===0?t.indexOf(i)-t.indexOf(n):s})},Bm=function(r,e){let t,i;return r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||U.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||U.Number.MAX_VALUE,t-i},jQ=function(r,e){let t,i;return r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||U.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||U.Number.MAX_VALUE,t===i&&r.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?r.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i};let CO=function(r){const{main:e,bandwidth:t,playerWidth:i,playerHeight:n,playerObjectFit:s,limitRenditionByPlayerDimensions:a,playlistController:o}=r;if(!e)return;const l={bandwidth:t,width:i,height:n,limitRenditionByPlayerDimensions:a};let u=e.playlists;Xr.isAudioOnly(e)&&(u=o.getAudioTrackPlaylists_(),l.audioOnly=!0);let c=u.map(A=>{let I;const S=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.width,C=A.attributes&&A.attributes.RESOLUTION&&A.attributes.RESOLUTION.height;return I=A.attributes&&A.attributes.BANDWIDTH,I=I||U.Number.MAX_VALUE,{bandwidth:I,width:S,height:C,playlist:A}});Ao(c,(A,I)=>A.bandwidth-I.bandwidth),c=c.filter(A=>!Xr.isIncompatible(A.playlist));let h=c.filter(A=>Xr.isEnabled(A.playlist));h.length||(h=c.filter(A=>!Xr.isDisabled(A.playlist)));const f=h.filter(A=>A.bandwidth*lr.BANDWIDTH_VARIANCE<t);let p=f[f.length-1];const g=f.filter(A=>A.bandwidth===p.bandwidth)[0];if(a===!1){const A=g||h[0]||c[0];if(A&&A.playlist){let I="sortedPlaylistReps";return g&&(I="bandwidthBestRep"),h[0]&&(I="enabledPlaylistReps"),Hh(`choosing ${EO(A)} using ${I} with options`,l),A.playlist}return Hh("could not choose a playlist with options",l),null}const v=f.filter(A=>A.width&&A.height);Ao(v,(A,I)=>A.width-I.width);const b=v.filter(A=>A.width===i&&A.height===n);p=b[b.length-1];const E=b.filter(A=>A.bandwidth===p.bandwidth)[0];let x,D,O;E||(x=v.filter(A=>s==="cover"?A.width>i&&A.height>n:A.width>i||A.height>n),D=x.filter(A=>A.width===x[0].width&&A.height===x[0].height),p=D[D.length-1],O=D.filter(A=>A.bandwidth===p.bandwidth)[0]);let P;if(o.leastPixelDiffSelector){const A=v.map(I=>(I.pixelDiff=Math.abs(I.width-i)+Math.abs(I.height-n),I));Ao(A,(I,S)=>I.pixelDiff===S.pixelDiff?S.bandwidth-I.bandwidth:I.pixelDiff-S.pixelDiff),P=A[0]}const R=P||O||E||g||h[0]||c[0];if(R&&R.playlist){let A="sortedPlaylistReps";return P?A="leastPixelDiffRep":O?A="resolutionPlusOneRep":E?A="resolutionBestRep":g?A="bandwidthBestRep":h[0]&&(A="enabledPlaylistReps"),Hh(`choosing ${EO(R)} using ${A} with options`,l),R.playlist}return Hh("could not choose a playlist with options",l),null};const DO=function(){let r=this.useDevicePixelRatio&&U.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),CO({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(Io(this.tech_.el(),"width"),10)*r,playerHeight:parseInt(Io(this.tech_.el(),"height"),10)*r,playerObjectFit:this.usePlayerObjectFit?Io(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},HQ=function(r){let e=-1,t=-1;if(r<0||r>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&U.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=r*this.systemBandwidth+(1-r)*e,t=this.systemBandwidth),CO({main:this.playlists.main,bandwidth:e,playerWidth:parseInt(Io(this.tech_.el(),"width"),10)*i,playerHeight:parseInt(Io(this.tech_.el(),"height"),10)*i,playerObjectFit:this.usePlayerObjectFit?Io(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},VQ=function(r){const{main:e,currentTime:t,bandwidth:i,duration:n,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=r,u=e.playlists.filter(g=>!Xr.isIncompatible(g));let c=u.filter(Xr.isEnabled);c.length||(c=u.filter(g=>!Xr.isDisabled(g)));const f=c.filter(Xr.hasAttribute.bind(null,"BANDWIDTH")).map(g=>{const b=l.getSyncPoint(g,n,o,t)?1:2,x=Xr.estimateSegmentRequestTime(s,i,g)*b-a;return{playlist:g,rebufferingImpact:x}}),p=f.filter(g=>g.rebufferingImpact<=0);return Ao(p,(g,v)=>Bm(v.playlist,g.playlist)),p.length?p[0]:(Ao(f,(g,v)=>g.rebufferingImpact-v.rebufferingImpact),f[0]||null)},GQ=function(){const r=this.playlists.main.playlists.filter(Xr.isEnabled);return Ao(r,(t,i)=>Bm(t,i)),r.filter(t=>!!su(this.playlists.main,t).video)[0]||null},WQ=r=>{let e=0,t;return r.bytes&&(t=new Uint8Array(r.bytes),r.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t};function IO(r){try{return new URL(r).pathname.split("/").slice(-2).join("/")}catch{return""}}const zQ=function(r,e,t){if(!r[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);const n=e.textTracks().getTrackById(i);if(n)r[t]=n;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[i];u&&(a=u.label,o=u.language,l=u.default),r[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},YQ=function({inbandTextTracks:r,captionArray:e,timestampOffset:t}){if(!e)return;const i=U.WebKitDataCue||U.VTTCue;e.forEach(n=>{const s=n.stream;n.content?n.content.forEach(a=>{const o=new i(n.startTime+t,n.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",r[s].addCue(o)}):r[s].addCue(new i(n.startTime+t,n.endTime+t,n.text))})},KQ=function(r){Object.defineProperties(r.frame,{id:{get(){return K.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),r.value.key}},value:{get(){return K.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),r.value.data}},privateData:{get(){return K.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),r.value.data}}})},XQ=({inbandTextTracks:r,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;const n=U.WebKitDataCue||U.VTTCue,s=r.metadataTrack_;if(!s||(e.forEach(c=>{const h=c.cueTime+t;typeof h!="number"||U.isNaN(h)||h<0||!(h<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const p=new n(h,h,f.value||f.url||f.data||"");p.frame=f,p.value=f,KQ(p),s.addCue(p)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,h)=>{const f=c[h.startTime]||[];return f.push(h),c[h.startTime]=f,c},{}),u=Object.keys(l).sort((c,h)=>Number(c)-Number(h));u.forEach((c,h)=>{const f=l[c],p=isFinite(i)?i:c,g=Number(u[h+1])||p;f.forEach(v=>{v.endTime=g})})},QQ={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},ZQ=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),JQ=({inbandTextTracks:r,dateRanges:e})=>{const t=r.metadataTrack_;if(!t)return;const i=U.WebKitDataCue||U.VTTCue;e.forEach(n=>{for(const s of Object.keys(n)){if(ZQ.has(s))continue;const a=new i(n.startTime,n.endTime,"");a.id=n.id,a.type="com.apple.quicktime.HLS",a.value={key:QQ[s],data:n[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}n.processDateRange()})},AO=(r,e,t)=>{r.metadataTrack_||(r.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,K.browser.IS_ANY_SAFARI||(r.metadataTrack_.inBandMetadataTrackDispatchType=e))},au=function(r,e,t){let i,n;if(t&&t.cues)for(i=t.cues.length;i--;)n=t.cues[i],n.startTime>=r&&n.endTime<=e&&t.removeCue(n)},eZ=function(r){const e=r.cues;if(!e)return;const t={};for(let i=e.length-1;i>=0;i--){const n=e[i],s=`${n.startTime}-${n.endTime}-${n.text}`;t[s]?r.removeCue(n):t[s]=n}},tZ=(r,e,t)=>{if(typeof e>"u"||e===null||!r.length)return[];const i=Math.ceil((e-t+3)*Ys.ONE_SECOND_IN_TS);let n;for(n=0;n<r.length&&!(r[n].pts>i);n++);return r.slice(n)},rZ=(r,e,t)=>{if(!e.length)return r;if(t)return e.slice();const i=e[0].pts;let n=0;for(n;n<r.length&&!(r[n].pts>=i);n++);return r.slice(0,n).concat(e)},iZ=(r,e,t,i)=>{const n=Math.ceil((e-i)*Ys.ONE_SECOND_IN_TS),s=Math.ceil((t-i)*Ys.ONE_SECOND_IN_TS),a=r.slice();let o=r.length;for(;o--&&!(r[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(r[l].pts<=n););return l=Math.max(l,0),a.splice(l,o-l+1),a},nZ=function(r,e){if(!r&&!e||!r&&e||r&&!e)return!1;if(r===e)return!0;const t=Object.keys(r).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){const s=t[n];if(s!==i[n]||r[s]!==e[s])return!1}return!0},sZ=function(r,e,t){e=e||[];const i=[];let n=0;for(let s=0;s<e.length;s++){const a=e[s];if(r===a.timeline&&(i.push(s),n+=a.duration,n>t))return s}return i.length===0?0:i[i.length-1]},ou=1,aZ=500,OO=r=>typeof r=="number"&&isFinite(r),Vh=1/60,oZ=(r,e,t)=>r!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,lZ=(r,e,t)=>{let i=e-lr.BACK_BUFFER_LENGTH;r.length&&(i=Math.max(i,r.start(0)));const n=e-t;return Math.min(n,i)},Oo=r=>{const{startOfSegment:e,duration:t,segment:i,part:n,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=r,h=o.length-1;let f="mediaIndex/partIndex increment";r.getMediaInfoForTime?f=`getMediaInfoForTime (${r.getMediaInfoForTime})`:r.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),r.independent&&(f+=` with independent ${r.independent}`);const p=typeof u=="number",g=r.segment.uri?"segment":"pre-segment",v=p?NA({preloadSegment:i})-1:0;return`${g} [${s+l}/${s+h}]`+(p?` part [${u}/${v}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(p?` part start/end [${n.start} => ${n.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${f}] playlist [${a}]`},PO=r=>`${r}TimingInfo`,uZ=({segmentTimeline:r,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:n})=>!n&&r===e?null:r<e?t:i.length?i.end(i.length-1):t,Um=({timelineChangeController:r,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:n})=>{if(e===t)return!1;if(i==="audio"){const s=r.lastTimelineChange({type:"main"});return!s||s.to!==t}if(i==="main"&&n){const s=r.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},cZ=r=>{if(!r)return!1;const e=r.pendingTimelineChange({type:"audio"}),t=r.pendingTimelineChange({type:"main"}),i=e&&t,n=i&&e.to!==t.to;return!!(i&&e.from!==-1&&t.from!==-1&&n)},hZ=r=>{const e=r.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=r.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Ss=r=>{const e=r.pendingSegment_;if(!e)return;if(Um({timelineChangeController:r.timelineChangeController_,currentTimeline:r.currentTimeline_,segmentTimeline:e.timeline,loaderType:r.loaderType_,audioDisabled:r.audioDisabled_})&&cZ(r.timelineChangeController_)){if(hZ(r)){r.timelineChangeController_.trigger("audioTimelineBehind");return}r.timelineChangeController_.trigger("fixBadTimelineChange")}},dZ=r=>{let e=0;return["video","audio"].forEach(function(t){const i=r[`${t}TimingInfo`];if(!i)return;const{start:n,end:s}=i;let a;typeof n=="bigint"||typeof s=="bigint"?a=U.BigInt(s)-U.BigInt(n):typeof n=="number"&&typeof s=="number"&&(a=s-n),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},RO=({segmentDuration:r,maxDuration:e})=>r?Math.round(r)>e+_n:!1,fZ=(r,e)=>{if(e!=="hls")return null;const t=dZ({audioTimingInfo:r.audioTimingInfo,videoTimingInfo:r.videoTimingInfo});if(!t)return null;const i=r.playlist.targetDuration,n=RO({segmentDuration:t,maxDuration:i*2}),s=RO({segmentDuration:t,maxDuration:i}),a=`Segment with index ${r.mediaIndex} from playlist ${r.playlist.id} has a duration of ${t} when the reported duration is ${r.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return n||s?{severity:n?"warn":"info",message:a}:null},na=({type:r,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),i=!!(e.map&&!e.map.bytes),n=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:r||e.type,uri:e.resolvedUri||e.uri,start:n,duration:e.duration,isEncrypted:t,isMediaInitialization:i}};class jm extends K.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Ci(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ss(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(Ut({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ss(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(Ut({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Ss(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ss(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return Lm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&U.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,U.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&Lm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return or();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:i,isMuxed:n}=e;if(i&&t&&!this.audioDisabled_&&!n)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=jh(e);let n=this.initSegments_[i];return t&&!n&&e.bytes&&(this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),n||e}segmentKey(e,t=!1){if(!e)return null;const i=sO(e);let n=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!n&&e.bytes&&(this.keyCache_[i]=n={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(n||e).resolvedUri};return n&&(s.bytes=n.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const i=this.playlist_,n=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(i&&(i.id?s=i.id:i.uri&&(s=i.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${wm(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}n&&(n.mediaIndex-=a,n.mediaIndex<0?(n.mediaIndex=null,n.partIndex=null):(n.mediaIndex>=0&&(n.segment=e.segments[n.mediaIndex]),n.partIndex>=0&&n.segment.parts&&(n.part=n.segment.parts[n.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(U.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&Lm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},n=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&i()};(n||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(n||this.loaderType_==="main")&&(this.gopBuffer_=iZ(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)au(e,t,this.inbandTextTracks_[o]);au(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&U.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=U.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&U.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=U.setTimeout(this.monitorBufferTick_.bind(this),aZ)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:na({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const n=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!n||!n.parts||i+1===n.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=wm(e)||0,i=Em(e,this.currentTime_()),n=!this.hasPlayed_()&&i>=1,s=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||n||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=sZ(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=a[this.mediaIndex],p=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:t,f.parts&&f.parts[p+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=p+1):o.mediaIndex=this.mediaIndex+1}else{let f,p,g;const v=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${v}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const b=this.getSyncInfoFromMediaSequenceSync_(v);if(!b){const E="No sync info found while using media sequence sync";return this.error({message:E,metadata:{errorType:K.Error.StreamingFailedToSelectNextSegment,error:new Error(E)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${b.start} --> ${b.end})`),f=b.segmentIndex,p=b.partIndex,g=b.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const b=Xr.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:v,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=b.segmentIndex,p=b.partIndex,g=b.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${v}`:`currentTime ${v}`,o.mediaIndex=f,o.startOfSegment=g,o.partIndex=p,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(o.partIndex===0){const f=a[o.mediaIndex-1],p=f.parts&&f.parts.length&&f.parts[f.parts.length-1];p&&p.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const h=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&h&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!i)return null;if(!i.isAppended)return i;const n=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return n?(n.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),n):null}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:n,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[n],h=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||c.resolvedUri,mediaIndex:n,partIndex:h?o:null,isSyncRequest:a,startOfSegment:s,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:h&&h.duration||c.duration,segment:c,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},p=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:p});const g=wm(this.sourceUpdater_.audioBuffered());return typeof g=="number"&&(f.audioAppendStart=g-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=tZ(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return uZ(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,s=Xr.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),a=MX(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=VQ({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=_n&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*lr.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${Oo(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:i,hasVideo:n}=t,s={segmentInfo:na({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:n}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},nZ(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ss(this))))}handleTimingInfo_(e,t,i,n){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=PO(t);s[a]=s[a]||{},s[a][i]=n,this.logger_(`timinginfo: ${t} - ${i} - ${n}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Ss(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+n),o.endTime=Math.max(o.endTime,a.endTime+n),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),zQ(c,this.vhs_.tech_,a),au(o,l,c[a]),YQ({captionArray:u,inbandTextTracks:c,timestampOffset:n})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Um({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:n,isMuxed:s}=t;return!(n&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||Um({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Ss(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[PO(t.type)].start;else{const n=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo;let a;s&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=this.chooseNextRequest_();if(n.mediaIndex!==i.mediaIndex||n.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:n}){if(i){const s=jh(i);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=n,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},n){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ra(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ra(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=ou&&c-u<=ou){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${ra(s).join(", ")}, video buffer: ${ra(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const f=this.currentTime_()-ou;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${ou}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=U.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},ou*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},n){if(n){if(n.code===KA){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error({message:`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:K.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:n,bytes:s}){if(!s){const o=[n];let l=n.byteLength;i&&(o.unshift(i),l+=i.byteLength),s=WQ({bytes:l,segments:o})}const a={segmentInfo:na({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const n=this.pendingSegment_.segment,s=`${e}TimingInfo`;n[s]||(n[s]={}),n[s].transmuxerPrependedSeconds=i.prependedContentDuration||0,n[s].transmuxedPresentationStart=i.start.presentation,n[s].transmuxedDecodeStart=i.start.decode,n[s].transmuxedPresentationEnd=i.end.presentation,n[s].transmuxedDecodeEnd=i.end.decode,n[s].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:n}=t;if(!n||!n.byteLength||i==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:n})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Ss(this),this.loadQueue_.push(()=>{const t=Ut({},e,{forceTimestampOffset:!0});Ut(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),n=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||n&&s;this.logger_(`Requesting
${IO(e.uri)}
${Oo(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=UQ({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${Oo(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:h})=>{const p={segmentInfo:na({segment:l})};u&&(p.keyInfo=u),c&&(p.trackInfo=c),h&&(p.timingInfo=h),this.trigger({type:o,metadata:p})}})}trimBackBuffer_(e){const t=lZ(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,n=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:n,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<Vh){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${Vh}`);return}const i={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Tn.ABORTED)return;if(this.pause(),e.code===Tn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const n=this.pendingSegment_;this.saveBandwidthRelatedStats_(n.duration,t.stats),n.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=rZ(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(n)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:n,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==n+s?n:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:n,isMuxed:s}=t,a=this.loaderType_==="main"&&n,o=!this.audioDisabled_&&i&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=oZ(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),n=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end=typeof n.end=="number"?n.end:n.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:na({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=fZ(e,this.sourceType_);if(t&&(t.severity==="warn"?K.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Oo(e)}`);return}this.logger_(`Appended ${Oo(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,n=e.part,s=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=n&&n.end&&this.currentTime_()-n.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${Oo(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<Vh){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${Vh}`);return}const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(n-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,n=t.end;if(!OO(i)||!OO(n))return;au(i,n,this.segmentMetadataTrack_);const s=U.WebKitDataCue||U.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:n},o=JSON.stringify(a),l=new s(i,n,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function Hn(){}const kO=function(r){return typeof r!="string"?r:r.replace(/./,e=>e.toUpperCase())},pZ=["video","audio"],Hm=(r,e)=>{const t=e[`${r}Buffer`];return t&&t.updating||e.queuePending[r]},mZ=(r,e)=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="mediaSource")return null;if(i.type===r)return t}return null},Po=(r,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),Po("audio",e),Po("video",e));return}if(r!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||Hm(r,e))){if(i.type!==r){if(t=mZ(r,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[r]=i,i.action(r,e),!i.doneFn){e.queuePending[r]=null,Po(r,e);return}}},MO=(r,e)=>{const t=e[`${r}Buffer`],i=kO(r);t&&(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[r]=null,e[`${r}Buffer`]=null)},Sn=(r,e)=>r&&e&&Array.prototype.indexOf.call(r.sourceBuffers,e)!==-1,li={appendBuffer:(r,e,t)=>(i,n)=>{const s=n[`${i}Buffer`];if(Sn(n.mediaSource,s)){n.logger_(`Appending segment ${e.mediaIndex}'s ${r.length} bytes to ${i}Buffer`);try{s.appendBuffer(r)}catch(a){n.logger_(`Error with code ${a.code} `+(a.code===KA?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),n.queuePending[i]=null,t(a)}}},remove:(r,e)=>(t,i)=>{const n=i[`${t}Buffer`];if(Sn(i.mediaSource,n)){i.logger_(`Removing ${r} to ${e} from ${t}Buffer`);try{n.remove(r,e)}catch{i.logger_(`Remove ${r} to ${e} from ${t}Buffer failed`)}}},timestampOffset:r=>(e,t)=>{const i=t[`${e}Buffer`];Sn(t.mediaSource,i)&&(t.logger_(`Setting ${e}timestampOffset to ${r}`),i.timestampOffset=r)},callback:r=>(e,t)=>{r()},endOfStream:r=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${r||""})`);try{e.mediaSource.endOfStream(r)}catch(t){K.log.warn("Failed to call media source endOfStream",t)}}},duration:r=>e=>{e.logger_(`Setting mediaSource duration to ${r}`);try{e.mediaSource.duration=r}catch(t){K.log.warn("Failed to set media source duration",t)}},abort:()=>(r,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${r}Buffer`];if(Sn(e.mediaSource,t)){e.logger_(`calling abort on ${r}Buffer`);try{t.abort()}catch(i){K.log.warn(`Failed to abort on ${r}Buffer`,i)}}},addSourceBuffer:(r,e)=>t=>{const i=kO(r),n=eo(e);t.logger_(`Adding ${r}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",t[`on${i}UpdateEnd_`]),s.addEventListener("error",t[`on${i}Error_`]),t.codecs[r]=e,t[`${r}Buffer`]=s},removeSourceBuffer:r=>e=>{const t=e[`${r}Buffer`];if(MO(r,e),!!Sn(e.mediaSource,t)){e.logger_(`Removing ${r}Buffer with codec ${e.codecs[r]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){K.log.warn(`Failed to removeSourceBuffer ${r}Buffer`,i)}}},changeType:r=>(e,t)=>{const i=t[`${e}Buffer`],n=eo(r);if(!Sn(t.mediaSource,i))return;const s=r.substring(0,r.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:r}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${r}`);try{i.changeType(n),t.codecs[e]=r}catch(u){l.errorType=K.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),K.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},ui=({type:r,sourceUpdater:e,action:t,doneFn:i,name:n})=>{e.queue.push({type:r,action:t,doneFn:i,name:n}),Po(r,e)},$O=(r,e)=>t=>{const i=e[`${r}Buffered`](),n=PX(i);if(e.logger_(`received "updateend" event for ${r} Source Buffer: `,n),e.queuePending[r]){const s=e.queuePending[r].doneFn;e.queuePending[r]=null,s&&s(e[`${r}Error_`])}Po(r,e)};class NO extends K.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>Po("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Ci("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=$O("video",this),this.onAudioUpdateEnd_=$O("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){ui({type:"mediaSource",sourceUpdater:this,action:li.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){ui({type:e,sourceUpdater:this,action:li.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){K.log.error("removeSourceBuffer is not supported!");return}ui({type:"mediaSource",sourceUpdater:this,action:li.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!K.browser.IS_FIREFOX&&U.MediaSource&&U.MediaSource.prototype&&typeof U.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return U.SourceBuffer&&U.SourceBuffer.prototype&&typeof U.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){K.log.error("changeType is not supported!");return}ui({type:e,sourceUpdater:this,action:li.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){const{segmentInfo:i,type:n,bytes:s}=e;if(this.processedAppend_=!0,n==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(ui({type:n,sourceUpdater:this,action:li.appendBuffer(s,i||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),n==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return Sn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:or()}videoBuffered(){return Sn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:or()}buffered(){const e=Sn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Sn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():kX(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Hn){ui({type:"mediaSource",sourceUpdater:this,action:li.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Hn){typeof e!="string"&&(e=void 0),ui({type:"mediaSource",sourceUpdater:this,action:li.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=Hn){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}ui({type:"audio",sourceUpdater:this,action:li.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=Hn){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}ui({type:"video",sourceUpdater:this,action:li.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(Hm("audio",this)||Hm("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(ui({type:"audio",sourceUpdater:this,action:li.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(ui({type:"video",sourceUpdater:this,action:li.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&ui({type:"audio",sourceUpdater:this,action:li.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&ui({type:"video",sourceUpdater:this,action:li.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),pZ.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>MO(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const LO=r=>decodeURIComponent(escape(String.fromCharCode.apply(null,r))),gZ=r=>{const e=new Uint8Array(r);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},FO=new Uint8Array(`

`.split("").map(r=>r.charCodeAt(0)));class vZ extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class yZ extends jm{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return or();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return or([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=jh(e);let n=this.initSegments_[i];if(t&&!n&&e.bytes){const s=FO.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(FO,e.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return n||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){au(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Tn.TIMEOUT&&this.handleTimeout_(),e.code===Tn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const n=this.pendingSegment_,s=i.mp4VttCues&&i.mp4VttCues.length;s&&(n.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(n.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const a=n.segment;if(a.map&&(a.map.bytes=t.map.bytes),n.bytes=t.bytes,typeof U.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(n)}catch(o){this.stopForError({message:o.message,metadata:{errorType:K.Error.StreamingVttParserError,error:o}});return}if(s||this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.cues.length?n.timingInfo={start:n.cues[0].startTime,end:n.cues[n.cues.length-1].endTime}:n.timingInfo={start:n.startOfSegment,end:n.startOfSegment+n.duration},n.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,n.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new U.VTTCue(o.startTime,o.endTime,o.text):o)}),eZ(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const i=e&&e.type==="vtt",n=t&&t.type==="text";i&&n&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(i=>{const n=i.start+t,s=i.end+t,a=new U.VTTCue(n,s,i.cueText);i.settings&&i.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],c=l[1];a[u]=isNaN(c)?c:Number(c)}),e.cues.push(a)})}parseVTTCues_(e){let t,i=!1;if(typeof U.WebVTT!="function")throw new vZ;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof U.TextDecoder=="function"?t=new U.TextDecoder("utf8"):(t=U.WebVTT.StringDecoder(),i=!0);const n=new U.WebVTT.Parser(U,U.vttjs,t);if(n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=a=>{e.timestampmap=a},n.onparsingerror=a=>{K.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=LO(a)),n.parse(a)}let s=e.bytes;i&&(s=LO(s)),n.parse(s),n.flush()}updateTimeMapping_(e,t,i){const n=e.segment;if(!t)return;if(!e.cues.length){n.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/Ys.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,h=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(h,0),u.endTime=Math.max(h+c,0)}),!i.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-n.duration)}}}handleRollover_(e,t){if(t===null)return e;let i=e*Ys.ONE_SECOND_IN_TS;const n=t*Ys.ONE_SECOND_IN_TS;let s;for(n<i?s=-8589934592:s=8589934592;Math.abs(i-n)>4294967296;)i+=s;return i/Ys.ONE_SECOND_IN_TS}}const _Z=function(r,e){const t=r.cues;for(let i=0;i<t.length;i++){const n=t[i];if(e>=n.adStartTime&&e<=n.adEndTime)return n}return null},bZ=function(r,e,t=0){if(!r.segments)return;let i=t,n;for(let s=0;s<r.segments.length;s++){const a=r.segments[s];if(n||(n=_Z(e,i+a.duration/2)),n){if("cueIn"in a){n.endTime=i,n.adEndTime=i,i+=a.duration,n=null;continue}if(i<n.endTime){i+=a.duration;continue}n.endTime+=a.duration}else if("cueOut"in a&&(n=new U.VTTCue(i,i+a.duration,a.cueOut),n.adStartTime=i,n.adEndTime=i+parseFloat(a.cueOut),e.addCue(n)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);n=new U.VTTCue(i,i+a.duration,""),n.adStartTime=i-o,n.adEndTime=n.adStartTime+l,e.addCue(n)}i+=a.duration}};class qO{constructor({start:e,end:t,segmentIndex:i,partIndex:n=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=i,this.partIndex_=n,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class TZ{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class BO{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:i,segments:n}=e;if(this.isReliable_=this.isReliablePlaylist_(i,n),!!this.isReliable_)return this.updateStorage_(n,i,this.calculateBaseTime_(i,n,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const n of i)if(n.isInRange(e))return n}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,i){const n=new Map;let s=`
`,a=i,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),h=a,f=h+l.duration,p=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),g=new qO({start:h,end:f,appended:p,segmentIndex:u});l.syncInfo=g;let v=a;const b=(l.parts||[]).map((E,x)=>{const D=v,O=v+E.duration,P=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[x]&&c.partsSyncInfo[x].isAppended),R=new qO({start:D,end:O,appended:P,segmentIndex:u,partIndex:x});return v=O,s+=`Media Sequence: ${o}.${x} | Range: ${D} --> ${O} | Appended: ${P}
`,E.syncInfo=R,R});n.set(o,new TZ(g,b)),s+=`${IO(l.resolvedUri)} | Media Sequence: ${o} | Range: ${h} --> ${f} | Appended: ${p}
`,o++,a=f}),this.end_=a,this.storage_=n,this.diagnostics_=s}calculateBaseTime_(e,t,i){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const n=Math.min(...this.storage_.keys());if(e<n){const s=n-e;let a=this.storage_.get(n).segmentSyncInfo.start;for(let o=0;o<s;o++){const l=t[o];a-=l.duration}return a}return i}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class UO extends BO{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,i){if(!this.storage_.size){const n=this.parent_.getSyncInfoForMediaSequence(e);return n?n.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,i)}}const SZ=86400,Vm=[{name:"VOD",run:(r,e,t,i,n)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(r,e,t,i,n,s)=>{const a=r.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(n);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(r,e,t,i,n)=>{if(!Object.keys(r.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=Dm(e);n=n||0;for(let l=0;l<o.length;l++){const u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,f=r.timelineToDatetimeMappings[h.timeline];if(!f||!h.dateTimeObject)continue;let g=h.dateTimeObject.getTime()/1e3+f;if(h.parts&&typeof c.partIndex=="number")for(let b=0;b<c.partIndex;b++)g+=h.parts[b].duration;const v=Math.abs(n-g);if(a!==null&&(v===0||a<v))break;a=v,s={time:g,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(r,e,t,i,n)=>{let s=null,a=null;n=n||0;const o=Dm(e);for(let l=0;l<o.length;l++){const u=e.endList||n===0?l:o.length-(l+1),c=o[u],h=c.segment,f=c.part&&c.part.start||h&&h.start;if(h.timeline===i&&typeof f<"u"){const p=Math.abs(n-f);if(a!==null&&a<p)break;(!s||a===null||a>=p)&&(a=p,s={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(r,e,t,i,n)=>{let s=null;if(n=n||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=r.discontinuities[u];if(c){const h=Math.abs(n-c.time);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(r,e,t,i,n)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class xZ extends K.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new BO,i=new UO(t),n=new UO(t);this.mediaSequenceStorage_={main:t,audio:i,vtt:n},this.logger_=Ci("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,i,n,s){if(t!==1/0)return Vm.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,i,n,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:h}=l;if(c<0)continue;const f=e.segments[c],p=h,g=p+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${n}. selected segment: ${c}. Time: [${p} -> ${g}]}`),n>=p&&n<g)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:n})}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;const n=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return n.segmentIndex>0&&(n.time*=-1),Math.abs(n.time+ru({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:n.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,n,s){const a=[];for(let o=0;o<Vm.length;o++){const l=Vm[o],u=l.run(this,e,t,i,n,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let i=e[0].syncPoint,n=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<n&&(n=o,i=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>SZ){K.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let n=i-1;n>=0;n--){const s=e.segments[n];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+n,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),n=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:n.start}));const s=n.dateTimeObject;n.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[n.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const n=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!n.start||o<n.start)&&(n.start=o),n.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let n=0;n<t.discontinuityStarts.length;n++){const s=t.discontinuityStarts[n],a=t.discontinuitySequence+n+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=i.start-ru({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=i.end+ru({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class wZ extends K.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){if(typeof t=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e];const n={timelineChangeInfo:{from:t,to:i}};this.trigger({type:"timelinechange",metadata:n})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const EZ=fO(pO(function(){var r=(function(){function v(){this.listeners={}}var b=v.prototype;return b.on=function(x,D){this.listeners[x]||(this.listeners[x]=[]),this.listeners[x].push(D)},b.off=function(x,D){if(!this.listeners[x])return!1;var O=this.listeners[x].indexOf(D);return this.listeners[x]=this.listeners[x].slice(0),this.listeners[x].splice(O,1),O>-1},b.trigger=function(x){var D=this.listeners[x];if(D)if(arguments.length===2)for(var O=D.length,P=0;P<O;++P)D[P].call(this,arguments[1]);else for(var R=Array.prototype.slice.call(arguments,1),A=D.length,I=0;I<A;++I)D[I].apply(this,R)},b.dispose=function(){this.listeners={}},b.pipe=function(x){this.on("data",function(D){x.push(D)})},v})();function e(v){return v.subarray(0,v.byteLength-v[v.byteLength-1])}const t=function(){const v=[[[],[],[],[],[]],[[],[],[],[],[]]],b=v[0],E=v[1],x=b[4],D=E[4];let O,P,R;const A=[],I=[];let S,C,$,F,j,z;for(O=0;O<256;O++)I[(A[O]=O<<1^(O>>7)*283)^O]=O;for(P=R=0;!x[P];P^=S||1,R=I[R]||1)for(F=R^R<<1^R<<2^R<<3^R<<4,F=F>>8^F&255^99,x[P]=F,D[F]=P,$=A[C=A[S=A[P]]],z=$*16843009^C*65537^S*257^P*16843008,j=A[F]*257^F*16843008,O=0;O<4;O++)b[O][P]=j=j<<24^j>>>8,E[O][F]=z=z<<24^z>>>8;for(O=0;O<5;O++)b[O]=b[O].slice(0),E[O]=E[O].slice(0);return v};let i=null;class n{constructor(b){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let E,x,D;const O=this._tables[0][4],P=this._tables[1],R=b.length;let A=1;if(R!==4&&R!==6&&R!==8)throw new Error("Invalid aes key size");const I=b.slice(0),S=[];for(this._key=[I,S],E=R;E<4*R+28;E++)D=I[E-1],(E%R===0||R===8&&E%R===4)&&(D=O[D>>>24]<<24^O[D>>16&255]<<16^O[D>>8&255]<<8^O[D&255],E%R===0&&(D=D<<8^D>>>24^A<<24,A=A<<1^(A>>7)*283)),I[E]=I[E-R]^D;for(x=0;E;x++,E--)D=I[x&3?E:E-4],E<=4||x<4?S[x]=D:S[x]=P[0][O[D>>>24]]^P[1][O[D>>16&255]]^P[2][O[D>>8&255]]^P[3][O[D&255]]}decrypt(b,E,x,D,O,P){const R=this._key[1];let A=b^R[0],I=D^R[1],S=x^R[2],C=E^R[3],$,F,j;const z=R.length/4-2;let J,Z=4;const W=this._tables[1],Y=W[0],X=W[1],ie=W[2],Q=W[3],he=W[4];for(J=0;J<z;J++)$=Y[A>>>24]^X[I>>16&255]^ie[S>>8&255]^Q[C&255]^R[Z],F=Y[I>>>24]^X[S>>16&255]^ie[C>>8&255]^Q[A&255]^R[Z+1],j=Y[S>>>24]^X[C>>16&255]^ie[A>>8&255]^Q[I&255]^R[Z+2],C=Y[C>>>24]^X[A>>16&255]^ie[I>>8&255]^Q[S&255]^R[Z+3],Z+=4,A=$,I=F,S=j;for(J=0;J<4;J++)O[(3&-J)+P]=he[A>>>24]<<24^he[I>>16&255]<<16^he[S>>8&255]<<8^he[C&255]^R[Z++],$=A,A=I,I=S,S=C,C=$}}class s extends r{constructor(){super(r),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(b){this.jobs.push(b),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(v){return v<<24|(v&65280)<<8|(v&16711680)>>8|v>>>24},o=function(v,b,E){const x=new Int32Array(v.buffer,v.byteOffset,v.byteLength>>2),D=new n(Array.prototype.slice.call(b)),O=new Uint8Array(v.byteLength),P=new Int32Array(O.buffer);let R,A,I,S,C,$,F,j,z;for(R=E[0],A=E[1],I=E[2],S=E[3],z=0;z<x.length;z+=4)C=a(x[z]),$=a(x[z+1]),F=a(x[z+2]),j=a(x[z+3]),D.decrypt(C,$,F,j,P,z),P[z]=a(P[z]^R),P[z+1]=a(P[z+1]^A),P[z+2]=a(P[z+2]^I),P[z+3]=a(P[z+3]^S),R=C,A=$,I=F,S=j;return O};class l{constructor(b,E,x,D){const O=l.STEP,P=new Int32Array(b.buffer),R=new Uint8Array(b.byteLength);let A=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(P.subarray(A,A+O),E,x,R)),A=O;A<P.length;A+=O)x=new Uint32Array([a(P[A-4]),a(P[A-3]),a(P[A-2]),a(P[A-1])]),this.asyncStream_.push(this.decryptChunk_(P.subarray(A,A+O),E,x,R));this.asyncStream_.push(function(){D(null,e(R))})}static get STEP(){return 32e3}decryptChunk_(b,E,x,D){return function(){const O=o(b,E,x);D.set(O,b.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var h=c,f=function(b){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(b):b&&b.buffer instanceof ArrayBuffer},p=h.BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000"),(function(){var v=new Uint16Array([65484]),b=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);return b[0]===255?"big":b[0]===204?"little":"unknown"})();const g=function(v){const b={};return Object.keys(v).forEach(E=>{const x=v[E];f(x)?b[E]={bytes:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength}:b[E]=x}),b};self.onmessage=function(v){const b=v.data,E=new Uint8Array(b.encrypted.bytes,b.encrypted.byteOffset,b.encrypted.byteLength),x=new Uint32Array(b.key.bytes,b.key.byteOffset,b.key.byteLength/4),D=new Uint32Array(b.iv.bytes,b.iv.byteOffset,b.iv.byteLength/4);new l(E,x,D,function(O,P){self.postMessage(g({source:b.source,decrypted:P}),[P.buffer])})}}));var CZ=dO(EZ);const DZ=r=>{let e=r.default?"main":"alternative";return r.characteristics&&r.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},jO=(r,e)=>{r.abort(),r.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Gm=(r,e)=>{e.activePlaylistLoader=r,r.load()},IZ=(r,e)=>()=>{const{segmentLoaders:{[r]:t,main:i},mediaTypes:{[r]:n}}=e,s=n.activeTrack(),a=n.getActiveGroup(),o=n.activePlaylistLoader,l=n.lastGroup_;if(!(a&&l&&a.id===l.id)&&(n.lastGroup_=a,n.lastTrack_=s,jO(t,n),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),Gm(a.playlistLoader,n)}},AZ=(r,e)=>()=>{const{segmentLoaders:{[r]:t},mediaTypes:{[r]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},OZ=(r,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[r]:i,main:n},mediaTypes:{[r]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,jO(i,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,h=c.selectPlaylist();if(c.media()===h)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),n.resetEverything(),c.fastQualityChange_(h);return}if(r==="AUDIO"){if(!o.playlistLoader){n.setAudio(!0),n.resetEverything();return}i.setAudio(!0),n.setAudio(!1)}if(l===o.playlistLoader){Gm(o.playlistLoader,s);return}i.track&&i.track(a),i.resetEverything(),Gm(o.playlistLoader,s)}},Gh={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:t},excludePlaylist:i}=e,n=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(n===o){i({error:{message:"Problem encountered loading the default audio track."}});return}K.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:t}}=e;K.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}},HO={AUDIO:(r,e,t)=>{if(!e)return;const{tech:i,requestOptions:n,segmentLoaders:{[r]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,n),(!i.paused()||a.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),i.paused()||s.load()}),e.on("error",Gh[r](r,t))},SUBTITLES:(r,e,t)=>{const{tech:i,requestOptions:n,segmentLoaders:{[r]:s},mediaTypes:{[r]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,n),s.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),n),i.paused()||s.load()}),e.on("error",Gh[r](r,t))}},PZ={AUDIO:(r,e)=>{const{vhs:t,sourceType:i,segmentLoaders:{[r]:n},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[r]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,h=iu(c.main);(!a[r]||Object.keys(a[r]).length===0)&&(a[r]={main:{default:{default:!0}}},h&&(a[r].main.default.playlists=c.main.playlists));for(const f in a[r]){o[f]||(o[f]=[]);for(const p in a[r][f]){let g=a[r][f][p],v;if(h?(u(`AUDIO group '${f}' label '${p}' is a main playlist`),g.isMainPlaylist=!0,v=null):i==="vhs-json"&&g.playlists?v=new Co(g.playlists[0],t,s):g.resolvedUri?v=new Co(g.resolvedUri,t,s):g.playlists&&i==="dash"?v=new Nm(g.playlists[0],t,s,c):v=null,g=rt({id:p,playlistLoader:v},g),HO[r](r,g.playlistLoader,e),o[f].push(g),typeof l[p]>"u"){const b=new K.AudioTrack({id:p,kind:DZ(g),enabled:!1,language:g.language,default:g.default,label:p});l[p]=b}}}n.on("error",Gh[r](r,e))},SUBTITLES:(r,e)=>{const{tech:t,vhs:i,sourceType:n,segmentLoaders:{[r]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[r]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const h in o[r]){l[h]||(l[h]=[]);for(const f in o[r][h]){if(!i.options_.useForcedSubtitles&&o[r][h][f].forced)continue;let p=o[r][h][f],g;if(n==="hls")g=new Co(p.resolvedUri,i,a);else if(n==="dash"){if(!p.playlists.filter(b=>b.excludeUntil!==1/0).length)return;g=new Nm(p.playlists[0],i,a,c)}else n==="vhs-json"&&(g=new Co(p.playlists?p.playlists[0]:p.resolvedUri,i,a));if(p=rt({id:f,playlistLoader:g},p),HO[r](r,p.playlistLoader,e),l[h].push(p),typeof u[f]>"u"){const v=t.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;u[f]=v}}}s.on("error",Gh[r](r,e))},"CLOSED-CAPTIONS":(r,e)=>{const{tech:t,main:{mediaGroups:i},mediaTypes:{[r]:{groups:n,tracks:s}}}=e;for(const a in i[r]){n[a]||(n[a]=[]);for(const o in i[r][a]){const l=i[r][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=rt(c,u[c.instreamId])),c.default===void 0&&delete c.default,n[a].push(rt({id:o},l)),typeof s[o]>"u"){const h=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=h}}}}},VO=(r,e)=>{for(let t=0;t<r.length;t++)if(Om(e,r[t])||r[t].playlists&&VO(r[t].playlists,e))return!0;return!1},RZ=(r,e)=>t=>{const{mainPlaylistLoader:i,mediaTypes:{[r]:{groups:n}}}=e,s=i.media();if(!s)return null;let a=null;s.attributes[r]&&(a=n[s.attributes[r]]);const o=Object.keys(n);if(!a)if(r==="AUDIO"&&o.length>1&&iu(e.main))for(let l=0;l<o.length;l++){const u=n[o[l]];if(VO(u,s)){a=u;break}}else n.main?a=n.main:o.length===1&&(a=n[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},kZ={AUDIO:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(r,e)=>()=>{const{mediaTypes:{[r]:{tracks:t}}}=e;for(const i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},MZ=(r,{mediaTypes:e})=>()=>{const t=e[r].activeTrack();return t?e[r].activeGroup(t):null},$Z=r=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{PZ[u](u,r)});const{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:n,segmentLoaders:{["AUDIO"]:s,main:a}}=r;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=RZ(u,r),e[u].activeTrack=kZ[u](u,r),e[u].onGroupChanged=IZ(u,r),e[u].onGroupChanging=AZ(u,r),e[u].onTrackChanged=OZ(u,r),e[u].getActiveGroup=MZ(u,r)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),n.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},NZ=()=>{const r={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{r[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Hn,activeTrack:Hn,getActiveGroup:Hn,onGroupChanged:Hn,onTrackChanged:Hn,lastTrack_:null,logger_:Ci(`MediaGroups[${e}]`)}}),r};class GO{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=Kr(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class LZ extends K.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new GO,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Ci("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const i=t.serverUri||t.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=Kr(e,i),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const i=e?t:this.getRequestURI(t);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const n={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:n}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:n});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:K.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:n.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new U.URL(e),i=new U.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const t=JSON.parse(U.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new U.URL(e),i=this.getPathway(),n=this.getBandwidth_();if(i){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,i)}if(n){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,n)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(n=>{for(const s of n)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=n=>this.excludedSteeringManifestURLs.has(n);if(this.proxyServerUrl_){const n=this.setProxyServerUrl_(e);if(!t(n))return n}const i=this.setSteeringParams_(e);return t(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=U.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){U.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new GO}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(Kr(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const FZ=(r,e)=>{let t=null;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{r.apply(null,i)},e)}},qZ=10;let xs;const BZ=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],UZ=function(r){return this.audioSegmentLoader_[r]+this.mainSegmentLoader_[r]},jZ=function({currentPlaylist:r,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!i)return K.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${r&&r.id||"null"} -> ${i.id}`;if(!r)return l(`${u} as current playlist is not set`),!0;if(i.id===r.id)return!1;const c=!!xo(e,t).length;if(!r.endList)return!c&&typeof r.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const h=Em(e,t),f=o?lr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:lr.MAX_BUFFER_LOW_WATER_LINE;if(a<f)return l(`${u} as duration < max low water line (${a} < ${f})`),!0;const p=i.attributes.BANDWIDTH,g=r.attributes.BANDWIDTH;if(p<g&&(!o||h<s)){let v=`${u} as next bandwidth < current bandwidth (${p} < ${g})`;return o&&(v+=` and forwardBuffer < bufferHighWaterLine (${h} < ${s})`),l(v),!0}if((!o||p>g)&&h>=n){let v=`${u} as forwardBuffer >= bufferLowWaterLine (${h} >= ${n})`;return o&&(v+=` and next bandwidth > current bandwidth (${p} > ${g})`),l(v),!0}return l(`not ${u} as no switching criteria met`),!1};class HZ extends K.EventTarget{constructor(e){super(),this.fastQualityChange_=FZ(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:i,tech:n,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:h,bufferBasedABR:f,leastPixelDiffSelector:p,captionServices:g,experimentalUseMMS:v}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:b}=e;(b===null||typeof b>"u")&&(b=1/0),xs=a,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!p,this.withCredentials=i,this.tech_=n,this.vhs_=n.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=b,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:b,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=NZ(),v&&U.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new U.ManagedMediaSource,this.usingManagedMediaSource_=!0,K.log("Using ManagedMediaSource")):U.MediaSource&&(this.mediaSource=new U.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=or(),this.hasPlayed_=!1,this.syncController_=new xZ(e),this.segmentMetadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new CZ,this.sourceUpdater_=new NO(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new wZ,this.keyStatusMap_=new Map;const E={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:g,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Nm(t,this.vhs_,rt(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new Co(t,this.vhs_,rt(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new jm(rt(E,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new jm(rt(E,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new yZ(rt(E,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((O,P)=>{function R(){n.off("vttjserror",A),O()}function A(){n.off("vttjsloaded",R),P()}n.one("vttjsloaded",R),n.one("vttjserror",A),n.addWebVttScript_()})}),e);const x=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new LZ(this.vhs_.xhr,x),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),BZ.forEach(O=>{this[O+"_"]=UZ.bind(this,O)}),this.logger_=Ci("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const D=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(D,()=>{const O=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-O,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const n=this.media(),s=n&&(n.id||n.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],i=t?t.activeGroup():null,n=this.contentSteeringController_.getPathway();if(i&&n){const a=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===n);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=U.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(U.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,n=Object.keys(i);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=i.main||n.length&&i[n[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in i)if(i[o][s.label]){const l=i[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;Am(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),$Z({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;Am(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,i=>{this.player_.trigger(Ut({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let n=!0;const s=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const o in i.AUDIO[a])i.AUDIO[a][o].uri||(n=!1);n&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),xs.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(i.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),n=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return jZ({buffered:a,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:n,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const n=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(n)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:qZ}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,n=>{this.player_.trigger(Ut({},n))}),this.audioSegmentLoader_.on(i,n=>{this.player_.trigger(Ut({},n))}),this.subtitleSegmentLoader_.on(i,n=>{this.player_.trigger(Ut({},n))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const i=t.end(0);let n=i;if(e.start){const s=e.start.timeOffset;s<0?n=Math.max(i+s,t.start(0)):n=Math.min(i,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(n)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const n=xs.Playlist.playlistEnd(e,i),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return n-s<=bn;const o=a.end(a.length-1);return o-s<=bn&&n-o<=bn}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const n=this.mainPlaylistLoader_.main.playlists,s=n.filter(Uh),a=s.length===1&&s[0]===e;if(n.length===1&&i!==1/0)return K.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const g=this.pathwayAttribute_(e),v=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(g),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(g)},v);return}let p=!1;n.forEach(g=>{if(g===e)return;const v=g.excludeUntil;typeof v<"u"&&v!==1/0&&(p=!0,delete g.excludeUntil)}),p&&(K.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:K.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const h=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=h;return this.switchMedia_(l,"exclude",a||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],n=e==="all";(n||e==="main")&&i.push(this.mainPlaylistLoader_);const s=[];(n||e==="audio")&&s.push("AUDIO"),(n||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=xo(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:xs.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const i=e.media();if(!i)return null;const n=this.syncController_.getMediaSequenceSync(t);if(n&&n.isReliable){const o=n.start,l=n.end;if(!isFinite(o)||!isFinite(l))return null;const u=xs.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),c=Math.max(o,l-u);return or([[o,c]])}const s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return null;const a=xs.Playlist.seekable(i,s,xs.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return a.length?a:null}computeFinalSeekable_(e,t){if(!t)return e;const i=e.start(0),n=e.end(0),s=t.start(0),a=t.end(0);return s>n||i>a?e:or([[Math.max(i,s),Math.min(n,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${MA(this.seekable_)}]`);const n={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:n}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}const t=this.tech_.buffered();let i=xs.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach(n=>{n.playlistLoader&&n.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=su(this.main(),t),n={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(n.video=i.video||e.main.videoCodec||Lz),e.main.isMuxed&&(n.video+=`,${i.audio||e.main.audioCodec||cD}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(n.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||cD,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!n.audio&&!n.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?Ll(c,this.usingManagedMediaSource_):mp(c),o={};let l;if(["video","audio"].forEach(function(u){if(n.hasOwnProperty(u)&&!a(e[u].isFmp4,n[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(n[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${n.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,h)=>(c&&(c+=", "),c+=`${h} does not support codec(s): "${o[h].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const h=(fn(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(fn(n[c]||"")[0]||{}).type;h&&f&&h.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${n[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return n}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{const n=e[i];if(t.indexOf(n.id)!==-1)return;t.push(n.id);const s=su(this.main,n),a=[];s.audio&&!mp(s.audio)&&!Ll(s.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${s.audio}`),s.video&&!mp(s.video)&&!Ll(s.video,this.usingManagedMediaSource_)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(n.excludeUntil=1/0,this.logger_(`excluding ${n.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,n=nu(fn(e)),s=ZA(n),a=n.video&&fn(n.video)[0]||null,o=n.audio&&fn(n.audio)[0]||null;Object.keys(i).forEach(l=>{const u=i[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],h=su(this.mainPlaylistLoader_.main,u),f=ZA(h);if(!(!h.audio&&!h.video)){if(f!==s&&c.push(`codec count "${f}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const p=h.video&&fn(h.video)[0]||null,g=h.audio&&fn(h.audio)[0]||null;p&&a&&p.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${p.type}" !== "${a.type}"`),g&&o&&g.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${g.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),bZ(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=lr.GOAL_BUFFER_LENGTH,i=lr.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,lr.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=lr.BUFFER_LOW_WATER_LINE,i=lr.BUFFER_LOW_WATER_LINE_RATE,n=Math.max(t,lr.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,lr.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?s:n)}bufferHighWaterLine(){return lr.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){AO(this.inbandTextTracks_,"com.apple.streaming",this.tech_),JQ({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){const n=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();AO(this.inbandTextTracks_,e,this.tech_),XQ({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:n,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,i=>{this.trigger(Ut({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,n=new Set;let s=!1;Object.keys(i).forEach(a=>{const o=i[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const h=!o.excludeUntil&&o.excludeUntil!==1/0;!n.has(o.id)&&u&&h&&(n.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,n=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||n&&n.size){for(const[a,o]of i.entries())n.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of n.entries()){const l=i.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...n])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,n=t["URI-REPLACEMENT"].PARAMS;for(const s in i)if(i[s]!==n[s])return!1;for(const s in n)if(i[s]!==n[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const n=this.mainPlaylistLoader_.getKeyIdSet(i);!n||!n.size||n.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=i.lastExcludeReason_===t&&i.excludeUntil===1/0;o?o&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${s} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==t&&(i.excludeUntil=1/0,i.lastExcludeReason_=t,this.logger_(`excluding playlist ${i.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const n=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,s=i.excludeUntil===1/0&&i.lastExcludeReason_===t;n&&s&&(delete i.excludeUntil,K.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:gZ(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const VZ=(r,e,t)=>i=>{const n=r.main.playlists[e],s=Im(n),a=Uh(n);if(typeof i>"u")return a;i?delete n.disabled:n.disabled=!0;const o={renditionInfo:{id:e,bandwidth:n.attributes.BANDWIDTH,resolution:n.attributes.RESOLUTION,codecs:n.attributes.CODECS},cause:"fast-quality"};return i!==a&&!s&&(i?(t(n),r.trigger({type:"renditionenabled",metadata:o})):r.trigger({type:"renditiondisabled",metadata:o})),i};class GZ{constructor(e,t,i){const{playlistController_:n}=e,s=n.fastQualityChange_.bind(n);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=su(n.main(),t),this.playlist=t,this.id=i,this.enabled=VZ(e.playlists,t.id,s)}}const WZ=function(r){r.representations=()=>{const e=r.playlistController_.main(),t=iu(e)?r.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!Im(i)).map((i,n)=>new GZ(r,i,i.id)):[]}},WO=["seeking","seeked","pause","playing","error"];class zZ extends K.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ci("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),n=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(h=>{a[`${h}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",n),this.tech_.on(WO,s),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",n),this.tech_.off(WO,s),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&U.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&U.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=U.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t[`${e}SegmentLoader_`],n=i.buffered_(),s=$X(this[`${e}Buffered_`],n);if(this[`${e}Buffered_`]=n,s){const a={bufferedRanges:n};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:ra(n)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+bn>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(or([this.lastRecordedTime,e]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),i=this.tech_.currentTime(),n=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(n&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){const g=t.start(0);s=g+(g===t.end(0)?0:bn)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${MA(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),h=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-_n)*2,f=[l,u];for(let g=0;g<f.length;g++){if(!f[g])continue;if(Em(f[g],i)<h)return!1}const p=Bh(o,i);return p.length===0?!1:(s=p.start(0)+bn,this.logger_(`Buffered region starts (${p.start(0)})  just beyond seek point (${i}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=xo(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,n=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=Bh(n,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,n=!1){if(!e.length)return!1;let s=e.end(e.length-1)+bn;const a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||n)&&(s=e.end(e.length-1)+i.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let n;if(e.length&&t.length){const s=xo(e,i-3),a=xo(e,i),o=xo(t,i);o.length&&!a.length&&s.length&&(n={start:s.end(0),end:o.end(0)})}else Bh(e,i).length||(n=this.gapFromVideoUnderflow_(e,i));return n?(this.logger_(`Encountered a gap in video from ${n.start} to ${n.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),n=Bh(t,i);if(this.resetTimeUpdate_(),n.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",n.start(0)),this.tech_.setCurrentTime(n.start(0)+_n);const s={gapInfo:{from:i,to:n.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const i=RX(e);for(let n=0;n<i.length;n++){const s=i.start(n),a=i.end(n);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}}const YZ={errorInterval:30,getSource(r){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return r(t)}},zO=function(r,e){let t=0,i=0;const n=rt(YZ,e);r.ready(()=>{r.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){i&&r.currentTime(i)},a=function(c){c!=null&&(i=r.duration()!==1/0&&r.currentTime()||0,r.one("loadedmetadata",s),r.src(c),r.trigger({type:"usage",name:"vhs-error-reload"}),r.play())},o=function(){if(Date.now()-t<n.errorInterval*1e3){r.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){K.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),n.getSource.call(r,a)},l=function(){r.off("loadedmetadata",s),r.off("error",o),r.off("dispose",l)},u=function(c){l(),zO(r,c)};r.on("error",o),r.on("dispose",l),r.reloadSourceOnError=u},KZ=function(r){zO(this,r)};var YO="3.17.2",XZ="7.1.0",QZ="1.3.1",ZZ="7.2.0",JZ="4.0.2";const Mt={PlaylistLoader:Co,Playlist:Xr,utils:sQ,STANDARD_PLAYLIST_SELECTOR:DO,INITIAL_PLAYLIST_SELECTOR:GQ,lastBandwidthSelector:DO,movingAverageBandwidthSelector:HQ,comparePlaylistBandwidth:Bm,comparePlaylistResolution:jQ,xhr:iO()};Object.keys(lr).forEach(r=>{Object.defineProperty(Mt,r,{get(){return K.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),lr[r]},set(e){if(K.log.warn(`using Vhs.${r} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){K.log.warn(`value of Vhs.${r} must be greater than or equal to 0`);return}lr[r]=e}})});const KO="videojs-vhs",XO=function(r,e){const t=e.media();let i=-1;for(let n=0;n<r.length;n++)if(r[n].id===t.id){i=n;break}r.selectedIndex_=i,r.trigger({selectedIndex:i,type:"change"})},eJ=function(r,e){e.representations().forEach(t=>{r.addQualityLevel(t)}),XO(r,e.playlists)};Mt.canPlaySource=function(){return K.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const tJ=(r,e,t)=>{if(!r)return r;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=nu(fn(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);const n=eo(i.video),s=eo(i.audio),a={};for(const o in r)a[o]={},s&&(a[o].audioContentType=s),n&&(a[o].videoContentType=n),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof r[o]=="string"&&(a[o].url=r[o]);return rt(r,a)},rJ=(r,e)=>r.reduce((t,i)=>{if(!i.contentProtection)return t;const n=e.reduce((s,a)=>{const o=i.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(n).length&&t.push(n),t},[]),iJ=({player:r,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!r.eme.initializeMediaKeys)return Promise.resolve();const n=t?i.concat([t]):i,s=rJ(n,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{r.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{r.eme.initializeMediaKeys({keySystems:l},h=>{if(h){c(h);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},nJ=({player:r,sourceKeySystems:e,media:t,audioMedia:i})=>{const n=tJ(e,t,i);return n?(r.currentSource().keySystems=n,n&&!r.eme?(K.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},QO=()=>{if(!U.localStorage)return null;const r=U.localStorage.getItem(KO);if(!r)return null;try{return JSON.parse(r)}catch{return null}},sJ=r=>{if(!U.localStorage)return!1;let e=QO();e=e?rt(e,r):r;try{U.localStorage.setItem(KO,JSON.stringify(e))}catch{return!1}return e},aJ=r=>r.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(r.substring(r.indexOf(",")+1)):r,ZO=(r,e)=>{r._requestCallbackSet||(r._requestCallbackSet=new Set),r._requestCallbackSet.add(e)},JO=(r,e)=>{r._responseCallbackSet||(r._responseCallbackSet=new Set),r._responseCallbackSet.add(e)},eP=(r,e)=>{r._requestCallbackSet&&(r._requestCallbackSet.delete(e),r._requestCallbackSet.size||delete r._requestCallbackSet)},tP=(r,e)=>{r._responseCallbackSet&&(r._responseCallbackSet.delete(e),r._responseCallbackSet.size||delete r._responseCallbackSet)};Mt.supportsNativeHls=(function(){if(!oe||!oe.createElement)return!1;const r=oe.createElement("video");return K.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(r.canPlayType(t))}):!1})(),Mt.supportsNativeDash=(function(){return!oe||!oe.createElement||!K.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(oe.createElement("video").canPlayType("application/dash+xml"))})(),Mt.supportsTypeNatively=r=>r==="hls"?Mt.supportsNativeHls:r==="dash"?Mt.supportsNativeDash:!1,Mt.isSupported=function(){return K.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},Mt.xhr.onRequest=function(r){ZO(Mt.xhr,r)},Mt.xhr.onResponse=function(r){JO(Mt.xhr,r)},Mt.xhr.offRequest=function(r){eP(Mt.xhr,r)},Mt.xhr.offResponse=function(r){tP(Mt.xhr,r)};const oJ=K.getComponent("Component");class rP extends oJ{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=Ci("VhsHandler"),t.options_&&t.options_.playerId){const n=K.getPlayer(t.options_.playerId);this.player_=n}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(oe,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],n=>{const s=oe.fullscreenElement||oe.webkitFullscreenElement||oe.mozFullScreenElement||oe.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=rt(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=QO();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=lr.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===lr.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=aJ(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Mt,this.options_.sourceType=hD(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new HZ(this.options_);const i=rt({liveRangeSafeTimeDelta:bn},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new zZ(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=K.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const n=this.options_.bufferBasedABR?Mt.movingAverageBandwidthSelector(.55):Mt.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):n.bind(this),this.playlistController_.selectInitialPlaylist=Mt.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=U.navigator.connection||U.navigator.mozConnection||U.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){K.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ra(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ra(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&sJ({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{WZ(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=U.URL.createObjectURL(this.playlistController_.mediaSource),(K.browser.IS_ANY_SAFARI||K.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),iJ({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=nJ({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=K.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{eJ(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{XO(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":YO,"mux.js":XZ,"mpd-parser":QZ,"m3u8-parser":ZZ,"aes-decrypter":JZ}}version(){return this.constructor.version()}canChangeType(){return NO.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&U.URL.revokeObjectURL&&(U.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return dQ({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,n=2){return lO({programTime:e,playlist:this.playlistController_.media(),retryCount:n,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{ZO(this.xhr,e)},this.xhr.onResponse=e=>{JO(this.xhr,e)},this.xhr.offRequest=e=>{eP(this.xhr,e)},this.xhr.offResponse=e=>{tP(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,n=>{this.player_.trigger(Ut({},n))})}),t.forEach(i=>{this.playbackWatcher_.on(i,n=>{this.player_.trigger(Ut({},n))})})}}const Wh={name:"videojs-http-streaming",VERSION:YO,canHandleSource(r,e={}){const t=rt(K.options,e);return!t.vhs.experimentalUseMMS&&!Ll("avc1.4d400d,mp4a.40.2",!1)?!1:Wh.canPlayType(r.type,t)},handleSource(r,e,t={}){const i=rt(K.options,t);return e.vhs=new rP(r,e,i),e.vhs.xhr=iO(),e.vhs.setupXhrHooks_(),e.vhs.src(r.src,r.type),e.vhs},canPlayType(r,e){const t=hD(r);if(!t)return"";const i=Wh.getOverrideNative(e);return!Mt.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(r={}){const{vhs:e={}}=r,t=!(K.browser.IS_ANY_SAFARI||K.browser.IS_IOS),{overrideNative:i=t}=e;return i}};Ll("avc1.4d400d,mp4a.40.2",!0)&&K.getTech("Html5").registerSourceHandler(Wh,0),K.VhsHandler=rP,K.VhsSourceHandler=Wh,K.Vhs=Mt,K.use||K.registerComponent("Vhs",Mt),K.options.vhs=K.options.vhs||{},(!K.getPlugin||!K.getPlugin("reloadSourceOnError"))&&K.registerPlugin("reloadSourceOnError",KZ);var iP;function ce(){return iP.apply(null,arguments)}function lJ(r){iP=r}function Ki(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function sa(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function Ye(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Wm(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var e;for(e in r)if(Ye(r,e))return!1;return!0}function Qr(r){return r===void 0}function Vn(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function lu(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function nP(r,e){var t=[],i,n=r.length;for(i=0;i<n;++i)t.push(e(r[i],i));return t}function ws(r,e){for(var t in e)Ye(e,t)&&(r[t]=e[t]);return Ye(e,"toString")&&(r.toString=e.toString),Ye(e,"valueOf")&&(r.valueOf=e.valueOf),r}function xn(r,e,t,i){return PP(r,e,t,i,!0).utc()}function uJ(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Le(r){return r._pf==null&&(r._pf=uJ()),r._pf}var zm;Array.prototype.some?zm=Array.prototype.some:zm=function(r){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&r.call(this,e[i],i,e))return!0;return!1};function Ym(r){var e=null,t=!1,i=r._d&&!isNaN(r._d.getTime());if(i&&(e=Le(r),t=zm.call(e.parsedDateParts,function(n){return n!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),r._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=i;else return i;return r._isValid}function zh(r){var e=xn(NaN);return r!=null?ws(Le(e),r):Le(e).userInvalidated=!0,e}var sP=ce.momentProperties=[],Km=!1;function Xm(r,e){var t,i,n,s=sP.length;if(Qr(e._isAMomentObject)||(r._isAMomentObject=e._isAMomentObject),Qr(e._i)||(r._i=e._i),Qr(e._f)||(r._f=e._f),Qr(e._l)||(r._l=e._l),Qr(e._strict)||(r._strict=e._strict),Qr(e._tzm)||(r._tzm=e._tzm),Qr(e._isUTC)||(r._isUTC=e._isUTC),Qr(e._offset)||(r._offset=e._offset),Qr(e._pf)||(r._pf=Le(e)),Qr(e._locale)||(r._locale=e._locale),s>0)for(t=0;t<s;t++)i=sP[t],n=e[i],Qr(n)||(r[i]=n);return r}function uu(r){Xm(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Km===!1&&(Km=!0,ce.updateOffset(this),Km=!1)}function Xi(r){return r instanceof uu||r!=null&&r._isAMomentObject!=null}function aP(r){ce.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+r)}function Di(r,e){var t=!0;return ws(function(){if(ce.deprecationHandler!=null&&ce.deprecationHandler(null,r),t){var i=[],n,s,a,o=arguments.length;for(s=0;s<o;s++){if(n="",typeof arguments[s]=="object"){n+=`
[`+s+"] ";for(a in arguments[0])Ye(arguments[0],a)&&(n+=a+": "+arguments[0][a]+", ");n=n.slice(0,-2)}else n=arguments[s];i.push(n)}aP(r+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var oP={};function lP(r,e){ce.deprecationHandler!=null&&ce.deprecationHandler(r,e),oP[r]||(aP(e),oP[r]=!0)}ce.suppressDeprecationWarnings=!1,ce.deprecationHandler=null;function wn(r){return typeof Function<"u"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function cJ(r){var e,t;for(t in r)Ye(r,t)&&(e=r[t],wn(e)?this[t]=e:this["_"+t]=e);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Qm(r,e){var t=ws({},r),i;for(i in e)Ye(e,i)&&(sa(r[i])&&sa(e[i])?(t[i]={},ws(t[i],r[i]),ws(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in r)Ye(r,i)&&!Ye(e,i)&&sa(r[i])&&(t[i]=ws({},t[i]));return t}function Zm(r){r!=null&&this.set(r)}var Jm;Object.keys?Jm=Object.keys:Jm=function(r){var e,t=[];for(e in r)Ye(r,e)&&t.push(e);return t};var hJ={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function dJ(r,e,t){var i=this._calendar[r]||this._calendar.sameElse;return wn(i)?i.call(e,t):i}function En(r,e,t){var i=""+Math.abs(r),n=e-i.length,s=r>=0;return(s?t?"+":"":"-")+Math.pow(10,Math.max(0,n)).toString().substr(1)+i}var eg=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Yh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,tg={},Ro={};function xe(r,e,t,i){var n=i;typeof i=="string"&&(n=function(){return this[i]()}),r&&(Ro[r]=n),e&&(Ro[e[0]]=function(){return En(n.apply(this,arguments),e[1],e[2])}),t&&(Ro[t]=function(){return this.localeData().ordinal(n.apply(this,arguments),r)})}function fJ(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function pJ(r){var e=r.match(eg),t,i;for(t=0,i=e.length;t<i;t++)Ro[e[t]]?e[t]=Ro[e[t]]:e[t]=fJ(e[t]);return function(n){var s="",a;for(a=0;a<i;a++)s+=wn(e[a])?e[a].call(n,r):e[a];return s}}function Kh(r,e){return r.isValid()?(e=uP(e,r.localeData()),tg[e]=tg[e]||pJ(e),tg[e](r)):r.localeData().invalidDate()}function uP(r,e){var t=5;function i(n){return e.longDateFormat(n)||n}for(Yh.lastIndex=0;t>=0&&Yh.test(r);)r=r.replace(Yh,i),Yh.lastIndex=0,t-=1;return r}var mJ={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function gJ(r){var e=this._longDateFormat[r],t=this._longDateFormat[r.toUpperCase()];return e||!t?e:(this._longDateFormat[r]=t.match(eg).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[r])}var vJ="Invalid date";function yJ(){return this._invalidDate}var _J="%d",bJ=/\d{1,2}/;function TJ(r){return this._ordinal.replace("%d",r)}var SJ={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function xJ(r,e,t,i){var n=this._relativeTime[t];return wn(n)?n(r,e,t,i):n.replace(/%d/i,r)}function wJ(r,e){var t=this._relativeTime[r>0?"future":"past"];return wn(t)?t(e):t.replace(/%s/i,e)}var cP={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Ii(r){return typeof r=="string"?cP[r]||cP[r.toLowerCase()]:void 0}function rg(r){var e={},t,i;for(i in r)Ye(r,i)&&(t=Ii(i),t&&(e[t]=r[i]));return e}var EJ={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function CJ(r){var e=[],t;for(t in r)Ye(r,t)&&e.push({unit:t,priority:EJ[t]});return e.sort(function(i,n){return i.priority-n.priority}),e}var hP=/\d/,ci=/\d\d/,dP=/\d{3}/,ig=/\d{4}/,Xh=/[+-]?\d{6}/,vt=/\d\d?/,fP=/\d\d\d\d?/,pP=/\d\d\d\d\d\d?/,Qh=/\d{1,3}/,ng=/\d{1,4}/,Zh=/[+-]?\d{1,6}/,ko=/\d+/,Jh=/[+-]?\d+/,DJ=/Z|[+-]\d\d:?\d\d/gi,ed=/Z|[+-]\d\d(?::?\d\d)?/gi,IJ=/[+-]?\d+(\.\d{1,3})?/,cu=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Mo=/^[1-9]\d?/,sg=/^([1-9]\d|\d)/,td;td={};function _e(r,e,t){td[r]=wn(e)?e:function(i,n){return i&&t?t:e}}function AJ(r,e){return Ye(td,r)?td[r](e._strict,e._locale):new RegExp(OJ(r))}function OJ(r){return Gn(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}))}function Gn(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ai(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function Ue(r){var e=+r,t=0;return e!==0&&isFinite(e)&&(t=Ai(e)),t}var ag={};function ot(r,e){var t,i=e,n;for(typeof r=="string"&&(r=[r]),Vn(e)&&(i=function(s,a){a[e]=Ue(s)}),n=r.length,t=0;t<n;t++)ag[r[t]]=i}function hu(r,e){ot(r,function(t,i,n,s){n._w=n._w||{},e(t,n._w,n,s)})}function PJ(r,e,t){e!=null&&Ye(ag,r)&&ag[r](e,t._a,t,r)}function rd(r){return r%4===0&&r%100!==0||r%400===0}var Cr=0,Wn=1,Cn=2,rr=3,Qi=4,zn=5,aa=6,RJ=7,kJ=8;xe("Y",0,0,function(){var r=this.year();return r<=9999?En(r,4):"+"+r}),xe(0,["YY",2],0,function(){return this.year()%100}),xe(0,["YYYY",4],0,"year"),xe(0,["YYYYY",5],0,"year"),xe(0,["YYYYYY",6,!0],0,"year"),_e("Y",Jh),_e("YY",vt,ci),_e("YYYY",ng,ig),_e("YYYYY",Zh,Xh),_e("YYYYYY",Zh,Xh),ot(["YYYYY","YYYYYY"],Cr),ot("YYYY",function(r,e){e[Cr]=r.length===2?ce.parseTwoDigitYear(r):Ue(r)}),ot("YY",function(r,e){e[Cr]=ce.parseTwoDigitYear(r)}),ot("Y",function(r,e){e[Cr]=parseInt(r,10)});function du(r){return rd(r)?366:365}ce.parseTwoDigitYear=function(r){return Ue(r)+(Ue(r)>68?1900:2e3)};var mP=$o("FullYear",!0);function MJ(){return rd(this.year())}function $o(r,e){return function(t){return t!=null?(gP(this,r,t),ce.updateOffset(this,e),this):fu(this,r)}}function fu(r,e){if(!r.isValid())return NaN;var t=r._d,i=r._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function gP(r,e,t){var i,n,s,a,o;if(!(!r.isValid()||isNaN(t))){switch(i=r._d,n=r._isUTC,e){case"Milliseconds":return void(n?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(n?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(n?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(n?i.setUTCHours(t):i.setHours(t));case"Date":return void(n?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}s=t,a=r.month(),o=r.date(),o=o===29&&a===1&&!rd(s)?28:o,n?i.setUTCFullYear(s,a,o):i.setFullYear(s,a,o)}}function $J(r){return r=Ii(r),wn(this[r])?this[r]():this}function NJ(r,e){if(typeof r=="object"){r=rg(r);var t=CJ(r),i,n=t.length;for(i=0;i<n;i++)this[t[i].unit](r[t[i].unit])}else if(r=Ii(r),wn(this[r]))return this[r](e);return this}function LJ(r,e){return(r%e+e)%e}var jt;Array.prototype.indexOf?jt=Array.prototype.indexOf:jt=function(r){var e;for(e=0;e<this.length;++e)if(this[e]===r)return e;return-1};function og(r,e){if(isNaN(r)||isNaN(e))return NaN;var t=LJ(e,12);return r+=(e-t)/12,t===1?rd(r)?29:28:31-t%7%2}xe("M",["MM",2],"Mo",function(){return this.month()+1}),xe("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)}),xe("MMMM",0,0,function(r){return this.localeData().months(this,r)}),_e("M",vt,Mo),_e("MM",vt,ci),_e("MMM",function(r,e){return e.monthsShortRegex(r)}),_e("MMMM",function(r,e){return e.monthsRegex(r)}),ot(["M","MM"],function(r,e){e[Wn]=Ue(r)-1}),ot(["MMM","MMMM"],function(r,e,t,i){var n=t._locale.monthsParse(r,i,t._strict);n!=null?e[Wn]=n:Le(t).invalidMonth=r});var FJ="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),vP="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),yP=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,qJ=cu,BJ=cu;function UJ(r,e){return r?Ki(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||yP).test(e)?"format":"standalone"][r.month()]:Ki(this._months)?this._months:this._months.standalone}function jJ(r,e){return r?Ki(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[yP.test(e)?"format":"standalone"][r.month()]:Ki(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function HJ(r,e,t){var i,n,s,a=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=xn([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return t?e==="MMM"?(n=jt.call(this._shortMonthsParse,a),n!==-1?n:null):(n=jt.call(this._longMonthsParse,a),n!==-1?n:null):e==="MMM"?(n=jt.call(this._shortMonthsParse,a),n!==-1?n:(n=jt.call(this._longMonthsParse,a),n!==-1?n:null)):(n=jt.call(this._longMonthsParse,a),n!==-1?n:(n=jt.call(this._shortMonthsParse,a),n!==-1?n:null))}function VJ(r,e,t){var i,n,s;if(this._monthsParseExact)return HJ.call(this,r,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(n=xn([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(n,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(n,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(s="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(r))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(r))return i;if(!t&&this._monthsParse[i].test(r))return i}}function _P(r,e){if(!r.isValid())return r;if(typeof e=="string"){if(/^\d+$/.test(e))e=Ue(e);else if(e=r.localeData().monthsParse(e),!Vn(e))return r}var t=e,i=r.date();return i=i<29?i:Math.min(i,og(r.year(),t)),r._isUTC?r._d.setUTCMonth(t,i):r._d.setMonth(t,i),r}function bP(r){return r!=null?(_P(this,r),ce.updateOffset(this,!0),this):fu(this,"Month")}function GJ(){return og(this.year(),this.month())}function WJ(r){return this._monthsParseExact?(Ye(this,"_monthsRegex")||TP.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(Ye(this,"_monthsShortRegex")||(this._monthsShortRegex=qJ),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function zJ(r){return this._monthsParseExact?(Ye(this,"_monthsRegex")||TP.call(this),r?this._monthsStrictRegex:this._monthsRegex):(Ye(this,"_monthsRegex")||(this._monthsRegex=BJ),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function TP(){function r(l,u){return u.length-l.length}var e=[],t=[],i=[],n,s,a,o;for(n=0;n<12;n++)s=xn([2e3,n]),a=Gn(this.monthsShort(s,"")),o=Gn(this.months(s,"")),e.push(a),t.push(o),i.push(o),i.push(a);e.sort(r),t.sort(r),i.sort(r),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function YJ(r,e,t,i,n,s,a){var o;return r<100&&r>=0?(o=new Date(r+400,e,t,i,n,s,a),isFinite(o.getFullYear())&&o.setFullYear(r)):o=new Date(r,e,t,i,n,s,a),o}function pu(r){var e,t;return r<100&&r>=0?(t=Array.prototype.slice.call(arguments),t[0]=r+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(r)):e=new Date(Date.UTC.apply(null,arguments)),e}function id(r,e,t){var i=7+e-t,n=(7+pu(r,0,i).getUTCDay()-e)%7;return-n+i-1}function SP(r,e,t,i,n){var s=(7+t-i)%7,a=id(r,i,n),o=1+7*(e-1)+s+a,l,u;return o<=0?(l=r-1,u=du(l)+o):o>du(r)?(l=r+1,u=o-du(r)):(l=r,u=o),{year:l,dayOfYear:u}}function mu(r,e,t){var i=id(r.year(),e,t),n=Math.floor((r.dayOfYear()-i-1)/7)+1,s,a;return n<1?(a=r.year()-1,s=n+Yn(a,e,t)):n>Yn(r.year(),e,t)?(s=n-Yn(r.year(),e,t),a=r.year()+1):(a=r.year(),s=n),{week:s,year:a}}function Yn(r,e,t){var i=id(r,e,t),n=id(r+1,e,t);return(du(r)-i+n)/7}xe("w",["ww",2],"wo","week"),xe("W",["WW",2],"Wo","isoWeek"),_e("w",vt,Mo),_e("ww",vt,ci),_e("W",vt,Mo),_e("WW",vt,ci),hu(["w","ww","W","WW"],function(r,e,t,i){e[i.substr(0,1)]=Ue(r)});function KJ(r){return mu(r,this._week.dow,this._week.doy).week}var XJ={dow:0,doy:6};function QJ(){return this._week.dow}function ZJ(){return this._week.doy}function JJ(r){var e=this.localeData().week(this);return r==null?e:this.add((r-e)*7,"d")}function eee(r){var e=mu(this,1,4).week;return r==null?e:this.add((r-e)*7,"d")}xe("d",0,"do","day"),xe("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)}),xe("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)}),xe("dddd",0,0,function(r){return this.localeData().weekdays(this,r)}),xe("e",0,0,"weekday"),xe("E",0,0,"isoWeekday"),_e("d",vt),_e("e",vt),_e("E",vt),_e("dd",function(r,e){return e.weekdaysMinRegex(r)}),_e("ddd",function(r,e){return e.weekdaysShortRegex(r)}),_e("dddd",function(r,e){return e.weekdaysRegex(r)}),hu(["dd","ddd","dddd"],function(r,e,t,i){var n=t._locale.weekdaysParse(r,i,t._strict);n!=null?e.d=n:Le(t).invalidWeekday=r}),hu(["d","e","E"],function(r,e,t,i){e[i]=Ue(r)});function tee(r,e){return typeof r!="string"?r:isNaN(r)?(r=e.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function ree(r,e){return typeof r=="string"?e.weekdaysParse(r)%7||7:isNaN(r)?null:r}function lg(r,e){return r.slice(e,7).concat(r.slice(0,e))}var iee="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),xP="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),nee="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),see=cu,aee=cu,oee=cu;function lee(r,e){var t=Ki(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return r===!0?lg(t,this._week.dow):r?t[r.day()]:t}function uee(r){return r===!0?lg(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function cee(r){return r===!0?lg(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function hee(r,e,t){var i,n,s,a=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=xn([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return t?e==="dddd"?(n=jt.call(this._weekdaysParse,a),n!==-1?n:null):e==="ddd"?(n=jt.call(this._shortWeekdaysParse,a),n!==-1?n:null):(n=jt.call(this._minWeekdaysParse,a),n!==-1?n:null):e==="dddd"?(n=jt.call(this._weekdaysParse,a),n!==-1||(n=jt.call(this._shortWeekdaysParse,a),n!==-1)?n:(n=jt.call(this._minWeekdaysParse,a),n!==-1?n:null)):e==="ddd"?(n=jt.call(this._shortWeekdaysParse,a),n!==-1||(n=jt.call(this._weekdaysParse,a),n!==-1)?n:(n=jt.call(this._minWeekdaysParse,a),n!==-1?n:null)):(n=jt.call(this._minWeekdaysParse,a),n!==-1||(n=jt.call(this._weekdaysParse,a),n!==-1)?n:(n=jt.call(this._shortWeekdaysParse,a),n!==-1?n:null))}function dee(r,e,t){var i,n,s;if(this._weekdaysParseExact)return hee.call(this,r,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(n=xn([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(n,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(n,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(n,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(r))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(r))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(r))return i;if(!t&&this._weekdaysParse[i].test(r))return i}}function fee(r){if(!this.isValid())return r!=null?this:NaN;var e=fu(this,"Day");return r!=null?(r=tee(r,this.localeData()),this.add(r-e,"d")):e}function pee(r){if(!this.isValid())return r!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return r==null?e:this.add(r-e,"d")}function mee(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var e=ree(r,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function gee(r){return this._weekdaysParseExact?(Ye(this,"_weekdaysRegex")||ug.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(Ye(this,"_weekdaysRegex")||(this._weekdaysRegex=see),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function vee(r){return this._weekdaysParseExact?(Ye(this,"_weekdaysRegex")||ug.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ye(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=aee),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function yee(r){return this._weekdaysParseExact?(Ye(this,"_weekdaysRegex")||ug.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ye(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=oee),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function ug(){function r(c,h){return h.length-c.length}var e=[],t=[],i=[],n=[],s,a,o,l,u;for(s=0;s<7;s++)a=xn([2e3,1]).day(s),o=Gn(this.weekdaysMin(a,"")),l=Gn(this.weekdaysShort(a,"")),u=Gn(this.weekdays(a,"")),e.push(o),t.push(l),i.push(u),n.push(o),n.push(l),n.push(u);e.sort(r),t.sort(r),i.sort(r),n.sort(r),this._weekdaysRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function cg(){return this.hours()%12||12}function _ee(){return this.hours()||24}xe("H",["HH",2],0,"hour"),xe("h",["hh",2],0,cg),xe("k",["kk",2],0,_ee),xe("hmm",0,0,function(){return""+cg.apply(this)+En(this.minutes(),2)}),xe("hmmss",0,0,function(){return""+cg.apply(this)+En(this.minutes(),2)+En(this.seconds(),2)}),xe("Hmm",0,0,function(){return""+this.hours()+En(this.minutes(),2)}),xe("Hmmss",0,0,function(){return""+this.hours()+En(this.minutes(),2)+En(this.seconds(),2)});function wP(r,e){xe(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}wP("a",!0),wP("A",!1);function EP(r,e){return e._meridiemParse}_e("a",EP),_e("A",EP),_e("H",vt,sg),_e("h",vt,Mo),_e("k",vt,Mo),_e("HH",vt,ci),_e("hh",vt,ci),_e("kk",vt,ci),_e("hmm",fP),_e("hmmss",pP),_e("Hmm",fP),_e("Hmmss",pP),ot(["H","HH"],rr),ot(["k","kk"],function(r,e,t){var i=Ue(r);e[rr]=i===24?0:i}),ot(["a","A"],function(r,e,t){t._isPm=t._locale.isPM(r),t._meridiem=r}),ot(["h","hh"],function(r,e,t){e[rr]=Ue(r),Le(t).bigHour=!0}),ot("hmm",function(r,e,t){var i=r.length-2;e[rr]=Ue(r.substr(0,i)),e[Qi]=Ue(r.substr(i)),Le(t).bigHour=!0}),ot("hmmss",function(r,e,t){var i=r.length-4,n=r.length-2;e[rr]=Ue(r.substr(0,i)),e[Qi]=Ue(r.substr(i,2)),e[zn]=Ue(r.substr(n)),Le(t).bigHour=!0}),ot("Hmm",function(r,e,t){var i=r.length-2;e[rr]=Ue(r.substr(0,i)),e[Qi]=Ue(r.substr(i))}),ot("Hmmss",function(r,e,t){var i=r.length-4,n=r.length-2;e[rr]=Ue(r.substr(0,i)),e[Qi]=Ue(r.substr(i,2)),e[zn]=Ue(r.substr(n))});function bee(r){return(r+"").toLowerCase().charAt(0)==="p"}var Tee=/[ap]\.?m?\.?/i,See=$o("Hours",!0);function xee(r,e,t){return r>11?t?"pm":"PM":t?"am":"AM"}var CP={calendar:hJ,longDateFormat:mJ,invalidDate:vJ,ordinal:_J,dayOfMonthOrdinalParse:bJ,relativeTime:SJ,months:FJ,monthsShort:vP,week:XJ,weekdays:iee,weekdaysMin:nee,weekdaysShort:xP,meridiemParse:Tee},Ct={},gu={},vu;function wee(r,e){var t,i=Math.min(r.length,e.length);for(t=0;t<i;t+=1)if(r[t]!==e[t])return t;return i}function DP(r){return r&&r.toLowerCase().replace("_","-")}function Eee(r){for(var e=0,t,i,n,s;e<r.length;){for(s=DP(r[e]).split("-"),t=s.length,i=DP(r[e+1]),i=i?i.split("-"):null;t>0;){if(n=nd(s.slice(0,t).join("-")),n)return n;if(i&&i.length>=t&&wee(s,i)>=t-1)break;t--}e++}return vu}function Cee(r){return!!(r&&r.match("^[^/\\\\]*$"))}function nd(r){var e=null,t;if(Ct[r]===void 0&&typeof module<"u"&&module&&module.exports&&Cee(r))try{e=vu._abbr,t=require,t("./locale/"+r),Es(e)}catch{Ct[r]=null}return Ct[r]}function Es(r,e){var t;return r&&(Qr(e)?t=Kn(r):t=hg(r,e),t?vu=t:typeof console<"u"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),vu._abbr}function hg(r,e){if(e!==null){var t,i=CP;if(e.abbr=r,Ct[r]!=null)lP("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Ct[r]._config;else if(e.parentLocale!=null)if(Ct[e.parentLocale]!=null)i=Ct[e.parentLocale]._config;else if(t=nd(e.parentLocale),t!=null)i=t._config;else return gu[e.parentLocale]||(gu[e.parentLocale]=[]),gu[e.parentLocale].push({name:r,config:e}),null;return Ct[r]=new Zm(Qm(i,e)),gu[r]&&gu[r].forEach(function(n){hg(n.name,n.config)}),Es(r),Ct[r]}else return delete Ct[r],null}function Dee(r,e){if(e!=null){var t,i,n=CP;Ct[r]!=null&&Ct[r].parentLocale!=null?Ct[r].set(Qm(Ct[r]._config,e)):(i=nd(r),i!=null&&(n=i._config),e=Qm(n,e),i==null&&(e.abbr=r),t=new Zm(e),t.parentLocale=Ct[r],Ct[r]=t),Es(r)}else Ct[r]!=null&&(Ct[r].parentLocale!=null?(Ct[r]=Ct[r].parentLocale,r===Es()&&Es(r)):Ct[r]!=null&&delete Ct[r]);return Ct[r]}function Kn(r){var e;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return vu;if(!Ki(r)){if(e=nd(r),e)return e;r=[r]}return Eee(r)}function Iee(){return Jm(Ct)}function dg(r){var e,t=r._a;return t&&Le(r).overflow===-2&&(e=t[Wn]<0||t[Wn]>11?Wn:t[Cn]<1||t[Cn]>og(t[Cr],t[Wn])?Cn:t[rr]<0||t[rr]>24||t[rr]===24&&(t[Qi]!==0||t[zn]!==0||t[aa]!==0)?rr:t[Qi]<0||t[Qi]>59?Qi:t[zn]<0||t[zn]>59?zn:t[aa]<0||t[aa]>999?aa:-1,Le(r)._overflowDayOfYear&&(e<Cr||e>Cn)&&(e=Cn),Le(r)._overflowWeeks&&e===-1&&(e=RJ),Le(r)._overflowWeekday&&e===-1&&(e=kJ),Le(r).overflow=e),r}var Aee=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Oee=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Pee=/Z|[+-]\d\d(?::?\d\d)?/,sd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],fg=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ree=/^\/?Date\((-?\d+)/i,kee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Mee={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function IP(r){var e,t,i=r._i,n=Aee.exec(i)||Oee.exec(i),s,a,o,l,u=sd.length,c=fg.length;if(n){for(Le(r).iso=!0,e=0,t=u;e<t;e++)if(sd[e][1].exec(n[1])){a=sd[e][0],s=sd[e][2]!==!1;break}if(a==null){r._isValid=!1;return}if(n[3]){for(e=0,t=c;e<t;e++)if(fg[e][1].exec(n[3])){o=(n[2]||" ")+fg[e][0];break}if(o==null){r._isValid=!1;return}}if(!s&&o!=null){r._isValid=!1;return}if(n[4])if(Pee.exec(n[4]))l="Z";else{r._isValid=!1;return}r._f=a+(o||"")+(l||""),mg(r)}else r._isValid=!1}function $ee(r,e,t,i,n,s){var a=[Nee(r),vP.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(n,10)];return s&&a.push(parseInt(s,10)),a}function Nee(r){var e=parseInt(r,10);return e<=49?2e3+e:e<=999?1900+e:e}function Lee(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Fee(r,e,t){if(r){var i=xP.indexOf(r),n=new Date(e[0],e[1],e[2]).getDay();if(i!==n)return Le(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function qee(r,e,t){if(r)return Mee[r];if(e)return 0;var i=parseInt(t,10),n=i%100,s=(i-n)/100;return s*60+n}function AP(r){var e=kee.exec(Lee(r._i)),t;if(e){if(t=$ee(e[4],e[3],e[2],e[5],e[6],e[7]),!Fee(e[1],t,r))return;r._a=t,r._tzm=qee(e[8],e[9],e[10]),r._d=pu.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),Le(r).rfc2822=!0}else r._isValid=!1}function Bee(r){var e=Ree.exec(r._i);if(e!==null){r._d=new Date(+e[1]);return}if(IP(r),r._isValid===!1)delete r._isValid;else return;if(AP(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:ce.createFromInputFallback(r)}ce.createFromInputFallback=Di("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function No(r,e,t){return r??e??t}function Uee(r){var e=new Date(ce.now());return r._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function pg(r){var e,t,i=[],n,s,a;if(!r._d){for(n=Uee(r),r._w&&r._a[Cn]==null&&r._a[Wn]==null&&jee(r),r._dayOfYear!=null&&(a=No(r._a[Cr],n[Cr]),(r._dayOfYear>du(a)||r._dayOfYear===0)&&(Le(r)._overflowDayOfYear=!0),t=pu(a,0,r._dayOfYear),r._a[Wn]=t.getUTCMonth(),r._a[Cn]=t.getUTCDate()),e=0;e<3&&r._a[e]==null;++e)r._a[e]=i[e]=n[e];for(;e<7;e++)r._a[e]=i[e]=r._a[e]==null?e===2?1:0:r._a[e];r._a[rr]===24&&r._a[Qi]===0&&r._a[zn]===0&&r._a[aa]===0&&(r._nextDay=!0,r._a[rr]=0),r._d=(r._useUTC?pu:YJ).apply(null,i),s=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[rr]=24),r._w&&typeof r._w.d<"u"&&r._w.d!==s&&(Le(r).weekdayMismatch=!0)}}function jee(r){var e,t,i,n,s,a,o,l,u;e=r._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,a=4,t=No(e.GG,r._a[Cr],mu(yt(),1,4).year),i=No(e.W,1),n=No(e.E,1),(n<1||n>7)&&(l=!0)):(s=r._locale._week.dow,a=r._locale._week.doy,u=mu(yt(),s,a),t=No(e.gg,r._a[Cr],u.year),i=No(e.w,u.week),e.d!=null?(n=e.d,(n<0||n>6)&&(l=!0)):e.e!=null?(n=e.e+s,(e.e<0||e.e>6)&&(l=!0)):n=s),i<1||i>Yn(t,s,a)?Le(r)._overflowWeeks=!0:l!=null?Le(r)._overflowWeekday=!0:(o=SP(t,i,n,s,a),r._a[Cr]=o.year,r._dayOfYear=o.dayOfYear)}ce.ISO_8601=function(){},ce.RFC_2822=function(){};function mg(r){if(r._f===ce.ISO_8601){IP(r);return}if(r._f===ce.RFC_2822){AP(r);return}r._a=[],Le(r).empty=!0;var e=""+r._i,t,i,n,s,a,o=e.length,l=0,u,c;for(n=uP(r._f,r._locale).match(eg)||[],c=n.length,t=0;t<c;t++)s=n[t],i=(e.match(AJ(s,r))||[])[0],i&&(a=e.substr(0,e.indexOf(i)),a.length>0&&Le(r).unusedInput.push(a),e=e.slice(e.indexOf(i)+i.length),l+=i.length),Ro[s]?(i?Le(r).empty=!1:Le(r).unusedTokens.push(s),PJ(s,i,r)):r._strict&&!i&&Le(r).unusedTokens.push(s);Le(r).charsLeftOver=o-l,e.length>0&&Le(r).unusedInput.push(e),r._a[rr]<=12&&Le(r).bigHour===!0&&r._a[rr]>0&&(Le(r).bigHour=void 0),Le(r).parsedDateParts=r._a.slice(0),Le(r).meridiem=r._meridiem,r._a[rr]=Hee(r._locale,r._a[rr],r._meridiem),u=Le(r).era,u!==null&&(r._a[Cr]=r._locale.erasConvertYear(u,r._a[Cr])),pg(r),dg(r)}function Hee(r,e,t){var i;return t==null?e:r.meridiemHour!=null?r.meridiemHour(e,t):(r.isPM!=null&&(i=r.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function Vee(r){var e,t,i,n,s,a,o=!1,l=r._f.length;if(l===0){Le(r).invalidFormat=!0,r._d=new Date(NaN);return}for(n=0;n<l;n++)s=0,a=!1,e=Xm({},r),r._useUTC!=null&&(e._useUTC=r._useUTC),e._f=r._f[n],mg(e),Ym(e)&&(a=!0),s+=Le(e).charsLeftOver,s+=Le(e).unusedTokens.length*10,Le(e).score=s,o?s<i&&(i=s,t=e):(i==null||s<i||a)&&(i=s,t=e,a&&(o=!0));ws(r,t||e)}function Gee(r){if(!r._d){var e=rg(r._i),t=e.day===void 0?e.date:e.day;r._a=nP([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),pg(r)}}function Wee(r){var e=new uu(dg(OP(r)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function OP(r){var e=r._i,t=r._f;return r._locale=r._locale||Kn(r._l),e===null||t===void 0&&e===""?zh({nullInput:!0}):(typeof e=="string"&&(r._i=e=r._locale.preparse(e)),Xi(e)?new uu(dg(e)):(lu(e)?r._d=e:Ki(t)?Vee(r):t?mg(r):zee(r),Ym(r)||(r._d=null),r))}function zee(r){var e=r._i;Qr(e)?r._d=new Date(ce.now()):lu(e)?r._d=new Date(e.valueOf()):typeof e=="string"?Bee(r):Ki(e)?(r._a=nP(e.slice(0),function(t){return parseInt(t,10)}),pg(r)):sa(e)?Gee(r):Vn(e)?r._d=new Date(e):ce.createFromInputFallback(r)}function PP(r,e,t,i,n){var s={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(sa(r)&&Wm(r)||Ki(r)&&r.length===0)&&(r=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=n,s._l=t,s._i=r,s._f=e,s._strict=i,Wee(s)}function yt(r,e,t,i){return PP(r,e,t,i,!1)}var Yee=Di("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=yt.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:zh()}),Kee=Di("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=yt.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:zh()});function RP(r,e){var t,i;if(e.length===1&&Ki(e[0])&&(e=e[0]),!e.length)return yt();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][r](t))&&(t=e[i]);return t}function Xee(){var r=[].slice.call(arguments,0);return RP("isBefore",r)}function Qee(){var r=[].slice.call(arguments,0);return RP("isAfter",r)}var Zee=function(){return Date.now?Date.now():+new Date},yu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Jee(r){var e,t=!1,i,n=yu.length;for(e in r)if(Ye(r,e)&&!(jt.call(yu,e)!==-1&&(r[e]==null||!isNaN(r[e]))))return!1;for(i=0;i<n;++i)if(r[yu[i]]){if(t)return!1;parseFloat(r[yu[i]])!==Ue(r[yu[i]])&&(t=!0)}return!0}function ete(){return this._isValid}function tte(){return Zi(NaN)}function ad(r){var e=rg(r),t=e.year||0,i=e.quarter||0,n=e.month||0,s=e.week||e.isoWeek||0,a=e.day||0,o=e.hour||0,l=e.minute||0,u=e.second||0,c=e.millisecond||0;this._isValid=Jee(e),this._milliseconds=+c+u*1e3+l*6e4+o*1e3*60*60,this._days=+a+s*7,this._months=+n+i*3+t*12,this._data={},this._locale=Kn(),this._bubble()}function od(r){return r instanceof ad}function gg(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function rte(r,e,t){var i=Math.min(r.length,e.length),n=Math.abs(r.length-e.length),s=0,a;for(a=0;a<i;a++)Ue(r[a])!==Ue(e[a])&&s++;return s+n}function kP(r,e){xe(r,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+En(~~(t/60),2)+e+En(~~t%60,2)})}kP("Z",":"),kP("ZZ",""),_e("Z",ed),_e("ZZ",ed),ot(["Z","ZZ"],function(r,e,t){t._useUTC=!0,t._tzm=vg(ed,r)});var ite=/([\+\-]|\d\d)/gi;function vg(r,e){var t=(e||"").match(r),i,n,s;return t===null?null:(i=t[t.length-1]||[],n=(i+"").match(ite)||["-",0,0],s=+(n[1]*60)+Ue(n[2]),s===0?0:n[0]==="+"?s:-s)}function yg(r,e){var t,i;return e._isUTC?(t=e.clone(),i=(Xi(r)||lu(r)?r.valueOf():yt(r).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),ce.updateOffset(t,!1),t):yt(r).local()}function _g(r){return-Math.round(r._d.getTimezoneOffset())}ce.updateOffset=function(){};function nte(r,e,t){var i=this._offset||0,n;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=vg(ed,r),r===null)return this}else Math.abs(r)<16&&!t&&(r=r*60);return!this._isUTC&&e&&(n=_g(this)),this._offset=r,this._isUTC=!0,n!=null&&this.add(n,"m"),i!==r&&(!e||this._changeInProgress?LP(this,Zi(r-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ce.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:_g(this)}function ste(r,e){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,e),this):-this.utcOffset()}function ate(r){return this.utcOffset(0,r)}function ote(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(_g(this),"m")),this}function lte(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=vg(DJ,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function ute(r){return this.isValid()?(r=r?yt(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function cte(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function hte(){if(!Qr(this._isDSTShifted))return this._isDSTShifted;var r={},e;return Xm(r,this),r=OP(r),r._a?(e=r._isUTC?xn(r._a):yt(r._a),this._isDSTShifted=this.isValid()&&rte(r._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function dte(){return this.isValid()?!this._isUTC:!1}function fte(){return this.isValid()?this._isUTC:!1}function MP(){return this.isValid()?this._isUTC&&this._offset===0:!1}var pte=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,mte=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Zi(r,e){var t=r,i=null,n,s,a;return od(r)?t={ms:r._milliseconds,d:r._days,M:r._months}:Vn(r)||!isNaN(+r)?(t={},e?t[e]=+r:t.milliseconds=+r):(i=pte.exec(r))?(n=i[1]==="-"?-1:1,t={y:0,d:Ue(i[Cn])*n,h:Ue(i[rr])*n,m:Ue(i[Qi])*n,s:Ue(i[zn])*n,ms:Ue(gg(i[aa]*1e3))*n}):(i=mte.exec(r))?(n=i[1]==="-"?-1:1,t={y:oa(i[2],n),M:oa(i[3],n),w:oa(i[4],n),d:oa(i[5],n),h:oa(i[6],n),m:oa(i[7],n),s:oa(i[8],n)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(a=gte(yt(t.from),yt(t.to)),t={},t.ms=a.milliseconds,t.M=a.months),s=new ad(t),od(r)&&Ye(r,"_locale")&&(s._locale=r._locale),od(r)&&Ye(r,"_isValid")&&(s._isValid=r._isValid),s}Zi.fn=ad.prototype,Zi.invalid=tte;function oa(r,e){var t=r&&parseFloat(r.replace(",","."));return(isNaN(t)?0:t)*e}function $P(r,e){var t={};return t.months=e.month()-r.month()+(e.year()-r.year())*12,r.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+r.clone().add(t.months,"M"),t}function gte(r,e){var t;return r.isValid()&&e.isValid()?(e=yg(e,r),r.isBefore(e)?t=$P(r,e):(t=$P(e,r),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function NP(r,e){return function(t,i){var n,s;return i!==null&&!isNaN(+i)&&(lP(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=t,t=i,i=s),n=Zi(t,i),LP(this,n,r),this}}function LP(r,e,t,i){var n=e._milliseconds,s=gg(e._days),a=gg(e._months);r.isValid()&&(i=i??!0,a&&_P(r,fu(r,"Month")+a*t),s&&gP(r,"Date",fu(r,"Date")+s*t),n&&r._d.setTime(r._d.valueOf()+n*t),i&&ce.updateOffset(r,s||a))}var vte=NP(1,"add"),yte=NP(-1,"subtract");function FP(r){return typeof r=="string"||r instanceof String}function _te(r){return Xi(r)||lu(r)||FP(r)||Vn(r)||Tte(r)||bte(r)||r===null||r===void 0}function bte(r){var e=sa(r)&&!Wm(r),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],n,s,a=i.length;for(n=0;n<a;n+=1)s=i[n],t=t||Ye(r,s);return e&&t}function Tte(r){var e=Ki(r),t=!1;return e&&(t=r.filter(function(i){return!Vn(i)&&FP(r)}).length===0),e&&t}function Ste(r){var e=sa(r)&&!Wm(r),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],n,s;for(n=0;n<i.length;n+=1)s=i[n],t=t||Ye(r,s);return e&&t}function xte(r,e){var t=r.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function wte(r,e){arguments.length===1&&(arguments[0]?_te(arguments[0])?(r=arguments[0],e=void 0):Ste(arguments[0])&&(e=arguments[0],r=void 0):(r=void 0,e=void 0));var t=r||yt(),i=yg(t,this).startOf("day"),n=ce.calendarFormat(this,i)||"sameElse",s=e&&(wn(e[n])?e[n].call(this,t):e[n]);return this.format(s||this.localeData().calendar(n,this,yt(t)))}function Ete(){return new uu(this)}function Cte(r,e){var t=Xi(r)?r:yt(r);return this.isValid()&&t.isValid()?(e=Ii(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Dte(r,e){var t=Xi(r)?r:yt(r);return this.isValid()&&t.isValid()?(e=Ii(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function Ite(r,e,t,i){var n=Xi(r)?r:yt(r),s=Xi(e)?e:yt(e);return this.isValid()&&n.isValid()&&s.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(n,t):!this.isBefore(n,t))&&(i[1]===")"?this.isBefore(s,t):!this.isAfter(s,t))):!1}function Ate(r,e){var t=Xi(r)?r:yt(r),i;return this.isValid()&&t.isValid()?(e=Ii(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function Ote(r,e){return this.isSame(r,e)||this.isAfter(r,e)}function Pte(r,e){return this.isSame(r,e)||this.isBefore(r,e)}function Rte(r,e,t){var i,n,s;if(!this.isValid())return NaN;if(i=yg(r,this),!i.isValid())return NaN;switch(n=(i.utcOffset()-this.utcOffset())*6e4,e=Ii(e),e){case"year":s=ld(this,i)/12;break;case"month":s=ld(this,i);break;case"quarter":s=ld(this,i)/3;break;case"second":s=(this-i)/1e3;break;case"minute":s=(this-i)/6e4;break;case"hour":s=(this-i)/36e5;break;case"day":s=(this-i-n)/864e5;break;case"week":s=(this-i-n)/6048e5;break;default:s=this-i}return t?s:Ai(s)}function ld(r,e){if(r.date()<e.date())return-ld(e,r);var t=(e.year()-r.year())*12+(e.month()-r.month()),i=r.clone().add(t,"months"),n,s;return e-i<0?(n=r.clone().add(t-1,"months"),s=(e-i)/(i-n)):(n=r.clone().add(t+1,"months"),s=(e-i)/(n-i)),-(t+s)||0}ce.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",ce.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function kte(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Mte(r){if(!this.isValid())return null;var e=r!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?Kh(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):wn(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Kh(t,"Z")):Kh(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function $te(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",e="",t,i,n,s;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+r+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(t+i+n+s)}function Nte(r){r||(r=this.isUtc()?ce.defaultFormatUtc:ce.defaultFormat);var e=Kh(this,r);return this.localeData().postformat(e)}function Lte(r,e){return this.isValid()&&(Xi(r)&&r.isValid()||yt(r).isValid())?Zi({to:this,from:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Fte(r){return this.from(yt(),r)}function qte(r,e){return this.isValid()&&(Xi(r)&&r.isValid()||yt(r).isValid())?Zi({from:this,to:r}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Bte(r){return this.to(yt(),r)}function qP(r){var e;return r===void 0?this._locale._abbr:(e=Kn(r),e!=null&&(this._locale=e),this)}var BP=Di("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function UP(){return this._locale}var ud=1e3,Lo=60*ud,cd=60*Lo,jP=(365*400+97)*24*cd;function Fo(r,e){return(r%e+e)%e}function HP(r,e,t){return r<100&&r>=0?new Date(r+400,e,t)-jP:new Date(r,e,t).valueOf()}function VP(r,e,t){return r<100&&r>=0?Date.UTC(r+400,e,t)-jP:Date.UTC(r,e,t)}function Ute(r){var e,t;if(r=Ii(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?VP:HP,r){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Fo(e+(this._isUTC?0:this.utcOffset()*Lo),cd);break;case"minute":e=this._d.valueOf(),e-=Fo(e,Lo);break;case"second":e=this._d.valueOf(),e-=Fo(e,ud);break}return this._d.setTime(e),ce.updateOffset(this,!0),this}function jte(r){var e,t;if(r=Ii(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?VP:HP,r){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=cd-Fo(e+(this._isUTC?0:this.utcOffset()*Lo),cd)-1;break;case"minute":e=this._d.valueOf(),e+=Lo-Fo(e,Lo)-1;break;case"second":e=this._d.valueOf(),e+=ud-Fo(e,ud)-1;break}return this._d.setTime(e),ce.updateOffset(this,!0),this}function Hte(){return this._d.valueOf()-(this._offset||0)*6e4}function Vte(){return Math.floor(this.valueOf()/1e3)}function Gte(){return new Date(this.valueOf())}function Wte(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function zte(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function Yte(){return this.isValid()?this.toISOString():null}function Kte(){return Ym(this)}function Xte(){return ws({},Le(this))}function Qte(){return Le(this).overflow}function Zte(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}xe("N",0,0,"eraAbbr"),xe("NN",0,0,"eraAbbr"),xe("NNN",0,0,"eraAbbr"),xe("NNNN",0,0,"eraName"),xe("NNNNN",0,0,"eraNarrow"),xe("y",["y",1],"yo","eraYear"),xe("y",["yy",2],0,"eraYear"),xe("y",["yyy",3],0,"eraYear"),xe("y",["yyyy",4],0,"eraYear"),_e("N",bg),_e("NN",bg),_e("NNN",bg),_e("NNNN",ure),_e("NNNNN",cre),ot(["N","NN","NNN","NNNN","NNNNN"],function(r,e,t,i){var n=t._locale.erasParse(r,i,t._strict);n?Le(t).era=n:Le(t).invalidEra=r}),_e("y",ko),_e("yy",ko),_e("yyy",ko),_e("yyyy",ko),_e("yo",hre),ot(["y","yy","yyy","yyyy"],Cr),ot(["yo"],function(r,e,t,i){var n;t._locale._eraYearOrdinalRegex&&(n=r.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Cr]=t._locale.eraYearOrdinalParse(r,n):e[Cr]=parseInt(r,10)});function Jte(r,e){var t,i,n,s=this._eras||Kn("en")._eras;for(t=0,i=s.length;t<i;++t){switch(typeof s[t].since){case"string":n=ce(s[t].since).startOf("day"),s[t].since=n.valueOf();break}switch(typeof s[t].until){case"undefined":s[t].until=1/0;break;case"string":n=ce(s[t].until).startOf("day").valueOf(),s[t].until=n.valueOf();break}}return s}function ere(r,e,t){var i,n,s=this.eras(),a,o,l;for(r=r.toUpperCase(),i=0,n=s.length;i<n;++i)if(a=s[i].name.toUpperCase(),o=s[i].abbr.toUpperCase(),l=s[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(o===r)return s[i];break;case"NNNN":if(a===r)return s[i];break;case"NNNNN":if(l===r)return s[i];break}else if([a,o,l].indexOf(r)>=0)return s[i]}function tre(r,e){var t=r.since<=r.until?1:-1;return e===void 0?ce(r.since).year():ce(r.since).year()+(e-r.offset)*t}function rre(){var r,e,t,i=this.localeData().eras();for(r=0,e=i.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),i[r].since<=t&&t<=i[r].until||i[r].until<=t&&t<=i[r].since)return i[r].name;return""}function ire(){var r,e,t,i=this.localeData().eras();for(r=0,e=i.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),i[r].since<=t&&t<=i[r].until||i[r].until<=t&&t<=i[r].since)return i[r].narrow;return""}function nre(){var r,e,t,i=this.localeData().eras();for(r=0,e=i.length;r<e;++r)if(t=this.clone().startOf("day").valueOf(),i[r].since<=t&&t<=i[r].until||i[r].until<=t&&t<=i[r].since)return i[r].abbr;return""}function sre(){var r,e,t,i,n=this.localeData().eras();for(r=0,e=n.length;r<e;++r)if(t=n[r].since<=n[r].until?1:-1,i=this.clone().startOf("day").valueOf(),n[r].since<=i&&i<=n[r].until||n[r].until<=i&&i<=n[r].since)return(this.year()-ce(n[r].since).year())*t+n[r].offset;return this.year()}function are(r){return Ye(this,"_erasNameRegex")||Tg.call(this),r?this._erasNameRegex:this._erasRegex}function ore(r){return Ye(this,"_erasAbbrRegex")||Tg.call(this),r?this._erasAbbrRegex:this._erasRegex}function lre(r){return Ye(this,"_erasNarrowRegex")||Tg.call(this),r?this._erasNarrowRegex:this._erasRegex}function bg(r,e){return e.erasAbbrRegex(r)}function ure(r,e){return e.erasNameRegex(r)}function cre(r,e){return e.erasNarrowRegex(r)}function hre(r,e){return e._eraYearOrdinalRegex||ko}function Tg(){var r=[],e=[],t=[],i=[],n,s,a,o,l,u=this.eras();for(n=0,s=u.length;n<s;++n)a=Gn(u[n].name),o=Gn(u[n].abbr),l=Gn(u[n].narrow),e.push(a),r.push(o),t.push(l),i.push(a),i.push(o),i.push(l);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}xe(0,["gg",2],0,function(){return this.weekYear()%100}),xe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function hd(r,e){xe(0,[r,r.length],0,e)}hd("gggg","weekYear"),hd("ggggg","weekYear"),hd("GGGG","isoWeekYear"),hd("GGGGG","isoWeekYear"),_e("G",Jh),_e("g",Jh),_e("GG",vt,ci),_e("gg",vt,ci),_e("GGGG",ng,ig),_e("gggg",ng,ig),_e("GGGGG",Zh,Xh),_e("ggggg",Zh,Xh),hu(["gggg","ggggg","GGGG","GGGGG"],function(r,e,t,i){e[i.substr(0,2)]=Ue(r)}),hu(["gg","GG"],function(r,e,t,i){e[i]=ce.parseTwoDigitYear(r)});function dre(r){return GP.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function fre(r){return GP.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function pre(){return Yn(this.year(),1,4)}function mre(){return Yn(this.isoWeekYear(),1,4)}function gre(){var r=this.localeData()._week;return Yn(this.year(),r.dow,r.doy)}function vre(){var r=this.localeData()._week;return Yn(this.weekYear(),r.dow,r.doy)}function GP(r,e,t,i,n){var s;return r==null?mu(this,i,n).year:(s=Yn(r,i,n),e>s&&(e=s),yre.call(this,r,e,t,i,n))}function yre(r,e,t,i,n){var s=SP(r,e,t,i,n),a=pu(s.year,0,s.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}xe("Q",0,"Qo","quarter"),_e("Q",hP),ot("Q",function(r,e){e[Wn]=(Ue(r)-1)*3});function _re(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}xe("D",["DD",2],"Do","date"),_e("D",vt,Mo),_e("DD",vt,ci),_e("Do",function(r,e){return r?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),ot(["D","DD"],Cn),ot("Do",function(r,e){e[Cn]=Ue(r.match(vt)[0])});var WP=$o("Date",!0);xe("DDD",["DDDD",3],"DDDo","dayOfYear"),_e("DDD",Qh),_e("DDDD",dP),ot(["DDD","DDDD"],function(r,e,t){t._dayOfYear=Ue(r)});function bre(r){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?e:this.add(r-e,"d")}xe("m",["mm",2],0,"minute"),_e("m",vt,sg),_e("mm",vt,ci),ot(["m","mm"],Qi);var Tre=$o("Minutes",!1);xe("s",["ss",2],0,"second"),_e("s",vt,sg),_e("ss",vt,ci),ot(["s","ss"],zn);var Sre=$o("Seconds",!1);xe("S",0,0,function(){return~~(this.millisecond()/100)}),xe(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),xe(0,["SSS",3],0,"millisecond"),xe(0,["SSSS",4],0,function(){return this.millisecond()*10}),xe(0,["SSSSS",5],0,function(){return this.millisecond()*100}),xe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),xe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),xe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),xe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),_e("S",Qh,hP),_e("SS",Qh,ci),_e("SSS",Qh,dP);var Cs,zP;for(Cs="SSSS";Cs.length<=9;Cs+="S")_e(Cs,ko);function xre(r,e){e[aa]=Ue(("0."+r)*1e3)}for(Cs="S";Cs.length<=9;Cs+="S")ot(Cs,xre);zP=$o("Milliseconds",!1),xe("z",0,0,"zoneAbbr"),xe("zz",0,0,"zoneName");function wre(){return this._isUTC?"UTC":""}function Ere(){return this._isUTC?"Coordinated Universal Time":""}var le=uu.prototype;le.add=vte,le.calendar=wte,le.clone=Ete,le.diff=Rte,le.endOf=jte,le.format=Nte,le.from=Lte,le.fromNow=Fte,le.to=qte,le.toNow=Bte,le.get=$J,le.invalidAt=Qte,le.isAfter=Cte,le.isBefore=Dte,le.isBetween=Ite,le.isSame=Ate,le.isSameOrAfter=Ote,le.isSameOrBefore=Pte,le.isValid=Kte,le.lang=BP,le.locale=qP,le.localeData=UP,le.max=Kee,le.min=Yee,le.parsingFlags=Xte,le.set=NJ,le.startOf=Ute,le.subtract=yte,le.toArray=Wte,le.toObject=zte,le.toDate=Gte,le.toISOString=Mte,le.inspect=$te,typeof Symbol<"u"&&Symbol.for!=null&&(le[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),le.toJSON=Yte,le.toString=kte,le.unix=Vte,le.valueOf=Hte,le.creationData=Zte,le.eraName=rre,le.eraNarrow=ire,le.eraAbbr=nre,le.eraYear=sre,le.year=mP,le.isLeapYear=MJ,le.weekYear=dre,le.isoWeekYear=fre,le.quarter=le.quarters=_re,le.month=bP,le.daysInMonth=GJ,le.week=le.weeks=JJ,le.isoWeek=le.isoWeeks=eee,le.weeksInYear=gre,le.weeksInWeekYear=vre,le.isoWeeksInYear=pre,le.isoWeeksInISOWeekYear=mre,le.date=WP,le.day=le.days=fee,le.weekday=pee,le.isoWeekday=mee,le.dayOfYear=bre,le.hour=le.hours=See,le.minute=le.minutes=Tre,le.second=le.seconds=Sre,le.millisecond=le.milliseconds=zP,le.utcOffset=nte,le.utc=ate,le.local=ote,le.parseZone=lte,le.hasAlignedHourOffset=ute,le.isDST=cte,le.isLocal=dte,le.isUtcOffset=fte,le.isUtc=MP,le.isUTC=MP,le.zoneAbbr=wre,le.zoneName=Ere,le.dates=Di("dates accessor is deprecated. Use date instead.",WP),le.months=Di("months accessor is deprecated. Use month instead",bP),le.years=Di("years accessor is deprecated. Use year instead",mP),le.zone=Di("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ste),le.isDSTShifted=Di("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",hte);function Cre(r){return yt(r*1e3)}function Dre(){return yt.apply(null,arguments).parseZone()}function YP(r){return r}var Ke=Zm.prototype;Ke.calendar=dJ,Ke.longDateFormat=gJ,Ke.invalidDate=yJ,Ke.ordinal=TJ,Ke.preparse=YP,Ke.postformat=YP,Ke.relativeTime=xJ,Ke.pastFuture=wJ,Ke.set=cJ,Ke.eras=Jte,Ke.erasParse=ere,Ke.erasConvertYear=tre,Ke.erasAbbrRegex=ore,Ke.erasNameRegex=are,Ke.erasNarrowRegex=lre,Ke.months=UJ,Ke.monthsShort=jJ,Ke.monthsParse=VJ,Ke.monthsRegex=zJ,Ke.monthsShortRegex=WJ,Ke.week=KJ,Ke.firstDayOfYear=ZJ,Ke.firstDayOfWeek=QJ,Ke.weekdays=lee,Ke.weekdaysMin=cee,Ke.weekdaysShort=uee,Ke.weekdaysParse=dee,Ke.weekdaysRegex=gee,Ke.weekdaysShortRegex=vee,Ke.weekdaysMinRegex=yee,Ke.isPM=bee,Ke.meridiem=xee;function dd(r,e,t,i){var n=Kn(),s=xn().set(i,e);return n[t](s,r)}function KP(r,e,t){if(Vn(r)&&(e=r,r=void 0),r=r||"",e!=null)return dd(r,e,t,"month");var i,n=[];for(i=0;i<12;i++)n[i]=dd(r,i,t,"month");return n}function Sg(r,e,t,i){typeof r=="boolean"?(Vn(e)&&(t=e,e=void 0),e=e||""):(e=r,t=e,r=!1,Vn(e)&&(t=e,e=void 0),e=e||"");var n=Kn(),s=r?n._week.dow:0,a,o=[];if(t!=null)return dd(e,(t+s)%7,i,"day");for(a=0;a<7;a++)o[a]=dd(e,(a+s)%7,i,"day");return o}function Ire(r,e){return KP(r,e,"months")}function Are(r,e){return KP(r,e,"monthsShort")}function Ore(r,e,t){return Sg(r,e,t,"weekdays")}function Pre(r,e,t){return Sg(r,e,t,"weekdaysShort")}function Rre(r,e,t){return Sg(r,e,t,"weekdaysMin")}Es("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var e=r%10,t=Ue(r%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return r+t}}),ce.lang=Di("moment.lang is deprecated. Use moment.locale instead.",Es),ce.langData=Di("moment.langData is deprecated. Use moment.localeData instead.",Kn);var Xn=Math.abs;function kre(){var r=this._data;return this._milliseconds=Xn(this._milliseconds),this._days=Xn(this._days),this._months=Xn(this._months),r.milliseconds=Xn(r.milliseconds),r.seconds=Xn(r.seconds),r.minutes=Xn(r.minutes),r.hours=Xn(r.hours),r.months=Xn(r.months),r.years=Xn(r.years),this}function XP(r,e,t,i){var n=Zi(e,t);return r._milliseconds+=i*n._milliseconds,r._days+=i*n._days,r._months+=i*n._months,r._bubble()}function Mre(r,e){return XP(this,r,e,1)}function $re(r,e){return XP(this,r,e,-1)}function QP(r){return r<0?Math.floor(r):Math.ceil(r)}function Nre(){var r=this._milliseconds,e=this._days,t=this._months,i=this._data,n,s,a,o,l;return r>=0&&e>=0&&t>=0||r<=0&&e<=0&&t<=0||(r+=QP(xg(t)+e)*864e5,e=0,t=0),i.milliseconds=r%1e3,n=Ai(r/1e3),i.seconds=n%60,s=Ai(n/60),i.minutes=s%60,a=Ai(s/60),i.hours=a%24,e+=Ai(a/24),l=Ai(ZP(e)),t+=l,e-=QP(xg(l)),o=Ai(t/12),t%=12,i.days=e,i.months=t,i.years=o,this}function ZP(r){return r*4800/146097}function xg(r){return r*146097/4800}function Lre(r){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(r=Ii(r),r==="month"||r==="quarter"||r==="year")switch(e=this._days+i/864e5,t=this._months+ZP(e),r){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(xg(this._months)),r){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+r)}}function Qn(r){return function(){return this.as(r)}}var JP=Qn("ms"),Fre=Qn("s"),qre=Qn("m"),Bre=Qn("h"),Ure=Qn("d"),jre=Qn("w"),Hre=Qn("M"),Vre=Qn("Q"),Gre=Qn("y"),Wre=JP;function zre(){return Zi(this)}function Yre(r){return r=Ii(r),this.isValid()?this[r+"s"]():NaN}function la(r){return function(){return this.isValid()?this._data[r]:NaN}}var Kre=la("milliseconds"),Xre=la("seconds"),Qre=la("minutes"),Zre=la("hours"),Jre=la("days"),eie=la("months"),tie=la("years");function rie(){return Ai(this.days()/7)}var Zn=Math.round,qo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function iie(r,e,t,i,n){return n.relativeTime(e||1,!!t,r,i)}function nie(r,e,t,i){var n=Zi(r).abs(),s=Zn(n.as("s")),a=Zn(n.as("m")),o=Zn(n.as("h")),l=Zn(n.as("d")),u=Zn(n.as("M")),c=Zn(n.as("w")),h=Zn(n.as("y")),f=s<=t.ss&&["s",s]||s<t.s&&["ss",s]||a<=1&&["m"]||a<t.m&&["mm",a]||o<=1&&["h"]||o<t.h&&["hh",o]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(f=f||c<=1&&["w"]||c<t.w&&["ww",c]),f=f||u<=1&&["M"]||u<t.M&&["MM",u]||h<=1&&["y"]||["yy",h],f[2]=e,f[3]=+r>0,f[4]=i,iie.apply(null,f)}function sie(r){return r===void 0?Zn:typeof r=="function"?(Zn=r,!0):!1}function aie(r,e){return qo[r]===void 0?!1:e===void 0?qo[r]:(qo[r]=e,r==="s"&&(qo.ss=e-1),!0)}function oie(r,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=qo,n,s;return typeof r=="object"&&(e=r,r=!1),typeof r=="boolean"&&(t=r),typeof e=="object"&&(i=Object.assign({},qo,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),n=this.localeData(),s=nie(this,!t,i,n),t&&(s=n.pastFuture(+this,s)),n.postformat(s)}var wg=Math.abs;function Bo(r){return(r>0)-(r<0)||+r}function fd(){if(!this.isValid())return this.localeData().invalidDate();var r=wg(this._milliseconds)/1e3,e=wg(this._days),t=wg(this._months),i,n,s,a,o=this.asSeconds(),l,u,c,h;return o?(i=Ai(r/60),n=Ai(i/60),r%=60,i%=60,s=Ai(t/12),t%=12,a=r?r.toFixed(3).replace(/\.?0+$/,""):"",l=o<0?"-":"",u=Bo(this._months)!==Bo(o)?"-":"",c=Bo(this._days)!==Bo(o)?"-":"",h=Bo(this._milliseconds)!==Bo(o)?"-":"",l+"P"+(s?u+s+"Y":"")+(t?u+t+"M":"")+(e?c+e+"D":"")+(n||i||r?"T":"")+(n?h+n+"H":"")+(i?h+i+"M":"")+(r?h+a+"S":"")):"P0D"}var je=ad.prototype;je.isValid=ete,je.abs=kre,je.add=Mre,je.subtract=$re,je.as=Lre,je.asMilliseconds=JP,je.asSeconds=Fre,je.asMinutes=qre,je.asHours=Bre,je.asDays=Ure,je.asWeeks=jre,je.asMonths=Hre,je.asQuarters=Vre,je.asYears=Gre,je.valueOf=Wre,je._bubble=Nre,je.clone=zre,je.get=Yre,je.milliseconds=Kre,je.seconds=Xre,je.minutes=Qre,je.hours=Zre,je.days=Jre,je.weeks=rie,je.months=eie,je.years=tie,je.humanize=oie,je.toISOString=fd,je.toString=fd,je.toJSON=fd,je.locale=qP,je.localeData=UP,je.toIsoString=Di("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",fd),je.lang=BP,xe("X",0,0,"unix"),xe("x",0,0,"valueOf"),_e("x",Jh),_e("X",IJ),ot("X",function(r,e,t){t._d=new Date(parseFloat(r)*1e3)}),ot("x",function(r,e,t){t._d=new Date(Ue(r))});ce.version="2.30.1",lJ(yt),ce.fn=le,ce.min=Xee,ce.max=Qee,ce.now=Zee,ce.utc=xn,ce.unix=Cre,ce.months=Ire,ce.isDate=lu,ce.locale=Es,ce.invalid=zh,ce.duration=Zi,ce.isMoment=Xi,ce.weekdays=Ore,ce.parseZone=Dre,ce.localeData=Kn,ce.isDuration=od,ce.monthsShort=Are,ce.weekdaysMin=Rre,ce.defineLocale=hg,ce.updateLocale=Dee,ce.locales=Iee,ce.weekdaysShort=Pre,ce.normalizeUnits=Ii,ce.relativeTimeRounding=sie,ce.relativeTimeThreshold=aie,ce.calendarFormat=xte,ce.prototype=le,ce.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var eR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Be(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Eg={exports:{}},tR={},_u,rR;function Kt(){if(rR)return _u;rR=1;var r=function(e){return e&&e.Math===Math&&e};return _u=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof eR=="object"&&eR)||r(typeof _u=="object"&&_u)||(function(){return this})()||Function("return this")(),_u}var Cg,iR;function nt(){return iR||(iR=1,Cg=function(r){try{return!!r()}catch{return!0}}),Cg}var Dg,nR;function bu(){if(nR)return Dg;nR=1;var r=nt();return Dg=!r(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Dg}var Ig,sR;function pd(){if(sR)return Ig;sR=1;var r=bu(),e=Function.prototype,t=e.apply,i=e.call;return Ig=typeof Reflect=="object"&&Reflect.apply||(r?i.bind(t):function(){return i.apply(t,arguments)}),Ig}var Ag,aR;function ht(){if(aR)return Ag;aR=1;var r=bu(),e=Function.prototype,t=e.call,i=r&&e.bind.bind(t,t);return Ag=r?i:function(n){return function(){return t.apply(n,arguments)}},Ag}var Og,oR;function Jn(){if(oR)return Og;oR=1;var r=ht(),e=r({}.toString),t=r("".slice);return Og=function(i){return t(e(i),8,-1)},Og}var Pg,lR;function uR(){if(lR)return Pg;lR=1;var r=Jn(),e=ht();return Pg=function(t){if(r(t)==="Function")return e(t)},Pg}var Rg,cR;function ur(){if(cR)return Rg;cR=1;var r=typeof document=="object"&&document.all;return Rg=typeof r>"u"&&r!==void 0?function(e){return typeof e=="function"||e===r}:function(e){return typeof e=="function"},Rg}var kg={},Mg,hR;function Xt(){if(hR)return Mg;hR=1;var r=nt();return Mg=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Mg}var $g,dR;function Zr(){if(dR)return $g;dR=1;var r=bu(),e=Function.prototype.call;return $g=r?e.bind(e):function(){return e.apply(e,arguments)},$g}var Ng={},fR;function Lg(){if(fR)return Ng;fR=1;var r={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!r.call({1:2},1);return Ng.f=t?function(n){var s=e(this,n);return!!s&&s.enumerable}:r,Ng}var Fg,pR;function Tu(){return pR||(pR=1,Fg=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}),Fg}var qg,mR;function md(){if(mR)return qg;mR=1;var r=ht(),e=nt(),t=Jn(),i=Object,n=r("".split);return qg=e(function(){return!i("z").propertyIsEnumerable(0)})?function(s){return t(s)==="String"?n(s,""):i(s)}:i,qg}var Bg,gR;function Su(){return gR||(gR=1,Bg=function(r){return r==null}),Bg}var Ug,vR;function ua(){if(vR)return Ug;vR=1;var r=Su(),e=TypeError;return Ug=function(t){if(r(t))throw new e("Can't call method on "+t);return t},Ug}var jg,yR;function Dn(){if(yR)return jg;yR=1;var r=md(),e=ua();return jg=function(t){return r(e(t))},jg}var Hg,_R;function Lr(){if(_R)return Hg;_R=1;var r=ur();return Hg=function(e){return typeof e=="object"?e!==null:r(e)},Hg}var Vg,bR;function ir(){return bR||(bR=1,Vg={}),Vg}var Gg,TR;function hi(){if(TR)return Gg;TR=1;var r=ir(),e=Kt(),t=ur(),i=function(n){return t(n)?n:void 0};return Gg=function(n,s){return arguments.length<2?i(r[n])||i(e[n]):r[n]&&r[n][s]||e[n]&&e[n][s]},Gg}var Wg,SR;function nr(){if(SR)return Wg;SR=1;var r=ht();return Wg=r({}.isPrototypeOf),Wg}var zg,xR;function Uo(){if(xR)return zg;xR=1;var r=Kt(),e=r.navigator,t=e&&e.userAgent;return zg=t?String(t):"",zg}var Yg,wR;function xu(){if(wR)return Yg;wR=1;var r=Kt(),e=Uo(),t=r.process,i=r.Deno,n=t&&t.versions||i&&i.version,s=n&&n.v8,a,o;return s&&(a=s.split("."),o=a[0]>0&&a[0]<4?1:+(a[0]+a[1])),!o&&e&&(a=e.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=e.match(/Chrome\/(\d+)/),a&&(o=+a[1]))),Yg=o,Yg}var Kg,ER;function jo(){if(ER)return Kg;ER=1;var r=xu(),e=nt(),t=Kt(),i=t.String;return Kg=!!Object.getOwnPropertySymbols&&!e(function(){var n=Symbol("symbol detection");return!i(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}),Kg}var Xg,CR;function DR(){if(CR)return Xg;CR=1;var r=jo();return Xg=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Xg}var Qg,IR;function wu(){if(IR)return Qg;IR=1;var r=hi(),e=ur(),t=nr(),i=DR(),n=Object;return Qg=i?function(s){return typeof s=="symbol"}:function(s){var a=r("Symbol");return e(a)&&t(a.prototype,n(s))},Qg}var Zg,AR;function Ho(){if(AR)return Zg;AR=1;var r=String;return Zg=function(e){try{return r(e)}catch{return"Object"}},Zg}var Jg,OR;function In(){if(OR)return Jg;OR=1;var r=ur(),e=Ho(),t=TypeError;return Jg=function(i){if(r(i))return i;throw new t(e(i)+" is not a function")},Jg}var ev,PR;function tv(){if(PR)return ev;PR=1;var r=In(),e=Su();return ev=function(t,i){var n=t[i];return e(n)?void 0:r(n)},ev}var rv,RR;function lie(){if(RR)return rv;RR=1;var r=Zr(),e=ur(),t=Lr(),i=TypeError;return rv=function(n,s){var a,o;if(s==="string"&&e(a=n.toString)&&!t(o=r(a,n))||e(a=n.valueOf)&&!t(o=r(a,n))||s!=="string"&&e(a=n.toString)&&!t(o=r(a,n)))return o;throw new i("Can't convert object to primitive value")},rv}var iv={exports:{}},nv,kR;function Vo(){return kR||(kR=1,nv=!0),nv}var sv,MR;function uie(){if(MR)return sv;MR=1;var r=Kt(),e=Object.defineProperty;return sv=function(t,i){try{e(r,t,{value:i,configurable:!0,writable:!0})}catch{r[t]=i}return i},sv}var $R;function av(){if($R)return iv.exports;$R=1;var r=Vo(),e=Kt(),t=uie(),i="__core-js_shared__",n=iv.exports=e[i]||t(i,{});return(n.versions||(n.versions=[])).push({version:"3.44.0",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),iv.exports}var ov,NR;function Go(){if(NR)return ov;NR=1;var r=av();return ov=function(e,t){return r[e]||(r[e]=t||{})},ov}var lv,LR;function Oi(){if(LR)return lv;LR=1;var r=ua(),e=Object;return lv=function(t){return e(r(t))},lv}var uv,FR;function cr(){if(FR)return uv;FR=1;var r=ht(),e=Oi(),t=r({}.hasOwnProperty);return uv=Object.hasOwn||function(n,s){return t(e(n),s)},uv}var cv,qR;function gd(){if(qR)return cv;qR=1;var r=ht(),e=0,t=Math.random(),i=r(1.1.toString);return cv=function(n){return"Symbol("+(n===void 0?"":n)+")_"+i(++e+t,36)},cv}var hv,BR;function hr(){if(BR)return hv;BR=1;var r=Kt(),e=Go(),t=cr(),i=gd(),n=jo(),s=DR(),a=r.Symbol,o=e("wks"),l=s?a.for||a:a&&a.withoutSetter||i;return hv=function(u){return t(o,u)||(o[u]=n&&t(a,u)?a[u]:l("Symbol."+u)),o[u]},hv}var dv,UR;function jR(){if(UR)return dv;UR=1;var r=Zr(),e=Lr(),t=wu(),i=tv(),n=lie(),s=hr(),a=TypeError,o=s("toPrimitive");return dv=function(l,u){if(!e(l)||t(l))return l;var c=i(l,o),h;if(c){if(u===void 0&&(u="default"),h=r(c,l,u),!e(h)||t(h))return h;throw new a("Can't convert object to primitive value")}return u===void 0&&(u="number"),n(l,u)},dv}var fv,HR;function pv(){if(HR)return fv;HR=1;var r=jR(),e=wu();return fv=function(t){var i=r(t,"string");return e(i)?i:i+""},fv}var mv,VR;function GR(){if(VR)return mv;VR=1;var r=Kt(),e=Lr(),t=r.document,i=e(t)&&e(t.createElement);return mv=function(n){return i?t.createElement(n):{}},mv}var gv,WR;function zR(){if(WR)return gv;WR=1;var r=Xt(),e=nt(),t=GR();return gv=!r&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),gv}var YR;function vd(){if(YR)return kg;YR=1;var r=Xt(),e=Zr(),t=Lg(),i=Tu(),n=Dn(),s=pv(),a=cr(),o=zR(),l=Object.getOwnPropertyDescriptor;return kg.f=r?l:function(c,h){if(c=n(c),h=s(h),o)try{return l(c,h)}catch{}if(a(c,h))return i(!e(t.f,c,h),c[h])},kg}var vv,KR;function cie(){if(KR)return vv;KR=1;var r=nt(),e=ur(),t=/#|\.prototype\./,i=function(l,u){var c=s[n(l)];return c===o?!0:c===a?!1:e(u)?r(u):!!u},n=i.normalize=function(l){return String(l).replace(t,".").toLowerCase()},s=i.data={},a=i.NATIVE="N",o=i.POLYFILL="P";return vv=i,vv}var yv,XR;function Eu(){if(XR)return yv;XR=1;var r=uR(),e=In(),t=bu(),i=r(r.bind);return yv=function(n,s){return e(n),s===void 0?n:t?i(n,s):function(){return n.apply(s,arguments)}},yv}var _v={},bv,QR;function ZR(){if(QR)return bv;QR=1;var r=Xt(),e=nt();return bv=r&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),bv}var Tv,JR;function es(){if(JR)return Tv;JR=1;var r=Lr(),e=String,t=TypeError;return Tv=function(i){if(r(i))return i;throw new t(e(i)+" is not an object")},Tv}var ek;function Pi(){if(ek)return _v;ek=1;var r=Xt(),e=zR(),t=ZR(),i=es(),n=pv(),s=TypeError,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",c="writable";return _v.f=r?t?function(f,p,g){if(i(f),p=n(p),i(g),typeof f=="function"&&p==="prototype"&&"value"in g&&c in g&&!g[c]){var v=o(f,p);v&&v[c]&&(f[p]=g.value,g={configurable:u in g?g[u]:v[u],enumerable:l in g?g[l]:v[l],writable:!1})}return a(f,p,g)}:a:function(f,p,g){if(i(f),p=n(p),i(g),e)try{return a(f,p,g)}catch{}if("get"in g||"set"in g)throw new s("Accessors not supported");return"value"in g&&(f[p]=g.value),f},_v}var Sv,tk;function Wo(){if(tk)return Sv;tk=1;var r=Xt(),e=Pi(),t=Tu();return Sv=r?function(i,n,s){return e.f(i,n,t(1,s))}:function(i,n,s){return i[n]=s,i},Sv}var xv,rk;function Pe(){if(rk)return xv;rk=1;var r=Kt(),e=pd(),t=uR(),i=ur(),n=vd().f,s=cie(),a=ir(),o=Eu(),l=Wo(),u=cr(),c=function(h){var f=function(p,g,v){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,g)}return new h(p,g,v)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return xv=function(h,f){var p=h.target,g=h.global,v=h.stat,b=h.proto,E=g?r:v?r[p]:r[p]&&r[p].prototype,x=g?a:a[p]||l(a,p,{})[p],D=x.prototype,O,P,R,A,I,S,C,$,F;for(A in f)O=s(g?A:p+(v?".":"#")+A,h.forced),P=!O&&E&&u(E,A),S=x[A],P&&(h.dontCallGetSet?(F=n(E,A),C=F&&F.value):C=E[A]),I=P&&C?C:f[A],!(!O&&!b&&typeof S==typeof I)&&(h.bind&&P?$=o(I,r):h.wrap&&P?$=c(I):b&&i(I)?$=t(I):$=I,(h.sham||I&&I.sham||S&&S.sham)&&l($,"sham",!0),l(x,A,$),b&&(R=p+"Prototype",u(a,R)||l(a,R,{}),l(a[R],A,I),h.real&&D&&(O||!D[A])&&l(D,A,I)))},xv}var ik;function hie(){if(ik)return tR;ik=1;var r=Pe(),e=Xt(),t=Pi().f;return r({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),tR}var nk;function die(){if(nk)return Eg.exports;nk=1,hie();var r=ir(),e=r.Object,t=Eg.exports=function(n,s,a){return e.defineProperty(n,s,a)};return e.defineProperty.sham&&(t.sham=!0),Eg.exports}var wv,sk;function ak(){if(sk)return wv;sk=1;var r=die();return wv=r,wv}var Ev,ok;function fie(){if(ok)return Ev;ok=1;var r=ak();return Ev=r,Ev}var Cv,lk;function pie(){if(lk)return Cv;lk=1;var r=fie();return Cv=r,Cv}var Dv,uk;function mie(){return uk||(uk=1,Dv=pie()),Dv}var gie=mie(),vie=Be(gie),ck={},Iv,hk;function Ds(){if(hk)return Iv;hk=1;var r=Jn();return Iv=Array.isArray||function(t){return r(t)==="Array"},Iv}var Av,dk;function yie(){if(dk)return Av;dk=1;var r=Math.ceil,e=Math.floor;return Av=Math.trunc||function(i){var n=+i;return(n>0?e:r)(n)},Av}var Ov,fk;function zo(){if(fk)return Ov;fk=1;var r=yie();return Ov=function(e){var t=+e;return t!==t||t===0?0:r(t)},Ov}var Pv,pk;function mk(){if(pk)return Pv;pk=1;var r=zo(),e=Math.min;return Pv=function(t){var i=r(t);return i>0?e(i,9007199254740991):0},Pv}var Rv,gk;function An(){if(gk)return Rv;gk=1;var r=mk();return Rv=function(e){return r(e.length)},Rv}var kv,vk;function Mv(){if(vk)return kv;vk=1;var r=TypeError,e=9007199254740991;return kv=function(t){if(t>e)throw r("Maximum allowed index exceeded");return t},kv}var $v,yk;function yd(){if(yk)return $v;yk=1;var r=Xt(),e=Pi(),t=Tu();return $v=function(i,n,s){r?e.f(i,n,t(0,s)):i[n]=s},$v}var Nv,_k;function Lv(){if(_k)return Nv;_k=1;var r=hr(),e=r("toStringTag"),t={};return t[e]="z",Nv=String(t)==="[object z]",Nv}var Fv,bk;function Is(){if(bk)return Fv;bk=1;var r=Lv(),e=ur(),t=Jn(),i=hr(),n=i("toStringTag"),s=Object,a=t((function(){return arguments})())==="Arguments",o=function(l,u){try{return l[u]}catch{}};return Fv=r?t:function(l){var u,c,h;return l===void 0?"Undefined":l===null?"Null":typeof(c=o(u=s(l),n))=="string"?c:a?t(u):(h=t(u))==="Object"&&e(u.callee)?"Arguments":h},Fv}var qv,Tk;function _ie(){if(Tk)return qv;Tk=1;var r=ht(),e=ur(),t=av(),i=r(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(n){return i(n)}),qv=t.inspectSource,qv}var Bv,Sk;function xk(){if(Sk)return Bv;Sk=1;var r=ht(),e=nt(),t=ur(),i=Is(),n=hi(),s=_ie(),a=function(){},o=n("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=r(l.exec),c=!l.test(a),h=function(g){if(!t(g))return!1;try{return o(a,[],g),!0}catch{return!1}},f=function(g){if(!t(g))return!1;switch(i(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return c||!!u(l,s(g))}catch{return!0}};return f.sham=!0,Bv=!o||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,Bv}var Uv,wk;function bie(){if(wk)return Uv;wk=1;var r=Ds(),e=xk(),t=Lr(),i=hr(),n=i("species"),s=Array;return Uv=function(a){var o;return r(a)&&(o=a.constructor,e(o)&&(o===s||r(o.prototype))?o=void 0:t(o)&&(o=o[n],o===null&&(o=void 0))),o===void 0?s:o},Uv}var jv,Ek;function _d(){if(Ek)return jv;Ek=1;var r=bie();return jv=function(e,t){return new(r(e))(t===0?0:t)},jv}var Hv,Ck;function Cu(){if(Ck)return Hv;Ck=1;var r=nt(),e=hr(),t=xu(),i=e("species");return Hv=function(n){return t>=51||!r(function(){var s=[],a=s.constructor={};return a[i]=function(){return{foo:1}},s[n](Boolean).foo!==1})},Hv}var Dk;function Ik(){if(Dk)return ck;Dk=1;var r=Pe(),e=nt(),t=Ds(),i=Lr(),n=Oi(),s=An(),a=Mv(),o=yd(),l=_d(),u=Cu(),c=hr(),h=xu(),f=c("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),g=function(b){if(!i(b))return!1;var E=b[f];return E!==void 0?!!E:t(b)},v=!p||!u("concat");return r({target:"Array",proto:!0,arity:1,forced:v},{concat:function(E){var x=n(this),D=l(x,0),O=0,P,R,A,I,S;for(P=-1,A=arguments.length;P<A;P++)if(S=P===-1?x:arguments[P],g(S))for(I=s(S),a(O+I),R=0;R<I;R++,O++)R in S&&o(D,O,S[R]);else a(O+1),o(D,O++,S);return D.length=O,D}}),ck}var Ak={},Ok={},Vv,Pk;function As(){if(Pk)return Vv;Pk=1;var r=Is(),e=String;return Vv=function(t){if(r(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},Vv}var Gv={},Wv,Rk;function zv(){if(Rk)return Wv;Rk=1;var r=zo(),e=Math.max,t=Math.min;return Wv=function(i,n){var s=r(i);return s<0?e(s+n,0):t(s,n)},Wv}var Yv,kk;function Tie(){if(kk)return Yv;kk=1;var r=Dn(),e=zv(),t=An(),i=function(n){return function(s,a,o){var l=r(s),u=t(l);if(u===0)return!n&&-1;var c=e(o,u),h;if(n&&a!==a){for(;u>c;)if(h=l[c++],h!==h)return!0}else for(;u>c;c++)if((n||c in l)&&l[c]===a)return n||c||0;return!n&&-1}};return Yv={includes:i(!0),indexOf:i(!1)},Yv}var Kv,Mk;function Du(){return Mk||(Mk=1,Kv={}),Kv}var Xv,$k;function Nk(){if($k)return Xv;$k=1;var r=ht(),e=cr(),t=Dn(),i=Tie().indexOf,n=Du(),s=r([].push);return Xv=function(a,o){var l=t(a),u=0,c=[],h;for(h in l)!e(n,h)&&e(l,h)&&s(c,h);for(;o.length>u;)e(l,h=o[u++])&&(~i(c,h)||s(c,h));return c},Xv}var Qv,Lk;function Zv(){return Lk||(Lk=1,Qv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Qv}var Jv,Fk;function bd(){if(Fk)return Jv;Fk=1;var r=Nk(),e=Zv();return Jv=Object.keys||function(i){return r(i,e)},Jv}var qk;function ey(){if(qk)return Gv;qk=1;var r=Xt(),e=ZR(),t=Pi(),i=es(),n=Dn(),s=bd();return Gv.f=r&&!e?Object.defineProperties:function(o,l){i(o);for(var u=n(l),c=s(l),h=c.length,f=0,p;h>f;)t.f(o,p=c[f++],u[p]);return o},Gv}var ty,Bk;function Sie(){if(Bk)return ty;Bk=1;var r=hi();return ty=r("document","documentElement"),ty}var ry,Uk;function Td(){if(Uk)return ry;Uk=1;var r=Go(),e=gd(),t=r("keys");return ry=function(i){return t[i]||(t[i]=e(i))},ry}var iy,jk;function Iu(){if(jk)return iy;jk=1;var r=es(),e=ey(),t=Zv(),i=Du(),n=Sie(),s=GR(),a=Td(),o=">",l="<",u="prototype",c="script",h=a("IE_PROTO"),f=function(){},p=function(x){return l+c+o+x+l+"/"+c+o},g=function(x){x.write(p("")),x.close();var D=x.parentWindow.Object;return x=null,D},v=function(){var x=s("iframe"),D="java"+c+":",O;return x.style.display="none",n.appendChild(x),x.src=String(D),O=x.contentWindow.document,O.open(),O.write(p("document.F=Object")),O.close(),O.F},b,E=function(){try{b=new ActiveXObject("htmlfile")}catch{}E=typeof document<"u"?document.domain&&b?g(b):v():g(b);for(var x=t.length;x--;)delete E[u][t[x]];return E()};return i[h]=!0,iy=Object.create||function(D,O){var P;return D!==null?(f[u]=r(D),P=new f,f[u]=null,P[h]=D):P=E(),O===void 0?P:e.f(P,O)},iy}var ny={},Hk;function Sd(){if(Hk)return ny;Hk=1;var r=Nk(),e=Zv(),t=e.concat("length","prototype");return ny.f=Object.getOwnPropertyNames||function(n){return r(n,t)},ny}var sy={},ay,Vk;function Yo(){if(Vk)return ay;Vk=1;var r=ht();return ay=r([].slice),ay}var Gk;function Wk(){if(Gk)return sy;Gk=1;var r=Jn(),e=Dn(),t=Sd().f,i=Yo(),n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(a){try{return t(a)}catch{return i(n)}};return sy.f=function(o){return n&&r(o)==="Window"?s(o):t(e(o))},sy}var oy={},zk;function xd(){return zk||(zk=1,oy.f=Object.getOwnPropertySymbols),oy}var ly,Yk;function Au(){if(Yk)return ly;Yk=1;var r=Wo();return ly=function(e,t,i,n){return n&&n.enumerable?e[t]=i:r(e,t,i),e},ly}var uy,Kk;function cy(){if(Kk)return uy;Kk=1;var r=Pi();return uy=function(e,t,i){return r.f(e,t,i)},uy}var hy={},Xk;function wd(){if(Xk)return hy;Xk=1;var r=hr();return hy.f=r,hy}var dy,Qk;function $t(){if(Qk)return dy;Qk=1;var r=ir(),e=cr(),t=wd(),i=Pi().f;return dy=function(n){var s=r.Symbol||(r.Symbol={});e(s,n)||i(s,n,{value:t.f(n)})},dy}var fy,Zk;function Jk(){if(Zk)return fy;Zk=1;var r=Zr(),e=hi(),t=hr(),i=Au();return fy=function(){var n=e("Symbol"),s=n&&n.prototype,a=s&&s.valueOf,o=t("toPrimitive");s&&!s[o]&&i(s,o,function(l){return r(a,this)},{arity:1})},fy}var py,eM;function xie(){if(eM)return py;eM=1;var r=Lv(),e=Is();return py=r?{}.toString:function(){return"[object "+e(this)+"]"},py}var my,tM;function ca(){if(tM)return my;tM=1;var r=Lv(),e=Pi().f,t=Wo(),i=cr(),n=xie(),s=hr(),a=s("toStringTag");return my=function(o,l,u,c){var h=u?o:o&&o.prototype;h&&(i(h,a)||e(h,a,{configurable:!0,value:l}),c&&!r&&t(h,"toString",n))},my}var gy,rM;function wie(){if(rM)return gy;rM=1;var r=Kt(),e=ur(),t=r.WeakMap;return gy=e(t)&&/native code/.test(String(t)),gy}var vy,iM;function Ou(){if(iM)return vy;iM=1;var r=wie(),e=Kt(),t=Lr(),i=Wo(),n=cr(),s=av(),a=Td(),o=Du(),l="Object already initialized",u=e.TypeError,c=e.WeakMap,h,f,p,g=function(x){return p(x)?f(x):h(x,{})},v=function(x){return function(D){var O;if(!t(D)||(O=f(D)).type!==x)throw new u("Incompatible receiver, "+x+" required");return O}};if(r||s.state){var b=s.state||(s.state=new c);b.get=b.get,b.has=b.has,b.set=b.set,h=function(x,D){if(b.has(x))throw new u(l);return D.facade=x,b.set(x,D),D},f=function(x){return b.get(x)||{}},p=function(x){return b.has(x)}}else{var E=a("state");o[E]=!0,h=function(x,D){if(n(x,E))throw new u(l);return D.facade=x,i(x,E,D),D},f=function(x){return n(x,E)?x[E]:{}},p=function(x){return n(x,E)}}return vy={set:h,get:f,has:p,enforce:g,getterFor:v},vy}var yy,nM;function Ko(){if(nM)return yy;nM=1;var r=Eu(),e=ht(),t=md(),i=Oi(),n=An(),s=_d(),a=e([].push),o=function(l){var u=l===1,c=l===2,h=l===3,f=l===4,p=l===6,g=l===7,v=l===5||p;return function(b,E,x,D){for(var O=i(b),P=t(O),R=n(P),A=r(E,x),I=0,S=D||s,C=u?S(b,R):c||g?S(b,0):void 0,$,F;R>I;I++)if((v||I in P)&&($=P[I],F=A($,I,O),l))if(u)C[I]=F;else if(F)switch(l){case 3:return!0;case 5:return $;case 6:return I;case 2:a(C,$)}else switch(l){case 4:return!1;case 7:a(C,$)}return p?-1:h||f?f:C}};return yy={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6),filterReject:o(7)},yy}var sM;function Eie(){if(sM)return Ok;sM=1;var r=Pe(),e=Kt(),t=Zr(),i=ht(),n=Vo(),s=Xt(),a=jo(),o=nt(),l=cr(),u=nr(),c=es(),h=Dn(),f=pv(),p=As(),g=Tu(),v=Iu(),b=bd(),E=Sd(),x=Wk(),D=xd(),O=vd(),P=Pi(),R=ey(),A=Lg(),I=Au(),S=cy(),C=Go(),$=Td(),F=Du(),j=gd(),z=hr(),J=wd(),Z=$t(),W=Jk(),Y=ca(),X=Ou(),ie=Ko().forEach,Q=$("hidden"),he="Symbol",ve="prototype",pe=X.set,be=X.getterFor(he),Oe=Object[ve],Qe=e.Symbol,Ze=Qe&&Qe[ve],tr=e.RangeError,Ir=e.TypeError,bt=e.QObject,Wt=O.f,Ot=P.f,Pt=x.f,ji=A.f,Tt=i([].push),mt=C("symbols"),St=C("op-symbols"),Ar=C("wks"),Ae=!bt||!bt[ve]||!bt[ve].findChild,et=function(Te,ae,me){var fe=Wt(Oe,ae);fe&&delete Oe[ae],Ot(Te,ae,me),fe&&Te!==Oe&&Ot(Oe,ae,fe)},Je=s&&o(function(){return v(Ot({},"a",{get:function(){return Ot(this,"a",{value:7}).a}})).a!==7})?et:Ot,Or=function(Te,ae){var me=mt[Te]=v(Ze);return pe(me,{type:he,tag:Te,description:ae}),s||(me.description=ae),me},sr=function(ae,me,fe){ae===Oe&&sr(St,me,fe),c(ae);var Se=f(me);return c(fe),l(mt,Se)?(fe.enumerable?(l(ae,Q)&&ae[Q][Se]&&(ae[Q][Se]=!1),fe=v(fe,{enumerable:g(0,!1)})):(l(ae,Q)||Ot(ae,Q,g(1,v(null))),ae[Q][Se]=!0),Je(ae,Se,fe)):Ot(ae,Se,fe)},Gr=function(ae,me){c(ae);var fe=h(me),Se=b(fe).concat(on(fe));return ie(Se,function(He){(!s||t(Pr,fe,He))&&sr(ae,He,fe[He])}),ae},sn=function(ae,me){return me===void 0?v(ae):Gr(v(ae),me)},Pr=function(ae){var me=f(ae),fe=t(ji,this,me);return this===Oe&&l(mt,me)&&!l(St,me)?!1:fe||!l(this,me)||!l(mt,me)||l(this,Q)&&this[Q][me]?fe:!0},ni=function(ae,me){var fe=h(ae),Se=f(me);if(!(fe===Oe&&l(mt,Se)&&!l(St,Se))){var He=Wt(fe,Se);return He&&l(mt,Se)&&!(l(fe,Q)&&fe[Q][Se])&&(He.enumerable=!0),He}},an=function(ae){var me=Pt(h(ae)),fe=[];return ie(me,function(Se){!l(mt,Se)&&!l(F,Se)&&Tt(fe,Se)}),fe},on=function(Te){var ae=Te===Oe,me=Pt(ae?St:h(Te)),fe=[];return ie(me,function(Se){l(mt,Se)&&(!ae||l(Oe,Se))&&Tt(fe,mt[Se])}),fe};return a||(Qe=function(){if(u(Ze,this))throw new Ir("Symbol is not a constructor");var ae=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),me=j(ae),fe=function(Se){var He=this===void 0?e:this;He===Oe&&t(fe,St,Se),l(He,Q)&&l(He[Q],me)&&(He[Q][me]=!1);var ln=g(1,Se);try{Je(He,me,ln)}catch(si){if(!(si instanceof tr))throw si;et(He,me,ln)}};return s&&Ae&&Je(Oe,me,{configurable:!0,set:fe}),Or(me,ae)},Ze=Qe[ve],I(Ze,"toString",function(){return be(this).tag}),I(Qe,"withoutSetter",function(Te){return Or(j(Te),Te)}),A.f=Pr,P.f=sr,R.f=Gr,O.f=ni,E.f=x.f=an,D.f=on,J.f=function(Te){return Or(z(Te),Te)},s&&(S(Ze,"description",{configurable:!0,get:function(){return be(this).description}}),n||I(Oe,"propertyIsEnumerable",Pr,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:Qe}),ie(b(Ar),function(Te){Z(Te)}),r({target:he,stat:!0,forced:!a},{useSetter:function(){Ae=!0},useSimple:function(){Ae=!1}}),r({target:"Object",stat:!0,forced:!a,sham:!s},{create:sn,defineProperty:sr,defineProperties:Gr,getOwnPropertyDescriptor:ni}),r({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:an}),W(),Y(Qe,he),F[Q]=!0,Ok}var aM={},_y,oM;function lM(){if(oM)return _y;oM=1;var r=jo();return _y=r&&!!Symbol.for&&!!Symbol.keyFor,_y}var uM;function Cie(){if(uM)return aM;uM=1;var r=Pe(),e=hi(),t=cr(),i=As(),n=Go(),s=lM(),a=n("string-to-symbol-registry"),o=n("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=i(l);if(t(a,u))return a[u];var c=e("Symbol")(u);return a[u]=c,o[c]=u,c}}),aM}var cM={},hM;function Die(){if(hM)return cM;hM=1;var r=Pe(),e=cr(),t=wu(),i=Ho(),n=Go(),s=lM(),a=n("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!t(l))throw new TypeError(i(l)+" is not a symbol");if(e(a,l))return a[l]}}),cM}var dM={},by,fM;function Iie(){if(fM)return by;fM=1;var r=ht(),e=Ds(),t=ur(),i=Jn(),n=As(),s=r([].push);return by=function(a){if(t(a))return a;if(e(a)){for(var o=a.length,l=[],u=0;u<o;u++){var c=a[u];typeof c=="string"?s(l,c):(typeof c=="number"||i(c)==="Number"||i(c)==="String")&&s(l,n(c))}var h=l.length,f=!0;return function(p,g){if(f)return f=!1,g;if(e(this))return g;for(var v=0;v<h;v++)if(l[v]===p)return g}}},by}var pM;function mM(){if(pM)return dM;pM=1;var r=Pe(),e=hi(),t=pd(),i=Zr(),n=ht(),s=nt(),a=ur(),o=wu(),l=Yo(),u=Iie(),c=jo(),h=String,f=e("JSON","stringify"),p=n(/./.exec),g=n("".charAt),v=n("".charCodeAt),b=n("".replace),E=n(1.1.toString),x=/[\uD800-\uDFFF]/g,D=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,P=!c||s(function(){var S=e("Symbol")("stringify detection");return f([S])!=="[null]"||f({a:S})!=="{}"||f(Object(S))!=="{}"}),R=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),A=function(S,C){var $=l(arguments),F=u(C);if(!(!a(F)&&(S===void 0||o(S))))return $[1]=function(j,z){if(a(F)&&(z=i(F,this,h(j),z)),!o(z))return z},t(f,null,$)},I=function(S,C,$){var F=g($,C-1),j=g($,C+1);return p(D,S)&&!p(O,j)||p(O,S)&&!p(D,F)?"\\u"+E(v(S,0),16):S};return f&&r({target:"JSON",stat:!0,arity:3,forced:P||R},{stringify:function(C,$,F){var j=l(arguments),z=t(P?A:f,null,j);return R&&typeof z=="string"?b(z,x,I):z}}),dM}var gM={},vM;function Aie(){if(vM)return gM;vM=1;var r=Pe(),e=jo(),t=nt(),i=xd(),n=Oi(),s=!e||t(function(){i.f(1)});return r({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(o){var l=i.f;return l?l(n(o)):[]}}),gM}var yM;function _M(){return yM||(yM=1,Eie(),Cie(),Die(),mM(),Aie()),Ak}var bM={},TM;function SM(){if(TM)return bM;TM=1;var r=$t();return r("asyncDispose"),bM}var xM={},wM;function Oie(){if(wM)return xM;wM=1;var r=$t();return r("asyncIterator"),xM}var EM={},CM;function DM(){if(CM)return EM;CM=1;var r=$t();return r("dispose"),EM}var IM={},AM;function Pie(){if(AM)return IM;AM=1;var r=$t();return r("hasInstance"),IM}var OM={},PM;function Rie(){if(PM)return OM;PM=1;var r=$t();return r("isConcatSpreadable"),OM}var RM={},kM;function MM(){if(kM)return RM;kM=1;var r=$t();return r("iterator"),RM}var $M={},NM;function kie(){if(NM)return $M;NM=1;var r=$t();return r("match"),$M}var LM={},FM;function Mie(){if(FM)return LM;FM=1;var r=$t();return r("matchAll"),LM}var qM={},BM;function $ie(){if(BM)return qM;BM=1;var r=$t();return r("replace"),qM}var UM={},jM;function Nie(){if(jM)return UM;jM=1;var r=$t();return r("search"),UM}var HM={},VM;function Lie(){if(VM)return HM;VM=1;var r=$t();return r("species"),HM}var GM={},WM;function Fie(){if(WM)return GM;WM=1;var r=$t();return r("split"),GM}var zM={},YM;function KM(){if(YM)return zM;YM=1;var r=$t(),e=Jk();return r("toPrimitive"),e(),zM}var XM={},QM;function qie(){if(QM)return XM;QM=1;var r=hi(),e=$t(),t=ca();return e("toStringTag"),t(r("Symbol"),"Symbol"),XM}var ZM={},JM;function Bie(){if(JM)return ZM;JM=1;var r=$t();return r("unscopables"),ZM}var e$={},t$;function Uie(){if(t$)return e$;t$=1;var r=Kt(),e=ca();return e(r.JSON,"JSON",!0),e$}var Ty,r$;function jie(){if(r$)return Ty;r$=1,Ik(),_M(),SM(),Oie(),DM(),Pie(),Rie(),MM(),kie(),Mie(),$ie(),Nie(),Lie(),Fie(),KM(),qie(),Bie(),Uie();var r=ir();return Ty=r.Symbol,Ty}var i$={},Sy,n$;function s$(){return n$||(n$=1,Sy=function(){}),Sy}var xy,a$;function Xo(){return a$||(a$=1,xy={}),xy}var wy,o$;function Hie(){if(o$)return wy;o$=1;var r=Xt(),e=cr(),t=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,n=e(t,"name"),s=n&&(function(){}).name==="something",a=n&&(!r||r&&i(t,"name").configurable);return wy={EXISTS:n,PROPER:s,CONFIGURABLE:a},wy}var Ey,l$;function Vie(){if(l$)return Ey;l$=1;var r=nt();return Ey=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),Ey}var Cy,u$;function c$(){if(u$)return Cy;u$=1;var r=cr(),e=ur(),t=Oi(),i=Td(),n=Vie(),s=i("IE_PROTO"),a=Object,o=a.prototype;return Cy=n?a.getPrototypeOf:function(l){var u=t(l);if(r(u,s))return u[s];var c=u.constructor;return e(c)&&u instanceof c?c.prototype:u instanceof a?o:null},Cy}var Dy,h$;function d$(){if(h$)return Dy;h$=1;var r=nt(),e=ur(),t=Lr(),i=Iu(),n=c$(),s=Au(),a=hr(),o=Vo(),l=a("iterator"),u=!1,c,h,f;[].keys&&(f=[].keys(),"next"in f?(h=n(n(f)),h!==Object.prototype&&(c=h)):u=!0);var p=!t(c)||r(function(){var g={};return c[l].call(g)!==g});return p?c={}:o&&(c=i(c)),e(c[l])||s(c,l,function(){return this}),Dy={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:u},Dy}var Iy,f$;function Gie(){if(f$)return Iy;f$=1;var r=d$().IteratorPrototype,e=Iu(),t=Tu(),i=ca(),n=Xo(),s=function(){return this};return Iy=function(a,o,l,u){var c=o+" Iterator";return a.prototype=e(r,{next:t(+!u,l)}),i(a,c,!1,!0),n[c]=s,a},Iy}var Ay,p$;function Wie(){if(p$)return Ay;p$=1;var r=ht(),e=In();return Ay=function(t,i,n){try{return r(e(Object.getOwnPropertyDescriptor(t,i)[n]))}catch{}},Ay}var Oy,m$;function zie(){if(m$)return Oy;m$=1;var r=Lr();return Oy=function(e){return r(e)||e===null},Oy}var Py,g$;function Yie(){if(g$)return Py;g$=1;var r=zie(),e=String,t=TypeError;return Py=function(i){if(r(i))return i;throw new t("Can't set "+e(i)+" as a prototype")},Py}var Ry,v$;function Kie(){if(v$)return Ry;v$=1;var r=Wie(),e=Lr(),t=ua(),i=Yie();return Ry=Object.setPrototypeOf||("__proto__"in{}?(function(){var n=!1,s={},a;try{a=r(Object.prototype,"__proto__","set"),a(s,[]),n=s instanceof Array}catch{}return function(l,u){return t(l),i(u),e(l)&&(n?a(l,u):l.__proto__=u),l}})():void 0),Ry}var ky,y$;function My(){if(y$)return ky;y$=1;var r=Pe(),e=Zr(),t=Vo(),i=Hie(),n=ur(),s=Gie(),a=c$(),o=Kie(),l=ca(),u=Wo(),c=Au(),h=hr(),f=Xo(),p=d$(),g=i.PROPER,v=i.CONFIGURABLE,b=p.IteratorPrototype,E=p.BUGGY_SAFARI_ITERATORS,x=h("iterator"),D="keys",O="values",P="entries",R=function(){return this};return ky=function(A,I,S,C,$,F,j){s(S,I,C);var z=function(pe){if(pe===$&&X)return X;if(!E&&pe&&pe in W)return W[pe];switch(pe){case D:return function(){return new S(this,pe)};case O:return function(){return new S(this,pe)};case P:return function(){return new S(this,pe)}}return function(){return new S(this)}},J=I+" Iterator",Z=!1,W=A.prototype,Y=W[x]||W["@@iterator"]||$&&W[$],X=!E&&Y||z($),ie=I==="Array"&&W.entries||Y,Q,he,ve;if(ie&&(Q=a(ie.call(new A)),Q!==Object.prototype&&Q.next&&(!t&&a(Q)!==b&&(o?o(Q,b):n(Q[x])||c(Q,x,R)),l(Q,J,!0,!0),t&&(f[J]=R))),g&&$===O&&Y&&Y.name!==O&&(!t&&v?u(W,"name",O):(Z=!0,X=function(){return e(Y,this)})),$)if(he={values:z(O),keys:F?X:z(D),entries:z(P)},j)for(ve in he)(E||Z||!(ve in W))&&c(W,ve,he[ve]);else r({target:I,proto:!0,forced:E||Z},he);return(!t||j)&&W[x]!==X&&c(W,x,X,{name:$}),f[I]=X,he},ky}var $y,_$;function Ny(){return _$||(_$=1,$y=function(r,e){return{value:r,done:e}}),$y}var Ly,b$;function Os(){if(b$)return Ly;b$=1;var r=Dn(),e=s$(),t=Xo(),i=Ou(),n=Pi().f,s=My(),a=Ny(),o=Vo(),l=Xt(),u="Array Iterator",c=i.set,h=i.getterFor(u);Ly=s(Array,"Array",function(p,g){c(this,{type:u,target:r(p),index:0,kind:g})},function(){var p=h(this),g=p.target,v=p.index++;if(!g||v>=g.length)return p.target=null,a(void 0,!0);switch(p.kind){case"keys":return a(v,!1);case"values":return a(g[v],!1)}return a([v,g[v]],!1)},"values");var f=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!o&&l&&f.name!=="values")try{n(f,"name",{value:"values"})}catch{}return Ly}var Fy,T$;function Xie(){return T$||(T$=1,Fy={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Fy}var S$;function Ps(){if(S$)return i$;S$=1,Os();var r=Xie(),e=Kt(),t=ca(),i=Xo();for(var n in r)t(e[n],n),i[n]=i.Array;return i$}var qy,x$;function w$(){if(x$)return qy;x$=1;var r=jie();return Ps(),qy=r,qy}var E$={},C$;function Qie(){if(C$)return E$;C$=1;var r=hr(),e=Pi().f,t=r("metadata"),i=Function.prototype;return i[t]===void 0&&e(i,t,{value:null}),E$}var D$={},I$;function Zie(){return I$||(I$=1,SM()),D$}var A$={},O$;function Jie(){return O$||(O$=1,DM()),A$}var P$={},R$;function ene(){if(R$)return P$;R$=1;var r=$t();return r("metadata"),P$}var By,k$;function tne(){if(k$)return By;k$=1;var r=w$();return Qie(),Zie(),Jie(),ene(),By=r,By}var M$={},Uy,$$;function N$(){if($$)return Uy;$$=1;var r=hi(),e=ht(),t=r("Symbol"),i=t.keyFor,n=e(t.prototype.valueOf);return Uy=t.isRegisteredSymbol||function(a){try{return i(n(a))!==void 0}catch{return!1}},Uy}var L$;function rne(){if(L$)return M$;L$=1;var r=Pe(),e=N$();return r({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),M$}var F$={},jy,q$;function B$(){if(q$)return jy;q$=1;for(var r=Go(),e=hi(),t=ht(),i=wu(),n=hr(),s=e("Symbol"),a=s.isWellKnownSymbol,o=e("Object","getOwnPropertyNames"),l=t(s.prototype.valueOf),u=r("wks"),c=0,h=o(s),f=h.length;c<f;c++)try{var p=h[c];i(s[p])&&n(p)}catch{}return jy=function(v){if(a&&a(v))return!0;try{for(var b=l(v),E=0,x=o(u),D=x.length;E<D;E++)if(u[x[E]]==b)return!0}catch{}return!1},jy}var U$;function ine(){if(U$)return F$;U$=1;var r=Pe(),e=B$();return r({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),F$}var j$={},H$;function nne(){if(H$)return j$;H$=1;var r=$t();return r("customMatcher"),j$}var V$={},G$;function sne(){if(G$)return V$;G$=1;var r=$t();return r("observable"),V$}var W$={},z$;function ane(){if(z$)return W$;z$=1;var r=Pe(),e=N$();return r({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),W$}var Y$={},K$;function one(){if(K$)return Y$;K$=1;var r=Pe(),e=B$();return r({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),Y$}var X$={},Q$;function lne(){if(Q$)return X$;Q$=1;var r=$t();return r("matcher"),X$}var Z$={},J$;function une(){if(J$)return Z$;J$=1;var r=$t();return r("metadataKey"),Z$}var eN={},tN;function cne(){if(tN)return eN;tN=1;var r=$t();return r("patternMatch"),eN}var rN={},iN;function hne(){if(iN)return rN;iN=1;var r=$t();return r("replaceAll"),rN}var Hy,nN;function dne(){if(nN)return Hy;nN=1;var r=tne();return rne(),ine(),nne(),sne(),ane(),one(),lne(),une(),cne(),hne(),Hy=r,Hy}var Vy,sN;function fne(){return sN||(sN=1,Vy=dne()),Vy}var pne=fne(),Ed=Be(pne),aN={},Gy,oN;function mne(){if(oN)return Gy;oN=1;var r=ht(),e=zo(),t=As(),i=ua(),n=r("".charAt),s=r("".charCodeAt),a=r("".slice),o=function(l){return function(u,c){var h=t(i(u)),f=e(c),p=h.length,g,v;return f<0||f>=p?l?"":void 0:(g=s(h,f),g<55296||g>56319||f+1===p||(v=s(h,f+1))<56320||v>57343?l?n(h,f):g:l?a(h,f,f+2):(g-55296<<10)+(v-56320)+65536)}};return Gy={codeAt:o(!1),charAt:o(!0)},Gy}var lN;function Cd(){if(lN)return aN;lN=1;var r=mne().charAt,e=As(),t=Ou(),i=My(),n=Ny(),s="String Iterator",a=t.set,o=t.getterFor(s);return i(String,"String",function(l){a(this,{type:s,string:e(l),index:0})},function(){var u=o(this),c=u.string,h=u.index,f;return h>=c.length?n(void 0,!0):(f=r(c,h),u.index+=f.length,n(f,!1))}),aN}var Wy,uN;function gne(){if(uN)return Wy;uN=1,Os(),Cd(),MM();var r=wd();return Wy=r.f("iterator"),Wy}var zy,cN;function hN(){if(cN)return zy;cN=1;var r=gne();return Ps(),zy=r,zy}var Yy,dN;function vne(){if(dN)return Yy;dN=1;var r=hN();return Yy=r,Yy}var Ky,fN;function yne(){if(fN)return Ky;fN=1;var r=vne();return Ky=r,Ky}var Xy,pN;function _ne(){return pN||(pN=1,Xy=yne()),Xy}var bne=_ne(),Tne=Be(bne);function Pu(r){"@babel/helpers - typeof";return Pu=typeof Ed=="function"&&typeof Tne=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Ed=="function"&&e.constructor===Ed&&e!==Ed.prototype?"symbol":typeof e},Pu(r)}var Qy,mN;function Sne(){if(mN)return Qy;mN=1,KM();var r=wd();return Qy=r.f("toPrimitive"),Qy}var Zy,gN;function xne(){if(gN)return Zy;gN=1;var r=Sne();return Zy=r,Zy}var Jy,vN;function wne(){if(vN)return Jy;vN=1;var r=xne();return Jy=r,Jy}var e0,yN;function Ene(){if(yN)return e0;yN=1;var r=wne();return e0=r,e0}var t0,_N;function Cne(){return _N||(_N=1,t0=Ene()),t0}var Dne=Cne(),Ine=Be(Dne);function Ane(r,e){if(Pu(r)!="object"||!r)return r;var t=r[Ine];if(t!==void 0){var i=t.call(r,e);if(Pu(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function One(r){var e=Ane(r,"string");return Pu(e)=="symbol"?e:e+""}function Ri(r,e,t){return(e=One(e))in r?vie(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var bN={},r0,TN;function Pne(){if(TN)return r0;TN=1;var r=ht(),e=In(),t=Lr(),i=cr(),n=Yo(),s=bu(),a=Function,o=r([].concat),l=r([].join),u={},c=function(h,f,p){if(!i(u,f)){for(var g=[],v=0;v<f;v++)g[v]="a["+v+"]";u[f]=a("C,a","return new C("+l(g,",")+")")}return u[f](h,p)};return r0=s?a.bind:function(f){var p=e(this),g=p.prototype,v=n(arguments,1),b=function(){var x=o(v,n(arguments));return this instanceof b?c(p,x.length,x):p.apply(f,x)};return t(g)&&(b.prototype=g),b},r0}var SN;function Rne(){if(SN)return bN;SN=1;var r=Pe(),e=Pne();return r({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),bN}var i0,xN;function Fr(){if(xN)return i0;xN=1;var r=Kt(),e=ir();return i0=function(t,i){var n=e[t+"Prototype"],s=n&&n[i];if(s)return s;var a=r[t],o=a&&a.prototype;return o&&o[i]},i0}var n0,wN;function kne(){if(wN)return n0;wN=1,Rne();var r=Fr();return n0=r("Function","bind"),n0}var s0,EN;function Mne(){if(EN)return s0;EN=1;var r=nr(),e=kne(),t=Function.prototype;return s0=function(i){var n=i.bind;return i===t||r(t,i)&&n===t.bind?e:n},s0}var a0,CN;function $ne(){if(CN)return a0;CN=1;var r=Mne();return a0=r,a0}var o0,DN;function Nne(){return DN||(DN=1,o0=$ne()),o0}var Lne=Nne(),ha=Be(Lne),IN={},l0,AN;function Fne(){if(AN)return l0;AN=1;var r=In(),e=Oi(),t=md(),i=An(),n=TypeError,s="Reduce of empty array with no initial value",a=function(o){return function(l,u,c,h){var f=e(l),p=t(f),g=i(f);if(r(u),g===0&&c<2)throw new n(s);var v=o?g-1:0,b=o?-1:1;if(c<2)for(;;){if(v in p){h=p[v],v+=b;break}if(v+=b,o?v<0:g<=v)throw new n(s)}for(;o?v>=0:g>v;v+=b)v in p&&(h=u(h,p[v],v,f));return h}};return l0={left:a(!1),right:a(!0)},l0}var u0,ON;function Dd(){if(ON)return u0;ON=1;var r=nt();return u0=function(e,t){var i=[][e];return!!i&&r(function(){i.call(null,t||function(){return 1},1)})},u0}var c0,PN;function RN(){if(PN)return c0;PN=1;var r=Kt(),e=Uo(),t=Jn(),i=function(n){return e.slice(0,n.length)===n};return c0=(function(){return i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":r.Bun&&typeof Bun.version=="string"?"BUN":r.Deno&&typeof Deno.version=="object"?"DENO":t(r.process)==="process"?"NODE":r.window&&r.document?"BROWSER":"REST"})(),c0}var h0,kN;function qne(){if(kN)return h0;kN=1;var r=RN();return h0=r==="NODE",h0}var MN;function Bne(){if(MN)return IN;MN=1;var r=Pe(),e=Fne().left,t=Dd(),i=xu(),n=qne(),s=!n&&i>79&&i<83,a=s||!t("reduce");return r({target:"Array",proto:!0,forced:a},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),IN}var d0,$N;function Une(){if($N)return d0;$N=1,Bne();var r=Fr();return d0=r("Array","reduce"),d0}var f0,NN;function jne(){if(NN)return f0;NN=1;var r=nr(),e=Une(),t=Array.prototype;return f0=function(i){var n=i.reduce;return i===t||r(t,i)&&n===t.reduce?e:n},f0}var p0,LN;function Hne(){if(LN)return p0;LN=1;var r=jne();return p0=r,p0}var m0,FN;function Vne(){return FN||(FN=1,m0=Hne()),m0}var Gne=Vne(),qN=Be(Gne),BN={},UN;function Wne(){if(UN)return BN;UN=1;var r=Pe(),e=Ko().filter,t=Cu(),i=t("filter");return r({target:"Array",proto:!0,forced:!i},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),BN}var g0,jN;function zne(){if(jN)return g0;jN=1,Wne();var r=Fr();return g0=r("Array","filter"),g0}var v0,HN;function Yne(){if(HN)return v0;HN=1;var r=nr(),e=zne(),t=Array.prototype;return v0=function(i){var n=i.filter;return i===t||r(t,i)&&n===t.filter?e:n},v0}var y0,VN;function Kne(){if(VN)return y0;VN=1;var r=Yne();return y0=r,y0}var _0,GN;function Xne(){return GN||(GN=1,_0=Kne()),_0}var Qne=Xne(),dr=Be(Qne),WN={},zN;function Zne(){if(zN)return WN;zN=1;var r=Pe(),e=Ko().map,t=Cu(),i=t("map");return r({target:"Array",proto:!0,forced:!i},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),WN}var b0,YN;function Jne(){if(YN)return b0;YN=1,Zne();var r=Fr();return b0=r("Array","map"),b0}var T0,KN;function ese(){if(KN)return T0;KN=1;var r=nr(),e=Jne(),t=Array.prototype;return T0=function(i){var n=i.map;return i===t||r(t,i)&&n===t.map?e:n},T0}var S0,XN;function tse(){if(XN)return S0;XN=1;var r=ese();return S0=r,S0}var x0,QN;function rse(){return QN||(QN=1,x0=tse()),x0}var ise=rse(),di=Be(ise),ZN={},w0,JN;function nse(){if(JN)return w0;JN=1;var r=Ds(),e=An(),t=Mv(),i=Eu(),n=function(s,a,o,l,u,c,h,f){for(var p=u,g=0,v=h?i(h,f):!1,b,E;g<l;)g in o&&(b=v?v(o[g],g,a):o[g],c>0&&r(b)?(E=e(b),p=n(s,a,b,E,p,c-1)-1):(t(p+1),s[p]=b),p++),g++;return p};return w0=n,w0}var eL;function sse(){if(eL)return ZN;eL=1;var r=Pe(),e=nse(),t=In(),i=Oi(),n=An(),s=_d();return r({target:"Array",proto:!0},{flatMap:function(o){var l=i(this),u=n(l),c;return t(o),c=s(l,0),c.length=e(c,l,l,u,0,1,o,arguments.length>1?arguments[1]:void 0),c}}),ZN}var tL={},rL;function ase(){if(rL)return tL;rL=1;var r=s$();return r("flatMap"),tL}var E0,iL;function ose(){if(iL)return E0;iL=1,sse(),ase();var r=Fr();return E0=r("Array","flatMap"),E0}var C0,nL;function lse(){if(nL)return C0;nL=1;var r=nr(),e=ose(),t=Array.prototype;return C0=function(i){var n=i.flatMap;return i===t||r(t,i)&&n===t.flatMap?e:n},C0}var D0,sL;function use(){if(sL)return D0;sL=1;var r=lse();return D0=r,D0}var I0,aL;function cse(){return aL||(aL=1,I0=use()),I0}var hse=cse(),dse=Be(hse);function fse(r){return new mse(r)}class pse{constructor(e,t,i){var n,s,a;Ri(this,"_listeners",{add:ha(n=this._add).call(n,this),remove:ha(s=this._remove).call(s,this),update:ha(a=this._update).call(a,this)}),this._source=e,this._transformers=t,this._target=i}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){var t;return qN(t=this._transformers).call(t,(i,n)=>n(i),e)}_add(e,t){t!=null&&this._target.add(this._transformItems(this._source.get(t.items)))}_update(e,t){t!=null&&this._target.update(this._transformItems(this._source.get(t.items)))}_remove(e,t){t!=null&&this._target.remove(this._transformItems(t.oldData))}}class mse{constructor(e){Ri(this,"_transformers",[]),this._source=e}filter(e){return this._transformers.push(t=>dr(t).call(t,e)),this}map(e){return this._transformers.push(t=>di(t).call(t,e)),this}flatMap(e){return this._transformers.push(t=>dse(t).call(t,e)),this}to(e){return new pse(this._source,this._transformers,e)}}var A0,oL;function gse(){return oL||(oL=1,A0=w$()),A0}var vse=gse(),yse=Be(vse),lL={},uL;function _se(){if(uL)return lL;uL=1;var r=Pe(),e=Ds(),t=xk(),i=Lr(),n=zv(),s=An(),a=Dn(),o=yd(),l=hr(),u=Cu(),c=Yo(),h=u("slice"),f=l("species"),p=Array,g=Math.max;return r({target:"Array",proto:!0,forced:!h},{slice:function(b,E){var x=a(this),D=s(x),O=n(b,D),P=n(E===void 0?D:E,D),R,A,I;if(e(x)&&(R=x.constructor,t(R)&&(R===p||e(R.prototype))?R=void 0:i(R)&&(R=R[f],R===null&&(R=void 0)),R===p||R===void 0))return c(x,O,P);for(A=new(R===void 0?p:R)(g(P-O,0)),I=0;O<P;O++,I++)O in x&&o(A,I,x[O]);return A.length=I,A}}),lL}var O0,cL;function bse(){if(cL)return O0;cL=1,_se();var r=Fr();return O0=r("Array","slice"),O0}var P0,hL;function Tse(){if(hL)return P0;hL=1;var r=nr(),e=bse(),t=Array.prototype;return P0=function(i){var n=i.slice;return i===t||r(t,i)&&n===t.slice?e:n},P0}var R0,dL;function Sse(){if(dL)return R0;dL=1;var r=Tse();return R0=r,R0}var k0,fL;function xse(){return fL||(fL=1,k0=Sse()),k0}var wse=xse(),Ese=Be(wse),pL={},M0,mL;function gL(){if(mL)return M0;mL=1;var r=hi(),e=ht(),t=Sd(),i=xd(),n=es(),s=e([].concat);return M0=r("Reflect","ownKeys")||function(o){var l=t.f(n(o)),u=i.f;return u?s(l,u(o)):l},M0}var vL;function Cse(){if(vL)return pL;vL=1;var r=Pe(),e=gL();return r({target:"Reflect",stat:!0},{ownKeys:e}),pL}var $0,yL;function Dse(){if(yL)return $0;yL=1,Cse();var r=ir();return $0=r.Reflect.ownKeys,$0}var N0,_L;function Ise(){if(_L)return N0;_L=1;var r=Dse();return N0=r,N0}var L0,bL;function Ase(){return bL||(bL=1,L0=Ise()),L0}var Ose=Ase(),TL=Be(Ose),SL={},xL;function Pse(){if(xL)return SL;xL=1;var r=Pe(),e=Ds();return r({target:"Array",stat:!0},{isArray:e}),SL}var F0,wL;function Rse(){if(wL)return F0;wL=1,Pse();var r=ir();return F0=r.Array.isArray,F0}var q0,EL;function kse(){if(EL)return q0;EL=1;var r=Rse();return q0=r,q0}var B0,CL;function Mse(){return CL||(CL=1,B0=kse()),B0}var $se=Mse(),Ji=Be($se),DL={},IL;function Nse(){if(IL)return DL;IL=1;var r=Pe(),e=Oi(),t=bd(),i=nt(),n=i(function(){t(1)});return r({target:"Object",stat:!0,forced:n},{keys:function(a){return t(e(a))}}),DL}var U0,AL;function Lse(){if(AL)return U0;AL=1,Nse();var r=ir();return U0=r.Object.keys,U0}var j0,OL;function Fse(){if(OL)return j0;OL=1;var r=Lse();return j0=r,j0}var H0,PL;function qse(){return PL||(PL=1,H0=Fse()),H0}var Bse=qse(),V0=Be(Bse),RL={},G0,kL;function Use(){if(kL)return G0;kL=1;var r=Ko().forEach,e=Dd(),t=e("forEach");return G0=t?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)},G0}var ML;function jse(){if(ML)return RL;ML=1;var r=Pe(),e=Use();return r({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),RL}var W0,$L;function Hse(){if($L)return W0;$L=1,jse();var r=Fr();return W0=r("Array","forEach"),W0}var z0,NL;function Vse(){if(NL)return z0;NL=1;var r=Hse();return z0=r,z0}var Y0,LL;function Gse(){if(LL)return Y0;LL=1;var r=Is(),e=cr(),t=nr(),i=Vse(),n=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Y0=function(a){var o=a.forEach;return a===n||t(n,a)&&o===n.forEach||e(s,r(a))?i:o},Y0}var K0,FL;function Wse(){return FL||(FL=1,K0=Gse()),K0}var zse=Wse(),Rs=Be(zse),qL={},BL;function Yse(){if(BL)return qL;BL=1;var r=Pe(),e=ht(),t=Ds(),i=e([].reverse),n=[1,2];return r({target:"Array",proto:!0,forced:String(n)===String(n.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),i(this)}}),qL}var X0,UL;function Kse(){if(UL)return X0;UL=1,Yse();var r=Fr();return X0=r("Array","reverse"),X0}var Q0,jL;function Xse(){if(jL)return Q0;jL=1;var r=nr(),e=Kse(),t=Array.prototype;return Q0=function(i){var n=i.reverse;return i===t||r(t,i)&&n===t.reverse?e:n},Q0}var Z0,HL;function Qse(){if(HL)return Z0;HL=1;var r=Xse();return Z0=r,Z0}var J0,VL;function Zse(){return VL||(VL=1,J0=Qse()),J0}var Jse=Zse(),eae=Be(Jse),GL={},e_,WL;function tae(){if(WL)return e_;WL=1;var r=Xt(),e=Ds(),t=TypeError,i=Object.getOwnPropertyDescriptor,n=r&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}})();return e_=n?function(s,a){if(e(s)&&!i(s,"length").writable)throw new t("Cannot set read only .length");return s.length=a}:function(s,a){return s.length=a},e_}var t_,zL;function YL(){if(zL)return t_;zL=1;var r=Ho(),e=TypeError;return t_=function(t,i){if(!delete t[i])throw new e("Cannot delete property "+r(i)+" of "+r(t))},t_}var KL;function rae(){if(KL)return GL;KL=1;var r=Pe(),e=Oi(),t=zv(),i=zo(),n=An(),s=tae(),a=Mv(),o=_d(),l=yd(),u=YL(),c=Cu(),h=c("splice"),f=Math.max,p=Math.min;return r({target:"Array",proto:!0,forced:!h},{splice:function(v,b){var E=e(this),x=n(E),D=t(v,x),O=arguments.length,P,R,A,I,S,C;for(O===0?P=R=0:O===1?(P=0,R=x-D):(P=O-2,R=p(f(i(b),0),x-D)),a(x+P-R),A=o(E,R),I=0;I<R;I++)S=D+I,S in E&&l(A,I,E[S]);if(A.length=R,P<R){for(I=D;I<x-R;I++)S=I+R,C=I+P,S in E?E[C]=E[S]:u(E,C);for(I=x;I>x-R+P;I--)u(E,I-1)}else if(P>R)for(I=x-R;I>D;I--)S=I+R-1,C=I+P-1,S in E?E[C]=E[S]:u(E,C);for(I=0;I<P;I++)E[I+D]=arguments[I+2];return s(E,x-R+P),A}}),GL}var r_,XL;function iae(){if(XL)return r_;XL=1,rae();var r=Fr();return r_=r("Array","splice"),r_}var i_,QL;function nae(){if(QL)return i_;QL=1;var r=nr(),e=iae(),t=Array.prototype;return i_=function(i){var n=i.splice;return i===t||r(t,i)&&n===t.splice?e:n},i_}var n_,ZL;function sae(){if(ZL)return n_;ZL=1;var r=nae();return n_=r,n_}var s_,JL;function aae(){return JL||(JL=1,s_=sae()),s_}var oae=aae(),eF=Be(oae),tF={},a_,rF;function lae(){if(rF)return a_;rF=1;var r=Xt(),e=ht(),t=Zr(),i=nt(),n=bd(),s=xd(),a=Lg(),o=Oi(),l=md(),u=Object.assign,c=Object.defineProperty,h=e([].concat);return a_=!u||i(function(){if(r&&u({b:1},u(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},g=Symbol("assign detection"),v="abcdefghijklmnopqrst";return f[g]=7,v.split("").forEach(function(b){p[b]=b}),u({},f)[g]!==7||n(u({},p)).join("")!==v})?function(p,g){for(var v=o(p),b=arguments.length,E=1,x=s.f,D=a.f;b>E;)for(var O=l(arguments[E++]),P=x?h(n(O),x(O)):n(O),R=P.length,A=0,I;R>A;)I=P[A++],(!r||t(D,O,I))&&(v[I]=O[I]);return v}:u,a_}var iF;function uae(){if(iF)return tF;iF=1;var r=Pe(),e=lae();return r({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),tF}var o_,nF;function cae(){if(nF)return o_;nF=1,uae();var r=ir();return o_=r.Object.assign,o_}var l_,sF;function hae(){if(sF)return l_;sF=1;var r=cae();return l_=r,l_}var u_,aF;function dae(){return aF||(aF=1,u_=hae()),u_}var fae=dae(),oF=Be(fae),c_,lF;function pae(){if(lF)return c_;lF=1,Ik();var r=Fr();return c_=r("Array","concat"),c_}var h_,uF;function mae(){if(uF)return h_;uF=1;var r=nr(),e=pae(),t=Array.prototype;return h_=function(i){var n=i.concat;return i===t||r(t,i)&&n===t.concat?e:n},h_}var d_,cF;function gae(){if(cF)return d_;cF=1;var r=mae();return d_=r,d_}var f_,hF;function vae(){return hF||(hF=1,f_=gae()),f_}var yae=vae(),_ae=Be(yae),dF={},fF;function bae(){if(fF)return dF;fF=1;var r=Pe(),e=Xt(),t=Iu();return r({target:"Object",stat:!0,sham:!e},{create:t}),dF}var p_,pF;function Tae(){if(pF)return p_;pF=1,bae();var r=ir(),e=r.Object;return p_=function(i,n){return e.create(i,n)},p_}var m_,mF;function Sae(){if(mF)return m_;mF=1;var r=Tae();return m_=r,m_}var g_,gF;function xae(){return gF||(gF=1,g_=Sae()),g_}var wae=xae(),Eae=Be(wae),vF={},v_,yF;function Cae(){if(yF)return v_;yF=1;var r=zo(),e=As(),t=ua(),i=RangeError;return v_=function(s){var a=e(t(this)),o="",l=r(s);if(l<0||l===1/0)throw new i("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(a+=a))l&1&&(o+=a);return o},v_}var y_,_F;function Dae(){if(_F)return y_;_F=1;var r=ht(),e=mk(),t=As(),i=Cae(),n=ua(),s=r(i),a=r("".slice),o=Math.ceil,l=function(u){return function(c,h,f){var p=t(n(c)),g=e(h),v=p.length,b=f===void 0?" ":t(f),E,x;return g<=v||b===""?p:(E=g-v,x=s(b,o(E/b.length)),x.length>E&&(x=a(x,0,E)),u?p+x:x+p)}};return y_={start:l(!1),end:l(!0)},y_}var __,bF;function Iae(){if(bF)return __;bF=1;var r=ht(),e=nt(),t=Dae().start,i=RangeError,n=isFinite,s=Math.abs,a=Date.prototype,o=a.toISOString,l=r(a.getTime),u=r(a.getUTCDate),c=r(a.getUTCFullYear),h=r(a.getUTCHours),f=r(a.getUTCMilliseconds),p=r(a.getUTCMinutes),g=r(a.getUTCMonth),v=r(a.getUTCSeconds);return __=e(function(){return o.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){o.call(new Date(NaN))})?function(){if(!n(l(this)))throw new i("Invalid time value");var E=this,x=c(E),D=f(E),O=x<0?"-":x>9999?"+":"";return O+t(s(x),O?6:4,0)+"-"+t(g(E)+1,2,0)+"-"+t(u(E),2,0)+"T"+t(h(E),2,0)+":"+t(p(E),2,0)+":"+t(v(E),2,0)+"."+t(D,3,0)+"Z"}:o,__}var TF;function Aae(){if(TF)return vF;TF=1;var r=Pe(),e=Zr(),t=Oi(),i=jR(),n=Iae(),s=Jn(),a=nt(),o=a(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return r({target:"Date",proto:!0,forced:o},{toJSON:function(u){var c=t(this),h=i(c,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in c)&&s(c)==="Date"?e(n,c):c.toISOString()}}),vF}var b_,SF;function Oae(){if(SF)return b_;SF=1,Aae(),mM();var r=ir(),e=pd();return r.JSON||(r.JSON={stringify:JSON.stringify}),b_=function(i,n,s){return e(r.JSON.stringify,null,arguments)},b_}var T_,xF;function Pae(){if(xF)return T_;xF=1;var r=Oae();return T_=r,T_}var S_,wF;function Rae(){return wF||(wF=1,S_=Pae()),S_}var kae=Rae(),Mae=Be(kae),EF={},CF={},x_,DF;function $ae(){if(DF)return x_;DF=1;var r=TypeError;return x_=function(e,t){if(e<t)throw new r("Not enough arguments");return e},x_}var w_,IF;function AF(){if(IF)return w_;IF=1;var r=Kt(),e=pd(),t=ur(),i=RN(),n=Uo(),s=Yo(),a=$ae(),o=r.Function,l=/MSIE .\./.test(n)||i==="BUN"&&(function(){var u=r.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")})();return w_=function(u,c){var h=c?2:1;return l?function(f,p){var g=a(arguments.length,1)>h,v=t(f)?f:o(f),b=g?s(arguments,h):[],E=g?function(){e(v,this,b)}:v;return c?u(E,p):u(E)}:u},w_}var OF;function Nae(){if(OF)return CF;OF=1;var r=Pe(),e=Kt(),t=AF(),i=t(e.setInterval,!0);return r({global:!0,bind:!0,forced:e.setInterval!==i},{setInterval:i}),CF}var PF={},RF;function Lae(){if(RF)return PF;RF=1;var r=Pe(),e=Kt(),t=AF(),i=t(e.setTimeout,!0);return r({global:!0,bind:!0,forced:e.setTimeout!==i},{setTimeout:i}),PF}var kF;function Fae(){return kF||(kF=1,Nae(),Lae()),EF}var E_,MF;function qae(){if(MF)return E_;MF=1,Fae();var r=ir();return E_=r.setTimeout,E_}var C_,$F;function Bae(){return $F||($F=1,C_=qae()),C_}var Uae=Bae(),jae=Be(Uae),D_={exports:{}},NF;function Hae(){return NF||(NF=1,(function(r){function e(i){if(i)return t(i);this._callbacks=new Map}function t(i){return Object.assign(i,e.prototype),i._callbacks=new Map,i}e.prototype.on=function(i,n){const s=this._callbacks.get(i)??[];return s.push(n),this._callbacks.set(i,s),this},e.prototype.once=function(i,n){const s=(...a)=>{this.off(i,s),n.apply(this,a)};return s.fn=n,this.on(i,s),this},e.prototype.off=function(i,n){if(i===void 0&&n===void 0)return this._callbacks.clear(),this;if(n===void 0)return this._callbacks.delete(i),this;const s=this._callbacks.get(i);if(s){for(const[a,o]of s.entries())if(o===n||o.fn===n){s.splice(a,1);break}s.length===0?this._callbacks.delete(i):this._callbacks.set(i,s)}return this},e.prototype.emit=function(i,...n){const s=this._callbacks.get(i);if(s){const a=[...s];for(const o of a)o.apply(this,n)}return this},e.prototype.listeners=function(i){return this._callbacks.get(i)??[]},e.prototype.listenerCount=function(i){if(i)return this.listeners(i).length;let n=0;for(const s of this._callbacks.values())n+=s.length;return n},e.prototype.hasListeners=function(i){return this.listenerCount(i)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,r.exports=e})(D_)),D_.exports}var Vae=Hae(),Gae=Be(Vae);function en(){return en=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},en.apply(this,arguments)}function ki(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function Id(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var I_;typeof Object.assign!="function"?I_=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}:I_=Object.assign;var da=I_,LF=["","webkit","Moz","MS","ms","o"],Wae=typeof document>"u"?{style:{}}:document.createElement("div"),zae="function",Qo=Math.round,fa=Math.abs,A_=Date.now;function Ad(r,e){for(var t,i,n=e[0].toUpperCase()+e.slice(1),s=0;s<LF.length;){if(t=LF[s],i=t?t+n:e,i in r)return i;s++}}var ts;typeof window>"u"?ts={}:ts=window;var FF=Ad(Wae.style,"touchAction"),qF=FF!==void 0;function Yae(){if(!qF)return!1;var r={},e=ts.CSS&&ts.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return r[t]=e?ts.CSS.supports("touch-action",t):!0}),r}var BF="compute",UF="auto",O_="manipulation",pa="none",Ru="pan-x",ku="pan-y",Od=Yae(),Kae=/mobile|tablet|ip(ad|hone|od)|android/i,jF="ontouchstart"in ts,Xae=Ad(ts,"PointerEvent")!==void 0,Qae=jF&&Kae.test(navigator.userAgent),Mu="touch",Zae="pen",P_="mouse",Jae="kinect",eoe=25,qr=1,ma=2,Qt=4,Jr=8,Pd=1,$u=2,Nu=4,Lu=8,Zo=16,On=$u|Nu,ga=Lu|Zo,HF=On|ga,VF=["x","y"],Rd=["clientX","clientY"];function rs(r,e,t){var i;if(r)if(r.forEach)r.forEach(e,t);else if(r.length!==void 0)for(i=0;i<r.length;)e.call(t,r[i],i,r),i++;else for(i in r)r.hasOwnProperty(i)&&e.call(t,r[i],i,r)}function kd(r,e){return typeof r===zae?r.apply(e&&e[0]||void 0,e):r}function va(r,e){return r.indexOf(e)>-1}function toe(r){if(va(r,pa))return pa;var e=va(r,Ru),t=va(r,ku);return e&&t?pa:e||t?e?Ru:ku:va(r,O_)?O_:UF}var GF=(function(){function r(t,i){this.manager=t,this.set(i)}var e=r.prototype;return e.set=function(i){i===BF&&(i=this.compute()),qF&&this.manager.element.style&&Od[i]&&(this.manager.element.style[FF]=i),this.actions=i.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var i=[];return rs(this.manager.recognizers,function(n){kd(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),toe(i.join(" "))},e.preventDefaults=function(i){var n=i.srcEvent,s=i.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var a=this.actions,o=va(a,pa)&&!Od[pa],l=va(a,ku)&&!Od[ku],u=va(a,Ru)&&!Od[Ru];if(o){var c=i.pointers.length===1,h=i.distance<2,f=i.deltaTime<250;if(c&&h&&f)return}if(!(u&&l)&&(o||l&&s&On||u&&s&ga))return this.preventSrc(n)},e.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},r})();function R_(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function WF(r){var e=r.length;if(e===1)return{x:Qo(r[0].clientX),y:Qo(r[0].clientY)};for(var t=0,i=0,n=0;n<e;)t+=r[n].clientX,i+=r[n].clientY,n++;return{x:Qo(t/e),y:Qo(i/e)}}function zF(r){for(var e=[],t=0;t<r.pointers.length;)e[t]={clientX:Qo(r.pointers[t].clientX),clientY:Qo(r.pointers[t].clientY)},t++;return{timeStamp:A_(),pointers:e,center:WF(e),deltaX:r.deltaX,deltaY:r.deltaY}}function Md(r,e,t){t||(t=VF);var i=e[t[0]]-r[t[0]],n=e[t[1]]-r[t[1]];return Math.sqrt(i*i+n*n)}function k_(r,e,t){t||(t=VF);var i=e[t[0]]-r[t[0]],n=e[t[1]]-r[t[1]];return Math.atan2(n,i)*180/Math.PI}function YF(r,e){return r===e?Pd:fa(r)>=fa(e)?r<0?$u:Nu:e<0?Lu:Zo}function roe(r,e){var t=e.center,i=r.offsetDelta||{},n=r.prevDelta||{},s=r.prevInput||{};(e.eventType===qr||s.eventType===Qt)&&(n=r.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=r.offsetDelta={x:t.x,y:t.y}),e.deltaX=n.x+(t.x-i.x),e.deltaY=n.y+(t.y-i.y)}function KF(r,e,t){return{x:e/r||0,y:t/r||0}}function ioe(r,e){return Md(e[0],e[1],Rd)/Md(r[0],r[1],Rd)}function noe(r,e){return k_(e[1],e[0],Rd)+k_(r[1],r[0],Rd)}function soe(r,e){var t=r.lastInterval||e,i=e.timeStamp-t.timeStamp,n,s,a,o;if(e.eventType!==Jr&&(i>eoe||t.velocity===void 0)){var l=e.deltaX-t.deltaX,u=e.deltaY-t.deltaY,c=KF(i,l,u);s=c.x,a=c.y,n=fa(c.x)>fa(c.y)?c.x:c.y,o=YF(l,u),r.lastInterval=e}else n=t.velocity,s=t.velocityX,a=t.velocityY,o=t.direction;e.velocity=n,e.velocityX=s,e.velocityY=a,e.direction=o}function aoe(r,e){var t=r.session,i=e.pointers,n=i.length;t.firstInput||(t.firstInput=zF(e)),n>1&&!t.firstMultiple?t.firstMultiple=zF(e):n===1&&(t.firstMultiple=!1);var s=t.firstInput,a=t.firstMultiple,o=a?a.center:s.center,l=e.center=WF(i);e.timeStamp=A_(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=k_(o,l),e.distance=Md(o,l),roe(t,e),e.offsetDirection=YF(e.deltaX,e.deltaY);var u=KF(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=fa(u.x)>fa(u.y)?u.x:u.y,e.scale=a?ioe(a.pointers,i):1,e.rotation=a?noe(a.pointers,i):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,soe(t,e);var c=r.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,R_(f,c)&&(c=f),e.target=c}function ooe(r,e,t){var i=t.pointers.length,n=t.changedPointers.length,s=e&qr&&i-n===0,a=e&(Qt|Jr)&&i-n===0;t.isFirst=!!s,t.isFinal=!!a,s&&(r.session={}),t.eventType=e,aoe(r,t),r.emit("hammer.input",t),r.recognize(t),r.session.prevInput=t}function Fu(r){return r.trim().split(/\s+/g)}function qu(r,e,t){rs(Fu(e),function(i){r.addEventListener(i,t,!1)})}function Bu(r,e,t){rs(Fu(e),function(i){r.removeEventListener(i,t,!1)})}function XF(r){var e=r.ownerDocument||r;return e.defaultView||e.parentWindow||window}var Jo=(function(){function r(t,i){var n=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){kd(t.options.enable,[t])&&n.handler(s)},this.init()}var e=r.prototype;return e.handler=function(){},e.init=function(){this.evEl&&qu(this.element,this.evEl,this.domHandler),this.evTarget&&qu(this.target,this.evTarget,this.domHandler),this.evWin&&qu(XF(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Bu(this.element,this.evEl,this.domHandler),this.evTarget&&Bu(this.target,this.evTarget,this.domHandler),this.evWin&&Bu(XF(this.element),this.evWin,this.domHandler)},r})();function ya(r,e,t){if(r.indexOf&&!t)return r.indexOf(e);for(var i=0;i<r.length;){if(t&&r[i][t]==e||!t&&r[i]===e)return i;i++}return-1}var loe={pointerdown:qr,pointermove:ma,pointerup:Qt,pointercancel:Jr,pointerout:Jr},uoe={2:Mu,3:Zae,4:P_,5:Jae},QF="pointerdown",ZF="pointermove pointerup pointercancel";ts.MSPointerEvent&&!ts.PointerEvent&&(QF="MSPointerDown",ZF="MSPointerMove MSPointerUp MSPointerCancel");var JF=(function(r){ki(e,r);function e(){var i,n=e.prototype;return n.evEl=QF,n.evWin=ZF,i=r.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var t=e.prototype;return t.handler=function(n){var s=this.store,a=!1,o=n.type.toLowerCase().replace("ms",""),l=loe[o],u=uoe[n.pointerType]||n.pointerType,c=u===Mu,h=ya(s,n.pointerId,"pointerId");l&qr&&(n.button===0||c)?h<0&&(s.push(n),h=s.length-1):l&(Qt|Jr)&&(a=!0),!(h<0)&&(s[h]=n,this.callback(this.manager,l,{pointers:s,changedPointers:[n],pointerType:u,srcEvent:n}),a&&s.splice(h,1))},e})(Jo);function Uu(r){return Array.prototype.slice.call(r,0)}function M_(r,e,t){for(var i=[],n=[],s=0;s<r.length;){var a=e?r[s][e]:r[s];ya(n,a)<0&&i.push(r[s]),n[s]=a,s++}return t&&(e?i=i.sort(function(o,l){return o[e]>l[e]}):i=i.sort()),i}var coe={touchstart:qr,touchmove:ma,touchend:Qt,touchcancel:Jr},hoe="touchstart touchmove touchend touchcancel",$_=(function(r){ki(e,r);function e(){var i;return e.prototype.evTarget=hoe,i=r.apply(this,arguments)||this,i.targetIds={},i}var t=e.prototype;return t.handler=function(n){var s=coe[n.type],a=doe.call(this,n,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Mu,srcEvent:n})},e})(Jo);function doe(r,e){var t=Uu(r.touches),i=this.targetIds;if(e&(qr|ma)&&t.length===1)return i[t[0].identifier]=!0,[t,t];var n,s,a=Uu(r.changedTouches),o=[],l=this.target;if(s=t.filter(function(u){return R_(u.target,l)}),e===qr)for(n=0;n<s.length;)i[s[n].identifier]=!0,n++;for(n=0;n<a.length;)i[a[n].identifier]&&o.push(a[n]),e&(Qt|Jr)&&delete i[a[n].identifier],n++;if(o.length)return[M_(s.concat(o),"identifier",!0),o]}var foe={mousedown:qr,mousemove:ma,mouseup:Qt},poe="mousedown",moe="mousemove mouseup",N_=(function(r){ki(e,r);function e(){var i,n=e.prototype;return n.evEl=poe,n.evWin=moe,i=r.apply(this,arguments)||this,i.pressed=!1,i}var t=e.prototype;return t.handler=function(n){var s=foe[n.type];s&qr&&n.button===0&&(this.pressed=!0),s&ma&&n.which!==1&&(s=Qt),this.pressed&&(s&Qt&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[n],changedPointers:[n],pointerType:P_,srcEvent:n}))},e})(Jo),goe=2500,eq=25;function tq(r){var e=r.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(i);var s=function(){var o=n.indexOf(i);o>-1&&n.splice(o,1)};setTimeout(s,goe)}}function voe(r,e){r&qr?(this.primaryTouch=e.changedPointers[0].identifier,tq.call(this,e)):r&(Qt|Jr)&&tq.call(this,e)}function yoe(r){for(var e=r.srcEvent.clientX,t=r.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],s=Math.abs(e-n.x),a=Math.abs(t-n.y);if(s<=eq&&a<=eq)return!0}return!1}var rq=(function(){var r=(function(e){ki(t,e);function t(n,s){var a;return a=e.call(this,n,s)||this,a.handler=function(o,l,u){var c=u.pointerType===Mu,h=u.pointerType===P_;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(c)voe.call(Id(Id(a)),l,u);else if(h&&yoe.call(Id(Id(a)),u))return;a.callback(o,l,u)}},a.touch=new $_(a.manager,a.handler),a.mouse=new N_(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var i=t.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(Jo);return r})();function _oe(r){var e,t=r.options.inputClass;return t?e=t:Xae?e=JF:Qae?e=$_:jF?e=rq:e=N_,new e(r,ooe)}function el(r,e,t){return Array.isArray(r)?(rs(r,t[e],t),!0):!1}var $d=1,Mi=2,tl=4,ks=8,is=ks,ju=16,Pn=32,boe=1;function Toe(){return boe++}function Nd(r,e){var t=e.manager;return t?t.get(r):r}function iq(r){return r&ju?"cancel":r&ks?"end":r&tl?"move":r&Mi?"start":""}var Hu=(function(){function r(t){t===void 0&&(t={}),this.options=en({enable:!0},t),this.id=Toe(),this.manager=null,this.state=$d,this.simultaneous={},this.requireFail=[]}var e=r.prototype;return e.set=function(i){return da(this.options,i),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(i){if(el(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=Nd(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},e.dropRecognizeWith=function(i){return el(i,"dropRecognizeWith",this)?this:(i=Nd(i,this),delete this.simultaneous[i.id],this)},e.requireFailure=function(i){if(el(i,"requireFailure",this))return this;var n=this.requireFail;return i=Nd(i,this),ya(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},e.dropRequireFailure=function(i){if(el(i,"dropRequireFailure",this))return this;i=Nd(i,this);var n=ya(this.requireFail,i);return n>-1&&this.requireFail.splice(n,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},e.emit=function(i){var n=this,s=this.state;function a(o){n.manager.emit(o,i)}s<ks&&a(n.options.event+iq(s)),a(n.options.event),i.additionalEvent&&a(i.additionalEvent),s>=ks&&a(n.options.event+iq(s))},e.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=Pn},e.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(Pn|$d)))return!1;i++}return!0},e.recognize=function(i){var n=da({},i);if(!kd(this.options.enable,[this,n])){this.reset(),this.state=Pn;return}this.state&(is|ju|Pn)&&(this.state=$d),this.state=this.process(n),this.state&(Mi|tl|ks|ju)&&this.tryEmit(n)},e.process=function(i){},e.getTouchAction=function(){},e.reset=function(){},r})(),L_=(function(r){ki(e,r);function e(i){var n;return i===void 0&&(i={}),n=r.call(this,en({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=e.prototype;return t.getTouchAction=function(){return[O_]},t.process=function(n){var s=this,a=this.options,o=n.pointers.length===a.pointers,l=n.distance<a.threshold,u=n.deltaTime<a.time;if(this.reset(),n.eventType&qr&&this.count===0)return this.failTimeout();if(l&&u&&o){if(n.eventType!==Qt)return this.failTimeout();var c=this.pTime?n.timeStamp-this.pTime<a.interval:!0,h=!this.pCenter||Md(this.pCenter,n.center)<a.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!h||!c?this.count=1:this.count+=1,this._input=n;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=is,s.tryEmit()},a.interval),Mi):is}return Pn},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=Pn},this.options.interval),Pn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===is&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(Hu),rl=(function(r){ki(e,r);function e(i){return i===void 0&&(i={}),r.call(this,en({pointers:1},i))||this}var t=e.prototype;return t.attrTest=function(n){var s=this.options.pointers;return s===0||n.pointers.length===s},t.process=function(n){var s=this.state,a=n.eventType,o=s&(Mi|tl),l=this.attrTest(n);return o&&(a&Jr||!l)?s|ju:o||l?a&Qt?s|ks:s&Mi?s|tl:Mi:Pn},e})(Hu);function nq(r){return r===Zo?"down":r===Lu?"up":r===$u?"left":r===Nu?"right":""}var F_=(function(r){ki(e,r);function e(i){var n;return i===void 0&&(i={}),n=r.call(this,en({event:"pan",threshold:10,pointers:1,direction:HF},i))||this,n.pX=null,n.pY=null,n}var t=e.prototype;return t.getTouchAction=function(){var n=this.options.direction,s=[];return n&On&&s.push(ku),n&ga&&s.push(Ru),s},t.directionTest=function(n){var s=this.options,a=!0,o=n.distance,l=n.direction,u=n.deltaX,c=n.deltaY;return l&s.direction||(s.direction&On?(l=u===0?Pd:u<0?$u:Nu,a=u!==this.pX,o=Math.abs(n.deltaX)):(l=c===0?Pd:c<0?Lu:Zo,a=c!==this.pY,o=Math.abs(n.deltaY))),n.direction=l,a&&o>s.threshold&&l&s.direction},t.attrTest=function(n){return rl.prototype.attrTest.call(this,n)&&(this.state&Mi||!(this.state&Mi)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var s=nq(n.direction);s&&(n.additionalEvent=this.options.event+s),r.prototype.emit.call(this,n)},e})(rl),sq=(function(r){ki(e,r);function e(i){return i===void 0&&(i={}),r.call(this,en({event:"swipe",threshold:10,velocity:.3,direction:On|ga,pointers:1},i))||this}var t=e.prototype;return t.getTouchAction=function(){return F_.prototype.getTouchAction.call(this)},t.attrTest=function(n){var s=this.options.direction,a;return s&(On|ga)?a=n.overallVelocity:s&On?a=n.overallVelocityX:s&ga&&(a=n.overallVelocityY),r.prototype.attrTest.call(this,n)&&s&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&fa(a)>this.options.velocity&&n.eventType&Qt},t.emit=function(n){var s=nq(n.offsetDirection);s&&this.manager.emit(this.options.event+s,n),this.manager.emit(this.options.event,n)},e})(rl),aq=(function(r){ki(e,r);function e(i){return i===void 0&&(i={}),r.call(this,en({event:"pinch",threshold:0,pointers:2},i))||this}var t=e.prototype;return t.getTouchAction=function(){return[pa]},t.attrTest=function(n){return r.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&Mi)},t.emit=function(n){if(n.scale!==1){var s=n.scale<1?"in":"out";n.additionalEvent=this.options.event+s}r.prototype.emit.call(this,n)},e})(rl),oq=(function(r){ki(e,r);function e(i){return i===void 0&&(i={}),r.call(this,en({event:"rotate",threshold:0,pointers:2},i))||this}var t=e.prototype;return t.getTouchAction=function(){return[pa]},t.attrTest=function(n){return r.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&Mi)},e})(rl),lq=(function(r){ki(e,r);function e(i){var n;return i===void 0&&(i={}),n=r.call(this,en({event:"press",pointers:1,time:251,threshold:9},i))||this,n._timer=null,n._input=null,n}var t=e.prototype;return t.getTouchAction=function(){return[UF]},t.process=function(n){var s=this,a=this.options,o=n.pointers.length===a.pointers,l=n.distance<a.threshold,u=n.deltaTime>a.time;if(this._input=n,!l||!o||n.eventType&(Qt|Jr)&&!u)this.reset();else if(n.eventType&qr)this.reset(),this._timer=setTimeout(function(){s.state=is,s.tryEmit()},a.time);else if(n.eventType&Qt)return is;return Pn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===is&&(n&&n.eventType&Qt?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=A_(),this.manager.emit(this.options.event,this._input)))},e})(Hu),uq={domEvents:!1,touchAction:BF,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},cq=[[oq,{enable:!1}],[aq,{enable:!1},["rotate"]],[sq,{direction:On}],[F_,{direction:On},["swipe"]],[L_],[L_,{event:"doubletap",taps:2},["tap"]],[lq]],Soe=1,hq=2;function dq(r,e){var t=r.element;if(t.style){var i;rs(r.options.cssProps,function(n,s){i=Ad(t.style,s),e?(r.oldCssProps[i]=t.style[i],t.style[i]=n):t.style[i]=r.oldCssProps[i]||""}),e||(r.oldCssProps={})}}function xoe(r,e){var t=document.createEvent("Event");t.initEvent(r,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var fq=(function(){function r(t,i){var n=this;this.options=da({},uq,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=_oe(this),this.touchAction=new GF(this,this.options.touchAction),dq(this,!0),rs(this.options.recognizers,function(s){var a=n.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}var e=r.prototype;return e.set=function(i){return da(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},e.stop=function(i){this.session.stopped=i?hq:Soe},e.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var s,a=this.recognizers,o=n.curRecognizer;(!o||o&&o.state&is)&&(n.curRecognizer=null,o=null);for(var l=0;l<a.length;)s=a[l],n.stopped!==hq&&(!o||s===o||s.canRecognizeWith(o))?s.recognize(i):s.reset(),!o&&s.state&(Mi|tl|ks)&&(n.curRecognizer=s,o=s),l++}},e.get=function(i){if(i instanceof Hu)return i;for(var n=this.recognizers,s=0;s<n.length;s++)if(n[s].options.event===i)return n[s];return null},e.add=function(i){if(el(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},e.remove=function(i){if(el(i,"remove",this))return this;var n=this.get(i);if(i){var s=this.recognizers,a=ya(s,n);a!==-1&&(s.splice(a,1),this.touchAction.update())}return this},e.on=function(i,n){if(i===void 0||n===void 0)return this;var s=this.handlers;return rs(Fu(i),function(a){s[a]=s[a]||[],s[a].push(n)}),this},e.off=function(i,n){if(i===void 0)return this;var s=this.handlers;return rs(Fu(i),function(a){n?s[a]&&s[a].splice(ya(s[a],n),1):delete s[a]}),this},e.emit=function(i,n){this.options.domEvents&&xoe(i,n);var s=this.handlers[i]&&this.handlers[i].slice();if(!(!s||!s.length)){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](n),a++}},e.destroy=function(){this.element&&dq(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},r})(),woe={touchstart:qr,touchmove:ma,touchend:Qt,touchcancel:Jr},Eoe="touchstart",Coe="touchstart touchmove touchend touchcancel",Doe=(function(r){ki(e,r);function e(){var i,n=e.prototype;return n.evTarget=Eoe,n.evWin=Coe,i=r.apply(this,arguments)||this,i.started=!1,i}var t=e.prototype;return t.handler=function(n){var s=woe[n.type];if(s===qr&&(this.started=!0),!!this.started){var a=Ioe.call(this,n,s);s&(Qt|Jr)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:Mu,srcEvent:n})}},e})(Jo);function Ioe(r,e){var t=Uu(r.touches),i=Uu(r.changedTouches);return e&(Qt|Jr)&&(t=M_(t.concat(i),"identifier",!0)),[t,i]}function pq(r,e,t){var i="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),s=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,i,s),r.apply(this,arguments)}}var mq=pq(function(r,e,t){for(var i=Object.keys(e),n=0;n<i.length;)(!t||t&&r[i[n]]===void 0)&&(r[i[n]]=e[i[n]]),n++;return r},"extend","Use `assign`."),Aoe=pq(function(r,e){return mq(r,e,!0)},"merge","Use `assign`.");function Ooe(r,e,t){var i=e.prototype,n;n=r.prototype=Object.create(i),n.constructor=r,n._super=i,t&&da(n,t)}function gq(r,e){return function(){return r.apply(e,arguments)}}var Poe=(function(){var r=function(t,i){return i===void 0&&(i={}),new fq(t,en({recognizers:cq.concat()},i))};return r.VERSION="2.0.17-rc",r.DIRECTION_ALL=HF,r.DIRECTION_DOWN=Zo,r.DIRECTION_LEFT=$u,r.DIRECTION_RIGHT=Nu,r.DIRECTION_UP=Lu,r.DIRECTION_HORIZONTAL=On,r.DIRECTION_VERTICAL=ga,r.DIRECTION_NONE=Pd,r.DIRECTION_DOWN=Zo,r.INPUT_START=qr,r.INPUT_MOVE=ma,r.INPUT_END=Qt,r.INPUT_CANCEL=Jr,r.STATE_POSSIBLE=$d,r.STATE_BEGAN=Mi,r.STATE_CHANGED=tl,r.STATE_ENDED=ks,r.STATE_RECOGNIZED=is,r.STATE_CANCELLED=ju,r.STATE_FAILED=Pn,r.Manager=fq,r.Input=Jo,r.TouchAction=GF,r.TouchInput=$_,r.MouseInput=N_,r.PointerEventInput=JF,r.TouchMouseInput=rq,r.SingleTouchInput=Doe,r.Recognizer=Hu,r.AttrRecognizer=rl,r.Tap=L_,r.Pan=F_,r.Swipe=sq,r.Pinch=aq,r.Rotate=oq,r.Press=lq,r.on=qu,r.off=Bu,r.each=rs,r.merge=Aoe,r.extend=mq,r.bindFn=gq,r.assign=da,r.inherit=Ooe,r.bindFn=gq,r.prefixed=Ad,r.toArray=Uu,r.inArray=ya,r.uniqueArray=M_,r.splitStr=Fu,r.boolOrFn=kd,r.hasParent=R_,r.addEventListeners=qu,r.removeEventListeners=Bu,r.defaults=da({},uq,{preset:cq}),r})();const vq=yse("DELETE");function Roe(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return yq({},r,...t)}function yq(){const r=Ld(...arguments);return bq(r),r}function Ld(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(e.length<2)return e[0];if(e.length>2)return Ld(yq(e[0],e[1]),...Ese(e).call(e,2));const i=e[0],n=e[1];if(i instanceof Date&&n instanceof Date)return i.setTime(n.getTime()),i;for(const s of TL(n))Object.prototype.propertyIsEnumerable.call(n,s)&&(n[s]===vq?delete i[s]:i[s]!==null&&n[s]!==null&&typeof i[s]=="object"&&typeof n[s]=="object"&&!Ji(i[s])&&!Ji(n[s])?i[s]=Ld(i[s],n[s]):i[s]=_q(n[s]));return i}function _q(r){return Ji(r)?di(r).call(r,e=>_q(e)):typeof r=="object"&&r!==null?r instanceof Date?new Date(r.getTime()):Ld({},r):r}function bq(r){for(const e of V0(r))r[e]===vq?delete r[e]:typeof r[e]=="object"&&r[e]!==null&&bq(r[e])}function koe(){const r=()=>{};return{on:r,off:r,destroy:r,emit:r,get(){return{set:r}}}}const Moe=typeof window<"u"?window.Hammer||Poe:function(){return koe()};function ns(r){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:r,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=Moe(this._dom.overlay);t.on("tap",ha(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Rs(i).call(i,n=>{t.on(n,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=n=>{$oe(n.target,r)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=n=>{("key"in n?n.key==="Escape":n.keyCode===27)&&this.deactivate()}}Gae(ns.prototype),ns.current=null,ns.prototype.destroy=function(){this.deactivate();for(const t of eae(r=eF(e=this._cleanupQueue).call(e,0)).call(r)){var r,e;t()}},ns.prototype.activate=function(){ns.current&&ns.current.deactivate(),ns.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},ns.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},ns.prototype._onTapOverlay=function(r){this.activate(),r.srcEvent.stopPropagation()};function $oe(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}var q_,Tq;function Noe(){if(Tq)return q_;Tq=1,_M();var r=ir();return q_=r.Object.getOwnPropertySymbols,q_}var B_,Sq;function Loe(){if(Sq)return B_;Sq=1;var r=Noe();return B_=r,B_}var U_,xq;function Foe(){return xq||(xq=1,U_=Loe()),U_}var qoe=Foe(),wq=Be(qoe),j_={exports:{}},Eq={},Cq;function Boe(){if(Cq)return Eq;Cq=1;var r=Pe(),e=nt(),t=Dn(),i=vd().f,n=Xt(),s=!n||e(function(){i(1)});return r({target:"Object",stat:!0,forced:s,sham:!n},{getOwnPropertyDescriptor:function(o,l){return i(t(o),l)}}),Eq}var Dq;function Uoe(){if(Dq)return j_.exports;Dq=1,Boe();var r=ir(),e=r.Object,t=j_.exports=function(n,s){return e.getOwnPropertyDescriptor(n,s)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),j_.exports}var H_,Iq;function joe(){if(Iq)return H_;Iq=1;var r=Uoe();return H_=r,H_}var V_,Aq;function Hoe(){return Aq||(Aq=1,V_=joe()),V_}var Voe=Hoe(),Oq=Be(Voe),Pq={},Rq;function Goe(){if(Rq)return Pq;Rq=1;var r=Pe(),e=Xt(),t=gL(),i=Dn(),n=vd(),s=yd();return r({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(o){for(var l=i(o),u=n.f,c=t(l),h={},f=0,p,g;c.length>f;)g=u(l,p=c[f++]),g!==void 0&&s(h,p,g);return h}}),Pq}var G_,kq;function Woe(){if(kq)return G_;kq=1,Goe();var r=ir();return G_=r.Object.getOwnPropertyDescriptors,G_}var W_,Mq;function zoe(){if(Mq)return W_;Mq=1;var r=Woe();return W_=r,W_}var z_,$q;function Yoe(){return $q||($q=1,z_=zoe()),z_}var Koe=Yoe(),Nq=Be(Koe),Y_={exports:{}},Lq={},Fq;function Xoe(){if(Fq)return Lq;Fq=1;var r=Pe(),e=Xt(),t=ey().f;return r({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),Lq}var qq;function Qoe(){if(qq)return Y_.exports;qq=1,Xoe();var r=ir(),e=r.Object,t=Y_.exports=function(n,s){return e.defineProperties(n,s)};return e.defineProperties.sham&&(t.sham=!0),Y_.exports}var K_,Bq;function Zoe(){if(Bq)return K_;Bq=1;var r=Qoe();return K_=r,K_}var X_,Uq;function Joe(){return Uq||(Uq=1,X_=Zoe()),X_}var ele=Joe(),tle=Be(ele),Q_,jq;function rle(){return jq||(jq=1,Q_=ak()),Q_}var ile=rle(),Hq=Be(ile),Vq={},Gq={},Z_={exports:{}},J_,Wq;function nle(){if(Wq)return J_;Wq=1;var r=nt();return J_=r(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),J_}var eb,zq;function sle(){if(zq)return eb;zq=1;var r=nt(),e=Lr(),t=Jn(),i=nle(),n=Object.isExtensible,s=r(function(){});return eb=s||i?function(o){return!e(o)||i&&t(o)==="ArrayBuffer"?!1:n?n(o):!0}:n,eb}var tb,Yq;function ale(){if(Yq)return tb;Yq=1;var r=nt();return tb=!r(function(){return Object.isExtensible(Object.preventExtensions({}))}),tb}var Kq;function Xq(){if(Kq)return Z_.exports;Kq=1;var r=Pe(),e=ht(),t=Du(),i=Lr(),n=cr(),s=Pi().f,a=Sd(),o=Wk(),l=sle(),u=gd(),c=ale(),h=!1,f=u("meta"),p=0,g=function(O){s(O,f,{value:{objectID:"O"+p++,weakData:{}}})},v=function(O,P){if(!i(O))return typeof O=="symbol"?O:(typeof O=="string"?"S":"P")+O;if(!n(O,f)){if(!l(O))return"F";if(!P)return"E";g(O)}return O[f].objectID},b=function(O,P){if(!n(O,f)){if(!l(O))return!0;if(!P)return!1;g(O)}return O[f].weakData},E=function(O){return c&&h&&l(O)&&!n(O,f)&&g(O),O},x=function(){D.enable=function(){},h=!0;var O=a.f,P=e([].splice),R={};R[f]=1,O(R).length&&(a.f=function(A){for(var I=O(A),S=0,C=I.length;S<C;S++)if(I[S]===f){P(I,S,1);break}return I},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:o.f}))},D=Z_.exports={enable:x,fastKey:v,getWeakData:b,onFreeze:E};return t[f]=!0,Z_.exports}var rb,Qq;function ole(){if(Qq)return rb;Qq=1;var r=hr(),e=Xo(),t=r("iterator"),i=Array.prototype;return rb=function(n){return n!==void 0&&(e.Array===n||i[t]===n)},rb}var ib,Zq;function Jq(){if(Zq)return ib;Zq=1;var r=Is(),e=tv(),t=Su(),i=Xo(),n=hr(),s=n("iterator");return ib=function(a){if(!t(a))return e(a,s)||e(a,"@@iterator")||i[r(a)]},ib}var nb,e3;function t3(){if(e3)return nb;e3=1;var r=Zr(),e=In(),t=es(),i=Ho(),n=Jq(),s=TypeError;return nb=function(a,o){var l=arguments.length<2?n(a):o;if(e(l))return t(r(l,a));throw new s(i(a)+" is not iterable")},nb}var sb,r3;function ab(){if(r3)return sb;r3=1;var r=Zr(),e=es(),t=tv();return sb=function(i,n,s){var a,o;e(i);try{if(a=t(i,"return"),!a){if(n==="throw")throw s;return s}a=r(a,i)}catch(l){o=!0,a=l}if(n==="throw")throw s;if(o)throw a;return e(a),s},sb}var ob,i3;function lb(){if(i3)return ob;i3=1;var r=Eu(),e=Zr(),t=es(),i=Ho(),n=ole(),s=An(),a=nr(),o=t3(),l=Jq(),u=ab(),c=TypeError,h=function(p,g){this.stopped=p,this.result=g},f=h.prototype;return ob=function(p,g,v){var b=v&&v.that,E=!!(v&&v.AS_ENTRIES),x=!!(v&&v.IS_RECORD),D=!!(v&&v.IS_ITERATOR),O=!!(v&&v.INTERRUPTED),P=r(g,b),R,A,I,S,C,$,F,j=function(J){return R&&u(R,"normal"),new h(!0,J)},z=function(J){return E?(t(J),O?P(J[0],J[1],j):P(J[0],J[1])):O?P(J,j):P(J)};if(x)R=p.iterator;else if(D)R=p;else{if(A=l(p),!A)throw new c(i(p)+" is not iterable");if(n(A)){for(I=0,S=s(p);S>I;I++)if(C=z(p[I]),C&&a(f,C))return C;return new h(!1)}R=o(p,A)}for($=x?p.next:R.next;!(F=e($,R)).done;){try{C=z(F.value)}catch(J){u(R,"throw",J)}if(typeof C=="object"&&C&&a(f,C))return C}return new h(!1)},ob}var ub,n3;function s3(){if(n3)return ub;n3=1;var r=nr(),e=TypeError;return ub=function(t,i){if(r(i,t))return t;throw new e("Incorrect invocation")},ub}var cb,a3;function o3(){if(a3)return cb;a3=1;var r=Pe(),e=Kt(),t=Xq(),i=nt(),n=Wo(),s=lb(),a=s3(),o=ur(),l=Lr(),u=Su(),c=ca(),h=Pi().f,f=Ko().forEach,p=Xt(),g=Ou(),v=g.set,b=g.getterFor;return cb=function(E,x,D){var O=E.indexOf("Map")!==-1,P=E.indexOf("Weak")!==-1,R=O?"set":"add",A=e[E],I=A&&A.prototype,S={},C;if(!p||!o(A)||!(P||I.forEach&&!i(function(){new A().entries().next()})))C=D.getConstructor(x,E,O,R),t.enable();else{C=x(function(j,z){v(a(j,$),{type:E,collection:new A}),u(z)||s(z,j[R],{that:j,AS_ENTRIES:O})});var $=C.prototype,F=b(E);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var z=j==="add"||j==="set";j in I&&!(P&&j==="clear")&&n($,j,function(J,Z){var W=F(this).collection;if(!z&&P&&!l(J))return j==="get"?void 0:!1;var Y=W[j](J===0?0:J,Z);return z?this:Y})}),P||h($,"size",{configurable:!0,get:function(){return F(this).collection.size}})}return c(C,E,!1,!0),S[E]=C,r({global:!0,forced:!0},S),P||D.setStrong(C,E,O),C},cb}var hb,l3;function lle(){if(l3)return hb;l3=1;var r=Au();return hb=function(e,t,i){for(var n in t)i&&i.unsafe&&e[n]?e[n]=t[n]:r(e,n,t[n],i);return e},hb}var db,u3;function ule(){if(u3)return db;u3=1;var r=hi(),e=cy(),t=hr(),i=Xt(),n=t("species");return db=function(s){var a=r(s);i&&a&&!a[n]&&e(a,n,{configurable:!0,get:function(){return this}})},db}var fb,c3;function h3(){if(c3)return fb;c3=1;var r=Iu(),e=cy(),t=lle(),i=Eu(),n=s3(),s=Su(),a=lb(),o=My(),l=Ny(),u=ule(),c=Xt(),h=Xq().fastKey,f=Ou(),p=f.set,g=f.getterFor;return fb={getConstructor:function(v,b,E,x){var D=v(function(I,S){n(I,O),p(I,{type:b,index:r(null),first:null,last:null,size:0}),c||(I.size=0),s(S)||a(S,I[x],{that:I,AS_ENTRIES:E})}),O=D.prototype,P=g(b),R=function(I,S,C){var $=P(I),F=A(I,S),j,z;return F?F.value=C:($.last=F={index:z=h(S,!0),key:S,value:C,previous:j=$.last,next:null,removed:!1},$.first||($.first=F),j&&(j.next=F),c?$.size++:I.size++,z!=="F"&&($.index[z]=F)),I},A=function(I,S){var C=P(I),$=h(S),F;if($!=="F")return C.index[$];for(F=C.first;F;F=F.next)if(F.key===S)return F};return t(O,{clear:function(){for(var S=this,C=P(S),$=C.first;$;)$.removed=!0,$.previous&&($.previous=$.previous.next=null),$=$.next;C.first=C.last=null,C.index=r(null),c?C.size=0:S.size=0},delete:function(I){var S=this,C=P(S),$=A(S,I);if($){var F=$.next,j=$.previous;delete C.index[$.index],$.removed=!0,j&&(j.next=F),F&&(F.previous=j),C.first===$&&(C.first=F),C.last===$&&(C.last=j),c?C.size--:S.size--}return!!$},forEach:function(S){for(var C=P(this),$=i(S,arguments.length>1?arguments[1]:void 0),F;F=F?F.next:C.first;)for($(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(S){return!!A(this,S)}}),t(O,E?{get:function(S){var C=A(this,S);return C&&C.value},set:function(S,C){return R(this,S===0?0:S,C)}}:{add:function(S){return R(this,S=S===0?0:S,S)}}),c&&e(O,"size",{configurable:!0,get:function(){return P(this).size}}),D},setStrong:function(v,b,E){var x=b+" Iterator",D=g(b),O=g(x);o(v,b,function(P,R){p(this,{type:x,target:P,state:D(P),kind:R,last:null})},function(){for(var P=O(this),R=P.kind,A=P.last;A&&A.removed;)A=A.previous;return!P.target||!(P.last=A=A?A.next:P.state.first)?(P.target=null,l(void 0,!0)):l(R==="keys"?A.key:R==="values"?A.value:[A.key,A.value],!1)},E?"entries":"values",!E,!0),u(b)}},fb}var d3;function cle(){if(d3)return Gq;d3=1;var r=o3(),e=h3();return r("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),Gq}var f3;function hle(){return f3||(f3=1,cle()),Vq}var p3={},pb,m3;function g3(){return m3||(m3=1,pb=function(r,e){return e===1?function(t,i){return t[r](i)}:function(t,i,n){return t[r](i,n)}}),pb}var mb,v3;function dle(){if(v3)return mb;v3=1;var r=hi(),e=g3(),t=r("Map");return mb={Map:t,set:e("set",2),get:e("get",1),has:e("has",1),remove:e("delete",1),proto:t.prototype},mb}var y3;function fle(){if(y3)return p3;y3=1;var r=Pe(),e=ht(),t=In(),i=ua(),n=lb(),s=dle(),a=Vo(),o=nt(),l=s.Map,u=s.has,c=s.get,h=s.set,f=e([].push),p=a||o(function(){return l.groupBy("ab",function(g){return g}).get("a").length!==1});return r({target:"Map",stat:!0,forced:a||p},{groupBy:function(v,b){i(v),t(b);var E=new l,x=0;return n(v,function(D){var O=b(D,x++);u(E,O)?f(c(E,O),D):h(E,O,[D])}),E}}),p3}var gb,_3;function ple(){if(_3)return gb;_3=1,Os(),hle(),fle(),Cd();var r=ir();return gb=r.Map,gb}var vb,b3;function mle(){if(b3)return vb;b3=1;var r=ple();return Ps(),vb=r,vb}var yb,T3;function gle(){return T3||(T3=1,yb=mle()),yb}var vle=gle(),S3=Be(vle),x3={},w3;function yle(){if(w3)return x3;w3=1;var r=Pe(),e=Ko().some,t=Dd(),i=t("some");return r({target:"Array",proto:!0,forced:!i},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),x3}var _b,E3;function _le(){if(E3)return _b;E3=1,yle();var r=Fr();return _b=r("Array","some"),_b}var bb,C3;function ble(){if(C3)return bb;C3=1;var r=nr(),e=_le(),t=Array.prototype;return bb=function(i){var n=i.some;return i===t||r(t,i)&&n===t.some?e:n},bb}var Tb,D3;function Tle(){if(D3)return Tb;D3=1;var r=ble();return Tb=r,Tb}var Sb,I3;function Sle(){return I3||(I3=1,Sb=Tle()),Sb}var xle=Sle(),wle=Be(xle),xb,A3;function Ele(){if(A3)return xb;A3=1,Os();var r=Fr();return xb=r("Array","keys"),xb}var wb,O3;function Cle(){if(O3)return wb;O3=1;var r=Ele();return wb=r,wb}var Eb,P3;function Dle(){if(P3)return Eb;P3=1,Ps();var r=Is(),e=cr(),t=nr(),i=Cle(),n=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Eb=function(a){var o=a.keys;return a===n||t(n,a)&&o===n.keys||e(s,r(a))?i:o},Eb}var Cb,R3;function Ile(){return R3||(R3=1,Cb=Dle()),Cb}var Ale=Ile(),_a=Be(Ale),k3={},Db,M3;function Ole(){if(M3)return Db;M3=1;var r=Yo(),e=Math.floor,t=function(i,n){var s=i.length;if(s<8)for(var a=1,o,l;a<s;){for(l=a,o=i[a];l&&n(i[l-1],o)>0;)i[l]=i[--l];l!==a++&&(i[l]=o)}else for(var u=e(s/2),c=t(r(i,0,u),n),h=t(r(i,u),n),f=c.length,p=h.length,g=0,v=0;g<f||v<p;)i[g+v]=g<f&&v<p?n(c[g],h[v])<=0?c[g++]:h[v++]:g<f?c[g++]:h[v++];return i};return Db=t,Db}var Ib,$3;function Ple(){if($3)return Ib;$3=1;var r=Uo(),e=r.match(/firefox\/(\d+)/i);return Ib=!!e&&+e[1],Ib}var Ab,N3;function Rle(){if(N3)return Ab;N3=1;var r=Uo();return Ab=/MSIE|Trident/.test(r),Ab}var Ob,L3;function kle(){if(L3)return Ob;L3=1;var r=Uo(),e=r.match(/AppleWebKit\/(\d+)\./);return Ob=!!e&&+e[1],Ob}var F3;function Mle(){if(F3)return k3;F3=1;var r=Pe(),e=ht(),t=In(),i=Oi(),n=An(),s=YL(),a=As(),o=nt(),l=Ole(),u=Dd(),c=Ple(),h=Rle(),f=xu(),p=kle(),g=[],v=e(g.sort),b=e(g.push),E=o(function(){g.sort(void 0)}),x=o(function(){g.sort(null)}),D=u("sort"),O=!o(function(){if(f)return f<70;if(!(c&&c>3)){if(h)return!0;if(p)return p<603;var A="",I,S,C,$;for(I=65;I<76;I++){switch(S=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for($=0;$<47;$++)g.push({k:S+$,v:C})}for(g.sort(function(F,j){return j.v-F.v}),$=0;$<g.length;$++)S=g[$].k.charAt(0),A.charAt(A.length-1)!==S&&(A+=S);return A!=="DGBEFHACIJK"}}),P=E||!x||!D||!O,R=function(A){return function(I,S){return S===void 0?-1:I===void 0?1:A!==void 0?+A(I,S)||0:a(I)>a(S)?1:-1}};return r({target:"Array",proto:!0,forced:P},{sort:function(I){I!==void 0&&t(I);var S=i(this);if(O)return I===void 0?v(S):v(S,I);var C=[],$=n(S),F,j;for(j=0;j<$;j++)j in S&&b(C,S[j]);for(l(C,R(I)),F=n(C),j=0;j<F;)S[j]=C[j++];for(;j<$;)s(S,j++);return S}}),k3}var Pb,q3;function $le(){if(q3)return Pb;q3=1,Mle();var r=Fr();return Pb=r("Array","sort"),Pb}var Rb,B3;function Nle(){if(B3)return Rb;B3=1;var r=nr(),e=$le(),t=Array.prototype;return Rb=function(i){var n=i.sort;return i===t||r(t,i)&&n===t.sort?e:n},Rb}var kb,U3;function Lle(){if(U3)return kb;U3=1;var r=Nle();return kb=r,kb}var Mb,j3;function Fle(){return j3||(j3=1,Mb=Lle()),Mb}var qle=Fle(),$b=Be(qle),Nb,H3;function Ble(){if(H3)return Nb;H3=1,Os();var r=Fr();return Nb=r("Array","values"),Nb}var Lb,V3;function Ule(){if(V3)return Lb;V3=1;var r=Ble();return Lb=r,Lb}var Fb,G3;function jle(){if(G3)return Fb;G3=1,Ps();var r=Is(),e=cr(),t=nr(),i=Ule(),n=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Fb=function(a){var o=a.values;return a===n||t(n,a)&&o===n.values||e(s,r(a))?i:o},Fb}var qb,W3;function Hle(){return W3||(W3=1,qb=jle()),qb}var Vle=Hle(),z3=Be(Vle),Bb,Y3;function Gle(){return Y3||(Y3=1,Bb=hN()),Bb}var Wle=Gle(),ba=Be(Wle),Ub,K3;function zle(){if(K3)return Ub;K3=1,Os();var r=Fr();return Ub=r("Array","entries"),Ub}var jb,X3;function Yle(){if(X3)return jb;X3=1;var r=zle();return jb=r,jb}var Hb,Q3;function Kle(){if(Q3)return Hb;Q3=1,Ps();var r=Is(),e=cr(),t=nr(),i=Yle(),n=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return Hb=function(a){var o=a.entries;return a===n||t(n,a)&&o===n.entries||e(s,r(a))?i:o},Hb}var Vb,Z3;function Xle(){return Z3||(Z3=1,Vb=Kle()),Vb}var Qle=Xle(),Zle=Be(Qle);const _r=[];for(let r=0;r<256;++r)_r.push((r+256).toString(16).slice(1));function Jle(r,e=0){return(_r[r[e+0]]+_r[r[e+1]]+_r[r[e+2]]+_r[r[e+3]]+"-"+_r[r[e+4]]+_r[r[e+5]]+"-"+_r[r[e+6]]+_r[r[e+7]]+"-"+_r[r[e+8]]+_r[r[e+9]]+"-"+_r[r[e+10]]+_r[r[e+11]]+_r[r[e+12]]+_r[r[e+13]]+_r[r[e+14]]+_r[r[e+15]]).toLowerCase()}let Gb;const eue=new Uint8Array(16);function tue(){if(!Gb){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Gb=crypto.getRandomValues.bind(crypto)}return Gb(eue)}var J3={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function rue(r,e,t){r=r||{};const i=r.random??r.rng?.()??tue();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,Jle(i)}function iue(r,e,t){return J3.randomUUID&&!r?J3.randomUUID():rue(r)}function Wb(r){return typeof r=="string"||typeof r=="number"}class zb{constructor(e){Ri(this,"_queue",[]),Ri(this,"_timeout",null),Ri(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,t){const i=new zb(t);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{i.flush()};const n=[{name:"flush",original:void 0}];if(t&&t.replace)for(let s=0;s<t.replace.length;s++){const a=t.replace[s];n.push({name:a,original:e[a]}),i.replace(e,a)}return i._extended={object:e,methods:n},i}destroy(){if(this.flush(),this._extended){const e=this._extended.object,t=this._extended.methods;for(let i=0;i<t.length;i++){const n=t[i];n.original?e[n.name]=n.original:delete e[n.name]}this._extended=null}}replace(e,t){const i=this,n=e[t];if(!n)throw new Error("Method "+t+" undefined");e[t]=function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];i.queue({args:a,fn:n,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=jae(()=>{this.flush()},this.delay))}flush(){var e,t;Rs(e=eF(t=this._queue).call(t,0)).call(e,i=>{i.fn.apply(i.context||i.fn,i.args||[])})}}class Vu{constructor(){Ri(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Ri(this,"subscribe",Vu.prototype.on),Ri(this,"unsubscribe",Vu.prototype.off)}_trigger(e,t,i){var n;if(e==="*")throw new Error("Cannot trigger event *");Rs(n=[...this._subscribers[e],...this._subscribers["*"]]).call(n,s=>{s(e,t,i??null)})}on(e,t){typeof t=="function"&&this._subscribers[e].push(t)}off(e,t){var i;this._subscribers[e]=dr(i=this._subscribers[e]).call(i,n=>n!==t)}}var e4={},t4={},r4;function nue(){if(r4)return t4;r4=1;var r=o3(),e=h3();return r("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),t4}var i4;function sue(){return i4||(i4=1,nue()),e4}var n4={},Yb,s4;function Ta(){if(s4)return Yb;s4=1;var r=Ho(),e=TypeError;return Yb=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(r(t)+" is not a set")},Yb}var Kb,a4;function Sa(){if(a4)return Kb;a4=1;var r=hi(),e=g3(),t=r("Set"),i=t.prototype;return Kb={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:i},Kb}var Xb,o4;function xa(){if(o4)return Xb;o4=1;var r=Zr();return Xb=function(e,t,i){for(var n=i?e:e.iterator,s=e.next,a,o;!(a=r(s,n)).done;)if(o=t(a.value),o!==void 0)return o},Xb}var Qb,l4;function Gu(){if(l4)return Qb;l4=1;var r=xa();return Qb=function(e,t,i){return i?r(e.keys(),t,!0):e.forEach(t)},Qb}var Zb,u4;function Jb(){if(u4)return Zb;u4=1;var r=Sa(),e=Gu(),t=r.Set,i=r.add;return Zb=function(n){var s=new t;return e(n,function(a){i(s,a)}),s},Zb}var e1,c4;function Wu(){return c4||(c4=1,e1=function(r){return r.size}),e1}var t1,h4;function aue(){return h4||(h4=1,t1=function(r){return{iterator:r,next:r.next,done:!1}}),t1}var r1,d4;function wa(){if(d4)return r1;d4=1;var r=In(),e=es(),t=Zr(),i=zo(),n=aue(),s="Invalid size",a=RangeError,o=TypeError,l=Math.max,u=function(c,h){this.set=c,this.size=l(h,0),this.has=r(c.has),this.keys=r(c.keys)};return u.prototype={getIterator:function(){return n(e(t(this.keys,this.set)))},includes:function(c){return t(this.has,this.set,c)}},r1=function(c){e(c);var h=+c.size;if(h!==h)throw new o(s);var f=i(h);if(f<0)throw new a(s);return new u(c,f)},r1}var i1,f4;function oue(){if(f4)return i1;f4=1;var r=Ta(),e=Sa(),t=Jb(),i=Wu(),n=wa(),s=Gu(),a=xa(),o=e.has,l=e.remove;return i1=function(c){var h=r(this),f=n(c),p=t(h);return i(h)<=f.size?s(h,function(g){f.includes(g)&&l(p,g)}):a(f.getIterator(),function(g){o(p,g)&&l(p,g)}),p},i1}var n1,p4;function Ea(){return p4||(p4=1,n1=function(){return!1}),n1}var m4;function lue(){if(m4)return n4;m4=1;var r=Pe(),e=oue(),t=nt(),i=Ea(),n=!i("difference",function(a){return a.size===0}),s=n||t(function(){var a={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return o.has(1)&&o.clear(),{done:u,value:2}}}}},o=new Set([1,2,3,4]);return o.difference(a).size!==3});return r({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),n4}var g4={},s1,v4;function uue(){if(v4)return s1;v4=1;var r=Ta(),e=Sa(),t=Wu(),i=wa(),n=Gu(),s=xa(),a=e.Set,o=e.add,l=e.has;return s1=function(c){var h=r(this),f=i(c),p=new a;return t(h)>f.size?s(f.getIterator(),function(g){l(h,g)&&o(p,g)}):n(h,function(g){f.includes(g)&&o(p,g)}),p},s1}var y4;function cue(){if(y4)return g4;y4=1;var r=Pe(),e=nt(),t=uue(),i=Ea(),n=!i("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return r({target:"Set",proto:!0,real:!0,forced:n},{intersection:t}),g4}var _4={},a1,b4;function hue(){if(b4)return a1;b4=1;var r=Ta(),e=Sa().has,t=Wu(),i=wa(),n=Gu(),s=xa(),a=ab();return a1=function(l){var u=r(this),c=i(l);if(t(u)<=c.size)return n(u,function(f){if(c.includes(f))return!1},!0)!==!1;var h=c.getIterator();return s(h,function(f){if(e(u,f))return a(h,"normal",!1)})!==!1},a1}var T4;function due(){if(T4)return _4;T4=1;var r=Pe(),e=hue(),t=Ea(),i=!t("isDisjointFrom",function(n){return!n});return r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:e}),_4}var S4={},o1,x4;function fue(){if(x4)return o1;x4=1;var r=Ta(),e=Wu(),t=Gu(),i=wa();return o1=function(s){var a=r(this),o=i(s);return e(a)>o.size?!1:t(a,function(l){if(!o.includes(l))return!1},!0)!==!1},o1}var w4;function pue(){if(w4)return S4;w4=1;var r=Pe(),e=fue(),t=Ea(),i=!t("isSubsetOf",function(n){return n});return r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:e}),S4}var E4={},l1,C4;function mue(){if(C4)return l1;C4=1;var r=Ta(),e=Sa().has,t=Wu(),i=wa(),n=xa(),s=ab();return l1=function(o){var l=r(this),u=i(o);if(t(l)<u.size)return!1;var c=u.getIterator();return n(c,function(h){if(!e(l,h))return s(c,"normal",!1)})!==!1},l1}var D4;function gue(){if(D4)return E4;D4=1;var r=Pe(),e=mue(),t=Ea(),i=!t("isSupersetOf",function(n){return!n});return r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:e}),E4}var I4={},u1,A4;function vue(){if(A4)return u1;A4=1;var r=Ta(),e=Sa(),t=Jb(),i=wa(),n=xa(),s=e.add,a=e.has,o=e.remove;return u1=function(u){var c=r(this),h=i(u).getIterator(),f=t(c);return n(h,function(p){a(c,p)?o(f,p):s(f,p)}),f},u1}var c1,O4;function P4(){return O4||(O4=1,c1=function(r){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[r](t);return i.size===1&&i.values().next().value===4}catch{return!1}}),c1}var R4;function yue(){if(R4)return I4;R4=1;var r=Pe(),e=vue(),t=P4(),i=Ea(),n=!i("symmetricDifference")||!t("symmetricDifference");return r({target:"Set",proto:!0,real:!0,forced:n},{symmetricDifference:e}),I4}var k4={},h1,M4;function _ue(){if(M4)return h1;M4=1;var r=Ta(),e=Sa().add,t=Jb(),i=wa(),n=xa();return h1=function(a){var o=r(this),l=i(a).getIterator(),u=t(o);return n(l,function(c){e(u,c)}),u},h1}var $4;function bue(){if($4)return k4;$4=1;var r=Pe(),e=_ue(),t=P4(),i=Ea(),n=!i("union")||!t("union");return r({target:"Set",proto:!0,real:!0,forced:n},{union:e}),k4}var d1,N4;function Tue(){if(N4)return d1;N4=1,Os(),sue(),lue(),cue(),due(),pue(),gue(),yue(),bue(),Cd();var r=ir();return d1=r.Set,d1}var f1,L4;function Sue(){if(L4)return f1;L4=1;var r=Tue();return Ps(),f1=r,f1}var p1,F4;function xue(){return F4||(F4=1,p1=Sue()),p1}var wue=xue(),Fd=Be(wue),m1,q4;function Eue(){if(q4)return m1;q4=1,Os(),Cd();var r=t3();return m1=r,m1}var g1,B4;function Cue(){if(B4)return g1;B4=1;var r=Eue();return Ps(),g1=r,g1}var v1,U4;function Due(){if(U4)return v1;U4=1;var r=Cue();return v1=r,v1}var y1,j4;function Iue(){if(j4)return y1;j4=1;var r=Due();return y1=r,y1}var _1,H4;function Aue(){return H4||(H4=1,_1=Iue()),_1}var b1,V4;function Oue(){return V4||(V4=1,b1=Aue()),b1}var Pue=Oue(),T1=Be(Pue);class Ca{constructor(e){this._pairs=e}*[ba](){for(const[e,t]of this._pairs)yield[e,t]}*entries(){for(const[e,t]of this._pairs)yield[e,t]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){var e;return di(e=[...this._pairs]).call(e,t=>t[0])}toItemArray(){var e;return di(e=[...this._pairs]).call(e,t=>t[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Eae(null);for(const[t,i]of this._pairs)e[t]=i;return e}toMap(){return new S3(this._pairs)}toIdSet(){return new Fd(this.toIdArray())}toItemSet(){return new Fd(this.toItemArray())}cache(){return new Ca([...this._pairs])}distinct(e){const t=new Fd;for(const[i,n]of this._pairs)t.add(e(n,i));return t}filter(e){const t=this._pairs;return new Ca({*[ba](){for(const[i,n]of t)e(n,i)&&(yield[i,n])}})}forEach(e){for(const[t,i]of this._pairs)e(i,t)}map(e){const t=this._pairs;return new Ca({*[ba](){for(const[i,n]of t)yield[i,e(n,i)]}})}max(e){const t=T1(this._pairs);let i=t.next();if(i.done)return null;let n=i.value[1],s=e(i.value[1],i.value[0]);for(;!(i=t.next()).done;){const[a,o]=i.value,l=e(o,a);l>s&&(s=l,n=o)}return n}min(e){const t=T1(this._pairs);let i=t.next();if(i.done)return null;let n=i.value[1],s=e(i.value[1],i.value[0]);for(;!(i=t.next()).done;){const[a,o]=i.value,l=e(o,a);l<s&&(s=l,n=o)}return n}reduce(e,t){for(const[i,n]of this._pairs)t=e(t,n,i);return t}sort(e){return new Ca({[ba]:()=>{var t;return T1($b(t=[...this._pairs]).call(t,(i,n)=>{let[s,a]=i,[o,l]=n;return e(a,l,s,o)}))}})}}function G4(r,e){var t=V0(r);if(wq){var i=wq(r);e&&(i=dr(i).call(i,function(n){return Oq(r,n).enumerable})),t.push.apply(t,i)}return t}function W4(r){for(var e=1;e<arguments.length;e++){var t,i,n=arguments[e]!=null?arguments[e]:{};e%2?Rs(t=G4(Object(n),!0)).call(t,function(s){Ri(r,s,n[s])}):Nq?tle(r,Nq(n)):Rs(i=G4(Object(n))).call(i,function(s){Hq(r,s,Oq(n,s))})}return r}function Rue(r,e){return r[e]==null&&(r[e]=iue()),r}class Ms extends Vu{get idProp(){return this._idProp}constructor(e,t){super(),Ri(this,"_queue",null),e&&!Ji(e)&&(t=e,e=[]),this._options=t||{},this._data=new S3,this.length=0,this._idProp=this._options.fieldId||"id",e&&e.length&&this.add(e),this.setOptions(t)}setOptions(e){e&&e.queue!==void 0&&(e.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=zb.extend(this,{replace:["add","update","remove"]})),e.queue&&typeof e.queue=="object"&&this._queue.setOptions(e.queue)))}add(e,t){const i=[];let n;if(Ji(e)){const s=di(e).call(e,a=>a[this._idProp]);if(wle(s).call(s,a=>this._data.has(a)))throw new Error("A duplicate id was found in the parameter array.");for(let a=0,o=e.length;a<o;a++)n=this._addItem(e[a]),i.push(n)}else if(e&&typeof e=="object")n=this._addItem(e),i.push(n);else throw new Error("Unknown dataType");return i.length&&this._trigger("add",{items:i},t),i}update(e,t){const i=[],n=[],s=[],a=[],o=this._idProp,l=u=>{const c=u[o];if(c!=null&&this._data.has(c)){const h=u,f=oF({},this._data.get(c)),p=this._updateItem(h);n.push(p),a.push(h),s.push(f)}else{const h=this._addItem(u);i.push(h)}};if(Ji(e))for(let u=0,c=e.length;u<c;u++)e[u]&&typeof e[u]=="object"?l(e[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(e&&typeof e=="object")l(e);else throw new Error("Unknown dataType");if(i.length&&this._trigger("add",{items:i},t),n.length){const u={items:n,oldData:s,data:a};this._trigger("update",u,t)}return _ae(i).call(i,n)}updateOnly(e,t){var i;Ji(e)||(e=[e]);const n=di(i=di(e).call(e,s=>{const a=this._data.get(s[this._idProp]);if(a==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:a,update:s}})).call(i,s=>{let{oldData:a,update:o}=s;const l=a[this._idProp],u=Roe(a,o);return this._data.set(l,u),{id:l,oldData:a,updatedData:u}});if(n.length){const s={items:di(n).call(n,a=>a.id),oldData:di(n).call(n,a=>a.oldData),data:di(n).call(n,a=>a.updatedData)};return this._trigger("update",s,t),s.items}else return[]}get(e,t){let i,n,s;Wb(e)?(i=e,s=t):Ji(e)?(n=e,s=t):s=e;const a=s&&s.returnType==="Object"?"Object":"Array",o=s&&dr(s),l=[];let u,c,h;if(i!=null)u=this._data.get(i),u&&o&&!o(u)&&(u=void 0);else if(n!=null)for(let p=0,g=n.length;p<g;p++)u=this._data.get(n[p]),u!=null&&(!o||o(u))&&l.push(u);else{var f;c=[..._a(f=this._data).call(f)];for(let p=0,g=c.length;p<g;p++)h=c[p],u=this._data.get(h),u!=null&&(!o||o(u))&&l.push(u)}if(s&&s.order&&i==null&&this._sort(l,s.order),s&&s.fields){const p=s.fields;if(i!=null&&u!=null)u=this._filterFields(u,p);else for(let g=0,v=l.length;g<v;g++)l[g]=this._filterFields(l[g],p)}if(a=="Object"){const p={};for(let g=0,v=l.length;g<v;g++){const b=l[g],E=b[this._idProp];p[E]=b}return p}else return i!=null?u??null:l}getIds(e){const t=this._data,i=e&&dr(e),n=e&&e.order,s=[..._a(t).call(t)],a=[];if(i)if(n){const o=[];for(let l=0,u=s.length;l<u;l++){const c=s[l],h=this._data.get(c);h!=null&&i(h)&&o.push(h)}this._sort(o,n);for(let l=0,u=o.length;l<u;l++)a.push(o[l][this._idProp])}else for(let o=0,l=s.length;o<l;o++){const u=s[o],c=this._data.get(u);c!=null&&i(c)&&a.push(c[this._idProp])}else if(n){const o=[];for(let l=0,u=s.length;l<u;l++){const c=s[l];o.push(t.get(c))}this._sort(o,n);for(let l=0,u=o.length;l<u;l++)a.push(o[l][this._idProp])}else for(let o=0,l=s.length;o<l;o++){const u=s[o],c=t.get(u);c!=null&&a.push(c[this._idProp])}return a}getDataSet(){return this}forEach(e,t){const i=t&&dr(t),n=this._data,s=[..._a(n).call(n)];if(t&&t.order){const a=this.get(t);for(let o=0,l=a.length;o<l;o++){const u=a[o],c=u[this._idProp];e(u,c)}}else for(let a=0,o=s.length;a<o;a++){const l=s[a],u=this._data.get(l);u!=null&&(!i||i(u))&&e(u,l)}}map(e,t){const i=t&&dr(t),n=[],s=this._data,a=[..._a(s).call(s)];for(let o=0,l=a.length;o<l;o++){const u=a[o],c=this._data.get(u);c!=null&&(!i||i(c))&&n.push(e(c,u))}return t&&t.order&&this._sort(n,t.order),n}_filterFields(e,t){var i;return e&&qN(i=Ji(t)?t:V0(t)).call(i,(n,s)=>(n[s]=e[s],n),{})}_sort(e,t){if(typeof t=="string"){const i=t;$b(e).call(e,(n,s)=>{const a=n[i],o=s[i];return a>o?1:a<o?-1:0})}else if(typeof t=="function")$b(e).call(e,t);else throw new TypeError("Order must be a function or a string")}remove(e,t){const i=[],n=[],s=Ji(e)?e:[e];for(let a=0,o=s.length;a<o;a++){const l=this._remove(s[a]);if(l){const u=l[this._idProp];u!=null&&(i.push(u),n.push(l))}}return i.length&&this._trigger("remove",{items:i,oldData:n},t),i}_remove(e){let t;if(Wb(e)?t=e:e&&typeof e=="object"&&(t=e[this._idProp]),t!=null&&this._data.has(t)){const i=this._data.get(t)||null;return this._data.delete(t),--this.length,i}return null}clear(e){var t;const i=[..._a(t=this._data).call(t)],n=[];for(let s=0,a=i.length;s<a;s++)n.push(this._data.get(i[s]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:n},e),i}max(e){let t=null,i=null;for(const s of z3(n=this._data).call(n)){var n;const a=s[e];typeof a=="number"&&(i==null||a>i)&&(t=s,i=a)}return t||null}min(e){let t=null,i=null;for(const s of z3(n=this._data).call(n)){var n;const a=s[e];typeof a=="number"&&(i==null||a<i)&&(t=s,i=a)}return t||null}distinct(e){const t=this._data,i=[..._a(t).call(t)],n=[];let s=0;for(let a=0,o=i.length;a<o;a++){const l=i[a],c=t.get(l)[e];let h=!1;for(let f=0;f<s;f++)if(n[f]==c){h=!0;break}!h&&c!==void 0&&(n[s]=c,s++)}return n}_addItem(e){const t=Rue(e,this._idProp),i=t[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,t),++this.length,i}_updateItem(e){const t=e[this._idProp];if(t==null)throw new Error("Cannot update item: item has no id (item: "+Mae(e)+")");const i=this._data.get(t);if(!i)throw new Error("Cannot update item: no item with id "+t+" found");return this._data.set(t,W4(W4({},i),e)),t}stream(e){if(e){const i=this._data;return new Ca({*[ba](){for(const n of e){const s=i.get(n);s!=null&&(yield[n,s])}}})}else{var t;return new Ca({[ba]:ha(t=Zle(this._data)).call(t,this._data)})}}}let kue=class cz extends Vu{get idProp(){return this.getDataSet().idProp}constructor(e,t){var i;super(),Ri(this,"length",0),Ri(this,"_ids",new Fd),this._options=t||{},this._listener=ha(i=this._onEvent).call(i,this),this.setData(e)}setData(e){if(this._data){this._data.off&&this._data.off("*",this._listener);const t=this._data.getIds({filter:dr(this._options)}),i=this._data.get(t);this._ids.clear(),this.length=0,this._trigger("remove",{items:t,oldData:i})}if(e!=null){this._data=e;const t=this._data.getIds({filter:dr(this._options)});for(let i=0,n=t.length;i<n;i++){const s=t[i];this._ids.add(s)}this.length=t.length,this._trigger("add",{items:t})}else this._data=new Ms;this._data.on&&this._data.on("*",this._listener)}refresh(){const e=this._data.getIds({filter:dr(this._options)}),t=[...this._ids],i={},n=[],s=[],a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];i[u]=!0,this._ids.has(u)||(n.push(u),this._ids.add(u))}for(let o=0,l=t.length;o<l;o++){const u=t[o],c=this._data.get(u);c==null?console.error("If you see this, report it please."):i[u]||(s.push(u),a.push(c),this._ids.delete(u))}this.length+=n.length-s.length,n.length&&this._trigger("add",{items:n}),s.length&&this._trigger("remove",{items:s,oldData:a})}get(e,t){if(this._data==null)return null;let i=null,n;Wb(e)||Ji(e)?(i=e,n=t):n=e;const s=oF({},this._options,n),a=dr(this._options),o=n&&dr(n);return a&&o&&(s.filter=l=>a(l)&&o(l)),i==null?this._data.get(s):this._data.get(i,s)}getIds(e){if(this._data.length){const t=dr(this._options),i=e!=null?dr(e):null;let n;return i?t?n=s=>t(s)&&i(s):n=i:n=t,this._data.getIds({filter:n,order:e&&e.order})}else return[]}forEach(e,t){if(this._data){var i;const n=dr(this._options),s=t&&dr(t);let a;s?n?a=function(o){return n(o)&&s(o)}:a=s:a=n,Rs(i=this._data).call(i,e,{filter:a,order:t&&t.order})}}map(e,t){if(this._data){var i;const n=dr(this._options),s=t&&dr(t);let a;return s?n?a=o=>n(o)&&s(o):a=s:a=n,di(i=this._data).call(i,e,{filter:a,order:t&&t.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(e){var t;return this._data.stream(e||{[ba]:ha(t=_a(this._ids)).call(t,this._ids)})}dispose(){var e;(e=this._data)!==null&&e!==void 0&&e.off&&this._data.off("*",this._listener);const t="This data view has already been disposed of.",i={get:()=>{throw new Error(t)},set:()=>{throw new Error(t)},configurable:!1};for(const n of TL(cz.prototype))Hq(this,n,i)}_onEvent(e,t,i){if(!t||!t.items||!this._data)return;const n=t.items,s=[],a=[],o=[],l=[],u=[],c=[];switch(e){case"add":for(let h=0,f=n.length;h<f;h++){const p=n[h];this.get(p)&&(this._ids.add(p),s.push(p))}break;case"update":for(let h=0,f=n.length;h<f;h++){const p=n[h];this.get(p)?this._ids.has(p)?(a.push(p),u.push(t.data[h]),l.push(t.oldData[h])):(this._ids.add(p),s.push(p)):this._ids.has(p)&&(this._ids.delete(p),o.push(p),c.push(t.oldData[h]))}break;case"remove":for(let h=0,f=n.length;h<f;h++){const p=n[h];this._ids.has(p)&&(this._ids.delete(p),o.push(p),c.push(t.oldData[h]))}break}this.length+=s.length-o.length,s.length&&this._trigger("add",{items:s},i),a.length&&this._trigger("update",{items:a,oldData:l,data:u},i),o.length&&this._trigger("remove",{items:o,oldData:c},i)}};function Mue(r,e){return typeof e=="object"&&e!==null&&r===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof Rs(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof di(e)=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function $ue(r,e){return typeof e=="object"&&e!==null&&r===e.idProp&&typeof Rs(e)=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof di(e)=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&Mue(r,e.getDataSet())}var z4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Re(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Y4={},zu,K4;function Ft(){if(K4)return zu;K4=1;var r=function(e){return e&&e.Math===Math&&e};return zu=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof z4=="object"&&z4)||r(typeof zu=="object"&&zu)||(function(){return this})()||Function("return this")(),zu}var S1,X4;function Ge(){return X4||(X4=1,S1=function(r){try{return!!r()}catch{return!0}}),S1}var x1,Q4;function Yu(){if(Q4)return x1;Q4=1;var r=Ge();return x1=!r(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),x1}var w1,Z4;function qd(){if(Z4)return w1;Z4=1;var r=Yu(),e=Function.prototype,t=e.apply,i=e.call;return w1=typeof Reflect=="object"&&Reflect.apply||(r?i.bind(t):function(){return i.apply(t,arguments)}),w1}var E1,J4;function Xe(){if(J4)return E1;J4=1;var r=Yu(),e=Function.prototype,t=e.call,i=r&&e.bind.bind(t,t);return E1=r?i:function(n){return function(){return t.apply(n,arguments)}},E1}var C1,eB;function Rn(){if(eB)return C1;eB=1;var r=Xe(),e=r({}.toString),t=r("".slice);return C1=function(i){return t(e(i),8,-1)},C1}var D1,tB;function I1(){if(tB)return D1;tB=1;var r=Rn(),e=Xe();return D1=function(t){if(r(t)==="Function")return e(t)},D1}var A1,rB;function fr(){if(rB)return A1;rB=1;var r=typeof document=="object"&&document.all;return A1=typeof r>"u"&&r!==void 0?function(e){return typeof e=="function"||e===r}:function(e){return typeof e=="function"},A1}var O1={},P1,iB;function Ht(){if(iB)return P1;iB=1;var r=Ge();return P1=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),P1}var R1,nB;function ei(){if(nB)return R1;nB=1;var r=Yu(),e=Function.prototype.call;return R1=r?e.bind(e):function(){return e.apply(e,arguments)},R1}var k1={},sB;function Bd(){if(sB)return k1;sB=1;var r={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,t=e&&!r.call({1:2},1);return k1.f=t?function(n){var s=e(this,n);return!!s&&s.enumerable}:r,k1}var M1,aB;function Ku(){return aB||(aB=1,M1=function(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}}),M1}var $1,oB;function Ud(){if(oB)return $1;oB=1;var r=Xe(),e=Ge(),t=Rn(),i=Object,n=r("".split);return $1=e(function(){return!i("z").propertyIsEnumerable(0)})?function(s){return t(s)==="String"?n(s,""):i(s)}:i,$1}var N1,lB;function Xu(){return lB||(lB=1,N1=function(r){return r==null}),N1}var L1,uB;function $s(){if(uB)return L1;uB=1;var r=Xu(),e=TypeError;return L1=function(t){if(r(t))throw new e("Can't call method on "+t);return t},L1}var F1,cB;function tn(){if(cB)return F1;cB=1;var r=Ud(),e=$s();return F1=function(t){return r(e(t))},F1}var q1,hB;function Dr(){if(hB)return q1;hB=1;var r=fr();return q1=function(e){return typeof e=="object"?e!==null:r(e)},q1}var B1,dB;function _t(){return dB||(dB=1,B1={}),B1}var U1,fB;function $i(){if(fB)return U1;fB=1;var r=_t(),e=Ft(),t=fr(),i=function(n){return t(n)?n:void 0};return U1=function(n,s){return arguments.length<2?i(r[n])||i(e[n]):r[n]&&r[n][s]||e[n]&&e[n][s]},U1}var j1,pB;function Vt(){if(pB)return j1;pB=1;var r=Xe();return j1=r({}.isPrototypeOf),j1}var H1,mB;function il(){if(mB)return H1;mB=1;var r=Ft(),e=r.navigator,t=e&&e.userAgent;return H1=t?String(t):"",H1}var V1,gB;function Qu(){if(gB)return V1;gB=1;var r=Ft(),e=il(),t=r.process,i=r.Deno,n=t&&t.versions||i&&i.version,s=n&&n.v8,a,o;return s&&(a=s.split("."),o=a[0]>0&&a[0]<4?1:+(a[0]+a[1])),!o&&e&&(a=e.match(/Edge\/(\d+)/),(!a||a[1]>=74)&&(a=e.match(/Chrome\/(\d+)/),a&&(o=+a[1]))),V1=o,V1}var G1,vB;function nl(){if(vB)return G1;vB=1;var r=Qu(),e=Ge(),t=Ft(),i=t.String;return G1=!!Object.getOwnPropertySymbols&&!e(function(){var n=Symbol("symbol detection");return!i(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}),G1}var W1,yB;function _B(){if(yB)return W1;yB=1;var r=nl();return W1=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol",W1}var z1,bB;function Zu(){if(bB)return z1;bB=1;var r=$i(),e=fr(),t=Vt(),i=_B(),n=Object;return z1=i?function(s){return typeof s=="symbol"}:function(s){var a=r("Symbol");return e(a)&&t(a.prototype,n(s))},z1}var Y1,TB;function sl(){if(TB)return Y1;TB=1;var r=String;return Y1=function(e){try{return r(e)}catch{return"Object"}},Y1}var K1,SB;function Ns(){if(SB)return K1;SB=1;var r=fr(),e=sl(),t=TypeError;return K1=function(i){if(r(i))return i;throw new t(e(i)+" is not a function")},K1}var X1,xB;function Q1(){if(xB)return X1;xB=1;var r=Ns(),e=Xu();return X1=function(t,i){var n=t[i];return e(n)?void 0:r(n)},X1}var Z1,wB;function Nue(){if(wB)return Z1;wB=1;var r=ei(),e=fr(),t=Dr(),i=TypeError;return Z1=function(n,s){var a,o;if(s==="string"&&e(a=n.toString)&&!t(o=r(a,n))||e(a=n.valueOf)&&!t(o=r(a,n))||s!=="string"&&e(a=n.toString)&&!t(o=r(a,n)))return o;throw new i("Can't convert object to primitive value")},Z1}var J1={exports:{}},eT,EB;function Ju(){return EB||(EB=1,eT=!0),eT}var tT,CB;function Lue(){if(CB)return tT;CB=1;var r=Ft(),e=Object.defineProperty;return tT=function(t,i){try{e(r,t,{value:i,configurable:!0,writable:!0})}catch{r[t]=i}return i},tT}var DB;function rT(){if(DB)return J1.exports;DB=1;var r=Ju(),e=Ft(),t=Lue(),i="__core-js_shared__",n=J1.exports=e[i]||t(i,{});return(n.versions||(n.versions=[])).push({version:"3.44.0",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),J1.exports}var iT,IB;function al(){if(IB)return iT;IB=1;var r=rT();return iT=function(e,t){return r[e]||(r[e]=t||{})},iT}var nT,AB;function fi(){if(AB)return nT;AB=1;var r=$s(),e=Object;return nT=function(t){return e(r(t))},nT}var sT,OB;function Br(){if(OB)return sT;OB=1;var r=Xe(),e=fi(),t=r({}.hasOwnProperty);return sT=Object.hasOwn||function(n,s){return t(e(n),s)},sT}var aT,PB;function jd(){if(PB)return aT;PB=1;var r=Xe(),e=0,t=Math.random(),i=r(1.1.toString);return aT=function(n){return"Symbol("+(n===void 0?"":n)+")_"+i(++e+t,36)},aT}var oT,RB;function Zt(){if(RB)return oT;RB=1;var r=Ft(),e=al(),t=Br(),i=jd(),n=nl(),s=_B(),a=r.Symbol,o=e("wks"),l=s?a.for||a:a&&a.withoutSetter||i;return oT=function(u){return t(o,u)||(o[u]=n&&t(a,u)?a[u]:l("Symbol."+u)),o[u]},oT}var lT,kB;function MB(){if(kB)return lT;kB=1;var r=ei(),e=Dr(),t=Zu(),i=Q1(),n=Nue(),s=Zt(),a=TypeError,o=s("toPrimitive");return lT=function(l,u){if(!e(l)||t(l))return l;var c=i(l,o),h;if(c){if(u===void 0&&(u="default"),h=r(c,l,u),!e(h)||t(h))return h;throw new a("Can't convert object to primitive value")}return u===void 0&&(u="number"),n(l,u)},lT}var uT,$B;function cT(){if($B)return uT;$B=1;var r=MB(),e=Zu();return uT=function(t){var i=r(t,"string");return e(i)?i:i+""},uT}var hT,NB;function LB(){if(NB)return hT;NB=1;var r=Ft(),e=Dr(),t=r.document,i=e(t)&&e(t.createElement);return hT=function(n){return i?t.createElement(n):{}},hT}var dT,FB;function qB(){if(FB)return dT;FB=1;var r=Ht(),e=Ge(),t=LB();return dT=!r&&!e(function(){return Object.defineProperty(t("div"),"a",{get:function(){return 7}}).a!==7}),dT}var BB;function Hd(){if(BB)return O1;BB=1;var r=Ht(),e=ei(),t=Bd(),i=Ku(),n=tn(),s=cT(),a=Br(),o=qB(),l=Object.getOwnPropertyDescriptor;return O1.f=r?l:function(c,h){if(c=n(c),h=s(h),o)try{return l(c,h)}catch{}if(a(c,h))return i(!e(t.f,c,h),c[h])},O1}var fT,UB;function Fue(){if(UB)return fT;UB=1;var r=Ge(),e=fr(),t=/#|\.prototype\./,i=function(l,u){var c=s[n(l)];return c===o?!0:c===a?!1:e(u)?r(u):!!u},n=i.normalize=function(l){return String(l).replace(t,".").toLowerCase()},s=i.data={},a=i.NATIVE="N",o=i.POLYFILL="P";return fT=i,fT}var pT,jB;function Vd(){if(jB)return pT;jB=1;var r=I1(),e=Ns(),t=Yu(),i=r(r.bind);return pT=function(n,s){return e(n),s===void 0?n:t?i(n,s):function(){return n.apply(s,arguments)}},pT}var mT={},gT,HB;function VB(){if(HB)return gT;HB=1;var r=Ht(),e=Ge();return gT=r&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),gT}var vT,GB;function ss(){if(GB)return vT;GB=1;var r=Dr(),e=String,t=TypeError;return vT=function(i){if(r(i))return i;throw new t(e(i)+" is not an object")},vT}var WB;function Ni(){if(WB)return mT;WB=1;var r=Ht(),e=qB(),t=VB(),i=ss(),n=cT(),s=TypeError,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l="enumerable",u="configurable",c="writable";return mT.f=r?t?function(f,p,g){if(i(f),p=n(p),i(g),typeof f=="function"&&p==="prototype"&&"value"in g&&c in g&&!g[c]){var v=o(f,p);v&&v[c]&&(f[p]=g.value,g={configurable:u in g?g[u]:v[u],enumerable:l in g?g[l]:v[l],writable:!1})}return a(f,p,g)}:a:function(f,p,g){if(i(f),p=n(p),i(g),e)try{return a(f,p,g)}catch{}if("get"in g||"set"in g)throw new s("Accessors not supported");return"value"in g&&(f[p]=g.value),f},mT}var yT,zB;function ol(){if(zB)return yT;zB=1;var r=Ht(),e=Ni(),t=Ku();return yT=r?function(i,n,s){return e.f(i,n,t(1,s))}:function(i,n,s){return i[n]=s,i},yT}var _T,YB;function we(){if(YB)return _T;YB=1;var r=Ft(),e=qd(),t=I1(),i=fr(),n=Hd().f,s=Fue(),a=_t(),o=Vd(),l=ol(),u=Br(),c=function(h){var f=function(p,g,v){if(this instanceof f){switch(arguments.length){case 0:return new h;case 1:return new h(p);case 2:return new h(p,g)}return new h(p,g,v)}return e(h,this,arguments)};return f.prototype=h.prototype,f};return _T=function(h,f){var p=h.target,g=h.global,v=h.stat,b=h.proto,E=g?r:v?r[p]:r[p]&&r[p].prototype,x=g?a:a[p]||l(a,p,{})[p],D=x.prototype,O,P,R,A,I,S,C,$,F;for(A in f)O=s(g?A:p+(v?".":"#")+A,h.forced),P=!O&&E&&u(E,A),S=x[A],P&&(h.dontCallGetSet?(F=n(E,A),C=F&&F.value):C=E[A]),I=P&&C?C:f[A],!(!O&&!b&&typeof S==typeof I)&&(h.bind&&P?$=o(I,r):h.wrap&&P?$=c(I):b&&i(I)?$=t(I):$=I,(h.sham||I&&I.sham||S&&S.sham)&&l($,"sham",!0),l(x,A,$),b&&(R=p+"Prototype",u(a,R)||l(a,R,{}),l(a[R],A,I),h.real&&D&&(O||!D[A])&&l(D,A,I)))},_T}var bT,KB;function Da(){if(KB)return bT;KB=1;var r=Rn();return bT=Array.isArray||function(t){return r(t)==="Array"},bT}var XB;function que(){if(XB)return Y4;XB=1;var r=we(),e=Da();return r({target:"Array",stat:!0},{isArray:e}),Y4}var TT,QB;function Bue(){if(QB)return TT;QB=1,que();var r=_t();return TT=r.Array.isArray,TT}var ST,ZB;function Uue(){if(ZB)return ST;ZB=1;var r=Bue();return ST=r,ST}var xT,JB;function jue(){return JB||(JB=1,xT=Uue()),xT}var Hue=jue(),it=Re(Hue),e5={},wT,t5;function ll(){if(t5)return wT;t5=1;var r=Xe();return wT=r([].slice),wT}var ET,r5;function Vue(){if(r5)return ET;r5=1;var r=Xe(),e=Ns(),t=Dr(),i=Br(),n=ll(),s=Yu(),a=Function,o=r([].concat),l=r([].join),u={},c=function(h,f,p){if(!i(u,f)){for(var g=[],v=0;v<f;v++)g[v]="a["+v+"]";u[f]=a("C,a","return new C("+l(g,",")+")")}return u[f](h,p)};return ET=s?a.bind:function(f){var p=e(this),g=p.prototype,v=n(arguments,1),b=function(){var x=o(v,n(arguments));return this instanceof b?c(p,x.length,x):p.apply(f,x)};return t(g)&&(b.prototype=g),b},ET}var i5;function Gue(){if(i5)return e5;i5=1;var r=we(),e=Vue();return r({target:"Function",proto:!0,forced:Function.bind!==e},{bind:e}),e5}var CT,n5;function pr(){if(n5)return CT;n5=1;var r=Ft(),e=_t();return CT=function(t,i){var n=e[t+"Prototype"],s=n&&n[i];if(s)return s;var a=r[t],o=a&&a.prototype;return o&&o[i]},CT}var DT,s5;function Wue(){if(s5)return DT;s5=1,Gue();var r=pr();return DT=r("Function","bind"),DT}var IT,a5;function zue(){if(a5)return IT;a5=1;var r=Vt(),e=Wue(),t=Function.prototype;return IT=function(i){var n=i.bind;return i===t||r(t,i)&&n===t.bind?e:n},IT}var AT,o5;function Yue(){if(o5)return AT;o5=1;var r=zue();return AT=r,AT}var OT,l5;function Kue(){return l5||(l5=1,OT=Yue()),OT}var Xue=Kue(),se=Re(Xue),u5={},c5={},PT,h5;function d5(){if(h5)return PT;h5=1;var r=Ft(),e=il(),t=Rn(),i=function(n){return e.slice(0,n.length)===n};return PT=(function(){return i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":r.Bun&&typeof Bun.version=="string"?"BUN":r.Deno&&typeof Deno.version=="object"?"DENO":t(r.process)==="process"?"NODE":r.window&&r.document?"BROWSER":"REST"})(),PT}var RT,f5;function Que(){if(f5)return RT;f5=1;var r=TypeError;return RT=function(e,t){if(e<t)throw new r("Not enough arguments");return e},RT}var kT,p5;function m5(){if(p5)return kT;p5=1;var r=Ft(),e=qd(),t=fr(),i=d5(),n=il(),s=ll(),a=Que(),o=r.Function,l=/MSIE .\./.test(n)||i==="BUN"&&(function(){var u=r.Bun.version.split(".");return u.length<3||u[0]==="0"&&(u[1]<3||u[1]==="3"&&u[2]==="0")})();return kT=function(u,c){var h=c?2:1;return l?function(f,p){var g=a(arguments.length,1)>h,v=t(f)?f:o(f),b=g?s(arguments,h):[],E=g?function(){e(v,this,b)}:v;return c?u(E,p):u(E)}:u},kT}var g5;function Zue(){if(g5)return c5;g5=1;var r=we(),e=Ft(),t=m5(),i=t(e.setInterval,!0);return r({global:!0,bind:!0,forced:e.setInterval!==i},{setInterval:i}),c5}var v5={},y5;function Jue(){if(y5)return v5;y5=1;var r=we(),e=Ft(),t=m5(),i=t(e.setTimeout,!0);return r({global:!0,bind:!0,forced:e.setTimeout!==i},{setTimeout:i}),v5}var _5;function b5(){return _5||(_5=1,Zue(),Jue()),u5}var MT,T5;function ece(){if(T5)return MT;T5=1,b5();var r=_t();return MT=r.setTimeout,MT}var $T,S5;function tce(){return S5||(S5=1,$T=ece()),$T}var rce=tce(),Ur=Re(rce),NT,x5;function LT(){if(x5)return NT;x5=1;var r=Zt(),e=r("toStringTag"),t={};return t[e]="z",NT=String(t)==="[object z]",NT}var FT,w5;function ec(){if(w5)return FT;w5=1;var r=LT(),e=fr(),t=Rn(),i=Zt(),n=i("toStringTag"),s=Object,a=t((function(){return arguments})())==="Arguments",o=function(l,u){try{return l[u]}catch{}};return FT=r?t:function(l){var u,c,h;return l===void 0?"Undefined":l===null?"Null":typeof(c=o(u=s(l),n))=="string"?c:a?t(u):(h=t(u))==="Object"&&e(u.callee)?"Arguments":h},FT}var E5={},qT,C5;function ice(){if(C5)return qT;C5=1;var r=Math.ceil,e=Math.floor;return qT=Math.trunc||function(i){var n=+i;return(n>0?e:r)(n)},qT}var BT,D5;function ul(){if(D5)return BT;D5=1;var r=ice();return BT=function(e){var t=+e;return t!==t||t===0?0:r(t)},BT}var UT,I5;function A5(){if(I5)return UT;I5=1;var r=ul(),e=Math.min;return UT=function(t){var i=r(t);return i>0?e(i,9007199254740991):0},UT}var jT,O5;function as(){if(O5)return jT;O5=1;var r=A5();return jT=function(e){return r(e.length)},jT}var HT,P5;function nce(){if(P5)return HT;P5=1;var r=Xe(),e=fr(),t=rT(),i=r(Function.toString);return e(t.inspectSource)||(t.inspectSource=function(n){return i(n)}),HT=t.inspectSource,HT}var VT,R5;function k5(){if(R5)return VT;R5=1;var r=Xe(),e=Ge(),t=fr(),i=ec(),n=$i(),s=nce(),a=function(){},o=n("Reflect","construct"),l=/^\s*(?:class|function)\b/,u=r(l.exec),c=!l.test(a),h=function(g){if(!t(g))return!1;try{return o(a,[],g),!0}catch{return!1}},f=function(g){if(!t(g))return!1;switch(i(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return c||!!u(l,s(g))}catch{return!0}};return f.sham=!0,VT=!o||e(function(){var p;return h(h.call)||!h(Object)||!h(function(){p=!0})||p})?f:h,VT}var GT,M5;function sce(){if(M5)return GT;M5=1;var r=Da(),e=k5(),t=Dr(),i=Zt(),n=i("species"),s=Array;return GT=function(a){var o;return r(a)&&(o=a.constructor,e(o)&&(o===s||r(o.prototype))?o=void 0:t(o)&&(o=o[n],o===null&&(o=void 0))),o===void 0?s:o},GT}var WT,$5;function zT(){if($5)return WT;$5=1;var r=sce();return WT=function(e,t){return new(r(e))(t===0?0:t)},WT}var YT,N5;function Ls(){if(N5)return YT;N5=1;var r=Vd(),e=Xe(),t=Ud(),i=fi(),n=as(),s=zT(),a=e([].push),o=function(l){var u=l===1,c=l===2,h=l===3,f=l===4,p=l===6,g=l===7,v=l===5||p;return function(b,E,x,D){for(var O=i(b),P=t(O),R=n(P),A=r(E,x),I=0,S=D||s,C=u?S(b,R):c||g?S(b,0):void 0,$,F;R>I;I++)if((v||I in P)&&($=P[I],F=A($,I,O),l))if(u)C[I]=F;else if(F)switch(l){case 3:return!0;case 5:return $;case 6:return I;case 2:a(C,$)}else switch(l){case 4:return!1;case 7:a(C,$)}return p?-1:h||f?f:C}};return YT={forEach:o(0),map:o(1),filter:o(2),some:o(3),every:o(4),find:o(5),findIndex:o(6),filterReject:o(7)},YT}var KT,L5;function cl(){if(L5)return KT;L5=1;var r=Ge();return KT=function(e,t){var i=[][e];return!!i&&r(function(){i.call(null,t||function(){return 1},1)})},KT}var XT,F5;function ace(){if(F5)return XT;F5=1;var r=Ls().forEach,e=cl(),t=e("forEach");return XT=t?[].forEach:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)},XT}var q5;function oce(){if(q5)return E5;q5=1;var r=we(),e=ace();return r({target:"Array",proto:!0,forced:[].forEach!==e},{forEach:e}),E5}var QT,B5;function lce(){if(B5)return QT;B5=1,oce();var r=pr();return QT=r("Array","forEach"),QT}var ZT,U5;function uce(){if(U5)return ZT;U5=1;var r=lce();return ZT=r,ZT}var JT,j5;function cce(){if(j5)return JT;j5=1;var r=ec(),e=Br(),t=Vt(),i=uce(),n=Array.prototype,s={DOMTokenList:!0,NodeList:!0};return JT=function(a){var o=a.forEach;return a===n||t(n,a)&&o===n.forEach||e(s,r(a))?i:o},JT}var eS,H5;function hce(){return H5||(H5=1,eS=cce()),eS}var dce=hce(),ye=Re(dce);const ti=typeof window<"u"&&window.moment||ce;var V5={},G5={},tS,W5;function Li(){if(W5)return tS;W5=1;var r=ec(),e=String;return tS=function(t){if(r(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(t)},tS}var rS={},iS,z5;function Gd(){if(z5)return iS;z5=1;var r=ul(),e=Math.max,t=Math.min;return iS=function(i,n){var s=r(i);return s<0?e(s+n,0):t(s,n)},iS}var nS,Y5;function sS(){if(Y5)return nS;Y5=1;var r=tn(),e=Gd(),t=as(),i=function(n){return function(s,a,o){var l=r(s),u=t(l);if(u===0)return!n&&-1;var c=e(o,u),h;if(n&&a!==a){for(;u>c;)if(h=l[c++],h!==h)return!0}else for(;u>c;c++)if((n||c in l)&&l[c]===a)return n||c||0;return!n&&-1}};return nS={includes:i(!0),indexOf:i(!1)},nS}var aS,K5;function tc(){return K5||(K5=1,aS={}),aS}var oS,X5;function Q5(){if(X5)return oS;X5=1;var r=Xe(),e=Br(),t=tn(),i=sS().indexOf,n=tc(),s=r([].push);return oS=function(a,o){var l=t(a),u=0,c=[],h;for(h in l)!e(n,h)&&e(l,h)&&s(c,h);for(;o.length>u;)e(l,h=o[u++])&&(~i(c,h)||s(c,h));return c},oS}var lS,Z5;function uS(){return Z5||(Z5=1,lS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),lS}var cS,J5;function rc(){if(J5)return cS;J5=1;var r=Q5(),e=uS();return cS=Object.keys||function(i){return r(i,e)},cS}var e8;function hS(){if(e8)return rS;e8=1;var r=Ht(),e=VB(),t=Ni(),i=ss(),n=tn(),s=rc();return rS.f=r&&!e?Object.defineProperties:function(o,l){i(o);for(var u=n(l),c=s(l),h=c.length,f=0,p;h>f;)t.f(o,p=c[f++],u[p]);return o},rS}var dS,t8;function fce(){if(t8)return dS;t8=1;var r=$i();return dS=r("document","documentElement"),dS}var fS,r8;function Wd(){if(r8)return fS;r8=1;var r=al(),e=jd(),t=r("keys");return fS=function(i){return t[i]||(t[i]=e(i))},fS}var pS,i8;function ic(){if(i8)return pS;i8=1;var r=ss(),e=hS(),t=uS(),i=tc(),n=fce(),s=LB(),a=Wd(),o=">",l="<",u="prototype",c="script",h=a("IE_PROTO"),f=function(){},p=function(x){return l+c+o+x+l+"/"+c+o},g=function(x){x.write(p("")),x.close();var D=x.parentWindow.Object;return x=null,D},v=function(){var x=s("iframe"),D="java"+c+":",O;return x.style.display="none",n.appendChild(x),x.src=String(D),O=x.contentWindow.document,O.open(),O.write(p("document.F=Object")),O.close(),O.F},b,E=function(){try{b=new ActiveXObject("htmlfile")}catch{}E=typeof document<"u"?document.domain&&b?g(b):v():g(b);for(var x=t.length;x--;)delete E[u][t[x]];return E()};return i[h]=!0,pS=Object.create||function(D,O){var P;return D!==null?(f[u]=r(D),P=new f,f[u]=null,P[h]=D):P=E(),O===void 0?P:e.f(P,O)},pS}var mS={},n8;function zd(){if(n8)return mS;n8=1;var r=Q5(),e=uS(),t=e.concat("length","prototype");return mS.f=Object.getOwnPropertyNames||function(n){return r(n,t)},mS}var gS={},s8;function a8(){if(s8)return gS;s8=1;var r=Rn(),e=tn(),t=zd().f,i=ll(),n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(a){try{return t(a)}catch{return i(n)}};return gS.f=function(o){return n&&r(o)==="Window"?s(o):t(e(o))},gS}var vS={},o8;function Yd(){return o8||(o8=1,vS.f=Object.getOwnPropertySymbols),vS}var yS,l8;function nc(){if(l8)return yS;l8=1;var r=ol();return yS=function(e,t,i,n){return n&&n.enumerable?e[t]=i:r(e,t,i),e},yS}var _S,u8;function bS(){if(u8)return _S;u8=1;var r=Ni();return _S=function(e,t,i){return r.f(e,t,i)},_S}var TS={},c8;function Kd(){if(c8)return TS;c8=1;var r=Zt();return TS.f=r,TS}var SS,h8;function Nt(){if(h8)return SS;h8=1;var r=_t(),e=Br(),t=Kd(),i=Ni().f;return SS=function(n){var s=r.Symbol||(r.Symbol={});e(s,n)||i(s,n,{value:t.f(n)})},SS}var xS,d8;function f8(){if(d8)return xS;d8=1;var r=ei(),e=$i(),t=Zt(),i=nc();return xS=function(){var n=e("Symbol"),s=n&&n.prototype,a=s&&s.valueOf,o=t("toPrimitive");s&&!s[o]&&i(s,o,function(l){return r(a,this)},{arity:1})},xS}var wS,p8;function pce(){if(p8)return wS;p8=1;var r=LT(),e=ec();return wS=r?{}.toString:function(){return"[object "+e(this)+"]"},wS}var ES,m8;function Ia(){if(m8)return ES;m8=1;var r=LT(),e=Ni().f,t=ol(),i=Br(),n=pce(),s=Zt(),a=s("toStringTag");return ES=function(o,l,u,c){var h=u?o:o&&o.prototype;h&&(i(h,a)||e(h,a,{configurable:!0,value:l}),c&&!r&&t(h,"toString",n))},ES}var CS,g8;function mce(){if(g8)return CS;g8=1;var r=Ft(),e=fr(),t=r.WeakMap;return CS=e(t)&&/native code/.test(String(t)),CS}var DS,v8;function sc(){if(v8)return DS;v8=1;var r=mce(),e=Ft(),t=Dr(),i=ol(),n=Br(),s=rT(),a=Wd(),o=tc(),l="Object already initialized",u=e.TypeError,c=e.WeakMap,h,f,p,g=function(x){return p(x)?f(x):h(x,{})},v=function(x){return function(D){var O;if(!t(D)||(O=f(D)).type!==x)throw new u("Incompatible receiver, "+x+" required");return O}};if(r||s.state){var b=s.state||(s.state=new c);b.get=b.get,b.has=b.has,b.set=b.set,h=function(x,D){if(b.has(x))throw new u(l);return D.facade=x,b.set(x,D),D},f=function(x){return b.get(x)||{}},p=function(x){return b.has(x)}}else{var E=a("state");o[E]=!0,h=function(x,D){if(n(x,E))throw new u(l);return D.facade=x,i(x,E,D),D},f=function(x){return n(x,E)?x[E]:{}},p=function(x){return n(x,E)}}return DS={set:h,get:f,has:p,enforce:g,getterFor:v},DS}var y8;function gce(){if(y8)return G5;y8=1;var r=we(),e=Ft(),t=ei(),i=Xe(),n=Ju(),s=Ht(),a=nl(),o=Ge(),l=Br(),u=Vt(),c=ss(),h=tn(),f=cT(),p=Li(),g=Ku(),v=ic(),b=rc(),E=zd(),x=a8(),D=Yd(),O=Hd(),P=Ni(),R=hS(),A=Bd(),I=nc(),S=bS(),C=al(),$=Wd(),F=tc(),j=jd(),z=Zt(),J=Kd(),Z=Nt(),W=f8(),Y=Ia(),X=sc(),ie=Ls().forEach,Q=$("hidden"),he="Symbol",ve="prototype",pe=X.set,be=X.getterFor(he),Oe=Object[ve],Qe=e.Symbol,Ze=Qe&&Qe[ve],tr=e.RangeError,Ir=e.TypeError,bt=e.QObject,Wt=O.f,Ot=P.f,Pt=x.f,ji=A.f,Tt=i([].push),mt=C("symbols"),St=C("op-symbols"),Ar=C("wks"),Ae=!bt||!bt[ve]||!bt[ve].findChild,et=function(Te,ae,me){var fe=Wt(Oe,ae);fe&&delete Oe[ae],Ot(Te,ae,me),fe&&Te!==Oe&&Ot(Oe,ae,fe)},Je=s&&o(function(){return v(Ot({},"a",{get:function(){return Ot(this,"a",{value:7}).a}})).a!==7})?et:Ot,Or=function(Te,ae){var me=mt[Te]=v(Ze);return pe(me,{type:he,tag:Te,description:ae}),s||(me.description=ae),me},sr=function(ae,me,fe){ae===Oe&&sr(St,me,fe),c(ae);var Se=f(me);return c(fe),l(mt,Se)?(fe.enumerable?(l(ae,Q)&&ae[Q][Se]&&(ae[Q][Se]=!1),fe=v(fe,{enumerable:g(0,!1)})):(l(ae,Q)||Ot(ae,Q,g(1,v(null))),ae[Q][Se]=!0),Je(ae,Se,fe)):Ot(ae,Se,fe)},Gr=function(ae,me){c(ae);var fe=h(me),Se=b(fe).concat(on(fe));return ie(Se,function(He){(!s||t(Pr,fe,He))&&sr(ae,He,fe[He])}),ae},sn=function(ae,me){return me===void 0?v(ae):Gr(v(ae),me)},Pr=function(ae){var me=f(ae),fe=t(ji,this,me);return this===Oe&&l(mt,me)&&!l(St,me)?!1:fe||!l(this,me)||!l(mt,me)||l(this,Q)&&this[Q][me]?fe:!0},ni=function(ae,me){var fe=h(ae),Se=f(me);if(!(fe===Oe&&l(mt,Se)&&!l(St,Se))){var He=Wt(fe,Se);return He&&l(mt,Se)&&!(l(fe,Q)&&fe[Q][Se])&&(He.enumerable=!0),He}},an=function(ae){var me=Pt(h(ae)),fe=[];return ie(me,function(Se){!l(mt,Se)&&!l(F,Se)&&Tt(fe,Se)}),fe},on=function(Te){var ae=Te===Oe,me=Pt(ae?St:h(Te)),fe=[];return ie(me,function(Se){l(mt,Se)&&(!ae||l(Oe,Se))&&Tt(fe,mt[Se])}),fe};return a||(Qe=function(){if(u(Ze,this))throw new Ir("Symbol is not a constructor");var ae=!arguments.length||arguments[0]===void 0?void 0:p(arguments[0]),me=j(ae),fe=function(Se){var He=this===void 0?e:this;He===Oe&&t(fe,St,Se),l(He,Q)&&l(He[Q],me)&&(He[Q][me]=!1);var ln=g(1,Se);try{Je(He,me,ln)}catch(si){if(!(si instanceof tr))throw si;et(He,me,ln)}};return s&&Ae&&Je(Oe,me,{configurable:!0,set:fe}),Or(me,ae)},Ze=Qe[ve],I(Ze,"toString",function(){return be(this).tag}),I(Qe,"withoutSetter",function(Te){return Or(j(Te),Te)}),A.f=Pr,P.f=sr,R.f=Gr,O.f=ni,E.f=x.f=an,D.f=on,J.f=function(Te){return Or(z(Te),Te)},s&&(S(Ze,"description",{configurable:!0,get:function(){return be(this).description}}),n||I(Oe,"propertyIsEnumerable",Pr,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!a,sham:!a},{Symbol:Qe}),ie(b(Ar),function(Te){Z(Te)}),r({target:he,stat:!0,forced:!a},{useSetter:function(){Ae=!0},useSimple:function(){Ae=!1}}),r({target:"Object",stat:!0,forced:!a,sham:!s},{create:sn,defineProperty:sr,defineProperties:Gr,getOwnPropertyDescriptor:ni}),r({target:"Object",stat:!0,forced:!a},{getOwnPropertyNames:an}),W(),Y(Qe,he),F[Q]=!0,G5}var _8={},IS,b8;function T8(){if(b8)return IS;b8=1;var r=nl();return IS=r&&!!Symbol.for&&!!Symbol.keyFor,IS}var S8;function vce(){if(S8)return _8;S8=1;var r=we(),e=$i(),t=Br(),i=Li(),n=al(),s=T8(),a=n("string-to-symbol-registry"),o=n("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!s},{for:function(l){var u=i(l);if(t(a,u))return a[u];var c=e("Symbol")(u);return a[u]=c,o[c]=u,c}}),_8}var x8={},w8;function yce(){if(w8)return x8;w8=1;var r=we(),e=Br(),t=Zu(),i=sl(),n=al(),s=T8(),a=n("symbol-to-string-registry");return r({target:"Symbol",stat:!0,forced:!s},{keyFor:function(l){if(!t(l))throw new TypeError(i(l)+" is not a symbol");if(e(a,l))return a[l]}}),x8}var E8={},AS,C8;function _ce(){if(C8)return AS;C8=1;var r=Xe(),e=Da(),t=fr(),i=Rn(),n=Li(),s=r([].push);return AS=function(a){if(t(a))return a;if(e(a)){for(var o=a.length,l=[],u=0;u<o;u++){var c=a[u];typeof c=="string"?s(l,c):(typeof c=="number"||i(c)==="Number"||i(c)==="String")&&s(l,n(c))}var h=l.length,f=!0;return function(p,g){if(f)return f=!1,g;if(e(this))return g;for(var v=0;v<h;v++)if(l[v]===p)return g}}},AS}var D8;function I8(){if(D8)return E8;D8=1;var r=we(),e=$i(),t=qd(),i=ei(),n=Xe(),s=Ge(),a=fr(),o=Zu(),l=ll(),u=_ce(),c=nl(),h=String,f=e("JSON","stringify"),p=n(/./.exec),g=n("".charAt),v=n("".charCodeAt),b=n("".replace),E=n(1.1.toString),x=/[\uD800-\uDFFF]/g,D=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,P=!c||s(function(){var S=e("Symbol")("stringify detection");return f([S])!=="[null]"||f({a:S})!=="{}"||f(Object(S))!=="{}"}),R=s(function(){return f("\uDF06\uD834")!=='"\\udf06\\ud834"'||f("\uDEAD")!=='"\\udead"'}),A=function(S,C){var $=l(arguments),F=u(C);if(!(!a(F)&&(S===void 0||o(S))))return $[1]=function(j,z){if(a(F)&&(z=i(F,this,h(j),z)),!o(z))return z},t(f,null,$)},I=function(S,C,$){var F=g($,C-1),j=g($,C+1);return p(D,S)&&!p(O,j)||p(O,S)&&!p(D,F)?"\\u"+E(v(S,0),16):S};return f&&r({target:"JSON",stat:!0,arity:3,forced:P||R},{stringify:function(C,$,F){var j=l(arguments),z=t(P?A:f,null,j);return R&&typeof z=="string"?b(z,x,I):z}}),E8}var A8={},O8;function bce(){if(O8)return A8;O8=1;var r=we(),e=nl(),t=Ge(),i=Yd(),n=fi(),s=!e||t(function(){i.f(1)});return r({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(o){var l=i.f;return l?l(n(o)):[]}}),A8}var P8;function R8(){return P8||(P8=1,gce(),vce(),yce(),I8(),bce()),V5}var OS,k8;function Tce(){if(k8)return OS;k8=1,R8();var r=_t();return OS=r.Object.getOwnPropertySymbols,OS}var PS,M8;function Sce(){if(M8)return PS;M8=1;var r=Tce();return PS=r,PS}var RS,$8;function xce(){return $8||($8=1,RS=Sce()),RS}var wce=xce(),N8=Re(wce),L8={},kS,F8;function ac(){if(F8)return kS;F8=1;var r=Ge(),e=Zt(),t=Qu(),i=e("species");return kS=function(n){return t>=51||!r(function(){var s=[],a=s.constructor={};return a[i]=function(){return{foo:1}},s[n](Boolean).foo!==1})},kS}var q8;function Ece(){if(q8)return L8;q8=1;var r=we(),e=Ls().filter,t=ac(),i=t("filter");return r({target:"Array",proto:!0,forced:!i},{filter:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),L8}var MS,B8;function Cce(){if(B8)return MS;B8=1,Ece();var r=pr();return MS=r("Array","filter"),MS}var $S,U8;function Dce(){if(U8)return $S;U8=1;var r=Vt(),e=Cce(),t=Array.prototype;return $S=function(i){var n=i.filter;return i===t||r(t,i)&&n===t.filter?e:n},$S}var NS,j8;function Ice(){if(j8)return NS;j8=1;var r=Dce();return NS=r,NS}var LS,H8;function Ace(){return H8||(H8=1,LS=Ice()),LS}var Oce=Ace(),We=Re(Oce),FS={exports:{}},V8={},G8;function Pce(){if(G8)return V8;G8=1;var r=we(),e=Ge(),t=tn(),i=Hd().f,n=Ht(),s=!n||e(function(){i(1)});return r({target:"Object",stat:!0,forced:s,sham:!n},{getOwnPropertyDescriptor:function(o,l){return i(t(o),l)}}),V8}var W8;function Rce(){if(W8)return FS.exports;W8=1,Pce();var r=_t(),e=r.Object,t=FS.exports=function(n,s){return e.getOwnPropertyDescriptor(n,s)};return e.getOwnPropertyDescriptor.sham&&(t.sham=!0),FS.exports}var qS,z8;function kce(){if(z8)return qS;z8=1;var r=Rce();return qS=r,qS}var BS,Y8;function Mce(){return Y8||(Y8=1,BS=kce()),BS}var $ce=Mce(),K8=Re($ce),X8={},US,Q8;function Z8(){if(Q8)return US;Q8=1;var r=$i(),e=Xe(),t=zd(),i=Yd(),n=ss(),s=e([].concat);return US=r("Reflect","ownKeys")||function(o){var l=t.f(n(o)),u=i.f;return u?s(l,u(o)):l},US}var jS,J8;function Xd(){if(J8)return jS;J8=1;var r=Ht(),e=Ni(),t=Ku();return jS=function(i,n,s){r?e.f(i,n,t(0,s)):i[n]=s},jS}var eU;function Nce(){if(eU)return X8;eU=1;var r=we(),e=Ht(),t=Z8(),i=tn(),n=Hd(),s=Xd();return r({target:"Object",stat:!0,sham:!e},{getOwnPropertyDescriptors:function(o){for(var l=i(o),u=n.f,c=t(l),h={},f=0,p,g;c.length>f;)g=u(l,p=c[f++]),g!==void 0&&s(h,p,g);return h}}),X8}var HS,tU;function Lce(){if(tU)return HS;tU=1,Nce();var r=_t();return HS=r.Object.getOwnPropertyDescriptors,HS}var VS,rU;function Fce(){if(rU)return VS;rU=1;var r=Lce();return VS=r,VS}var GS,iU;function qce(){return iU||(iU=1,GS=Fce()),GS}var Bce=qce(),nU=Re(Bce),WS={exports:{}},sU={},aU;function Uce(){if(aU)return sU;aU=1;var r=we(),e=Ht(),t=hS().f;return r({target:"Object",stat:!0,forced:Object.defineProperties!==t,sham:!e},{defineProperties:t}),sU}var oU;function jce(){if(oU)return WS.exports;oU=1,Uce();var r=_t(),e=r.Object,t=WS.exports=function(n,s){return e.defineProperties(n,s)};return e.defineProperties.sham&&(t.sham=!0),WS.exports}var zS,lU;function Hce(){if(lU)return zS;lU=1;var r=jce();return zS=r,zS}var YS,uU;function Vce(){return uU||(uU=1,YS=Hce()),YS}var Gce=Vce(),Wce=Re(Gce),KS={exports:{}},cU={},hU;function zce(){if(hU)return cU;hU=1;var r=we(),e=Ht(),t=Ni().f;return r({target:"Object",stat:!0,forced:Object.defineProperty!==t,sham:!e},{defineProperty:t}),cU}var dU;function Yce(){if(dU)return KS.exports;dU=1,zce();var r=_t(),e=r.Object,t=KS.exports=function(n,s,a){return e.defineProperty(n,s,a)};return e.defineProperty.sham&&(t.sham=!0),KS.exports}var XS,fU;function pU(){if(fU)return XS;fU=1;var r=Yce();return XS=r,XS}var QS,mU;function Kce(){if(mU)return QS;mU=1;var r=pU();return QS=r,QS}var ZS,gU;function Xce(){if(gU)return ZS;gU=1;var r=Kce();return ZS=r,ZS}var JS,vU;function Qce(){return vU||(vU=1,JS=Xce()),JS}var Zce=Qce(),Jce=Re(Zce),yU={},ex,_U;function bU(){if(_U)return ex;_U=1;var r=TypeError,e=9007199254740991;return ex=function(t){if(t>e)throw r("Maximum allowed index exceeded");return t},ex}var TU;function SU(){if(TU)return yU;TU=1;var r=we(),e=Ge(),t=Da(),i=Dr(),n=fi(),s=as(),a=bU(),o=Xd(),l=zT(),u=ac(),c=Zt(),h=Qu(),f=c("isConcatSpreadable"),p=h>=51||!e(function(){var b=[];return b[f]=!1,b.concat()[0]!==b}),g=function(b){if(!i(b))return!1;var E=b[f];return E!==void 0?!!E:t(b)},v=!p||!u("concat");return r({target:"Array",proto:!0,arity:1,forced:v},{concat:function(E){var x=n(this),D=l(x,0),O=0,P,R,A,I,S;for(P=-1,A=arguments.length;P<A;P++)if(S=P===-1?x:arguments[P],g(S))for(I=s(S),a(O+I),R=0;R<I;R++,O++)R in S&&o(D,O,S[R]);else a(O+1),o(D,O++,S);return D.length=O,D}}),yU}var xU={},wU;function EU(){if(wU)return xU;wU=1;var r=Nt();return r("asyncDispose"),xU}var CU={},DU;function ehe(){if(DU)return CU;DU=1;var r=Nt();return r("asyncIterator"),CU}var IU={},AU;function OU(){if(AU)return IU;AU=1;var r=Nt();return r("dispose"),IU}var PU={},RU;function the(){if(RU)return PU;RU=1;var r=Nt();return r("hasInstance"),PU}var kU={},MU;function rhe(){if(MU)return kU;MU=1;var r=Nt();return r("isConcatSpreadable"),kU}var $U={},NU;function LU(){if(NU)return $U;NU=1;var r=Nt();return r("iterator"),$U}var FU={},qU;function ihe(){if(qU)return FU;qU=1;var r=Nt();return r("match"),FU}var BU={},UU;function nhe(){if(UU)return BU;UU=1;var r=Nt();return r("matchAll"),BU}var jU={},HU;function she(){if(HU)return jU;HU=1;var r=Nt();return r("replace"),jU}var VU={},GU;function ahe(){if(GU)return VU;GU=1;var r=Nt();return r("search"),VU}var WU={},zU;function ohe(){if(zU)return WU;zU=1;var r=Nt();return r("species"),WU}var YU={},KU;function lhe(){if(KU)return YU;KU=1;var r=Nt();return r("split"),YU}var XU={},QU;function ZU(){if(QU)return XU;QU=1;var r=Nt(),e=f8();return r("toPrimitive"),e(),XU}var JU={},e6;function uhe(){if(e6)return JU;e6=1;var r=$i(),e=Nt(),t=Ia();return e("toStringTag"),t(r("Symbol"),"Symbol"),JU}var t6={},r6;function che(){if(r6)return t6;r6=1;var r=Nt();return r("unscopables"),t6}var i6={},n6;function hhe(){if(n6)return i6;n6=1;var r=Ft(),e=Ia();return e(r.JSON,"JSON",!0),i6}var tx,s6;function dhe(){if(s6)return tx;s6=1,SU(),R8(),EU(),ehe(),OU(),the(),rhe(),LU(),ihe(),nhe(),she(),ahe(),ohe(),lhe(),ZU(),uhe(),che(),hhe();var r=_t();return tx=r.Symbol,tx}var a6={},rx,o6;function Qd(){return o6||(o6=1,rx=function(){}),rx}var ix,l6;function hl(){return l6||(l6=1,ix={}),ix}var nx,u6;function fhe(){if(u6)return nx;u6=1;var r=Ht(),e=Br(),t=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,n=e(t,"name"),s=n&&(function(){}).name==="something",a=n&&(!r||r&&i(t,"name").configurable);return nx={EXISTS:n,PROPER:s,CONFIGURABLE:a},nx}var sx,c6;function h6(){if(c6)return sx;c6=1;var r=Ge();return sx=!r(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),sx}var ax,d6;function Zd(){if(d6)return ax;d6=1;var r=Br(),e=fr(),t=fi(),i=Wd(),n=h6(),s=i("IE_PROTO"),a=Object,o=a.prototype;return ax=n?a.getPrototypeOf:function(l){var u=t(l);if(r(u,s))return u[s];var c=u.constructor;return e(c)&&u instanceof c?c.prototype:u instanceof a?o:null},ax}var ox,f6;function p6(){if(f6)return ox;f6=1;var r=Ge(),e=fr(),t=Dr(),i=ic(),n=Zd(),s=nc(),a=Zt(),o=Ju(),l=a("iterator"),u=!1,c,h,f;[].keys&&(f=[].keys(),"next"in f?(h=n(n(f)),h!==Object.prototype&&(c=h)):u=!0);var p=!t(c)||r(function(){var g={};return c[l].call(g)!==g});return p?c={}:o&&(c=i(c)),e(c[l])||s(c,l,function(){return this}),ox={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:u},ox}var lx,m6;function phe(){if(m6)return lx;m6=1;var r=p6().IteratorPrototype,e=ic(),t=Ku(),i=Ia(),n=hl(),s=function(){return this};return lx=function(a,o,l,u){var c=o+" Iterator";return a.prototype=e(r,{next:t(+!u,l)}),i(a,c,!1,!0),n[c]=s,a},lx}var ux,g6;function mhe(){if(g6)return ux;g6=1;var r=Xe(),e=Ns();return ux=function(t,i,n){try{return r(e(Object.getOwnPropertyDescriptor(t,i)[n]))}catch{}},ux}var cx,v6;function ghe(){if(v6)return cx;v6=1;var r=Dr();return cx=function(e){return r(e)||e===null},cx}var hx,y6;function vhe(){if(y6)return hx;y6=1;var r=ghe(),e=String,t=TypeError;return hx=function(i){if(r(i))return i;throw new t("Can't set "+e(i)+" as a prototype")},hx}var dx,_6;function yhe(){if(_6)return dx;_6=1;var r=mhe(),e=Dr(),t=$s(),i=vhe();return dx=Object.setPrototypeOf||("__proto__"in{}?(function(){var n=!1,s={},a;try{a=r(Object.prototype,"__proto__","set"),a(s,[]),n=s instanceof Array}catch{}return function(l,u){return t(l),i(u),e(l)&&(n?a(l,u):l.__proto__=u),l}})():void 0),dx}var fx,b6;function px(){if(b6)return fx;b6=1;var r=we(),e=ei(),t=Ju(),i=fhe(),n=fr(),s=phe(),a=Zd(),o=yhe(),l=Ia(),u=ol(),c=nc(),h=Zt(),f=hl(),p=p6(),g=i.PROPER,v=i.CONFIGURABLE,b=p.IteratorPrototype,E=p.BUGGY_SAFARI_ITERATORS,x=h("iterator"),D="keys",O="values",P="entries",R=function(){return this};return fx=function(A,I,S,C,$,F,j){s(S,I,C);var z=function(pe){if(pe===$&&X)return X;if(!E&&pe&&pe in W)return W[pe];switch(pe){case D:return function(){return new S(this,pe)};case O:return function(){return new S(this,pe)};case P:return function(){return new S(this,pe)}}return function(){return new S(this)}},J=I+" Iterator",Z=!1,W=A.prototype,Y=W[x]||W["@@iterator"]||$&&W[$],X=!E&&Y||z($),ie=I==="Array"&&W.entries||Y,Q,he,ve;if(ie&&(Q=a(ie.call(new A)),Q!==Object.prototype&&Q.next&&(!t&&a(Q)!==b&&(o?o(Q,b):n(Q[x])||c(Q,x,R)),l(Q,J,!0,!0),t&&(f[J]=R))),g&&$===O&&Y&&Y.name!==O&&(!t&&v?u(W,"name",O):(Z=!0,X=function(){return e(Y,this)})),$)if(he={values:z(O),keys:F?X:z(D),entries:z(P)},j)for(ve in he)(E||Z||!(ve in W))&&c(W,ve,he[ve]);else r({target:I,proto:!0,forced:E||Z},he);return(!t||j)&&W[x]!==X&&c(W,x,X,{name:$}),f[I]=X,he},fx}var mx,T6;function gx(){return T6||(T6=1,mx=function(r,e){return{value:r,done:e}}),mx}var vx,S6;function yx(){if(S6)return vx;S6=1;var r=tn(),e=Qd(),t=hl(),i=sc(),n=Ni().f,s=px(),a=gx(),o=Ju(),l=Ht(),u="Array Iterator",c=i.set,h=i.getterFor(u);vx=s(Array,"Array",function(p,g){c(this,{type:u,target:r(p),index:0,kind:g})},function(){var p=h(this),g=p.target,v=p.index++;if(!g||v>=g.length)return p.target=null,a(void 0,!0);switch(p.kind){case"keys":return a(v,!1);case"values":return a(g[v],!1)}return a([v,g[v]],!1)},"values");var f=t.Arguments=t.Array;if(e("keys"),e("values"),e("entries"),!o&&l&&f.name!=="values")try{n(f,"name",{value:"values"})}catch{}return vx}var _x,x6;function _he(){return x6||(x6=1,_x={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),_x}var w6;function bx(){if(w6)return a6;w6=1,yx();var r=_he(),e=Ft(),t=Ia(),i=hl();for(var n in r)t(e[n],n),i[n]=i.Array;return a6}var Tx,E6;function C6(){if(E6)return Tx;E6=1;var r=dhe();return bx(),Tx=r,Tx}var D6={},I6;function bhe(){if(I6)return D6;I6=1;var r=Zt(),e=Ni().f,t=r("metadata"),i=Function.prototype;return i[t]===void 0&&e(i,t,{value:null}),D6}var A6={},O6;function The(){return O6||(O6=1,EU()),A6}var P6={},R6;function She(){return R6||(R6=1,OU()),P6}var k6={},M6;function xhe(){if(M6)return k6;M6=1;var r=Nt();return r("metadata"),k6}var Sx,$6;function whe(){if($6)return Sx;$6=1;var r=C6();return bhe(),The(),She(),xhe(),Sx=r,Sx}var N6={},xx,L6;function F6(){if(L6)return xx;L6=1;var r=$i(),e=Xe(),t=r("Symbol"),i=t.keyFor,n=e(t.prototype.valueOf);return xx=t.isRegisteredSymbol||function(a){try{return i(n(a))!==void 0}catch{return!1}},xx}var q6;function Ehe(){if(q6)return N6;q6=1;var r=we(),e=F6();return r({target:"Symbol",stat:!0},{isRegisteredSymbol:e}),N6}var B6={},wx,U6;function j6(){if(U6)return wx;U6=1;for(var r=al(),e=$i(),t=Xe(),i=Zu(),n=Zt(),s=e("Symbol"),a=s.isWellKnownSymbol,o=e("Object","getOwnPropertyNames"),l=t(s.prototype.valueOf),u=r("wks"),c=0,h=o(s),f=h.length;c<f;c++)try{var p=h[c];i(s[p])&&n(p)}catch{}return wx=function(v){if(a&&a(v))return!0;try{for(var b=l(v),E=0,x=o(u),D=x.length;E<D;E++)if(u[x[E]]==b)return!0}catch{}return!1},wx}var H6;function Che(){if(H6)return B6;H6=1;var r=we(),e=j6();return r({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:e}),B6}var V6={},G6;function Dhe(){if(G6)return V6;G6=1;var r=Nt();return r("customMatcher"),V6}var W6={},z6;function Ihe(){if(z6)return W6;z6=1;var r=Nt();return r("observable"),W6}var Y6={},K6;function Ahe(){if(K6)return Y6;K6=1;var r=we(),e=F6();return r({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:e}),Y6}var X6={},Q6;function Ohe(){if(Q6)return X6;Q6=1;var r=we(),e=j6();return r({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:e}),X6}var Z6={},J6;function Phe(){if(J6)return Z6;J6=1;var r=Nt();return r("matcher"),Z6}var ej={},tj;function Rhe(){if(tj)return ej;tj=1;var r=Nt();return r("metadataKey"),ej}var rj={},ij;function khe(){if(ij)return rj;ij=1;var r=Nt();return r("patternMatch"),rj}var nj={},sj;function Mhe(){if(sj)return nj;sj=1;var r=Nt();return r("replaceAll"),nj}var Ex,aj;function $he(){if(aj)return Ex;aj=1;var r=whe();return Ehe(),Che(),Dhe(),Ihe(),Ahe(),Ohe(),Phe(),Rhe(),khe(),Mhe(),Ex=r,Ex}var Cx,oj;function Nhe(){return oj||(oj=1,Cx=$he()),Cx}var Lhe=Nhe(),Jd=Re(Lhe),lj={},Dx,uj;function Fhe(){if(uj)return Dx;uj=1;var r=Xe(),e=ul(),t=Li(),i=$s(),n=r("".charAt),s=r("".charCodeAt),a=r("".slice),o=function(l){return function(u,c){var h=t(i(u)),f=e(c),p=h.length,g,v;return f<0||f>=p?l?"":void 0:(g=s(h,f),g<55296||g>56319||f+1===p||(v=s(h,f+1))<56320||v>57343?l?n(h,f):g:l?a(h,f,f+2):(g-55296<<10)+(v-56320)+65536)}};return Dx={codeAt:o(!1),charAt:o(!0)},Dx}var cj;function hj(){if(cj)return lj;cj=1;var r=Fhe().charAt,e=Li(),t=sc(),i=px(),n=gx(),s="String Iterator",a=t.set,o=t.getterFor(s);return i(String,"String",function(l){a(this,{type:s,string:e(l),index:0})},function(){var u=o(this),c=u.string,h=u.index,f;return h>=c.length?n(void 0,!0):(f=r(c,h),u.index+=f.length,n(f,!1))}),lj}var Ix,dj;function qhe(){if(dj)return Ix;dj=1,yx(),hj(),LU();var r=Kd();return Ix=r.f("iterator"),Ix}var Ax,fj;function Bhe(){if(fj)return Ax;fj=1;var r=qhe();return bx(),Ax=r,Ax}var Ox,pj;function Uhe(){if(pj)return Ox;pj=1;var r=Bhe();return Ox=r,Ox}var Px,mj;function jhe(){if(mj)return Px;mj=1;var r=Uhe();return Px=r,Px}var Rx,gj;function Hhe(){return gj||(gj=1,Rx=jhe()),Rx}var Vhe=Hhe(),Ghe=Re(Vhe);function oc(r){"@babel/helpers - typeof";return oc=typeof Jd=="function"&&typeof Ghe=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Jd=="function"&&e.constructor===Jd&&e!==Jd.prototype?"symbol":typeof e},oc(r)}var kx,vj;function Whe(){if(vj)return kx;vj=1,ZU();var r=Kd();return kx=r.f("toPrimitive"),kx}var Mx,yj;function zhe(){if(yj)return Mx;yj=1;var r=Whe();return Mx=r,Mx}var $x,_j;function Yhe(){if(_j)return $x;_j=1;var r=zhe();return $x=r,$x}var Nx,bj;function Khe(){if(bj)return Nx;bj=1;var r=Yhe();return Nx=r,Nx}var Lx,Tj;function Xhe(){return Tj||(Tj=1,Lx=Khe()),Lx}var Qhe=Xhe(),Zhe=Re(Qhe);function Jhe(r,e){if(oc(r)!="object"||!r)return r;var t=r[Zhe];if(t!==void 0){var i=t.call(r,e);if(oc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ede(r){var e=Jhe(r,"string");return oc(e)=="symbol"?e:e+""}function tde(r,e,t){return(e=ede(e))in r?Jce(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Sj={},xj;function rde(){if(xj)return Sj;xj=1;var r=we(),e=Ls().map,t=ac(),i=t("map");return r({target:"Array",proto:!0,forced:!i},{map:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),Sj}var Fx,wj;function ide(){if(wj)return Fx;wj=1,rde();var r=pr();return Fx=r("Array","map"),Fx}var qx,Ej;function nde(){if(Ej)return qx;Ej=1;var r=Vt(),e=ide(),t=Array.prototype;return qx=function(i){var n=i.map;return i===t||r(t,i)&&n===t.map?e:n},qx}var Bx,Cj;function sde(){if(Cj)return Bx;Cj=1;var r=nde();return Bx=r,Bx}var Ux,Dj;function ade(){return Dj||(Dj=1,Ux=sde()),Ux}var ode=ade(),mr=Re(ode),Ij={},jx,Aj;function lde(){if(Aj)return jx;Aj=1;var r=Ns(),e=fi(),t=Ud(),i=as(),n=TypeError,s="Reduce of empty array with no initial value",a=function(o){return function(l,u,c,h){var f=e(l),p=t(f),g=i(f);if(r(u),g===0&&c<2)throw new n(s);var v=o?g-1:0,b=o?-1:1;if(c<2)for(;;){if(v in p){h=p[v],v+=b;break}if(v+=b,o?v<0:g<=v)throw new n(s)}for(;o?v>=0:g>v;v+=b)v in p&&(h=u(h,p[v],v,f));return h}};return jx={left:a(!1),right:a(!0)},jx}var Hx,Oj;function ude(){if(Oj)return Hx;Oj=1;var r=d5();return Hx=r==="NODE",Hx}var Pj;function cde(){if(Pj)return Ij;Pj=1;var r=we(),e=lde().left,t=cl(),i=Qu(),n=ude(),s=!n&&i>79&&i<83,a=s||!t("reduce");return r({target:"Array",proto:!0,forced:a},{reduce:function(l){var u=arguments.length;return e(this,l,u,u>1?arguments[1]:void 0)}}),Ij}var Vx,Rj;function hde(){if(Rj)return Vx;Rj=1,cde();var r=pr();return Vx=r("Array","reduce"),Vx}var Gx,kj;function dde(){if(kj)return Gx;kj=1;var r=Vt(),e=hde(),t=Array.prototype;return Gx=function(i){var n=i.reduce;return i===t||r(t,i)&&n===t.reduce?e:n},Gx}var Wx,Mj;function fde(){if(Mj)return Wx;Mj=1;var r=dde();return Wx=r,Wx}var zx,$j;function pde(){return $j||($j=1,zx=fde()),zx}var mde=pde(),Nj=Re(mde),Lj={},Fj;function gde(){if(Fj)return Lj;Fj=1;var r=we(),e=fi(),t=rc(),i=Ge(),n=i(function(){t(1)});return r({target:"Object",stat:!0,forced:n},{keys:function(a){return t(e(a))}}),Lj}var Yx,qj;function vde(){if(qj)return Yx;qj=1,gde();var r=_t();return Yx=r.Object.keys,Yx}var Kx,Bj;function yde(){if(Bj)return Kx;Bj=1;var r=vde();return Kx=r,Kx}var Xx,Uj;function _de(){return Uj||(Uj=1,Xx=yde()),Xx}var bde=_de(),br=Re(bde),Qx,jj;function Tde(){return jj||(jj=1,Qx=pU()),Qx}var Sde=Tde(),Hj=Re(Sde),Zx,Vj;function xde(){return Vj||(Vj=1,Zx=C6()),Zx}var wde=xde(),Ede=Re(wde),Gj={},Wj;function Cde(){if(Wj)return Gj;Wj=1;var r=we(),e=Da(),t=k5(),i=Dr(),n=Gd(),s=as(),a=tn(),o=Xd(),l=Zt(),u=ac(),c=ll(),h=u("slice"),f=l("species"),p=Array,g=Math.max;return r({target:"Array",proto:!0,forced:!h},{slice:function(b,E){var x=a(this),D=s(x),O=n(b,D),P=n(E===void 0?D:E,D),R,A,I;if(e(x)&&(R=x.constructor,t(R)&&(R===p||e(R.prototype))?R=void 0:i(R)&&(R=R[f],R===null&&(R=void 0)),R===p||R===void 0))return c(x,O,P);for(A=new(R===void 0?p:R)(g(P-O,0)),I=0;O<P;O++,I++)O in x&&o(A,I,x[O]);return A.length=I,A}}),Gj}var Jx,zj;function Dde(){if(zj)return Jx;zj=1,Cde();var r=pr();return Jx=r("Array","slice"),Jx}var ew,Yj;function Ide(){if(Yj)return ew;Yj=1;var r=Vt(),e=Dde(),t=Array.prototype;return ew=function(i){var n=i.slice;return i===t||r(t,i)&&n===t.slice?e:n},ew}var tw,Kj;function Ade(){if(Kj)return tw;Kj=1;var r=Ide();return tw=r,tw}var rw,Xj;function Ode(){return Xj||(Xj=1,rw=Ade()),rw}var Pde=Ode(),dl=Re(Pde),Qj={},Zj;function Rde(){if(Zj)return Qj;Zj=1;var r=we(),e=Z8();return r({target:"Reflect",stat:!0},{ownKeys:e}),Qj}var iw,Jj;function kde(){if(Jj)return iw;Jj=1,Rde();var r=_t();return iw=r.Reflect.ownKeys,iw}var nw,e7;function Mde(){if(e7)return nw;e7=1;var r=kde();return nw=r,nw}var sw,t7;function $de(){return t7||(t7=1,sw=Mde()),sw}var Nde=$de(),Lde=Re(Nde),r7={},i7;function Fde(){if(i7)return r7;i7=1;var r=we(),e=Xe(),t=Date,i=e(t.prototype.getTime);return r({target:"Date",stat:!0},{now:function(){return i(new t)}}),r7}var aw,n7;function qde(){if(n7)return aw;n7=1,Fde();var r=_t();return aw=r.Date.now,aw}var ow,s7;function Bde(){if(s7)return ow;s7=1;var r=qde();return ow=r,ow}var lw,a7;function Ude(){return a7||(a7=1,lw=Bde()),lw}var jde=Ude(),pi=Re(jde),o7={},l7;function Hde(){if(l7)return o7;l7=1;var r=we(),e=Xe(),t=Da(),i=e([].reverse),n=[1,2];return r({target:"Array",proto:!0,forced:String(n)===String(n.reverse())},{reverse:function(){return t(this)&&(this.length=this.length),i(this)}}),o7}var uw,u7;function Vde(){if(u7)return uw;u7=1,Hde();var r=pr();return uw=r("Array","reverse"),uw}var cw,c7;function Gde(){if(c7)return cw;c7=1;var r=Vt(),e=Vde(),t=Array.prototype;return cw=function(i){var n=i.reverse;return i===t||r(t,i)&&n===t.reverse?e:n},cw}var hw,h7;function Wde(){if(h7)return hw;h7=1;var r=Gde();return hw=r,hw}var dw,d7;function zde(){return d7||(d7=1,dw=Wde()),dw}var Yde=zde(),Kde=Re(Yde),f7={},fw,p7;function Xde(){if(p7)return fw;p7=1;var r=Ht(),e=Da(),t=TypeError,i=Object.getOwnPropertyDescriptor,n=r&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(s){return s instanceof TypeError}})();return fw=n?function(s,a){if(e(s)&&!i(s,"length").writable)throw new t("Cannot set read only .length");return s.length=a}:function(s,a){return s.length=a},fw}var pw,m7;function g7(){if(m7)return pw;m7=1;var r=sl(),e=TypeError;return pw=function(t,i){if(!delete t[i])throw new e("Cannot delete property "+r(i)+" of "+r(t))},pw}var v7;function Qde(){if(v7)return f7;v7=1;var r=we(),e=fi(),t=Gd(),i=ul(),n=as(),s=Xde(),a=bU(),o=zT(),l=Xd(),u=g7(),c=ac(),h=c("splice"),f=Math.max,p=Math.min;return r({target:"Array",proto:!0,forced:!h},{splice:function(v,b){var E=e(this),x=n(E),D=t(v,x),O=arguments.length,P,R,A,I,S,C;for(O===0?P=R=0:O===1?(P=0,R=x-D):(P=O-2,R=p(f(i(b),0),x-D)),a(x+P-R),A=o(E,R),I=0;I<R;I++)S=D+I,S in E&&l(A,I,E[S]);if(A.length=R,P<R){for(I=D;I<x-R;I++)S=I+R,C=I+P,S in E?E[C]=E[S]:u(E,C);for(I=x;I>x-R+P;I--)u(E,I-1)}else if(P>R)for(I=x-R;I>D;I--)S=I+R-1,C=I+P-1,S in E?E[C]=E[S]:u(E,C);for(I=0;I<P;I++)E[I+D]=arguments[I+2];return s(E,x-R+P),A}}),f7}var mw,y7;function Zde(){if(y7)return mw;y7=1,Qde();var r=pr();return mw=r("Array","splice"),mw}var gw,_7;function Jde(){if(_7)return gw;_7=1;var r=Vt(),e=Zde(),t=Array.prototype;return gw=function(i){var n=i.splice;return i===t||r(t,i)&&n===t.splice?e:n},gw}var vw,b7;function efe(){if(b7)return vw;b7=1;var r=Jde();return vw=r,vw}var yw,T7;function tfe(){return T7||(T7=1,yw=efe()),yw}var rfe=tfe(),ri=Re(rfe),S7={},_w,x7;function ife(){if(x7)return _w;x7=1;var r=Ht(),e=Xe(),t=ei(),i=Ge(),n=rc(),s=Yd(),a=Bd(),o=fi(),l=Ud(),u=Object.assign,c=Object.defineProperty,h=e([].concat);return _w=!u||i(function(){if(r&&u({b:1},u(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var f={},p={},g=Symbol("assign detection"),v="abcdefghijklmnopqrst";return f[g]=7,v.split("").forEach(function(b){p[b]=b}),u({},f)[g]!==7||n(u({},p)).join("")!==v})?function(p,g){for(var v=o(p),b=arguments.length,E=1,x=s.f,D=a.f;b>E;)for(var O=l(arguments[E++]),P=x?h(n(O),x(O)):n(O),R=P.length,A=0,I;R>A;)I=P[A++],(!r||t(D,O,I))&&(v[I]=O[I]);return v}:u,_w}var w7;function nfe(){if(w7)return S7;w7=1;var r=we(),e=ife();return r({target:"Object",stat:!0,arity:2,forced:Object.assign!==e},{assign:e}),S7}var bw,E7;function sfe(){if(E7)return bw;E7=1,nfe();var r=_t();return bw=r.Object.assign,bw}var Tw,C7;function afe(){if(C7)return Tw;C7=1;var r=sfe();return Tw=r,Tw}var Sw,D7;function ofe(){return D7||(D7=1,Sw=afe()),Sw}var lfe=ofe(),Aa=Re(lfe),I7={},A7;function ufe(){if(A7)return I7;A7=1;var r=we(),e=sS().includes,t=Ge(),i=Qd(),n=t(function(){return!Array(1).includes()});return r({target:"Array",proto:!0,forced:n},{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),i("includes"),I7}var xw,O7;function cfe(){if(O7)return xw;O7=1,ufe();var r=pr();return xw=r("Array","includes"),xw}var P7={},ww,R7;function hfe(){if(R7)return ww;R7=1;var r=Dr(),e=Rn(),t=Zt(),i=t("match");return ww=function(n){var s;return r(n)&&((s=n[i])!==void 0?!!s:e(n)==="RegExp")},ww}var Ew,k7;function dfe(){if(k7)return Ew;k7=1;var r=hfe(),e=TypeError;return Ew=function(t){if(r(t))throw new e("The method doesn't accept regular expressions");return t},Ew}var Cw,M7;function ffe(){if(M7)return Cw;M7=1;var r=Zt(),e=r("match");return Cw=function(t){var i=/./;try{"/./"[t](i)}catch{try{return i[e]=!1,"/./"[t](i)}catch{}}return!1},Cw}var $7;function pfe(){if($7)return P7;$7=1;var r=we(),e=Xe(),t=dfe(),i=$s(),n=Li(),s=ffe(),a=e("".indexOf);return r({target:"String",proto:!0,forced:!s("includes")},{includes:function(l){return!!~a(n(i(this)),n(t(l)),arguments.length>1?arguments[1]:void 0)}}),P7}var Dw,N7;function mfe(){if(N7)return Dw;N7=1,pfe();var r=pr();return Dw=r("String","includes"),Dw}var Iw,L7;function gfe(){if(L7)return Iw;L7=1;var r=Vt(),e=cfe(),t=mfe(),i=Array.prototype,n=String.prototype;return Iw=function(s){var a=s.includes;return s===i||r(i,s)&&a===i.includes?e:typeof s=="string"||s===n||r(n,s)&&a===n.includes?t:a},Iw}var Aw,F7;function vfe(){if(F7)return Aw;F7=1;var r=gfe();return Aw=r,Aw}var Ow,q7;function yfe(){return q7||(q7=1,Ow=vfe()),Ow}var _fe=yfe(),fl=Re(_fe),B7={},U7;function bfe(){if(U7)return B7;U7=1;var r=we(),e=Ge(),t=fi(),i=Zd(),n=h6(),s=e(function(){i(1)});return r({target:"Object",stat:!0,forced:s,sham:!n},{getPrototypeOf:function(o){return i(t(o))}}),B7}var Pw,j7;function Tfe(){if(j7)return Pw;j7=1,bfe();var r=_t();return Pw=r.Object.getPrototypeOf,Pw}var Rw,H7;function Sfe(){if(H7)return Rw;H7=1;var r=Tfe();return Rw=r,Rw}var kw,V7;function xfe(){return V7||(V7=1,kw=Sfe()),kw}var wfe=xfe(),G7=Re(wfe),Mw,W7;function Efe(){if(W7)return Mw;W7=1,SU();var r=pr();return Mw=r("Array","concat"),Mw}var $w,z7;function Cfe(){if(z7)return $w;z7=1;var r=Vt(),e=Efe(),t=Array.prototype;return $w=function(i){var n=i.concat;return i===t||r(t,i)&&n===t.concat?e:n},$w}var Nw,Y7;function Dfe(){if(Y7)return Nw;Y7=1;var r=Cfe();return Nw=r,Nw}var Lw,K7;function Ife(){return K7||(K7=1,Lw=Dfe()),Lw}var Afe=Ife(),Jt=Re(Afe),X7={},Fw,Q7;function Z7(){if(Q7)return Fw;Q7=1;var r=Ht(),e=Ge(),t=Xe(),i=Zd(),n=rc(),s=tn(),a=Bd().f,o=t(a),l=t([].push),u=r&&e(function(){var h=Object.create(null);return h[2]=2,!o(h,2)}),c=function(h){return function(f){for(var p=s(f),g=n(p),v=u&&i(p)===null,b=g.length,E=0,x=[],D;b>E;)D=g[E++],(!r||(v?D in p:o(p,D)))&&l(x,h?[D,p[D]]:p[D]);return x}};return Fw={entries:c(!0),values:c(!1)},Fw}var J7;function Ofe(){if(J7)return X7;J7=1;var r=we(),e=Z7().values;return r({target:"Object",stat:!0},{values:function(i){return e(i)}}),X7}var qw,e9;function Pfe(){if(e9)return qw;e9=1,Ofe();var r=_t();return qw=r.Object.values,qw}var Bw,t9;function Rfe(){if(t9)return Bw;t9=1;var r=Pfe();return Bw=r,Bw}var Uw,r9;function kfe(){return r9||(r9=1,Uw=Rfe()),Uw}var Mfe=kfe(),jw=Re(Mfe),i9={},Hw,n9;function Vw(){return n9||(n9=1,Hw=`	
\v\f\r \u2028\u2029\uFEFF`),Hw}var Gw,s9;function a9(){if(s9)return Gw;s9=1;var r=Xe(),e=$s(),t=Li(),i=Vw(),n=r("".replace),s=RegExp("^["+i+"]+"),a=RegExp("(^|[^"+i+"])["+i+"]+$"),o=function(l){return function(u){var c=t(e(u));return l&1&&(c=n(c,s,"")),l&2&&(c=n(c,a,"$1")),c}};return Gw={start:o(1),end:o(2),trim:o(3)},Gw}var Ww,o9;function $fe(){if(o9)return Ww;o9=1;var r=Ft(),e=Ge(),t=Xe(),i=Li(),n=a9().trim,s=Vw(),a=r.parseInt,o=r.Symbol,l=o&&o.iterator,u=/^[+-]?0x/i,c=t(u.exec),h=a(s+"08")!==8||a(s+"0x16")!==22||l&&!e(function(){a(Object(l))});return Ww=h?function(p,g){var v=n(i(p));return a(v,g>>>0||(c(u,v)?16:10))}:a,Ww}var l9;function Nfe(){if(l9)return i9;l9=1;var r=we(),e=$fe();return r({global:!0,forced:parseInt!==e},{parseInt:e}),i9}var zw,u9;function Lfe(){if(u9)return zw;u9=1,Nfe();var r=_t();return zw=r.parseInt,zw}var Yw,c9;function Ffe(){if(c9)return Yw;c9=1;var r=Lfe();return Yw=r,Yw}var Kw,h9;function qfe(){return h9||(h9=1,Kw=Ffe()),Kw}var Bfe=qfe(),mi=Re(Bfe),d9={},f9;function Ufe(){if(f9)return d9;f9=1;var r=we(),e=I1(),t=sS().indexOf,i=cl(),n=e([].indexOf),s=!!n&&1/n([1],1,-0)<0,a=s||!i("indexOf");return r({target:"Array",proto:!0,forced:a},{indexOf:function(l){var u=arguments.length>1?arguments[1]:void 0;return s?n(this,l,u)||0:t(this,l,u)}}),d9}var Xw,p9;function jfe(){if(p9)return Xw;p9=1,Ufe();var r=pr();return Xw=r("Array","indexOf"),Xw}var Qw,m9;function Hfe(){if(m9)return Qw;m9=1;var r=Vt(),e=jfe(),t=Array.prototype;return Qw=function(i){var n=i.indexOf;return i===t||r(t,i)&&n===t.indexOf?e:n},Qw}var Zw,g9;function Vfe(){if(g9)return Zw;g9=1;var r=Hfe();return Zw=r,Zw}var Jw,v9;function Gfe(){return v9||(v9=1,Jw=Vfe()),Jw}var Wfe=Gfe(),lt=Re(Wfe),y9={},_9;function zfe(){if(_9)return y9;_9=1;var r=we(),e=Z7().entries;return r({target:"Object",stat:!0},{entries:function(i){return e(i)}}),y9}var eE,b9;function Yfe(){if(b9)return eE;b9=1,zfe();var r=_t();return eE=r.Object.entries,eE}var tE,T9;function Kfe(){if(T9)return tE;T9=1;var r=Yfe();return tE=r,tE}var rE,S9;function Xfe(){return S9||(S9=1,rE=Kfe()),rE}var Qfe=Xfe(),Zfe=Re(Qfe),x9={},w9;function Jfe(){if(w9)return x9;w9=1;var r=we(),e=Ht(),t=ic();return r({target:"Object",stat:!0,sham:!e},{create:t}),x9}var iE,E9;function epe(){if(E9)return iE;E9=1,Jfe();var r=_t(),e=r.Object;return iE=function(i,n){return e.create(i,n)},iE}var nE,C9;function tpe(){if(C9)return nE;C9=1;var r=epe();return nE=r,nE}var sE,D9;function rpe(){return D9||(D9=1,sE=tpe()),sE}var ipe=rpe(),ef=Re(ipe),I9={},aE,A9;function O9(){if(A9)return aE;A9=1;var r=ul(),e=Li(),t=$s(),i=RangeError;return aE=function(s){var a=e(t(this)),o="",l=r(s);if(l<0||l===1/0)throw new i("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(a+=a))l&1&&(o+=a);return o},aE}var oE,P9;function npe(){if(P9)return oE;P9=1;var r=Xe(),e=A5(),t=Li(),i=O9(),n=$s(),s=r(i),a=r("".slice),o=Math.ceil,l=function(u){return function(c,h,f){var p=t(n(c)),g=e(h),v=p.length,b=f===void 0?" ":t(f),E,x;return g<=v||b===""?p:(E=g-v,x=s(b,o(E/b.length)),x.length>E&&(x=a(x,0,E)),u?p+x:x+p)}};return oE={start:l(!1),end:l(!0)},oE}var lE,R9;function spe(){if(R9)return lE;R9=1;var r=Xe(),e=Ge(),t=npe().start,i=RangeError,n=isFinite,s=Math.abs,a=Date.prototype,o=a.toISOString,l=r(a.getTime),u=r(a.getUTCDate),c=r(a.getUTCFullYear),h=r(a.getUTCHours),f=r(a.getUTCMilliseconds),p=r(a.getUTCMinutes),g=r(a.getUTCMonth),v=r(a.getUTCSeconds);return lE=e(function(){return o.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!e(function(){o.call(new Date(NaN))})?function(){if(!n(l(this)))throw new i("Invalid time value");var E=this,x=c(E),D=f(E),O=x<0?"-":x>9999?"+":"";return O+t(s(x),O?6:4,0)+"-"+t(g(E)+1,2,0)+"-"+t(u(E),2,0)+"T"+t(h(E),2,0)+":"+t(p(E),2,0)+":"+t(v(E),2,0)+"."+t(D,3,0)+"Z"}:o,lE}var k9;function ape(){if(k9)return I9;k9=1;var r=we(),e=ei(),t=fi(),i=MB(),n=spe(),s=Rn(),a=Ge(),o=a(function(){return new Date(NaN).toJSON()!==null||e(Date.prototype.toJSON,{toISOString:function(){return 1}})!==1});return r({target:"Date",proto:!0,forced:o},{toJSON:function(u){var c=t(this),h=i(c,"number");return typeof h=="number"&&!isFinite(h)?null:!("toISOString"in c)&&s(c)==="Date"?e(n,c):c.toISOString()}}),I9}var uE,M9;function ope(){if(M9)return uE;M9=1,ape(),I8();var r=_t(),e=qd();return r.JSON||(r.JSON={stringify:JSON.stringify}),uE=function(i,n,s){return e(r.JSON.stringify,null,arguments)},uE}var cE,$9;function lpe(){if($9)return cE;$9=1;var r=ope();return cE=r,cE}var hE,N9;function upe(){return N9||(N9=1,hE=lpe()),hE}var cpe=upe(),gi=Re(cpe),L9={},dE,F9;function hpe(){if(F9)return dE;F9=1;var r=fi(),e=Gd(),t=as();return dE=function(n){for(var s=r(this),a=t(s),o=arguments.length,l=e(o>1?arguments[1]:void 0,a),u=o>2?arguments[2]:void 0,c=u===void 0?a:e(u,a);c>l;)s[l++]=n;return s},dE}var q9;function dpe(){if(q9)return L9;q9=1;var r=we(),e=hpe(),t=Qd();return r({target:"Array",proto:!0},{fill:e}),t("fill"),L9}var fE,B9;function fpe(){if(B9)return fE;B9=1,dpe();var r=pr();return fE=r("Array","fill"),fE}var pE,U9;function ppe(){if(U9)return pE;U9=1;var r=Vt(),e=fpe(),t=Array.prototype;return pE=function(i){var n=i.fill;return i===t||r(t,i)&&n===t.fill?e:n},pE}var mE,j9;function mpe(){if(j9)return mE;j9=1;var r=ppe();return mE=r,mE}var gE,H9;function gpe(){return H9||(H9=1,gE=mpe()),gE}var vpe=gpe(),V9=Re(vpe),vE={exports:{}},G9;function ype(){return G9||(G9=1,(function(r){r.exports=e;function e(i){if(i)return t(i)}function t(i){for(var n in e.prototype)i[n]=e.prototype[n];return i}e.prototype.on=e.prototype.addEventListener=function(i,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(n),this},e.prototype.once=function(i,n){function s(){this.off(i,s),n.apply(this,arguments)}return s.fn=n,this.on(i,s),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(i,n){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+i];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var a,o=0;o<s.length;o++)if(a=s[o],a===n||a.fn===n){s.splice(o,1);break}return s.length===0&&delete this._callbacks["$"+i],this},e.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),s=this._callbacks["$"+i],a=1;a<arguments.length;a++)n[a-1]=arguments[a];if(s){s=s.slice(0);for(var a=0,o=s.length;a<o;++a)s[a].apply(this,n)}return this},e.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]},e.prototype.hasListeners=function(i){return!!this.listeners(i).length}})(vE)),vE.exports}var _pe=ype(),yE=Re(_pe);function rn(){return rn=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},rn.apply(this,arguments)}function Fi(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e}function tf(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}var _E;typeof Object.assign!="function"?_E=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!=null)for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}:_E=Object.assign;var Oa=_E,W9=["","webkit","Moz","MS","ms","o"],bpe=typeof document>"u"?{style:{}}:document.createElement("div"),Tpe="function",pl=Math.round,Pa=Math.abs,bE=Date.now;function rf(r,e){for(var t,i,n=e[0].toUpperCase()+e.slice(1),s=0;s<W9.length;){if(t=W9[s],i=t?t+n:e,i in r)return i;s++}}var os;typeof window>"u"?os={}:os=window;var z9=rf(bpe.style,"touchAction"),Y9=z9!==void 0;function Spe(){if(!Y9)return!1;var r={},e=os.CSS&&os.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return r[t]=e?os.CSS.supports("touch-action",t):!0}),r}var K9="compute",X9="auto",TE="manipulation",Ra="none",lc="pan-x",uc="pan-y",nf=Spe(),xpe=/mobile|tablet|ip(ad|hone|od)|android/i,Q9="ontouchstart"in os,wpe=rf(os,"PointerEvent")!==void 0,Epe=Q9&&xpe.test(navigator.userAgent),cc="touch",Cpe="pen",SE="mouse",Dpe="kinect",Ipe=25,jr=1,ka=2,er=4,ii=8,sf=1,hc=2,dc=4,fc=8,ml=16,kn=hc|dc,Ma=fc|ml,Z9=kn|Ma,J9=["x","y"],af=["clientX","clientY"];function ls(r,e,t){var i;if(r)if(r.forEach)r.forEach(e,t);else if(r.length!==void 0)for(i=0;i<r.length;)e.call(t,r[i],i,r),i++;else for(i in r)r.hasOwnProperty(i)&&e.call(t,r[i],i,r)}function of(r,e){return typeof r===Tpe?r.apply(e&&e[0]||void 0,e):r}function $a(r,e){return r.indexOf(e)>-1}function Ape(r){if($a(r,Ra))return Ra;var e=$a(r,lc),t=$a(r,uc);return e&&t?Ra:e||t?e?lc:uc:$a(r,TE)?TE:X9}var eH=(function(){function r(t,i){this.manager=t,this.set(i)}var e=r.prototype;return e.set=function(i){i===K9&&(i=this.compute()),Y9&&this.manager.element.style&&nf[i]&&(this.manager.element.style[z9]=i),this.actions=i.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var i=[];return ls(this.manager.recognizers,function(n){of(n.options.enable,[n])&&(i=i.concat(n.getTouchAction()))}),Ape(i.join(" "))},e.preventDefaults=function(i){var n=i.srcEvent,s=i.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var a=this.actions,o=$a(a,Ra)&&!nf[Ra],l=$a(a,uc)&&!nf[uc],u=$a(a,lc)&&!nf[lc];if(o){var c=i.pointers.length===1,h=i.distance<2,f=i.deltaTime<250;if(c&&h&&f)return}if(!(u&&l)&&(o||l&&s&kn||u&&s&Ma))return this.preventSrc(n)},e.preventSrc=function(i){this.manager.session.prevented=!0,i.preventDefault()},r})();function xE(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}function tH(r){var e=r.length;if(e===1)return{x:pl(r[0].clientX),y:pl(r[0].clientY)};for(var t=0,i=0,n=0;n<e;)t+=r[n].clientX,i+=r[n].clientY,n++;return{x:pl(t/e),y:pl(i/e)}}function rH(r){for(var e=[],t=0;t<r.pointers.length;)e[t]={clientX:pl(r.pointers[t].clientX),clientY:pl(r.pointers[t].clientY)},t++;return{timeStamp:bE(),pointers:e,center:tH(e),deltaX:r.deltaX,deltaY:r.deltaY}}function lf(r,e,t){t||(t=J9);var i=e[t[0]]-r[t[0]],n=e[t[1]]-r[t[1]];return Math.sqrt(i*i+n*n)}function wE(r,e,t){t||(t=J9);var i=e[t[0]]-r[t[0]],n=e[t[1]]-r[t[1]];return Math.atan2(n,i)*180/Math.PI}function iH(r,e){return r===e?sf:Pa(r)>=Pa(e)?r<0?hc:dc:e<0?fc:ml}function Ope(r,e){var t=e.center,i=r.offsetDelta||{},n=r.prevDelta||{},s=r.prevInput||{};(e.eventType===jr||s.eventType===er)&&(n=r.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=r.offsetDelta={x:t.x,y:t.y}),e.deltaX=n.x+(t.x-i.x),e.deltaY=n.y+(t.y-i.y)}function nH(r,e,t){return{x:e/r||0,y:t/r||0}}function Ppe(r,e){return lf(e[0],e[1],af)/lf(r[0],r[1],af)}function Rpe(r,e){return wE(e[1],e[0],af)+wE(r[1],r[0],af)}function kpe(r,e){var t=r.lastInterval||e,i=e.timeStamp-t.timeStamp,n,s,a,o;if(e.eventType!==ii&&(i>Ipe||t.velocity===void 0)){var l=e.deltaX-t.deltaX,u=e.deltaY-t.deltaY,c=nH(i,l,u);s=c.x,a=c.y,n=Pa(c.x)>Pa(c.y)?c.x:c.y,o=iH(l,u),r.lastInterval=e}else n=t.velocity,s=t.velocityX,a=t.velocityY,o=t.direction;e.velocity=n,e.velocityX=s,e.velocityY=a,e.direction=o}function Mpe(r,e){var t=r.session,i=e.pointers,n=i.length;t.firstInput||(t.firstInput=rH(e)),n>1&&!t.firstMultiple?t.firstMultiple=rH(e):n===1&&(t.firstMultiple=!1);var s=t.firstInput,a=t.firstMultiple,o=a?a.center:s.center,l=e.center=tH(i);e.timeStamp=bE(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=wE(o,l),e.distance=lf(o,l),Ope(t,e),e.offsetDirection=iH(e.deltaX,e.deltaY);var u=nH(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=Pa(u.x)>Pa(u.y)?u.x:u.y,e.scale=a?Ppe(a.pointers,i):1,e.rotation=a?Rpe(a.pointers,i):0,e.maxPointers=t.prevInput?e.pointers.length>t.prevInput.maxPointers?e.pointers.length:t.prevInput.maxPointers:e.pointers.length,kpe(t,e);var c=r.element,h=e.srcEvent,f;h.composedPath?f=h.composedPath()[0]:h.path?f=h.path[0]:f=h.target,xE(f,c)&&(c=f),e.target=c}function $pe(r,e,t){var i=t.pointers.length,n=t.changedPointers.length,s=e&jr&&i-n===0,a=e&(er|ii)&&i-n===0;t.isFirst=!!s,t.isFinal=!!a,s&&(r.session={}),t.eventType=e,Mpe(r,t),r.emit("hammer.input",t),r.recognize(t),r.session.prevInput=t}function pc(r){return r.trim().split(/\s+/g)}function mc(r,e,t){ls(pc(e),function(i){r.addEventListener(i,t,!1)})}function gc(r,e,t){ls(pc(e),function(i){r.removeEventListener(i,t,!1)})}function sH(r){var e=r.ownerDocument||r;return e.defaultView||e.parentWindow||window}var gl=(function(){function r(t,i){var n=this;this.manager=t,this.callback=i,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(s){of(t.options.enable,[t])&&n.handler(s)},this.init()}var e=r.prototype;return e.handler=function(){},e.init=function(){this.evEl&&mc(this.element,this.evEl,this.domHandler),this.evTarget&&mc(this.target,this.evTarget,this.domHandler),this.evWin&&mc(sH(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&gc(this.element,this.evEl,this.domHandler),this.evTarget&&gc(this.target,this.evTarget,this.domHandler),this.evWin&&gc(sH(this.element),this.evWin,this.domHandler)},r})();function Na(r,e,t){if(r.indexOf&&!t)return r.indexOf(e);for(var i=0;i<r.length;){if(t&&r[i][t]==e||!t&&r[i]===e)return i;i++}return-1}var Npe={pointerdown:jr,pointermove:ka,pointerup:er,pointercancel:ii,pointerout:ii},Lpe={2:cc,3:Cpe,4:SE,5:Dpe},aH="pointerdown",oH="pointermove pointerup pointercancel";os.MSPointerEvent&&!os.PointerEvent&&(aH="MSPointerDown",oH="MSPointerMove MSPointerUp MSPointerCancel");var lH=(function(r){Fi(e,r);function e(){var i,n=e.prototype;return n.evEl=aH,n.evWin=oH,i=r.apply(this,arguments)||this,i.store=i.manager.session.pointerEvents=[],i}var t=e.prototype;return t.handler=function(n){var s=this.store,a=!1,o=n.type.toLowerCase().replace("ms",""),l=Npe[o],u=Lpe[n.pointerType]||n.pointerType,c=u===cc,h=Na(s,n.pointerId,"pointerId");l&jr&&(n.button===0||c)?h<0&&(s.push(n),h=s.length-1):l&(er|ii)&&(a=!0),!(h<0)&&(s[h]=n,this.callback(this.manager,l,{pointers:s,changedPointers:[n],pointerType:u,srcEvent:n}),a&&s.splice(h,1))},e})(gl);function vc(r){return Array.prototype.slice.call(r,0)}function EE(r,e,t){for(var i=[],n=[],s=0;s<r.length;){var a=e?r[s][e]:r[s];Na(n,a)<0&&i.push(r[s]),n[s]=a,s++}return t&&(e?i=i.sort(function(o,l){return o[e]>l[e]}):i=i.sort()),i}var Fpe={touchstart:jr,touchmove:ka,touchend:er,touchcancel:ii},qpe="touchstart touchmove touchend touchcancel",CE=(function(r){Fi(e,r);function e(){var i;return e.prototype.evTarget=qpe,i=r.apply(this,arguments)||this,i.targetIds={},i}var t=e.prototype;return t.handler=function(n){var s=Fpe[n.type],a=Bpe.call(this,n,s);a&&this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:cc,srcEvent:n})},e})(gl);function Bpe(r,e){var t=vc(r.touches),i=this.targetIds;if(e&(jr|ka)&&t.length===1)return i[t[0].identifier]=!0,[t,t];var n,s,a=vc(r.changedTouches),o=[],l=this.target;if(s=t.filter(function(u){return xE(u.target,l)}),e===jr)for(n=0;n<s.length;)i[s[n].identifier]=!0,n++;for(n=0;n<a.length;)i[a[n].identifier]&&o.push(a[n]),e&(er|ii)&&delete i[a[n].identifier],n++;if(o.length)return[EE(s.concat(o),"identifier",!0),o]}var Upe={mousedown:jr,mousemove:ka,mouseup:er},jpe="mousedown",Hpe="mousemove mouseup",DE=(function(r){Fi(e,r);function e(){var i,n=e.prototype;return n.evEl=jpe,n.evWin=Hpe,i=r.apply(this,arguments)||this,i.pressed=!1,i}var t=e.prototype;return t.handler=function(n){var s=Upe[n.type];s&jr&&n.button===0&&(this.pressed=!0),s&ka&&n.which!==1&&(s=er),this.pressed&&(s&er&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[n],changedPointers:[n],pointerType:SE,srcEvent:n}))},e})(gl),Vpe=2500,uH=25;function cH(r){var e=r.changedPointers,t=e[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY},n=this.lastTouches;this.lastTouches.push(i);var s=function(){var o=n.indexOf(i);o>-1&&n.splice(o,1)};setTimeout(s,Vpe)}}function Gpe(r,e){r&jr?(this.primaryTouch=e.changedPointers[0].identifier,cH.call(this,e)):r&(er|ii)&&cH.call(this,e)}function Wpe(r){for(var e=r.srcEvent.clientX,t=r.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var n=this.lastTouches[i],s=Math.abs(e-n.x),a=Math.abs(t-n.y);if(s<=uH&&a<=uH)return!0}return!1}var hH=(function(){var r=(function(e){Fi(t,e);function t(n,s){var a;return a=e.call(this,n,s)||this,a.handler=function(o,l,u){var c=u.pointerType===cc,h=u.pointerType===SE;if(!(h&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(c)Gpe.call(tf(tf(a)),l,u);else if(h&&Wpe.call(tf(tf(a)),u))return;a.callback(o,l,u)}},a.touch=new CE(a.manager,a.handler),a.mouse=new DE(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var i=t.prototype;return i.destroy=function(){this.touch.destroy(),this.mouse.destroy()},t})(gl);return r})();function zpe(r){var e,t=r.options.inputClass;return t?e=t:wpe?e=lH:Epe?e=CE:Q9?e=hH:e=DE,new e(r,$pe)}function vl(r,e,t){return Array.isArray(r)?(ls(r,t[e],t),!0):!1}var uf=1,qi=2,yl=4,Fs=8,us=Fs,yc=16,Mn=32,Ype=1;function Kpe(){return Ype++}function cf(r,e){var t=e.manager;return t?t.get(r):r}function dH(r){return r&yc?"cancel":r&Fs?"end":r&yl?"move":r&qi?"start":""}var _c=(function(){function r(t){t===void 0&&(t={}),this.options=rn({enable:!0},t),this.id=Kpe(),this.manager=null,this.state=uf,this.simultaneous={},this.requireFail=[]}var e=r.prototype;return e.set=function(i){return Oa(this.options,i),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(i){if(vl(i,"recognizeWith",this))return this;var n=this.simultaneous;return i=cf(i,this),n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this},e.dropRecognizeWith=function(i){return vl(i,"dropRecognizeWith",this)?this:(i=cf(i,this),delete this.simultaneous[i.id],this)},e.requireFailure=function(i){if(vl(i,"requireFailure",this))return this;var n=this.requireFail;return i=cf(i,this),Na(n,i)===-1&&(n.push(i),i.requireFailure(this)),this},e.dropRequireFailure=function(i){if(vl(i,"dropRequireFailure",this))return this;i=cf(i,this);var n=Na(this.requireFail,i);return n>-1&&this.requireFail.splice(n,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(i){return!!this.simultaneous[i.id]},e.emit=function(i){var n=this,s=this.state;function a(o){n.manager.emit(o,i)}s<Fs&&a(n.options.event+dH(s)),a(n.options.event),i.additionalEvent&&a(i.additionalEvent),s>=Fs&&a(n.options.event+dH(s))},e.tryEmit=function(i){if(this.canEmit())return this.emit(i);this.state=Mn},e.canEmit=function(){for(var i=0;i<this.requireFail.length;){if(!(this.requireFail[i].state&(Mn|uf)))return!1;i++}return!0},e.recognize=function(i){var n=Oa({},i);if(!of(this.options.enable,[this,n])){this.reset(),this.state=Mn;return}this.state&(us|yc|Mn)&&(this.state=uf),this.state=this.process(n),this.state&(qi|yl|Fs|yc)&&this.tryEmit(n)},e.process=function(i){},e.getTouchAction=function(){},e.reset=function(){},r})(),IE=(function(r){Fi(e,r);function e(i){var n;return i===void 0&&(i={}),n=r.call(this,rn({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},i))||this,n.pTime=!1,n.pCenter=!1,n._timer=null,n._input=null,n.count=0,n}var t=e.prototype;return t.getTouchAction=function(){return[TE]},t.process=function(n){var s=this,a=this.options,o=n.pointers.length===a.pointers,l=n.distance<a.threshold,u=n.deltaTime<a.time;if(this.reset(),n.eventType&jr&&this.count===0)return this.failTimeout();if(l&&u&&o){if(n.eventType!==er)return this.failTimeout();var c=this.pTime?n.timeStamp-this.pTime<a.interval:!0,h=!this.pCenter||lf(this.pCenter,n.center)<a.posThreshold;this.pTime=n.timeStamp,this.pCenter=n.center,!h||!c?this.count=1:this.count+=1,this._input=n;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){s.state=us,s.tryEmit()},a.interval),qi):us}return Mn},t.failTimeout=function(){var n=this;return this._timer=setTimeout(function(){n.state=Mn},this.options.interval),Mn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(){this.state===us&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e})(_c),_l=(function(r){Fi(e,r);function e(i){return i===void 0&&(i={}),r.call(this,rn({pointers:1},i))||this}var t=e.prototype;return t.attrTest=function(n){var s=this.options.pointers;return s===0||n.pointers.length===s},t.process=function(n){var s=this.state,a=n.eventType,o=s&(qi|yl),l=this.attrTest(n);return o&&(a&ii||!l)?s|yc:o||l?a&er?s|Fs:s&qi?s|yl:qi:Mn},e})(_c);function fH(r){return r===ml?"down":r===fc?"up":r===hc?"left":r===dc?"right":""}var AE=(function(r){Fi(e,r);function e(i){var n;return i===void 0&&(i={}),n=r.call(this,rn({event:"pan",threshold:10,pointers:1,direction:Z9},i))||this,n.pX=null,n.pY=null,n}var t=e.prototype;return t.getTouchAction=function(){var n=this.options.direction,s=[];return n&kn&&s.push(uc),n&Ma&&s.push(lc),s},t.directionTest=function(n){var s=this.options,a=!0,o=n.distance,l=n.direction,u=n.deltaX,c=n.deltaY;return l&s.direction||(s.direction&kn?(l=u===0?sf:u<0?hc:dc,a=u!==this.pX,o=Math.abs(n.deltaX)):(l=c===0?sf:c<0?fc:ml,a=c!==this.pY,o=Math.abs(n.deltaY))),n.direction=l,a&&o>s.threshold&&l&s.direction},t.attrTest=function(n){return _l.prototype.attrTest.call(this,n)&&(this.state&qi||!(this.state&qi)&&this.directionTest(n))},t.emit=function(n){this.pX=n.deltaX,this.pY=n.deltaY;var s=fH(n.direction);s&&(n.additionalEvent=this.options.event+s),r.prototype.emit.call(this,n)},e})(_l),pH=(function(r){Fi(e,r);function e(i){return i===void 0&&(i={}),r.call(this,rn({event:"swipe",threshold:10,velocity:.3,direction:kn|Ma,pointers:1},i))||this}var t=e.prototype;return t.getTouchAction=function(){return AE.prototype.getTouchAction.call(this)},t.attrTest=function(n){var s=this.options.direction,a;return s&(kn|Ma)?a=n.overallVelocity:s&kn?a=n.overallVelocityX:s&Ma&&(a=n.overallVelocityY),r.prototype.attrTest.call(this,n)&&s&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers===this.options.pointers&&Pa(a)>this.options.velocity&&n.eventType&er},t.emit=function(n){var s=fH(n.offsetDirection);s&&this.manager.emit(this.options.event+s,n),this.manager.emit(this.options.event,n)},e})(_l),mH=(function(r){Fi(e,r);function e(i){return i===void 0&&(i={}),r.call(this,rn({event:"pinch",threshold:0,pointers:2},i))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ra]},t.attrTest=function(n){return r.prototype.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&qi)},t.emit=function(n){if(n.scale!==1){var s=n.scale<1?"in":"out";n.additionalEvent=this.options.event+s}r.prototype.emit.call(this,n)},e})(_l),gH=(function(r){Fi(e,r);function e(i){return i===void 0&&(i={}),r.call(this,rn({event:"rotate",threshold:0,pointers:2},i))||this}var t=e.prototype;return t.getTouchAction=function(){return[Ra]},t.attrTest=function(n){return r.prototype.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&qi)},e})(_l),vH=(function(r){Fi(e,r);function e(i){var n;return i===void 0&&(i={}),n=r.call(this,rn({event:"press",pointers:1,time:251,threshold:9},i))||this,n._timer=null,n._input=null,n}var t=e.prototype;return t.getTouchAction=function(){return[X9]},t.process=function(n){var s=this,a=this.options,o=n.pointers.length===a.pointers,l=n.distance<a.threshold,u=n.deltaTime>a.time;if(this._input=n,!l||!o||n.eventType&(er|ii)&&!u)this.reset();else if(n.eventType&jr)this.reset(),this._timer=setTimeout(function(){s.state=us,s.tryEmit()},a.time);else if(n.eventType&er)return us;return Mn},t.reset=function(){clearTimeout(this._timer)},t.emit=function(n){this.state===us&&(n&&n.eventType&er?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=bE(),this.manager.emit(this.options.event,this._input)))},e})(_c),yH={domEvents:!1,touchAction:K9,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},_H=[[gH,{enable:!1}],[mH,{enable:!1},["rotate"]],[pH,{direction:kn}],[AE,{direction:kn},["swipe"]],[IE],[IE,{event:"doubletap",taps:2},["tap"]],[vH]],Xpe=1,bH=2;function TH(r,e){var t=r.element;if(t.style){var i;ls(r.options.cssProps,function(n,s){i=rf(t.style,s),e?(r.oldCssProps[i]=t.style[i],t.style[i]=n):t.style[i]=r.oldCssProps[i]||""}),e||(r.oldCssProps={})}}function Qpe(r,e){var t=document.createEvent("Event");t.initEvent(r,!0,!0),t.gesture=e,e.target.dispatchEvent(t)}var SH=(function(){function r(t,i){var n=this;this.options=Oa({},yH,i||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=zpe(this),this.touchAction=new eH(this,this.options.touchAction),TH(this,!0),ls(this.options.recognizers,function(s){var a=n.add(new s[0](s[1]));s[2]&&a.recognizeWith(s[2]),s[3]&&a.requireFailure(s[3])},this)}var e=r.prototype;return e.set=function(i){return Oa(this.options,i),i.touchAction&&this.touchAction.update(),i.inputTarget&&(this.input.destroy(),this.input.target=i.inputTarget,this.input.init()),this},e.stop=function(i){this.session.stopped=i?bH:Xpe},e.recognize=function(i){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(i);var s,a=this.recognizers,o=n.curRecognizer;(!o||o&&o.state&us)&&(n.curRecognizer=null,o=null);for(var l=0;l<a.length;)s=a[l],n.stopped!==bH&&(!o||s===o||s.canRecognizeWith(o))?s.recognize(i):s.reset(),!o&&s.state&(qi|yl|Fs)&&(n.curRecognizer=s,o=s),l++}},e.get=function(i){if(i instanceof _c)return i;for(var n=this.recognizers,s=0;s<n.length;s++)if(n[s].options.event===i)return n[s];return null},e.add=function(i){if(vl(i,"add",this))return this;var n=this.get(i.options.event);return n&&this.remove(n),this.recognizers.push(i),i.manager=this,this.touchAction.update(),i},e.remove=function(i){if(vl(i,"remove",this))return this;var n=this.get(i);if(i){var s=this.recognizers,a=Na(s,n);a!==-1&&(s.splice(a,1),this.touchAction.update())}return this},e.on=function(i,n){if(i===void 0||n===void 0)return this;var s=this.handlers;return ls(pc(i),function(a){s[a]=s[a]||[],s[a].push(n)}),this},e.off=function(i,n){if(i===void 0)return this;var s=this.handlers;return ls(pc(i),function(a){n?s[a]&&s[a].splice(Na(s[a],n),1):delete s[a]}),this},e.emit=function(i,n){this.options.domEvents&&Qpe(i,n);var s=this.handlers[i]&&this.handlers[i].slice();if(!(!s||!s.length)){n.type=i,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var a=0;a<s.length;)s[a](n),a++}},e.destroy=function(){this.element&&TH(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},r})(),Zpe={touchstart:jr,touchmove:ka,touchend:er,touchcancel:ii},Jpe="touchstart",eme="touchstart touchmove touchend touchcancel",tme=(function(r){Fi(e,r);function e(){var i,n=e.prototype;return n.evTarget=Jpe,n.evWin=eme,i=r.apply(this,arguments)||this,i.started=!1,i}var t=e.prototype;return t.handler=function(n){var s=Zpe[n.type];if(s===jr&&(this.started=!0),!!this.started){var a=rme.call(this,n,s);s&(er|ii)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:a[0],changedPointers:a[1],pointerType:cc,srcEvent:n})}},e})(gl);function rme(r,e){var t=vc(r.touches),i=vc(r.changedTouches);return e&(er|ii)&&(t=EE(t.concat(i),"identifier",!0)),[t,i]}function xH(r,e,t){var i="DEPRECATED METHOD: "+e+`
`+t+` AT 
`;return function(){var n=new Error("get-stack-trace"),s=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,i,s),r.apply(this,arguments)}}var wH=xH(function(r,e,t){for(var i=Object.keys(e),n=0;n<i.length;)(!t||t&&r[i[n]]===void 0)&&(r[i[n]]=e[i[n]]),n++;return r},"extend","Use `assign`."),ime=xH(function(r,e){return wH(r,e,!0)},"merge","Use `assign`.");function nme(r,e,t){var i=e.prototype,n;n=r.prototype=Object.create(i),n.constructor=r,n._super=i,t&&Oa(n,t)}function EH(r,e){return function(){return r.apply(e,arguments)}}var OE=(function(){var r=function(t,i){return i===void 0&&(i={}),new SH(t,rn({recognizers:_H.concat()},i))};return r.VERSION="2.0.17-rc",r.DIRECTION_ALL=Z9,r.DIRECTION_DOWN=ml,r.DIRECTION_LEFT=hc,r.DIRECTION_RIGHT=dc,r.DIRECTION_UP=fc,r.DIRECTION_HORIZONTAL=kn,r.DIRECTION_VERTICAL=Ma,r.DIRECTION_NONE=sf,r.DIRECTION_DOWN=ml,r.INPUT_START=jr,r.INPUT_MOVE=ka,r.INPUT_END=er,r.INPUT_CANCEL=ii,r.STATE_POSSIBLE=uf,r.STATE_BEGAN=qi,r.STATE_CHANGED=yl,r.STATE_ENDED=Fs,r.STATE_RECOGNIZED=us,r.STATE_CANCELLED=yc,r.STATE_FAILED=Mn,r.Manager=SH,r.Input=gl,r.TouchAction=eH,r.TouchInput=CE,r.MouseInput=DE,r.PointerEventInput=lH,r.TouchMouseInput=hH,r.SingleTouchInput=tme,r.Recognizer=_c,r.AttrRecognizer=_l,r.Tap=IE,r.Pan=AE,r.Swipe=pH,r.Pinch=mH,r.Rotate=gH,r.Press=vH,r.on=mc,r.off=gc,r.each=ls,r.merge=ime,r.extend=wH,r.bindFn=EH,r.assign=Oa,r.inherit=nme,r.bindFn=EH,r.prefixed=rf,r.toArray=vc,r.inArray=Na,r.uniqueArray=EE,r.splitStr=pc,r.boolOrFn=of,r.hasParent=xE,r.addEventListeners=mc,r.removeEventListeners=gc,r.defaults=Oa({},yH,{preset:_H}),r})();OE.defaults;const PE=Ede("DELETE");function sme(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return RE({},r,...t)}function RE(){const r=hf(...arguments);return DH(r),r}function hf(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(e.length<2)return e[0];if(e.length>2)return hf(RE(e[0],e[1]),...dl(e).call(e,2));const i=e[0],n=e[1];if(i instanceof Date&&n instanceof Date)return i.setTime(n.getTime()),i;for(const s of Lde(n))Object.prototype.propertyIsEnumerable.call(n,s)&&(n[s]===PE?delete i[s]:i[s]!==null&&n[s]!==null&&typeof i[s]=="object"&&typeof n[s]=="object"&&!it(i[s])&&!it(n[s])?i[s]=hf(i[s],n[s]):i[s]=CH(n[s]));return i}function CH(r){return it(r)?mr(r).call(r,e=>CH(e)):typeof r=="object"&&r!==null?r instanceof Date?new Date(r.getTime()):hf({},r):r}function DH(r){for(const e of br(r))r[e]===PE?delete r[e]:typeof r[e]=="object"&&r[e]!==null&&DH(r[e])}function ame(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return ome(e.length?e:[pi()])}function ome(r){let[e,t,i]=lme(r),n=1;const s=()=>{const a=2091639*e+n*23283064365386963e-26;return e=t,t=i,i=a-(n=a|0)};return s.uint32=()=>s()*4294967296,s.fract53=()=>s()+(s()*2097152|0)*11102230246251565e-32,s.algorithm="Alea",s.seed=r,s.version="0.9",s}function lme(){const r=ume();let e=r(" "),t=r(" "),i=r(" ");for(let n=0;n<arguments.length;n++)e-=r(n<0||arguments.length<=n?void 0:arguments[n]),e<0&&(e+=1),t-=r(n<0||arguments.length<=n?void 0:arguments[n]),t<0&&(t+=1),i-=r(n<0||arguments.length<=n?void 0:arguments[n]),i<0&&(i+=1);return[e,t,i]}function ume(){let r=4022871197;return function(e){const t=e.toString();for(let i=0;i<t.length;i++){r+=t.charCodeAt(i);let n=.02519603282416938*r;r=n>>>0,n-=r,n*=r,r=n>>>0,n-=r,r+=n*4294967296}return(r>>>0)*23283064365386963e-26}}function cme(){const r=()=>{};return{on:r,off:r,destroy:r,emit:r,get(){return{set:r}}}}const kE=typeof window<"u"?window.Hammer||OE:function(){return cme()};function $n(r){var e;this._cleanupQueue=[],this.active=!1,this._dom={container:r,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const t=kE(this._dom.overlay);t.on("tap",se(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push(()=>{t.destroy()});const i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];ye(i).call(i,n=>{t.on(n,s=>{s.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=n=>{hme(n.target,r)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=n=>{("key"in n?n.key==="Escape":n.keyCode===27)&&this.deactivate()}}yE($n.prototype),$n.current=null,$n.prototype.destroy=function(){this.deactivate();for(const t of Kde(r=ri(e=this._cleanupQueue).call(e,0)).call(r)){var r,e;t()}},$n.prototype.activate=function(){$n.current&&$n.current.deactivate(),$n.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},$n.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},$n.prototype._onTapOverlay=function(r){this.activate(),r.srcEvent.stopPropagation()};function hme(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}const dme=/^\/?Date\((-?\d+)/i,fme=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,pme=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,mme=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,gme=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function bc(r){return r instanceof Number||typeof r=="number"}function IH(r){if(r)for(;r.hasChildNodes()===!0;){const e=r.firstChild;e&&(IH(e),r.removeChild(e))}}function vi(r){return r instanceof String||typeof r=="string"}function ME(r){return typeof r=="object"&&r!==null}function vme(r){if(r instanceof Date)return!0;if(vi(r)){if(dme.exec(r))return!0;if(!isNaN(Date.parse(r)))return!0}return!1}function La(r,e,t,i){let n=!1;i===!0&&(n=e[t]===null&&r[t]!==void 0),n?delete r[t]:r[t]=e[t]}function AH(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;for(const i in r)if(e[i]!==void 0)if(e[i]===null||typeof e[i]!="object")La(r,e,i,t);else{const n=r[i],s=e[i];ME(n)&&ME(s)&&AH(n,s,t)}}const yme=Aa;function _me(r,e){if(!it(r))throw new Error("Array with property names expected as first argument");for(var t=arguments.length,i=new Array(t>2?t-2:0),n=2;n<t;n++)i[n-2]=arguments[n];for(const s of i)for(let a=0;a<r.length;a++){const o=r[a];s&&Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e}function bme(r,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(it(t))throw new TypeError("Arrays are not supported by deepExtend");for(let n=0;n<r.length;n++){const s=r[n];if(Object.prototype.hasOwnProperty.call(t,s))if(t[s]&&t[s].constructor===Object)e[s]===void 0&&(e[s]={}),e[s].constructor===Object?Tc(e[s],t[s],!1,i):La(e,t,s,i);else{if(it(t[s]))throw new TypeError("Arrays are not supported by deepExtend");La(e,t,s,i)}}return e}function Tme(r,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(it(t))throw new TypeError("Arrays are not supported by deepExtend");for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&!fl(r).call(r,n))if(t[n]&&t[n].constructor===Object)e[n]===void 0&&(e[n]={}),e[n].constructor===Object?Tc(e[n],t[n]):La(e,t,n,i);else if(it(t[n])){e[n]=[];for(let s=0;s<t[n].length;s++)e[n].push(t[n][s])}else La(e,t,n,i);return e}function Tc(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)||t===!0)if(typeof e[s]=="object"&&e[s]!==null&&G7(e[s])===Object.prototype)r[s]===void 0?r[s]=Tc({},e[s],t):typeof r[s]=="object"&&r[s]!==null&&G7(r[s])===Object.prototype?Tc(r[s],e[s],t):La(r,e,s,i);else if(it(e[s])){var n;r[s]=dl(n=e[s]).call(n)}else La(r,e,s,i);return r}function Sme(r,e){if(r.length!==e.length)return!1;for(let t=0,i=r.length;t<i;t++)if(r[t]!=e[t])return!1;return!0}function Sc(r){const e=typeof r;return e==="object"?r===null?"null":r instanceof Boolean?"Boolean":r instanceof Number?"Number":r instanceof String?"String":it(r)?"Array":r instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function xc(r,e){return[...r,e]}function OH(r){return dl(r).call(r)}function xme(r){return r.getBoundingClientRect().left}function wme(r){return r.getBoundingClientRect().right}function Eme(r){return r.getBoundingClientRect().top}function Cme(r,e){let t=r.className.split(" ");const i=e.split(" ");t=Jt(t).call(t,We(i).call(i,function(n){return!fl(t).call(t,n)})),r.className=t.join(" ")}function Dme(r,e){let t=r.className.split(" ");const i=e.split(" ");t=We(t).call(t,function(n){return!fl(i).call(i,n)}),r.className=t.join(" ")}function Ime(r,e){if(it(r)){const t=r.length;for(let i=0;i<t;i++)e(r[i],i,r)}else for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(r[t],t,r)}const Ame=jw;function Ome(r,e,t){return r[e]!==t?(r[e]=t,!0):!1}function Pme(r){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,r()}))}}function Rme(r){r||(r=window.event),r&&(r.preventDefault?r.preventDefault():r.returnValue=!1)}function kme(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event,e=null;return r&&(r.target?e=r.target:r.srcElement&&(e=r.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function Mme(r,e){let t=r;for(;t;){if(t===e)return!0;if(t.parentNode)t=t.parentNode;else return!1}return!1}const $me={asBoolean(r,e){return typeof r=="function"&&(r=r()),r!=null?r!=!1:e||null},asNumber(r,e){return typeof r=="function"&&(r=r()),r!=null?Number(r)||e||null:e||null},asString(r,e){return typeof r=="function"&&(r=r()),r!=null?String(r):e||null},asSize(r,e){return typeof r=="function"&&(r=r()),vi(r)?r:bc(r)?r+"px":e||null},asElement(r,e){return typeof r=="function"&&(r=r()),r||e||null}};function df(r){let e;switch(r.length){case 3:case 4:return e=pme.exec(r),e?{r:mi(e[1]+e[1],16),g:mi(e[2]+e[2],16),b:mi(e[3]+e[3],16)}:null;case 6:case 7:return e=fme.exec(r),e?{r:mi(e[1],16),g:mi(e[2],16),b:mi(e[3],16)}:null;default:return null}}function Nme(r,e){if(fl(r).call(r,"rgba"))return r;if(fl(r).call(r,"rgb")){const t=r.substr(lt(r).call(r,"(")+1).replace(")","").split(",");return"rgba("+t[0]+","+t[1]+","+t[2]+","+e+")"}else{const t=df(r);return t==null?r:"rgba("+t.r+","+t.g+","+t.b+","+e+")"}}function $E(r,e,t){var i;return"#"+dl(i=((1<<24)+(r<<16)+(e<<8)+t).toString(16)).call(i,1)}function Lme(r,e){if(vi(r)){let i=r;if(FE(i)){var t;const n=mr(t=i.substr(4).substr(0,i.length-5).split(",")).call(t,function(s){return mi(s)});i=$E(n[0],n[1],n[2])}if(LE(i)===!0){const n=RH(i),s={h:n.h,s:n.s*.8,v:Math.min(1,n.v*1.02)},a={h:n.h,s:Math.min(1,n.s*1.25),v:n.v*.8},o=NE(a.h,a.s,a.v),l=NE(s.h,s.s,s.v);return{background:i,border:o,highlight:{background:l,border:o},hover:{background:l,border:o}}}else return{background:i,border:i,highlight:{background:i,border:i},hover:{background:i,border:i}}}else return e?{background:r.background||e.background,border:r.border||e.border,highlight:vi(r.highlight)?{border:r.highlight,background:r.highlight}:{background:r.highlight&&r.highlight.background||e.highlight.background,border:r.highlight&&r.highlight.border||e.highlight.border},hover:vi(r.hover)?{border:r.hover,background:r.hover}:{border:r.hover&&r.hover.border||e.hover.border,background:r.hover&&r.hover.background||e.hover.background}}:{background:r.background||void 0,border:r.border||void 0,highlight:vi(r.highlight)?{border:r.highlight,background:r.highlight}:{background:r.highlight&&r.highlight.background||void 0,border:r.highlight&&r.highlight.border||void 0},hover:vi(r.hover)?{border:r.hover,background:r.hover}:{border:r.hover&&r.hover.border||void 0,background:r.hover&&r.hover.background||void 0}}}function bl(r,e,t){r=r/255,e=e/255,t=t/255;const i=Math.min(r,Math.min(e,t)),n=Math.max(r,Math.max(e,t));if(i===n)return{h:0,s:0,v:i};const s=r===i?e-t:t===i?r-e:t-r,o=60*((r===i?3:t===i?1:5)-s/(n-i))/360,l=(n-i)/n;return{h:o,s:l,v:n}}function PH(r){const e=document.createElement("div"),t={};e.style.cssText=r;for(let i=0;i<e.style.length;++i)t[e.style[i]]=e.style.getPropertyValue(e.style[i]);return t}function Fme(r,e){const t=PH(e);for(const[i,n]of Zfe(t))r.style.setProperty(i,n)}function qme(r,e){const t=PH(e);for(const i of br(t))r.style.removeProperty(i)}function wc(r,e,t){let i,n,s;const a=Math.floor(r*6),o=r*6-a,l=t*(1-e),u=t*(1-o*e),c=t*(1-(1-o)*e);switch(a%6){case 0:i=t,n=c,s=l;break;case 1:i=u,n=t,s=l;break;case 2:i=l,n=t,s=c;break;case 3:i=l,n=u,s=t;break;case 4:i=c,n=l,s=t;break;case 5:i=t,n=l,s=u;break}return{r:Math.floor(i*255),g:Math.floor(n*255),b:Math.floor(s*255)}}function NE(r,e,t){const i=wc(r,e,t);return $E(i.r,i.g,i.b)}function RH(r){const e=df(r);if(!e)throw new TypeError("'".concat(r,"' is not a valid color."));return bl(e.r,e.g,e.b)}function LE(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)}function FE(r){return mme.test(r)}function kH(r){return gme.test(r)}function Bme(r,e){if(e!==null&&typeof e=="object"){const t=ef(e);for(let i=0;i<r.length;i++)Object.prototype.hasOwnProperty.call(e,r[i])&&typeof e[r[i]]=="object"&&(t[r[i]]=qE(e[r[i]]));return t}else return null}function qE(r){if(r===null||typeof r!="object")return null;if(r instanceof Element)return r;const e=ef(r);for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&typeof r[t]=="object"&&(e[t]=qE(r[t]));return e}function Ume(r,e){for(let t=0;t<r.length;t++){const i=r[t];let n;for(n=t;n>0&&e(i,r[n-1])<0;n--)r[n]=r[n-1];r[n]=i}return r}function jme(r,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const n=function(p){return p!=null},s=function(p){return p!==null&&typeof p=="object"},a=function(p){for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g))return!1;return!0};if(!s(r))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!n(t))throw new Error("Parameter option must have a value");if(!s(i))throw new Error("Parameter globalOptions must be an object");const o=function(p,g,v){s(p[v])||(p[v]={});const b=g[v],E=p[v];for(const x in b)Object.prototype.hasOwnProperty.call(b,x)&&(E[x]=b[x])},l=e[t],c=s(i)&&!a(i)?i[t]:void 0,h=c?c.enabled:void 0;if(l===void 0)return;if(typeof l=="boolean"){s(r[t])||(r[t]={}),r[t].enabled=l;return}if(l===null&&!s(r[t]))if(n(c))r[t]=ef(c);else return;if(!s(l))return;let f=!0;l.enabled!==void 0?f=l.enabled:h!==void 0&&(f=c.enabled),o(r,e,t),r[t].enabled=f}function Hme(r,e,t,i){let s=0,a=0,o=r.length-1;for(;a<=o&&s<1e4;){const l=Math.floor((a+o)/2),u=r[l],c=i===void 0?u[t]:u[t][i],h=e(c);if(h==0)return l;h==-1?a=l+1:o=l-1,s++}return-1}function Vme(r,e,t,i,n){let a=0,o=0,l=r.length-1,u,c,h,f;for(n=n??function(p,g){return p==g?0:p<g?-1:1};o<=l&&a<1e4;){if(f=Math.floor(.5*(l+o)),u=r[Math.max(0,f-1)][t],c=r[f][t],h=r[Math.min(r.length-1,f+1)][t],n(c,e)==0)return f;if(n(u,e)<0&&n(c,e)>0)return i=="before"?Math.max(0,f-1):f;if(n(c,e)<0&&n(h,e)>0)return i=="before"?f:Math.min(r.length-1,f+1);n(c,e)<0?o=f+1:l=f-1,a++}return-1}const Gme={linear(r){return r},easeInQuad(r){return r*r},easeOutQuad(r){return r*(2-r)},easeInOutQuad(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic(r){return r*r*r},easeOutCubic(r){return--r*r*r+1},easeInOutCubic(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart(r){return r*r*r*r},easeOutQuart(r){return 1- --r*r*r*r},easeInOutQuart(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint(r){return r*r*r*r*r},easeOutQuint(r){return 1+--r*r*r*r*r},easeInOutQuint(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};function Wme(){const r=document.createElement("p");r.style.width="100%",r.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(r),document.body.appendChild(e);const t=r.offsetWidth;e.style.overflow="scroll";let i=r.offsetWidth;return t==i&&(i=e.clientWidth),document.body.removeChild(e),t-i}function zme(r,e){let t;it(e)||(e=[e]);for(const i of r)if(i){t=i[e[0]];for(let n=1;n<e.length;n++)t&&(t=t[e[n]]);if(typeof t<"u")break}return t}const Yme={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};let MH=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Yme[e]}setColor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let i;const n=this._isColorString(e);if(n!==void 0&&(e=n),vi(e)===!0){if(FE(e)===!0){const s=e.substr(4).substr(0,e.length-5).split(",");i={r:s[0],g:s[1],b:s[2],a:1}}else if(kH(e)===!0){const s=e.substr(5).substr(0,e.length-6).split(",");i={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(LE(e)===!0){const s=df(e);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const s=e.a!==void 0?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:s}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+gi(e));this._setColor(i,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=Aa({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Ur(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=Aa({},e)),this.color=e;const i=bl(e.r,e.g,e.b),n=2*Math.PI,s=this.r*i.s,a=this.centerCoordinates.x+s*Math.sin(n*i.h),o=this.centerCoordinates.y+s*Math.cos(n*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const t=bl(this.color.r,this.color.g,this.color.b);t.v=e/100;const i=wc(t.h,t.s,t.v);i.a=this.color.a,this.color=i,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color;const t=bl(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const n=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,s),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-t.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),V9(i).call(i),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,t,i,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=se(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=se(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=se(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=se(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new kE(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const t=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,i);let n,s,a,o;this.centerCoordinates={x:t*.5,y:i*.5},this.r=.49*t;const l=2*Math.PI/360,u=1/360,c=1/this.r;let h;for(a=0;a<360;a++)for(o=0;o<this.r;o++)n=this.centerCoordinates.x+o*Math.sin(l*a),s=this.centerCoordinates.y+o*Math.cos(l*a),h=wc(a*u,o*c,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(n-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,i)}this.generated=!0}_moveSelector(e){const t=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-t.left,n=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,o=i-a,l=n-s,u=Math.atan2(o,l),c=.98*Math.min(Math.sqrt(o*o+l*l),a),h=Math.cos(u)*c+s,f=Math.sin(u)*c+a;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;const g=c/this.r,v=bl(this.color.r,this.color.g,this.color.b);v.h=p,v.s=g;const b=wc(v.h,v.s,v.v);b.a=this.color.a,this.color=b,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}};function BE(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];if(e.length<1)throw new TypeError("Invalid arguments.");if(e.length===1)return document.createTextNode(e[0]);{const i=document.createElement(e[0]);return i.appendChild(BE(...dl(e).call(e,1))),i}}let Kme=class{constructor(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:()=>!1;this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.hideOption=s,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Aa(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new MH(n),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(it(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),We(e)!==void 0&&(this.options.filter=We(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);We(this.options)===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=We(this.options);let t=0,i=!1;for(const n in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,n)&&(this.allowCreation=!1,i=!1,typeof e=="function"?(i=e(n,[]),i=i||this._handleObject(this.configureOptions[n],[n],!0)):(e===!0||lt(e).call(e,n)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let i=0;i<e.length;i++)if(t[e[i]]!==void 0)t=t[e[i]];else{t=void 0;break}return t}_makeItem(e){if(this.allowCreation===!0){const s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return ye(i).call(i,a=>{s.appendChild(a)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){const t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerText=e,this._makeItem([],t)}_makeLabel(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=document.createElement("div");if(n.className="vis-configuration vis-config-label vis-config-s"+t.length,i===!0){for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(BE("i","b",e))}else n.innerText=e+":";return n}_makeDropdown(e,t,i){const n=document.createElement("select");n.className="vis-configuration vis-config-select";let s=0;t!==void 0&&lt(e).call(e,t)!==-1&&(s=lt(e).call(e,t));for(let l=0;l<e.length;l++){const u=document.createElement("option");u.value=e[l],l===s&&(u.selected="selected"),u.innerText=e[l],n.appendChild(u)}const a=this;n.onchange=function(){a._update(this.value,i)};const o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}_makeRange(e,t,i){const n=e[0],s=e[1],a=e[2],o=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=a}catch{}l.step=o;let u="",c=0;t!==void 0?(t<0&&t*1.2<s?(l.min=Math.ceil(t*1.2),c=l.min,u="range increased"):t/1.2<s&&(l.min=Math.ceil(t/1.2),c=l.min,u="range increased"),t*1.2>a&&a!==1&&(l.max=Math.ceil(t*1.2),c=l.max,u="range increased"),l.value=t):l.value=n;const h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=l.value;const f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),i)},l.oninput=function(){h.value=this.value};const p=this._makeLabel(i[i.length-1],i),g=this._makeItem(i,p,l,h);u!==""&&this.popupHistory[g]!==c&&(this.popupHistory[g]=c,this._setupPopup(u,g))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerText=e,i.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Ur(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Ur(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,i){const n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=e,t!==void 0&&(n.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:i,value:t}):this.changedOptions.push({path:i,value:t})));const s=this;n.onchange=function(){s._update(this.checked,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,n)}_makeTextInput(e,t,i){const n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=t,t!==e&&this.changedOptions.push({path:i,value:t});const s=this;n.onchange=function(){s._update(this.value,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,n)}_makeColorField(e,t,i){const n=e[1],s=document.createElement("div");t=t===void 0?n:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?n:t,s.onclick=()=>{this._showColorPicker(t,s,i)};const a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_showColorPicker(e,t,i){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(n=>{const s="rgba("+n.r+","+n.g+","+n.b+","+n.a+")";t.style.backgroundColor=s,this._update(s,i)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,i)}})}_handleObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=!1;const s=We(this.options);let a=!1;for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){n=!0;const l=e[o],u=xc(t,o);if(typeof s=="function"&&(n=s(o,t),n===!1&&!it(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,n=this._handleObject(l,u,!0),this.allowCreation=i===!1)),n!==!1){a=!0;const c=this._getValue(u);if(it(l))this._handleArray(l,c,u);else if(typeof l=="string")this._makeTextInput(l,c,u);else if(typeof l=="boolean")this._makeCheckbox(l,c,u);else if(l instanceof Object){if(!this.hideOption(t,o,this.moduleOptions))if(l.enabled!==void 0){const h=xc(u,"enabled"),f=this._getValue(h);if(f===!0){const p=this._makeLabel(o,u,!0);this._makeItem(u,p),a=this._handleObject(l,u)||a}else this._makeCheckbox(l,f,u)}else{const h=this._makeLabel(o,u,!0);this._makeItem(u,h),a=this._handleObject(l,u)||a}}else console.error("dont know how to handle",l,o,u)}}return a}_handleArray(e,t,i){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,i),e[1]!==t&&this.changedOptions.push({path:i,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:Number(t)}))}_update(e,t){const i=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}_constructOptions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(n[t[s]]===void 0&&(n[t[s]]={}),s!==t.length-1?n=n[t[s]]:n[t[s]]=e);return i}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(BE("pre","const options = "+gi(e,null,2)))}getOptions(){const e={};for(let t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}},Xme=class{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=mi(e),this.y=mi(t)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const t=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth;let a=0,o=0;if(this.overflowMethod=="flip"){let l=!1,u=!0;this.y-t<this.padding&&(u=!1),this.x+i>s-this.padding&&(l=!0),l?a=this.x-i:a=this.x,u?o=this.y-t:o=this.y}else o=this.y-t,o+t+this.padding>n&&(o=n-t-this.padding),o<this.padding&&(o=this.padding),a=this.x,a+i+this.padding>s&&(a=s-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}},Ec=!1,$H;const UE="background: #FFeeee; color: #dd0000";var Qme=Object.freeze({__proto__:null,Activator:$n,Alea:ame,ColorPicker:MH,Configurator:Kme,DELETE:PE,HSVToHex:NE,HSVToRGB:wc,Hammer:kE,Popup:Xme,RGBToHSV:bl,RGBToHex:$E,VALIDATOR_PRINT_STYLE:UE,Validator:class Bt{static validate(e,t,i){Ec=!1,$H=t;let n=t;return i!==void 0&&(n=t[i]),Bt.parse(e,n,[]),Ec}static parse(e,t,i){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&Bt.check(n,e,t,i)}static check(e,t,i,n){if(i[e]===void 0&&i.__any__===void 0){Bt.getSuggestion(e,i,n);return}let s=e,a=!0;i[e]===void 0&&i.__any__!==void 0&&(s="__any__",a=Bt.getType(t[e])==="object");let o=i[s];a&&o.__type__!==void 0&&(o=o.__type__),Bt.checkFields(e,t,i,s,o,n)}static checkFields(e,t,i,n,s,a){const o=function(c){console.error("%c"+c+Bt.printLocation(a,e),UE)},l=Bt.getType(t[e]),u=s[l];u!==void 0?Bt.getType(u)==="array"&&lt(u).call(u,t[e])===-1?(o('Invalid option detected in "'+e+'". Allowed values are:'+Bt.print(u)+' not "'+t[e]+'". '),Ec=!0):l==="object"&&n!=="__any__"&&(a=xc(a,e),Bt.parse(t[e],i[n],a)):s.any===void 0&&(o('Invalid type received for "'+e+'". Expected: '+Bt.print(br(s))+". Received ["+l+'] "'+t[e]+'"'),Ec=!0)}static getType(e){const t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":it(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,i){const n=Bt.findInOptions(e,t,i,!1),s=Bt.findInOptions(e,$H,[],!0),a=8,o=4;let l;n.indexMatch!==void 0?l=" in "+Bt.printLocation(n.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+n.indexMatch+`"?

`:s.distance<=o&&n.distance>s.distance?l=" in "+Bt.printLocation(n.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+Bt.printLocation(s.path,s.closestMatch,""):n.distance<=a?l='. Did you mean "'+n.closestMatch+'"?'+Bt.printLocation(n.path,e):l=". Did you mean one of these: "+Bt.print(br(t))+Bt.printLocation(i,e),console.error('%cUnknown option detected: "'+e+'"'+l,UE),Ec=!0}static findInOptions(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,a="",o=[];const l=e.toLowerCase();let u;for(const h in t){let f;if(t[h].__type__!==void 0&&n===!0){const p=Bt.findInOptions(e,t[h],xc(i,h));s>p.distance&&(a=p.closestMatch,o=p.path,s=p.distance,u=p.indexMatch)}else{var c;lt(c=h.toLowerCase()).call(c,l)!==-1&&(u=h),f=Bt.levenshteinDistance(e,h),s>f&&(a=h,o=OH(i),s=f)}}return{closestMatch:a,path:o,distance:s,indexMatch:u}}static printLocation(e,t){let n=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let a=0;a<s+1;a++)n+="  ";n+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)n+="  ";n+=t+`
`;for(let s=0;s<e.length+1;s++){for(let a=0;a<e.length-s;a++)n+="  ";n+=`}
`}return n+`

`}static print(e){return gi(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;const i=[];let n;for(n=0;n<=t.length;n++)i[n]=[n];let s;for(s=0;s<=e.length;s++)i[0][s]=s;for(n=1;n<=t.length;n++)for(s=1;s<=e.length;s++)t.charAt(n-1)==e.charAt(s-1)?i[n][s]=i[n-1][s-1]:i[n][s]=Math.min(i[n-1][s-1]+1,Math.min(i[n][s-1]+1,i[n-1][s]+1));return i[t.length][e.length]}},addClassName:Cme,addCssText:Fme,binarySearchCustom:Hme,binarySearchValue:Vme,bridgeObject:qE,copyAndExtendArray:xc,copyArray:OH,deepExtend:Tc,deepObjectAssign:RE,easingFunctions:Gme,equalArray:Sme,extend:yme,fillIfDefined:AH,forEach:Ime,getAbsoluteLeft:xme,getAbsoluteRight:wme,getAbsoluteTop:Eme,getScrollBarWidth:Wme,getTarget:kme,getType:Sc,hasParent:Mme,hexToHSV:RH,hexToRGB:df,insertSort:Ume,isDate:vme,isNumber:bc,isObject:ME,isString:vi,isValidHex:LE,isValidRGB:FE,isValidRGBA:kH,mergeOptions:jme,option:$me,overrideOpacity:Nme,parseColor:Lme,preventDefault:Rme,pureDeepObjectAssign:sme,recursiveDOMDelete:IH,removeClassName:Dme,removeCssText:qme,selectiveBridgeObject:Bme,selectiveDeepExtend:bme,selectiveExtend:_me,selectiveNotDeepExtend:Tme,throttle:Pme,toArray:Ame,topMost:zme,updateProperty:Ome}),ff={exports:{}},Dt={},pf={exports:{}},Fa={},NH;function LH(){if(NH)return Fa;NH=1;function r(){var s={};return s["align-content"]=!1,s["align-items"]=!1,s["align-self"]=!1,s["alignment-adjust"]=!1,s["alignment-baseline"]=!1,s.all=!1,s["anchor-point"]=!1,s.animation=!1,s["animation-delay"]=!1,s["animation-direction"]=!1,s["animation-duration"]=!1,s["animation-fill-mode"]=!1,s["animation-iteration-count"]=!1,s["animation-name"]=!1,s["animation-play-state"]=!1,s["animation-timing-function"]=!1,s.azimuth=!1,s["backface-visibility"]=!1,s.background=!0,s["background-attachment"]=!0,s["background-clip"]=!0,s["background-color"]=!0,s["background-image"]=!0,s["background-origin"]=!0,s["background-position"]=!0,s["background-repeat"]=!0,s["background-size"]=!0,s["baseline-shift"]=!1,s.binding=!1,s.bleed=!1,s["bookmark-label"]=!1,s["bookmark-level"]=!1,s["bookmark-state"]=!1,s.border=!0,s["border-bottom"]=!0,s["border-bottom-color"]=!0,s["border-bottom-left-radius"]=!0,s["border-bottom-right-radius"]=!0,s["border-bottom-style"]=!0,s["border-bottom-width"]=!0,s["border-collapse"]=!0,s["border-color"]=!0,s["border-image"]=!0,s["border-image-outset"]=!0,s["border-image-repeat"]=!0,s["border-image-slice"]=!0,s["border-image-source"]=!0,s["border-image-width"]=!0,s["border-left"]=!0,s["border-left-color"]=!0,s["border-left-style"]=!0,s["border-left-width"]=!0,s["border-radius"]=!0,s["border-right"]=!0,s["border-right-color"]=!0,s["border-right-style"]=!0,s["border-right-width"]=!0,s["border-spacing"]=!0,s["border-style"]=!0,s["border-top"]=!0,s["border-top-color"]=!0,s["border-top-left-radius"]=!0,s["border-top-right-radius"]=!0,s["border-top-style"]=!0,s["border-top-width"]=!0,s["border-width"]=!0,s.bottom=!1,s["box-decoration-break"]=!0,s["box-shadow"]=!0,s["box-sizing"]=!0,s["box-snap"]=!0,s["box-suppress"]=!0,s["break-after"]=!0,s["break-before"]=!0,s["break-inside"]=!0,s["caption-side"]=!1,s.chains=!1,s.clear=!0,s.clip=!1,s["clip-path"]=!1,s["clip-rule"]=!1,s.color=!0,s["color-interpolation-filters"]=!0,s["column-count"]=!1,s["column-fill"]=!1,s["column-gap"]=!1,s["column-rule"]=!1,s["column-rule-color"]=!1,s["column-rule-style"]=!1,s["column-rule-width"]=!1,s["column-span"]=!1,s["column-width"]=!1,s.columns=!1,s.contain=!1,s.content=!1,s["counter-increment"]=!1,s["counter-reset"]=!1,s["counter-set"]=!1,s.crop=!1,s.cue=!1,s["cue-after"]=!1,s["cue-before"]=!1,s.cursor=!1,s.direction=!1,s.display=!0,s["display-inside"]=!0,s["display-list"]=!0,s["display-outside"]=!0,s["dominant-baseline"]=!1,s.elevation=!1,s["empty-cells"]=!1,s.filter=!1,s.flex=!1,s["flex-basis"]=!1,s["flex-direction"]=!1,s["flex-flow"]=!1,s["flex-grow"]=!1,s["flex-shrink"]=!1,s["flex-wrap"]=!1,s.float=!1,s["float-offset"]=!1,s["flood-color"]=!1,s["flood-opacity"]=!1,s["flow-from"]=!1,s["flow-into"]=!1,s.font=!0,s["font-family"]=!0,s["font-feature-settings"]=!0,s["font-kerning"]=!0,s["font-language-override"]=!0,s["font-size"]=!0,s["font-size-adjust"]=!0,s["font-stretch"]=!0,s["font-style"]=!0,s["font-synthesis"]=!0,s["font-variant"]=!0,s["font-variant-alternates"]=!0,s["font-variant-caps"]=!0,s["font-variant-east-asian"]=!0,s["font-variant-ligatures"]=!0,s["font-variant-numeric"]=!0,s["font-variant-position"]=!0,s["font-weight"]=!0,s.grid=!1,s["grid-area"]=!1,s["grid-auto-columns"]=!1,s["grid-auto-flow"]=!1,s["grid-auto-rows"]=!1,s["grid-column"]=!1,s["grid-column-end"]=!1,s["grid-column-start"]=!1,s["grid-row"]=!1,s["grid-row-end"]=!1,s["grid-row-start"]=!1,s["grid-template"]=!1,s["grid-template-areas"]=!1,s["grid-template-columns"]=!1,s["grid-template-rows"]=!1,s["hanging-punctuation"]=!1,s.height=!0,s.hyphens=!1,s.icon=!1,s["image-orientation"]=!1,s["image-resolution"]=!1,s["ime-mode"]=!1,s["initial-letters"]=!1,s["inline-box-align"]=!1,s["justify-content"]=!1,s["justify-items"]=!1,s["justify-self"]=!1,s.left=!1,s["letter-spacing"]=!0,s["lighting-color"]=!0,s["line-box-contain"]=!1,s["line-break"]=!1,s["line-grid"]=!1,s["line-height"]=!1,s["line-snap"]=!1,s["line-stacking"]=!1,s["line-stacking-ruby"]=!1,s["line-stacking-shift"]=!1,s["line-stacking-strategy"]=!1,s["list-style"]=!0,s["list-style-image"]=!0,s["list-style-position"]=!0,s["list-style-type"]=!0,s.margin=!0,s["margin-bottom"]=!0,s["margin-left"]=!0,s["margin-right"]=!0,s["margin-top"]=!0,s["marker-offset"]=!1,s["marker-side"]=!1,s.marks=!1,s.mask=!1,s["mask-box"]=!1,s["mask-box-outset"]=!1,s["mask-box-repeat"]=!1,s["mask-box-slice"]=!1,s["mask-box-source"]=!1,s["mask-box-width"]=!1,s["mask-clip"]=!1,s["mask-image"]=!1,s["mask-origin"]=!1,s["mask-position"]=!1,s["mask-repeat"]=!1,s["mask-size"]=!1,s["mask-source-type"]=!1,s["mask-type"]=!1,s["max-height"]=!0,s["max-lines"]=!1,s["max-width"]=!0,s["min-height"]=!0,s["min-width"]=!0,s["move-to"]=!1,s["nav-down"]=!1,s["nav-index"]=!1,s["nav-left"]=!1,s["nav-right"]=!1,s["nav-up"]=!1,s["object-fit"]=!1,s["object-position"]=!1,s.opacity=!1,s.order=!1,s.orphans=!1,s.outline=!1,s["outline-color"]=!1,s["outline-offset"]=!1,s["outline-style"]=!1,s["outline-width"]=!1,s.overflow=!1,s["overflow-wrap"]=!1,s["overflow-x"]=!1,s["overflow-y"]=!1,s.padding=!0,s["padding-bottom"]=!0,s["padding-left"]=!0,s["padding-right"]=!0,s["padding-top"]=!0,s.page=!1,s["page-break-after"]=!1,s["page-break-before"]=!1,s["page-break-inside"]=!1,s["page-policy"]=!1,s.pause=!1,s["pause-after"]=!1,s["pause-before"]=!1,s.perspective=!1,s["perspective-origin"]=!1,s.pitch=!1,s["pitch-range"]=!1,s["play-during"]=!1,s.position=!1,s["presentation-level"]=!1,s.quotes=!1,s["region-fragment"]=!1,s.resize=!1,s.rest=!1,s["rest-after"]=!1,s["rest-before"]=!1,s.richness=!1,s.right=!1,s.rotation=!1,s["rotation-point"]=!1,s["ruby-align"]=!1,s["ruby-merge"]=!1,s["ruby-position"]=!1,s["shape-image-threshold"]=!1,s["shape-outside"]=!1,s["shape-margin"]=!1,s.size=!1,s.speak=!1,s["speak-as"]=!1,s["speak-header"]=!1,s["speak-numeral"]=!1,s["speak-punctuation"]=!1,s["speech-rate"]=!1,s.stress=!1,s["string-set"]=!1,s["tab-size"]=!1,s["table-layout"]=!1,s["text-align"]=!0,s["text-align-last"]=!0,s["text-combine-upright"]=!0,s["text-decoration"]=!0,s["text-decoration-color"]=!0,s["text-decoration-line"]=!0,s["text-decoration-skip"]=!0,s["text-decoration-style"]=!0,s["text-emphasis"]=!0,s["text-emphasis-color"]=!0,s["text-emphasis-position"]=!0,s["text-emphasis-style"]=!0,s["text-height"]=!0,s["text-indent"]=!0,s["text-justify"]=!0,s["text-orientation"]=!0,s["text-overflow"]=!0,s["text-shadow"]=!0,s["text-space-collapse"]=!0,s["text-transform"]=!0,s["text-underline-position"]=!0,s["text-wrap"]=!0,s.top=!1,s.transform=!1,s["transform-origin"]=!1,s["transform-style"]=!1,s.transition=!1,s["transition-delay"]=!1,s["transition-duration"]=!1,s["transition-property"]=!1,s["transition-timing-function"]=!1,s["unicode-bidi"]=!1,s["vertical-align"]=!1,s.visibility=!1,s["voice-balance"]=!1,s["voice-duration"]=!1,s["voice-family"]=!1,s["voice-pitch"]=!1,s["voice-range"]=!1,s["voice-rate"]=!1,s["voice-stress"]=!1,s["voice-volume"]=!1,s.volume=!1,s["white-space"]=!1,s.widows=!1,s.width=!0,s["will-change"]=!1,s["word-break"]=!0,s["word-spacing"]=!0,s["word-wrap"]=!0,s["wrap-flow"]=!1,s["wrap-through"]=!1,s["writing-mode"]=!1,s["z-index"]=!1,s}function e(s,a,o){}function t(s,a,o){}var i=/javascript\s*\:/img;function n(s,a){return i.test(a)?"":a}return Fa.whiteList=r(),Fa.getDefaultWhiteList=r,Fa.onAttr=e,Fa.onIgnoreAttr=t,Fa.safeAttrValue=n,Fa}var jE,FH;function qH(){return FH||(FH=1,jE={indexOf:function(r,e){var t,i;if(Array.prototype.indexOf)return r.indexOf(e);for(t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1},forEach:function(r,e,t){var i,n;if(Array.prototype.forEach)return r.forEach(e,t);for(i=0,n=r.length;i<n;i++)e.call(t,r[i],i,r)},trim:function(r){return String.prototype.trim?r.trim():r.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(r){return String.prototype.trimRight?r.trimRight():r.replace(/(\s*$)/g,"")}}),jE}var HE,BH;function Zme(){if(BH)return HE;BH=1;var r=qH();function e(t,i){t=r.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,s=!1,a=0,o=0,l="";function u(){if(!s){var f=r.trim(t.slice(a,o)),p=f.indexOf(":");if(p!==-1){var g=r.trim(f.slice(0,p)),v=r.trim(f.slice(p+1));if(g){var b=i(a,l.length,g,v,f);b&&(l+=b+"; ")}}}a=o+1}for(;o<n;o++){var c=t[o];if(c==="/"&&t[o+1]==="*"){var h=t.indexOf("*/",o+2);if(h===-1)break;o=h+1,a=o+1,s=!1}else c==="("?s=!0:c===")"?s=!1:c===";"?s||u():c===`
`&&u()}return r.trim(l)}return HE=e,HE}var VE,UH;function Jme(){if(UH)return VE;UH=1;var r=LH(),e=Zme();qH();function t(s){return s==null}function i(s){var a={};for(var o in s)a[o]=s[o];return a}function n(s){s=i(s||{}),s.whiteList=s.whiteList||r.whiteList,s.onAttr=s.onAttr||r.onAttr,s.onIgnoreAttr=s.onIgnoreAttr||r.onIgnoreAttr,s.safeAttrValue=s.safeAttrValue||r.safeAttrValue,this.options=s}return n.prototype.process=function(s){if(s=s||"",s=s.toString(),!s)return"";var a=this,o=a.options,l=o.whiteList,u=o.onAttr,c=o.onIgnoreAttr,h=o.safeAttrValue,f=e(s,function(p,g,v,b,E){var x=l[v],D=!1;if(x===!0?D=x:typeof x=="function"?D=x(b):x instanceof RegExp&&(D=x.test(b)),D!==!0&&(D=!1),b=h(v,b),!!b){var O={position:g,sourcePosition:p,source:E,isWhite:D};if(D){var P=u(v,b,O);return t(P)?v+":"+b:P}else{var P=c(v,b,O);if(!t(P))return P}}});return f},VE=n,VE}var jH;function GE(){return jH||(jH=1,(function(r,e){var t=LH(),i=Jme();function n(a,o){var l=new i(o);return l.process(a)}e=r.exports=n,e.FilterCSS=i;for(var s in t)e[s]=t[s];typeof window<"u"&&(window.filterCSS=r.exports)})(pf,pf.exports)),pf.exports}var WE,HH;function zE(){return HH||(HH=1,WE={indexOf:function(r,e){var t,i;if(Array.prototype.indexOf)return r.indexOf(e);for(t=0,i=r.length;t<i;t++)if(r[t]===e)return t;return-1},forEach:function(r,e,t){var i,n;if(Array.prototype.forEach)return r.forEach(e,t);for(i=0,n=r.length;i<n;i++)e.call(t,r[i],i,r)},trim:function(r){return String.prototype.trim?r.trim():r.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(r){var e=/\s|\n|\t/,t=e.exec(r);return t?t.index:-1}}),WE}var VH;function GH(){if(VH)return Dt;VH=1;var r=GE().FilterCSS,e=GE().getDefaultWhiteList,t=zE();function i(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var n=new r;function s(Z,W,Y){}function a(Z,W,Y){}function o(Z,W,Y){}function l(Z,W,Y){}function u(Z){return Z.replace(h,"&lt;").replace(f,"&gt;")}function c(Z,W,Y,X){if(Y=C(Y),W==="href"||W==="src"){if(Y=t.trim(Y),Y==="#")return"#";if(!(Y.substr(0,7)==="http://"||Y.substr(0,8)==="https://"||Y.substr(0,7)==="mailto:"||Y.substr(0,4)==="tel:"||Y.substr(0,11)==="data:image/"||Y.substr(0,6)==="ftp://"||Y.substr(0,2)==="./"||Y.substr(0,3)==="../"||Y[0]==="#"||Y[0]==="/"))return""}else if(W==="background"){if(x.lastIndex=0,x.test(Y))return""}else if(W==="style"){if(D.lastIndex=0,D.test(Y)||(O.lastIndex=0,O.test(Y)&&(x.lastIndex=0,x.test(Y))))return"";X!==!1&&(X=X||n,Y=X.process(Y))}return Y=$(Y),Y}var h=/</g,f=/>/g,p=/"/g,g=/&quot;/g,v=/&#([a-zA-Z0-9]*);?/gim,b=/&colon;?/gim,E=/&newline;?/gim,x=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,D=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,O=/u\s*r\s*l\s*\(.*/gi;function P(Z){return Z.replace(p,"&quot;")}function R(Z){return Z.replace(g,'"')}function A(Z){return Z.replace(v,function(Y,X){return X[0]==="x"||X[0]==="X"?String.fromCharCode(parseInt(X.substr(1),16)):String.fromCharCode(parseInt(X,10))})}function I(Z){return Z.replace(b,":").replace(E," ")}function S(Z){for(var W="",Y=0,X=Z.length;Y<X;Y++)W+=Z.charCodeAt(Y)<32?" ":Z.charAt(Y);return t.trim(W)}function C(Z){return Z=R(Z),Z=A(Z),Z=I(Z),Z=S(Z),Z}function $(Z){return Z=P(Z),Z=u(Z),Z}function F(){return""}function j(Z,W){typeof W!="function"&&(W=function(){});var Y=!Array.isArray(Z);function X(he){return Y?!0:t.indexOf(Z,he)!==-1}var ie=[],Q=!1;return{onIgnoreTag:function(he,ve,pe){if(X(he))if(pe.isClosing){var be="[/removed]",Oe=pe.position+be.length;return ie.push([Q!==!1?Q:pe.position,Oe]),Q=!1,be}else return Q||(Q=pe.position),"[removed]";else return W(he,ve,pe)},remove:function(he){var ve="",pe=0;return t.forEach(ie,function(be){ve+=he.slice(pe,be[0]),pe=be[1]}),ve+=he.slice(pe),ve}}}function z(Z){for(var W="",Y=0;Y<Z.length;){var X=Z.indexOf("<!--",Y);if(X===-1){W+=Z.slice(Y);break}W+=Z.slice(Y,X);var ie=Z.indexOf("-->",X);if(ie===-1)break;Y=ie+3}return W}function J(Z){var W=Z.split("");return W=W.filter(function(Y){var X=Y.charCodeAt(0);return X===127?!1:X<=31?X===10||X===13:!0}),W.join("")}return Dt.whiteList=i(),Dt.getDefaultWhiteList=i,Dt.onTag=s,Dt.onIgnoreTag=a,Dt.onTagAttr=o,Dt.onIgnoreTagAttr=l,Dt.safeAttrValue=c,Dt.escapeHtml=u,Dt.escapeQuote=P,Dt.unescapeQuote=R,Dt.escapeHtmlEntities=A,Dt.escapeDangerHtml5Entities=I,Dt.clearNonPrintableCharacter=S,Dt.friendlyAttrValue=C,Dt.escapeAttrValue=$,Dt.onIgnoreTagStripAll=F,Dt.StripTagBody=j,Dt.stripCommentTag=z,Dt.stripBlankChar=J,Dt.attributeWrapSign='"',Dt.cssFilter=n,Dt.getDefaultCSSWhiteList=e,Dt}var mf={},WH;function zH(){if(WH)return mf;WH=1;var r=zE();function e(h){var f=r.spaceIndex(h),p;return f===-1?p=h.slice(1,-1):p=h.slice(1,f+1),p=r.trim(p).toLowerCase(),p.slice(0,1)==="/"&&(p=p.slice(1)),p.slice(-1)==="/"&&(p=p.slice(0,-1)),p}function t(h){return h.slice(0,2)==="</"}function i(h,f,p){var g="",v=0,b=!1,E=!1,x=0,D=h.length,O="",P="";e:for(x=0;x<D;x++){var R=h.charAt(x);if(b===!1){if(R==="<"){b=x;continue}}else if(E===!1){if(R==="<"){g+=p(h.slice(v,x)),b=x,v=x;continue}if(R===">"||x===D-1){g+=p(h.slice(v,b)),P=h.slice(b,x+1),O=e(P),g+=f(b,g.length,O,P,t(P)),v=x+1,b=!1;continue}if(R==='"'||R==="'")for(var A=1,I=h.charAt(x-A);I.trim()===""||I==="=";){if(I==="="){E=R;continue e}I=h.charAt(x-++A)}}else if(R===E){E=!1;continue}}return v<D&&(g+=p(h.substr(v))),g}var n=/[^a-zA-Z0-9\\_:.-]/gim;function s(h,f){var p=0,g=0,v=[],b=!1,E=h.length;function x(A,I){if(A=r.trim(A),A=A.replace(n,"").toLowerCase(),!(A.length<1)){var S=f(A,I||"");S&&v.push(S)}}for(var D=0;D<E;D++){var O=h.charAt(D),P,R;if(b===!1&&O==="="){b=h.slice(p,D),p=D+1,g=h.charAt(p)==='"'||h.charAt(p)==="'"?p:o(h,D+1);continue}if(b!==!1&&D===g){if(R=h.indexOf(O,D+1),R===-1)break;P=r.trim(h.slice(g+1,R)),x(b,P),b=!1,D=R,p=D+1;continue}if(/\s|\n|\t/.test(O))if(h=h.replace(/\s|\n|\t/g," "),b===!1)if(R=a(h,D),R===-1){P=r.trim(h.slice(p,D)),x(P),b=!1,p=D+1;continue}else{D=R-1;continue}else if(R=l(h,D-1),R===-1){P=r.trim(h.slice(p,D)),P=c(P),x(b,P),b=!1,p=D+1;continue}else continue}return p<h.length&&(b===!1?x(h.slice(p)):x(b,c(r.trim(h.slice(p))))),r.trim(v.join(" "))}function a(h,f){for(;f<h.length;f++){var p=h[f];if(p!==" ")return p==="="?f:-1}}function o(h,f){for(;f<h.length;f++){var p=h[f];if(p!==" ")return p==="'"||p==='"'?f:-1}}function l(h,f){for(;f>0;f--){var p=h[f];if(p!==" ")return p==="="?f:-1}}function u(h){return h[0]==='"'&&h[h.length-1]==='"'||h[0]==="'"&&h[h.length-1]==="'"}function c(h){return u(h)?h.substr(1,h.length-2):h}return mf.parseTag=i,mf.parseAttr=s,mf}var YE,YH;function ege(){if(YH)return YE;YH=1;var r=GE().FilterCSS,e=GH(),t=zH(),i=t.parseTag,n=t.parseAttr,s=zE();function a(h){return h==null}function o(h){var f=s.spaceIndex(h);if(f===-1)return{html:"",closing:h[h.length-2]==="/"};h=s.trim(h.slice(f+1,-1));var p=h[h.length-1]==="/";return p&&(h=s.trim(h.slice(0,-1))),{html:h,closing:p}}function l(h){var f={};for(var p in h)f[p]=h[p];return f}function u(h){var f={};for(var p in h)Array.isArray(h[p])?f[p.toLowerCase()]=h[p].map(function(g){return g.toLowerCase()}):f[p.toLowerCase()]=h[p];return f}function c(h){h=l(h||{}),h.stripIgnoreTag&&(h.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),h.onIgnoreTag=e.onIgnoreTagStripAll),h.whiteList||h.allowList?h.whiteList=u(h.whiteList||h.allowList):h.whiteList=e.whiteList,this.attributeWrapSign=h.singleQuotedAttributeValue===!0?"'":e.attributeWrapSign,h.onTag=h.onTag||e.onTag,h.onTagAttr=h.onTagAttr||e.onTagAttr,h.onIgnoreTag=h.onIgnoreTag||e.onIgnoreTag,h.onIgnoreTagAttr=h.onIgnoreTagAttr||e.onIgnoreTagAttr,h.safeAttrValue=h.safeAttrValue||e.safeAttrValue,h.escapeHtml=h.escapeHtml||e.escapeHtml,this.options=h,h.css===!1?this.cssFilter=!1:(h.css=h.css||{},this.cssFilter=new r(h.css))}return c.prototype.process=function(h){if(h=h||"",h=h.toString(),!h)return"";var f=this,p=f.options,g=p.whiteList,v=p.onTag,b=p.onIgnoreTag,E=p.onTagAttr,x=p.onIgnoreTagAttr,D=p.safeAttrValue,O=p.escapeHtml,P=f.attributeWrapSign,R=f.cssFilter;p.stripBlankChar&&(h=e.stripBlankChar(h)),p.allowCommentTag||(h=e.stripCommentTag(h));var A=!1;p.stripIgnoreTagBody&&(A=e.StripTagBody(p.stripIgnoreTagBody,b),b=A.onIgnoreTag);var I=i(h,function(S,C,$,F,j){var z={sourcePosition:S,position:C,isClosing:j,isWhite:Object.prototype.hasOwnProperty.call(g,$)},J=v($,F,z);if(!a(J))return J;if(z.isWhite){if(z.isClosing)return"</"+$+">";var Z=o(F),W=g[$],Y=n(Z.html,function(X,ie){var Q=s.indexOf(W,X)!==-1,he=E($,X,ie,Q);return a(he)?Q?(ie=D($,X,ie,R),ie?X+"="+P+ie+P:X):(he=x($,X,ie,Q),a(he)?void 0:he):he});return F="<"+$,Y&&(F+=" "+Y),Z.closing&&(F+=" /"),F+=">",F}else return J=b($,F,z),a(J)?O(F):J},O);return A&&(I=A.remove(I)),I},YE=c,YE}var KH;function tge(){return KH||(KH=1,(function(r,e){var t=GH(),i=zH(),n=ege();function s(o,l){var u=new n(l);return u.process(o)}e=r.exports=s,e.filterXSS=s,e.FilterXSS=n,(function(){for(var o in t)e[o]=t[o];for(var l in i)e[l]=i[l]})(),typeof window<"u"&&(window.filterXSS=r.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=r.exports)})(ff,ff.exports)),ff.exports}var rge=tge(),ige=Re(rge);const Tr=[];for(let r=0;r<256;++r)Tr.push((r+256).toString(16).slice(1));function nge(r,e=0){return(Tr[r[e+0]]+Tr[r[e+1]]+Tr[r[e+2]]+Tr[r[e+3]]+"-"+Tr[r[e+4]]+Tr[r[e+5]]+"-"+Tr[r[e+6]]+Tr[r[e+7]]+"-"+Tr[r[e+8]]+Tr[r[e+9]]+"-"+Tr[r[e+10]]+Tr[r[e+11]]+Tr[r[e+12]]+Tr[r[e+13]]+Tr[r[e+14]]+Tr[r[e+15]]).toLowerCase()}let KE;const sge=new Uint8Array(16);function age(){if(!KE){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");KE=crypto.getRandomValues.bind(crypto)}return KE(sge)}var XH={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function oge(r,e,t){r=r||{};const i=r.random??r.rng?.()??age();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,nge(i)}function Tl(r,e,t){return XH.randomUUID&&!r?XH.randomUUID():oge(r)}function QH(r,e){var t=br(r);if(N8){var i=N8(r);e&&(i=We(i).call(i,function(n){return K8(r,n).enumerable})),t.push.apply(t,i)}return t}function ZH(r){for(var e=1;e<arguments.length;e++){var t,i,n=arguments[e]!=null?arguments[e]:{};e%2?ye(t=QH(Object(n),!0)).call(t,function(s){tde(r,s,n[s])}):nU?Wce(r,nU(n)):ye(i=QH(Object(n))).call(i,function(s){Hj(r,s,K8(n,s))})}return r}function cs(r){var e;if(!r)return!1;let t=(e=r.idProp)!==null&&e!==void 0?e:r._idProp;return t?$ue(t,r):!1}const XE=/^\/?Date\((-?\d+)/i,lge=/^\d+$/;function QE(r,e){let t;if(r!==void 0){if(r===null)return null;if(!e)return r;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!r;case"number":case"Number":return vi(r)&&!isNaN(Date.parse(r))?ce(r).valueOf():Number(r.valueOf());case"string":case"String":return String(r);case"Date":try{return QE(r,"Moment").toDate()}catch(i){throw i instanceof TypeError?new TypeError("Cannot convert object of type "+Sc(r)+" to type "+e):i}case"Moment":if(bc(r))return ce(r);if(r instanceof Date)return ce(r.valueOf());if(ce.isMoment(r))return ce(r);if(vi(r))return t=XE.exec(r),t?ce(Number(t[1])):(t=lge.exec(r),ce(t?Number(r):r));throw new TypeError("Cannot convert object of type "+Sc(r)+" to type "+e);case"ISODate":if(bc(r))return new Date(r);if(r instanceof Date)return r.toISOString();if(ce.isMoment(r))return r.toDate().toISOString();if(vi(r))return t=XE.exec(r),t?new Date(Number(t[1])).toISOString():ce(r).format();throw new Error("Cannot convert object of type "+Sc(r)+" to type ISODate");case"ASPDate":if(bc(r))return"/Date("+r+")/";if(r instanceof Date||ce.isMoment(r))return"/Date("+r.valueOf()+")/";if(vi(r)){t=XE.exec(r);let i;return t?i=new Date(Number(t[1])).valueOf():i=new Date(r).valueOf(),"/Date("+i+")/"}else throw new Error("Cannot convert object of type "+Sc(r)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function Sl(r){var e,t,i,n,s,a;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{start:"Date",end:"Date"};const l=r._idProp,u=new Ms({fieldId:l}),c=mr(e=fse(r)).call(e,h=>{var f;return Nj(f=br(h)).call(f,(p,g)=>(p[g]=QE(h[g],o[g]),p),{})}).to(u);return c.all().start(),{add:function(){return r.getDataSet().add(...arguments)},remove:function(){return r.getDataSet().remove(...arguments)},update:function(){return r.getDataSet().update(...arguments)},updateOnly:function(){return r.getDataSet().updateOnly(...arguments)},clear:function(){return r.getDataSet().clear(...arguments)},forEach:se(t=ye(u)).call(t,u),get:se(i=u.get).call(i,u),getIds:se(n=u.getIds).call(n,u),off:se(s=u.off).call(s,u),on:se(a=u.on).call(a,u),get length(){return u.length},idProp:l,type:o,rawDS:r,coercedDS:u,dispose:()=>c.stop()}}const JH=r=>{const e=new ige.FilterXSS(r);return t=>typeof t=="string"?e.process(t):t},uge=r=>r;let ZE=JH();const cge=r=>{r&&(r.disabled===!0?(ZE=uge,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):r.filterOptions&&(ZE=JH(r.filterOptions)))},q=ZH(ZH({},Qme),{},{convert:QE,setupXSSProtection:cge});Hj(q,"xss",{get:function(){return ZE}});var eV={},JE,tV;function hge(){if(tV)return JE;tV=1;var r=Ft(),e=Ge(),t=Xe(),i=Li(),n=a9().trim,s=Vw(),a=t("".charAt),o=r.parseFloat,l=r.Symbol,u=l&&l.iterator,c=1/o(s+"-0")!==-1/0||u&&!e(function(){o(Object(u))});return JE=c?function(f){var p=n(i(f)),g=o(p);return g===0&&a(p,0)==="-"?-0:g}:o,JE}var rV;function dge(){if(rV)return eV;rV=1;var r=we(),e=hge();return r({global:!0,forced:parseFloat!==e},{parseFloat:e}),eV}var e2,iV;function fge(){if(iV)return e2;iV=1,dge();var r=_t();return e2=r.parseFloat,e2}var t2,nV;function pge(){if(nV)return t2;nV=1;var r=fge();return t2=r,t2}var r2,sV;function mge(){return sV||(sV=1,r2=pge()),r2}var gge=mge(),gf=Re(gge);class qs{constructor(){this.options=null,this.props=null}setOptions(e){e&&q.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}var aV={},oV;function vge(){if(oV)return aV;oV=1;var r=we(),e=O9();return r({target:"String",proto:!0},{repeat:e}),aV}var i2,lV;function yge(){if(lV)return i2;lV=1,vge();var r=pr();return i2=r("String","repeat"),i2}var n2,uV;function _ge(){if(uV)return n2;uV=1;var r=Vt(),e=yge(),t=String.prototype;return n2=function(i){var n=i.repeat;return typeof i=="string"||i===t||r(t,i)&&n===t.repeat?e:n},n2}var s2,cV;function bge(){if(cV)return s2;cV=1;var r=_ge();return s2=r,s2}var a2,hV;function Tge(){return hV||(hV=1,a2=bge()),a2}var Sge=Tge(),xl=Re(Sge),dV={},o2,fV;function xge(){if(fV)return o2;fV=1;var r=ll(),e=Math.floor,t=function(i,n){var s=i.length;if(s<8)for(var a=1,o,l;a<s;){for(l=a,o=i[a];l&&n(i[l-1],o)>0;)i[l]=i[--l];l!==a++&&(i[l]=o)}else for(var u=e(s/2),c=t(r(i,0,u),n),h=t(r(i,u),n),f=c.length,p=h.length,g=0,v=0;g<f||v<p;)i[g+v]=g<f&&v<p?n(c[g],h[v])<=0?c[g++]:h[v++]:g<f?c[g++]:h[v++];return i};return o2=t,o2}var l2,pV;function wge(){if(pV)return l2;pV=1;var r=il(),e=r.match(/firefox\/(\d+)/i);return l2=!!e&&+e[1],l2}var u2,mV;function Ege(){if(mV)return u2;mV=1;var r=il();return u2=/MSIE|Trident/.test(r),u2}var c2,gV;function Cge(){if(gV)return c2;gV=1;var r=il(),e=r.match(/AppleWebKit\/(\d+)\./);return c2=!!e&&+e[1],c2}var vV;function Dge(){if(vV)return dV;vV=1;var r=we(),e=Xe(),t=Ns(),i=fi(),n=as(),s=g7(),a=Li(),o=Ge(),l=xge(),u=cl(),c=wge(),h=Ege(),f=Qu(),p=Cge(),g=[],v=e(g.sort),b=e(g.push),E=o(function(){g.sort(void 0)}),x=o(function(){g.sort(null)}),D=u("sort"),O=!o(function(){if(f)return f<70;if(!(c&&c>3)){if(h)return!0;if(p)return p<603;var A="",I,S,C,$;for(I=65;I<76;I++){switch(S=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:C=3;break;case 68:case 71:C=4;break;default:C=2}for($=0;$<47;$++)g.push({k:S+$,v:C})}for(g.sort(function(F,j){return j.v-F.v}),$=0;$<g.length;$++)S=g[$].k.charAt(0),A.charAt(A.length-1)!==S&&(A+=S);return A!=="DGBEFHACIJK"}}),P=E||!x||!D||!O,R=function(A){return function(I,S){return S===void 0?-1:I===void 0?1:A!==void 0?+A(I,S)||0:a(I)>a(S)?1:-1}};return r({target:"Array",proto:!0,forced:P},{sort:function(I){I!==void 0&&t(I);var S=i(this);if(O)return I===void 0?v(S):v(S,I);var C=[],$=n(S),F,j;for(j=0;j<$;j++)j in S&&b(C,S[j]);for(l(C,R(I)),F=n(C),j=0;j<F;)S[j]=C[j++];for(;j<$;)s(S,j++);return S}}),dV}var h2,yV;function Ige(){if(yV)return h2;yV=1,Dge();var r=pr();return h2=r("Array","sort"),h2}var d2,_V;function Age(){if(_V)return d2;_V=1;var r=Vt(),e=Ige(),t=Array.prototype;return d2=function(i){var n=i.sort;return i===t||r(t,i)&&n===t.sort?e:n},d2}var f2,bV;function Oge(){if(bV)return f2;bV=1;var r=Age();return f2=r,f2}var p2,TV;function Pge(){return TV||(TV=1,p2=Oge()),p2}var Rge=Pge(),gr=Re(Rge);function m2(r,e,t){if(t&&!it(t))return m2(r,e,[t]);if(e.hiddenDates=[],t&&it(t)==!0){var i;for(let n=0;n<t.length;n++)if(xl(t[n])===void 0){const s={};s.start=r(t[n].start).toDate().valueOf(),s.end=r(t[n].end).toDate().valueOf(),e.hiddenDates.push(s)}gr(i=e.hiddenDates).call(i,(n,s)=>n.start-s.start)}}function vf(r,e,t){if(t&&!it(t))return vf(r,e,[t]);if(t&&e.domProps.centerContainer.width!==void 0){m2(r,e,t);const i=r(e.range.start),n=r(e.range.end),a=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let h=0;h<t.length;h++)if(xl(t[h])!==void 0){let f=r(t[h].start),p=r(t[h].end);if(f._d=="Invalid Date")throw new Error("Supplied start date is not valid: ".concat(t[h].start));if(p._d=="Invalid Date")throw new Error("Supplied end date is not valid: ".concat(t[h].end));if(p-f>=4*a){let v=0,b=n.clone();switch(xl(t[h])){case"daily":f.day()!=p.day()&&(v=1),f=f.dayOfYear(i.dayOfYear()).year(i.year()).subtract(7,"days"),p=p.dayOfYear(i.dayOfYear()).year(i.year()).subtract(7-v,"days"),b.add(1,"weeks");break;case"weekly":{const E=p.diff(f,"days"),x=f.day();f=f.date(i.date()).month(i.month()).year(i.year()),p=f.clone(),f=f.day(x).subtract(1,"weeks"),p=p.day(x).add(E,"days").subtract(1,"weeks"),b.add(1,"weeks");break}case"monthly":f.month()!=p.month()&&(v=1),f=f.month(i.month()).year(i.year()).subtract(1,"months"),p=p.month(i.month()).year(i.year()).subtract(1,"months").add(v,"months"),b.add(1,"months");break;case"yearly":f.year()!=p.year()&&(v=1),f=f.year(i.year()).subtract(1,"years"),p=p.year(i.year()).subtract(1,"years").add(v,"years"),b.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",xl(t[h]));return}for(;f<b;)switch(e.hiddenDates.push({start:f.valueOf(),end:p.valueOf()}),xl(t[h])){case"daily":f=f.add(1,"days"),p=p.add(1,"days");break;case"weekly":f=f.add(1,"weeks"),p=p.add(1,"weeks");break;case"monthly":f=f.add(1,"months"),p=p.add(1,"months");break;case"yearly":f=f.add(1,"y"),p=p.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",xl(t[h]));return}e.hiddenDates.push({start:f.valueOf(),end:p.valueOf()})}}kge(e);const o=_f(e.range.start,e.hiddenDates),l=_f(e.range.end,e.hiddenDates);let u=e.range.start,c=e.range.end;o.hidden==!0&&(u=e.range.startToFront==!0?o.startDate-1:o.endDate+1),l.hidden==!0&&(c=e.range.endToFront==!0?l.startDate-1:l.endDate+1),(o.hidden==!0||l.hidden==!0)&&e.range._applyRange(u,c)}}function kge(r){var e;const t=r.hiddenDates,i=[];for(var n=0;n<t.length;n++)for(let s=0;s<t.length;s++)n!=s&&t[s].remove!=!0&&t[n].remove!=!0&&(t[s].start>=t[n].start&&t[s].end<=t[n].end?t[s].remove=!0:t[s].start>=t[n].start&&t[s].start<=t[n].end?(t[n].end=t[s].end,t[s].remove=!0):t[s].end>=t[n].start&&t[s].end<=t[n].end&&(t[n].start=t[s].start,t[s].remove=!0));for(n=0;n<t.length;n++)t[n].remove!==!0&&i.push(t[n]);r.hiddenDates=i,gr(e=r.hiddenDates).call(e,(s,a)=>s.start-a.start)}function Mge(r,e,t){let i=!1;const n=e.current.valueOf();for(let a=0;a<e.hiddenDates.length;a++){const o=e.hiddenDates[a].start;var s=e.hiddenDates[a].end;if(n>=o&&n<s){i=!0;break}}if(i==!0&&n<e._end.valueOf()&&n!=t){const a=r(t),o=r(s);a.year()!=o.year()?e.switchedYear=!0:a.month()!=o.month()?e.switchedMonth=!0:a.dayOfYear()!=o.dayOfYear()&&(e.switchedDay=!0),e.current=o}}function SV(r,e,t){let i;if(r.body.hiddenDates.length==0)return i=r.range.conversion(t),(e.valueOf()-i.offset)*i.scale;{const n=_f(e,r.body.hiddenDates);n.hidden==!0&&(e=n.startDate);const s=Cc(r.body.hiddenDates,r.range.start,r.range.end);if(e<r.range.start){i=r.range.conversion(t,s);const a=$ge(r.body.hiddenDates,e,i.offset);return e=r.options.moment(e).toDate().valueOf(),e=e+a,-(i.offset-e.valueOf())*i.scale}else if(e>r.range.end){const a={start:r.range.start,end:e};return e=wV(r.options.moment,r.body.hiddenDates,a,e),i=r.range.conversion(t,s),(e.valueOf()-i.offset)*i.scale}else return e=wV(r.options.moment,r.body.hiddenDates,r.range,e),i=r.range.conversion(t,s),(e.valueOf()-i.offset)*i.scale}}function xV(r,e,t){if(r.body.hiddenDates.length==0){const i=r.range.conversion(t);return new Date(e/i.scale+i.offset)}else{const i=Cc(r.body.hiddenDates,r.range.start,r.range.end),s=(r.range.end-r.range.start-i)*e/t,a=Nge(r.body.hiddenDates,r.range,s);return new Date(a+s+r.range.start)}}function Cc(r,e,t){let i=0;for(let n=0;n<r.length;n++){const s=r[n].start,a=r[n].end;s>=e&&a<t&&(i+=a-s)}return i}function $ge(r,e,t){let i=0;for(let n=0;n<r.length;n++){const s=r[n].start,a=r[n].end;s>=e&&a<=t&&(i+=a-s)}return i}function wV(r,e,t,i){return i=r(i).toDate().valueOf(),i-=yf(r,e,t,i),i}function yf(r,e,t,i){let n=0;i=r(i).toDate().valueOf();for(let s=0;s<e.length;s++){const a=e[s].start,o=e[s].end;a>=t.start&&o<t.end&&i>=o&&(n+=o-a)}return n}function Nge(r,e,t){let i=0,n=0,s=e.start;for(let a=0;a<r.length;a++){const o=r[a].start,l=r[a].end;if(o>=e.start&&l<e.end){if(n+=o-s,s=l,n>=t)break;i+=l-o}}return i}function qa(r,e,t,i){const n=_f(e,r);return n.hidden==!0?t<0?i==!0?n.startDate-(n.endDate-e)-1:n.startDate-1:i==!0?n.endDate+(e-n.startDate)+1:n.endDate+1:e}function _f(r,e){for(let n=0;n<e.length;n++){var t=e[n].start,i=e[n].end;if(r>=t&&r<i)return{hidden:!0,startDate:t,endDate:i}}return{hidden:!1,startDate:t,endDate:i}}class bf extends qs{constructor(e,t){var i,n,s,a,o,l,u;super();const c=ti().hours(0).minutes(0).seconds(0).milliseconds(0),h=c.clone().add(-3,"days").valueOf(),f=c.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,t===void 0?(this.start=h,this.end=f):(this.start=t.start||h,this.end=t.end||f),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:ti,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=q.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",se(i=this._onDragStart).call(i,this)),this.body.emitter.on("panmove",se(n=this._onDrag).call(n,this)),this.body.emitter.on("panend",se(s=this._onDragEnd).call(s,this)),this.body.emitter.on("mousewheel",se(a=this._onMouseWheel).call(a,this)),this.body.emitter.on("touch",se(o=this._onTouch).call(o,this)),this.body.emitter.on("pinch",se(l=this._onPinch).call(l,this)),this.body.dom.rollingModeBtn.addEventListener("click",se(u=this.startRolling).call(u,this)),this.setOptions(t)}setOptions(e){if(e){const t=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll"];q.selectiveExtend(t,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function t(){e.stopRolling(),e.rolling=!0;let i=e.end-e.start;const n=q.convert(new Date,"Date").valueOf(),s=e.options.rollingMode&&e.options.rollingMode.offset||.5,a=n-i*s,o=n+i*(1-s),l={animation:!1};e.setRange(a,o,l),i=1/e.conversion(e.body.domProps.center.width).scale/10,i<30&&(i=30),i>1e3&&(i=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=Ur(t,i)}t()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,t,i,n,s){i||(i={}),i.byUser!==!0&&(i.byUser=!1);const a=this,o=e!=null?q.convert(e,"Date").valueOf():null,l=t!=null?q.convert(t,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,i.animation){const h=this.start,f=this.end,p=typeof i.animation=="object"&&"duration"in i.animation?i.animation.duration:500,g=typeof i.animation=="object"&&"easingFunction"in i.animation?i.animation.easingFunction:"easeInOutQuad",v=q.easingFunctions[g];if(!v){var u;throw new Error(Jt(u="Unknown easing function ".concat(gi(g),". Choose from: ")).call(u,br(q.easingFunctions).join(", ")))}const b=pi();let E=!1;const x=()=>{if(!a.props.touch.dragging){const O=pi()-b,P=v(O/p),R=O>p,A=R||o===null?o:h+(o-h)*P,I=R||l===null?l:f+(l-f)*P;c=a._applyRange(A,I),vf(a.options.moment,a.body,a.options.hiddenDates),E=E||c;const S={start:new Date(a.start),end:new Date(a.end),byUser:i.byUser,event:i.event};if(s&&s(P,c,R),c&&a.body.emitter.emit("rangechange",S),R){if(E&&(a.body.emitter.emit("rangechanged",S),n))return n()}else a.animationTimer=Ur(x,20)}};return x()}else{var c=this._applyRange(o,l);if(vf(this.options.moment,this.body,this.options.hiddenDates),c){const h={start:new Date(this.start),end:new Date(this.end),byUser:i.byUser,event:i.event};if(this.body.emitter.emit("rangechange",h),clearTimeout(a.timeoutID),a.timeoutID=Ur(()=>{a.body.emitter.emit("rangechanged",h)},200),n)return n()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,t){let i=e!=null?q.convert(e,"Date").valueOf():this.start,n=t!=null?q.convert(t,"Date").valueOf():this.end;const s=this.options.max!=null?q.convert(this.options.max,"Date").valueOf():null,a=this.options.min!=null?q.convert(this.options.min,"Date").valueOf():null;let o;if(isNaN(i)||i===null)throw new Error('Invalid start "'.concat(e,'"'));if(isNaN(n)||n===null)throw new Error('Invalid end "'.concat(t,'"'));if(n<i&&(n=i),a!==null&&i<a&&(o=a-i,i+=o,n+=o,s!=null&&n>s&&(n=s)),s!==null&&n>s&&(o=n-s,i-=o,n-=o,a!=null&&i<a&&(i=a)),this.options.zoomMin!==null){let u=gf(this.options.zoomMin);u<0&&(u=0),n-i<u&&(this.end-this.start===u&&i>=this.start-.5&&n<=this.end?(i=this.start,n=this.end):(o=u-(n-i),i-=o/2,n+=o/2))}if(this.options.zoomMax!==null){let u=gf(this.options.zoomMax);u<0&&(u=0),n-i>u&&(this.end-this.start===u&&i<this.start&&n>this.end?(i=this.start,n=this.end):(o=n-i-u,i+=o/2,n-=o/2))}const l=this.start!=i||this.end!=n;return!(i>=this.start&&i<=this.end||n>=this.start&&n<=this.end)&&!(this.start>=i&&this.start<=n||this.end>=i&&this.end<=n)&&this.body.emitter.emit("checkRangedItems"),this.start=i,this.end=n,l}getRange(){return{start:this.start,end:this.end}}conversion(e,t){return bf.conversion(this.start,this.end,e,t)}static conversion(e,t,i,n){return n===void 0&&(n=0),i!=0&&t-e!=0?{offset:e,scale:i/(t-e-n)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const t=this.options.direction;EV(t);let i=t=="horizontal"?e.deltaX:e.deltaY;i-=this.deltaDifference;let n=this.props.touch.end-this.props.touch.start;const s=Cc(this.body.hiddenDates,this.start,this.end);n-=s;const a=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let o;this.options.rtl?o=i/a*n:o=-i/a*n;const l=this.props.touch.start+o,u=this.props.touch.end+o,c=qa(this.body.hiddenDates,l,this.previousDelta-i,!0),h=qa(this.body.hiddenDates,u,this.previousDelta-i,!0);if(c!=l||h!=u){this.deltaDifference+=i,this.props.touch.start=c,this.props.touch.end=h,this._onDrag(e);return}this.previousDelta=i,this._applyRange(l,u);const f=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:f,end:p,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let t=0;if(e.wheelDelta?t=e.wheelDelta/120:e.detail?t=-e.detail/3:e.deltaY&&(t=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&t){const i=this.options.zoomFriction||5;let n;t<0?n=1-t/i:n=1/(1+t/i);let s;if(this.rolling){const a=this.options.rollingMode&&this.options.rollingMode.offset||.5;s=this.start+(this.end-this.start)*a}else{const a=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);s=this._pointerToDate(a)}this.zoom(n,s,t,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,q.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;q.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const t=1/(e.scale+this.scaleOffset),i=this.props.touch.centerDate,n=Cc(this.body.hiddenDates,this.start,this.end),s=yf(this.options.moment,this.body.hiddenDates,this,i),a=n-s;let o=i-s+(this.props.touch.start-(i-s))*t,l=i+a+(this.props.touch.end-(i+a))*t;this.startToFront=1-t<=0,this.endToFront=t-1<=0;const u=qa(this.body.hiddenDates,o,1-t,!0),c=qa(this.body.hiddenDates,l,t-1,!0);(u!=o||c!=l)&&(this.props.touch.start=u,this.props.touch.end=c,this.scaleOffset=1-e.scale,o=u,l=c);const h={animation:!1,byUser:!0,event:e};this.setRange(o,l,h),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const t=e.center?e.center.x:e.clientX,i=this.body.dom.centerContainer.getBoundingClientRect(),n=this.options.rtl?t-i.left:i.right-t,s=this.body.util.toTime(n);return s>=this.start&&s<=this.end}_pointerToDate(e){let t;const i=this.options.direction;if(EV(i),i=="horizontal")return this.body.util.toTime(e.x).valueOf();{const n=this.body.domProps.center.height;return t=this.conversion(n),e.y/t.scale+t.offset}}getPointer(e,t){const i=t.getBoundingClientRect();return this.options.rtl?{x:i.right-e.x,y:e.y-i.top}:{x:e.x-i.left,y:e.y-i.top}}zoom(e,t,i,n){t==null&&(t=(this.start+this.end)/2);const s=Cc(this.body.hiddenDates,this.start,this.end),a=yf(this.options.moment,this.body.hiddenDates,this,t),o=s-a;let l=t-a+(this.start-(t-a))*e,u=t+o+(this.end-(t+o))*e;this.startToFront=!(i>0),this.endToFront=!(-i>0);const c=qa(this.body.hiddenDates,l,i,!0),h=qa(this.body.hiddenDates,u,-i,!0);(c!=l||h!=u)&&(l=c,u=h);const f={animation:!1,byUser:!0,event:n};this.setRange(l,u,f),this.startToFront=!1,this.endToFront=!0}move(e){const t=this.end-this.start,i=this.start+t*e,n=this.end+t*e;this.start=i,this.end=n}moveTo(e){const i=(this.start+this.end)/2-e,n=this.start-i,s=this.end-i,a={animation:!1,byUser:!0,event:null};this.setRange(n,s,a)}destroy(){this.stopRolling()}}function EV(r){if(r!="horizontal"&&r!="vertical")throw new TypeError('Unknown direction "'.concat(r,'". Choose "horizontal" or "vertical".'))}var CV={},DV;function Lge(){if(DV)return CV;DV=1;var r=we(),e=Ls().some,t=cl(),i=t("some");return r({target:"Array",proto:!0,forced:!i},{some:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),CV}var g2,IV;function Fge(){if(IV)return g2;IV=1,Lge();var r=pr();return g2=r("Array","some"),g2}var v2,AV;function qge(){if(AV)return v2;AV=1;var r=Vt(),e=Fge(),t=Array.prototype;return v2=function(i){var n=i.some;return i===t||r(t,i)&&n===t.some?e:n},v2}var y2,OV;function Bge(){if(OV)return y2;OV=1;var r=qge();return y2=r,y2}var _2,PV;function Uge(){return PV||(PV=1,_2=Bge()),_2}var jge=Uge(),RV=Re(jge),b2,kV;function Hge(){if(kV)return b2;kV=1,b5();var r=_t();return b2=r.setInterval,b2}var T2,MV;function Vge(){return MV||(MV=1,T2=Hge()),T2}var Gge=Vge(),Wge=Re(Gge),Dc=null;function S2(r,e){var t=e||{preventDefault:!1};if(r.Manager){var i=r,n=function(u,c){var h=Object.create(t);return c&&i.assign(h,c),S2(new i(u,h),h)};return i.assign(n,i),n.Manager=function(u,c){var h=Object.create(t);return c&&i.assign(h,c),S2(new i.Manager(u,h),h)},n}var s=Object.create(r),a=r.element;a.hammer||(a.hammer=[]),a.hammer.push(s),r.on("hammer.input",function(u){(t.preventDefault===!0||t.preventDefault===u.pointerType)&&u.preventDefault(),u.isFirst&&(Dc=u.target)}),s._handlers={},s.on=function(u,c){return o(u).forEach(function(h){var f=s._handlers[h];f||(s._handlers[h]=f=[],r.on(h,l)),f.push(c)}),s},s.off=function(u,c){return o(u).forEach(function(h){var f=s._handlers[h];f&&(f=c?f.filter(function(p){return p!==c}):[],f.length>0?s._handlers[h]=f:(r.off(h,l),delete s._handlers[h]))}),s},s.emit=function(u,c){Dc=c.target,r.emit(u,c)},s.destroy=function(){var u=r.element.hammer,c=u.indexOf(s);c!==-1&&u.splice(c,1),u.length||delete r.element.hammer,s._handlers={},r.destroy()};function o(u){return u.match(/[^ ]+/g)}function l(u){if(u.type!=="hammer.input"){if(u.srcEvent._handled||(u.srcEvent._handled={}),u.srcEvent._handled[u.type])return;u.srcEvent._handled[u.type]=!0}var c=!1;u.stopPropagation=function(){c=!0};var h=u.srcEvent.stopPropagation.bind(u.srcEvent);typeof h=="function"&&(u.srcEvent.stopPropagation=function(){h(),u.stopPropagation()}),u.firstTarget=Dc;for(var f=Dc.isConnected?Dc:u.target;f&&!c;){var p=f.hammer;if(p){for(var g,v=0;v<p.length;v++)if(g=p[v]._handlers[u.type],g)for(var b=0;b<g.length&&!c;b++)g[b](u)}f=f.parentNode}}return s}function zge(){const r=()=>{};return{on:r,off:r,destroy:r,emit:r,get(){return{set:r}}}}let x2;if(typeof window<"u"){const r=window.Hammer||OE;x2=S2(r,{preventDefault:"mouse"})}else x2=function(){return zge()};var Hr=x2;function $V(r,e){e.inputHandler=function(t){t.isFirst&&e(t)},r.on("hammer.input",e.inputHandler)}function Yge(r,e){return e.inputHandler=function(t){t.isFinal&&e(t)},r.on("hammer.input",e.inputHandler)}function Kge(r){const e="pan-y";return r.getTouchAction=function(){return[e]},r}class Ba{constructor(e,t,i,n,s){this.moment=s&&s.moment||ti,this.options=s||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,t,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,it(n)?this.hiddenDates=n:n!=null?this.hiddenDates=[n]:this.hiddenDates=[],this.format=Ba.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const t=q.deepExtend({},Ba.FORMAT);this.format=q.deepExtend(t,e)}setRange(e,t,i){if(!(e instanceof Date)||!(t instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):pi(),this._end=t!=null?this.moment(t.valueOf()):pi(),this.autoScale&&this.setMinimumStep(i)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current=this.current.year(this.step*Math.floor(this.current.year()/this.step)).month(0);case"month":this.current=this.current.date(1);case"week":case"day":case"weekday":this.current=this.current.hours(0);case"hour":this.current=this.current.minutes(0);case"minute":this.current=this.current.seconds(0);case"second":this.current=this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current=this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current=this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current=this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current=this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current=this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current=this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current=this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current=this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(qa(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current=this.current.add(this.step,"millisecond");break;case"second":this.current=this.current.add(this.step,"second");break;case"minute":this.current=this.current.add(this.step,"minute");break;case"hour":this.current=this.current.add(this.step,"hour"),this.current.month()<6?this.current=this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&(this.current=this.current.add(this.step-this.current.hours()%this.step,"hour"));break;case"weekday":case"day":this.current=this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current=this.current.weekday(0).add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current=this.current.add(this.step,"week");else{const t=this.current.clone();t.add(1,"week"),t.isSame(this.current,"month")?this.current=this.current.add(this.step,"week"):this.current=this.current.add(this.step,"week").date(1)}break;case"month":this.current=this.current.add(this.step,"month");break;case"year":this.current=this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&(this.current=this.current.milliseconds(0));break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&(this.current=this.current.seconds(0));break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&(this.current=this.current.minutes(0));break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&(this.current=this.current.hours(0));break;case"weekday":case"day":this.current.date()<this.step+1&&(this.current=this.current.date(1));break;case"week":this.current.week()<this.step&&(this.current=this.current.week(1));break;case"month":this.current.month()<this.step&&(this.current=this.current.month(0));break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Mge(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const t=1e3*60*60*24*30*12,i=1e3*60*60*24*30,n=1e3*60*60*24,s=1e3*60*60,a=1e3*60,o=1e3,l=1;t*1e3>e&&(this.scale="year",this.step=1e3),t*500>e&&(this.scale="year",this.step=500),t*100>e&&(this.scale="year",this.step=100),t*50>e&&(this.scale="year",this.step=50),t*10>e&&(this.scale="year",this.step=10),t*5>e&&(this.scale="year",this.step=5),t>e&&(this.scale="year",this.step=1),i*3>e&&(this.scale="month",this.step=3),i>e&&(this.scale="month",this.step=1),n*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),n*2>e&&(this.scale="day",this.step=2),n>e&&(this.scale="day",this.step=1),n/2>e&&(this.scale="weekday",this.step=1),s*4>e&&(this.scale="hour",this.step=4),s>e&&(this.scale="hour",this.step=1),a*15>e&&(this.scale="minute",this.step=15),a*10>e&&(this.scale="minute",this.step=10),a*5>e&&(this.scale="minute",this.step=5),a>e&&(this.scale="minute",this.step=1),o*15>e&&(this.scale="second",this.step=15),o*10>e&&(this.scale="second",this.step=10),o*5>e&&(this.scale="second",this.step=5),o>e&&(this.scale="second",this.step=1),l*200>e&&(this.scale="millisecond",this.step=200),l*100>e&&(this.scale="millisecond",this.step=100),l*50>e&&(this.scale="millisecond",this.step=50),l*10>e&&(this.scale="millisecond",this.step=10),l*5>e&&(this.scale="millisecond",this.step=5),l>e&&(this.scale="millisecond",this.step=1)}static snap(e,t,i){let n=ti(e);if(t=="year"){const s=n.year()+Math.round(n.month()/12);n=n.year(Math.round(s/i)*i).month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0)}else if(t=="month")n.date()>15?n=n.date(1).add(1,"month"):n=n.date(1),n=n.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="week")n.weekday()>2?n=n.weekday(0).add(1,"week"):n=n.weekday(0),n=n.hours(0).minutes(0).seconds(0).milliseconds(0);else if(t=="day"){switch(i){case 5:case 2:n=n.hours(Math.round(n.hours()/24)*24);break;default:n=n.hours(Math.round(n.hours()/12)*12);break}n=n.minutes(0).seconds(0).milliseconds(0)}else if(t=="weekday"){switch(i){case 5:case 2:n=n.hours(Math.round(n.hours()/12)*12);break;default:n=n.hours(Math.round(n.hours()/6)*6);break}n=n.minutes(0).seconds(0).milliseconds(0)}else if(t=="hour"){switch(i){case 4:n=n.minutes(Math.round(n.minutes()/60)*60);break;default:n=n.minutes(Math.round(n.minutes()/30)*30);break}n=n.seconds(0).milliseconds(0)}else if(t=="minute"){switch(i){case 15:case 10:n=n.minutes(Math.round(n.minutes()/5)*5).seconds(0);break;case 5:n=n.seconds(Math.round(n.seconds()/60)*60);break;default:n=n.seconds(Math.round(n.seconds()/30)*30);break}n=n.milliseconds(0)}else if(t=="second")switch(i){case 15:case 10:n=n.seconds(Math.round(n.seconds()/5)*5).milliseconds(0);break;case 5:n=n.milliseconds(Math.round(n.milliseconds()/1e3)*1e3);break;default:n=n.milliseconds(Math.round(n.milliseconds()/500)*500);break}else if(t=="millisecond"){const s=i>5?i/2:1;n=n.milliseconds(Math.round(n.milliseconds()/s)*s)}return n}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const t=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return t&&t.length>0?this.moment(e).format(t):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""}getClassName(){var e;const t=this.moment,i=this.moment(this.current),n=i.locale?i.locale("en"):i.lang("en"),s=this.step,a=[];function o(f){return f/s%2==0?" vis-even":" vis-odd"}function l(f){return f.isSame(pi(),"day")?" vis-today":f.isSame(t().add(1,"day"),"day")?" vis-tomorrow":f.isSame(t().add(-1,"day"),"day")?" vis-yesterday":""}function u(f){return f.isSame(pi(),"week")?" vis-current-week":""}function c(f){return f.isSame(pi(),"month")?" vis-current-month":""}function h(f){return f.isSame(pi(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":a.push(l(n)),a.push(o(n.milliseconds()));break;case"second":a.push(l(n)),a.push(o(n.seconds()));break;case"minute":a.push(l(n)),a.push(o(n.minutes()));break;case"hour":a.push(Jt(e="vis-h".concat(n.hours())).call(e,this.step==4?"-h"+(n.hours()+4):"")),a.push(l(n)),a.push(o(n.hours()));break;case"weekday":a.push("vis-".concat(n.format("dddd").toLowerCase())),a.push(l(n)),a.push(u(n)),a.push(o(n.date()));break;case"day":a.push("vis-day".concat(n.date())),a.push("vis-".concat(n.format("MMMM").toLowerCase())),a.push(l(n)),a.push(c(n)),a.push(this.step<=2?l(n):""),a.push(this.step<=2?"vis-".concat(n.format("dddd").toLowerCase()):""),a.push(o(n.date()-1));break;case"week":a.push("vis-week".concat(n.format("w"))),a.push(u(n)),a.push(o(n.week()));break;case"month":a.push("vis-".concat(n.format("MMMM").toLowerCase())),a.push(c(n)),a.push(o(n.month()));break;case"year":a.push("vis-year".concat(n.year())),a.push(h(n)),a.push(o(n.year()));break}return We(a).call(a,String).join(" ")}}Ba.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class Tf extends qs{constructor(e,t){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:q.extend({},Ba.FORMAT),moment:ti,timeAxis:null},this.options=q.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(t)}setOptions(e){e&&(q.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),q.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof ti.locale=="function"?ti.locale(e.locale):ti.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,t=this.dom.foreground,i=this.dom.background,n=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,s=t.parentNode!==n;this._calculateCharSize();const a=this.options.showMinorLabels&&this.options.orientation.axis!=="none",o=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=a?e.minorCharHeight:0,e.majorLabelHeight=o?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=t.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const l=t.nextSibling,u=i.nextSibling;return t.parentNode&&t.parentNode.removeChild(t),i.parentNode&&i.parentNode.removeChild(i),t.style.height="".concat(this.props.height,"px"),this._repaintLabels(),l?n.insertBefore(t,l):n.appendChild(t),u?this.body.dom.backgroundVertical.insertBefore(i,u):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||s}_repaintLabels(){const e=this.options.orientation.axis,t=q.convert(this.body.range.start,"Number"),i=q.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let s=n-yf(this.options.moment,this.body.hiddenDates,this.body.range,n);s-=this.body.util.toTime(0).valueOf();const a=new Ba(new Date(t),new Date(i),s,this.body.hiddenDates,this.options);a.setMoment(this.options.moment),this.options.format&&a.setFormat(this.options.format),this.options.timeAxis&&a.setScale(this.options.timeAxis),this.step=a;const o=this.dom;o.redundant.lines=o.lines,o.redundant.majorTexts=o.majorTexts,o.redundant.minorTexts=o.minorTexts,o.lines=[],o.majorTexts=[],o.minorTexts=[];let l,u,c,h,f,p,g=0,v,b,E,x=0;const D=1e3;let O;for(a.start(),u=a.getCurrent(),h=this.body.util.toScreen(u);a.hasNext()&&x<D;){switch(x++,f=a.isMajor(),O=a.getClassName(),l=u,c=h,a.next(),u=a.getCurrent(),h=this.body.util.toScreen(u),v=g,g=h-c,a.scale){case"week":p=!0;break;default:p=g>=v*.4;break}if(this.options.showMinorLabels&&p){var P=this._repaintMinorText(c,a.getLabelMinor(l),e,O);P.style.width="".concat(g,"px")}f&&this.options.showMajorLabels?(c>0&&(E==null&&(E=c),P=this._repaintMajorText(c,a.getLabelMajor(l),e,O)),b=this._repaintMajorLine(c,g,e,O)):p?b=this._repaintMinorLine(c,g,e,O):b&&(b.style.width="".concat(mi(b.style.width)+g,"px"))}if(x===D&&!NV&&(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(D," lines.")),NV=!0),this.options.showMajorLabels){const R=this.body.util.toTime(0),A=a.getLabelMajor(R),I=A.length*(this.props.majorCharWidth||10)+10;(E==null||I<E)&&this._repaintMajorText(0,A,e,O)}ye(q).call(q,this.dom.redundant,R=>{for(;R.length;){const A=R.pop();A&&A.parentNode&&A.parentNode.removeChild(A)}})}_repaintMinorText(e,t,i,n){let s=this.dom.redundant.minorTexts.shift();if(!s){const o=document.createTextNode("");s=document.createElement("div"),s.appendChild(o),this.dom.foreground.appendChild(s)}this.dom.minorTexts.push(s),s.innerHTML=q.xss(t);let a=i=="top"?this.props.majorLabelHeight:0;return this._setXY(s,e,a),s.className="vis-text vis-minor ".concat(n),s}_repaintMajorText(e,t,i,n){let s=this.dom.redundant.majorTexts.shift();if(!s){const o=document.createElement("div");s=document.createElement("div"),s.appendChild(o),this.dom.foreground.appendChild(s)}s.childNodes[0].innerHTML=q.xss(t),s.className="vis-text vis-major ".concat(n);let a=i=="top"?0:this.props.minorLabelHeight;return this._setXY(s,e,a),this.dom.majorTexts.push(s),s}_setXY(e,t,i){var n;const s=this.options.rtl?t*-1:t;e.style.transform=Jt(n="translate(".concat(s,"px, ")).call(n,i,"px)")}_repaintMinorLine(e,t,i,n){var s;let a=this.dom.redundant.lines.shift();a||(a=document.createElement("div"),this.dom.background.appendChild(a)),this.dom.lines.push(a);const o=this.props;a.style.width="".concat(t,"px"),a.style.height="".concat(o.minorLineHeight,"px");let l=i=="top"?o.majorLabelHeight:this.body.domProps.top.height,u=e-o.minorLineWidth/2;return this._setXY(a,u,l),a.className=Jt(s="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-minor ")).call(s,n),a}_repaintMajorLine(e,t,i,n){var s;let a=this.dom.redundant.lines.shift();a||(a=document.createElement("div"),this.dom.background.appendChild(a)),this.dom.lines.push(a);const o=this.props;a.style.width="".concat(t,"px"),a.style.height="".concat(o.majorLineHeight,"px");let l=i=="top"?0:this.body.domProps.top.height,u=e-o.majorLineWidth/2;return this._setXY(a,u,l),a.className=Jt(s="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical"," vis-major ")).call(s,n),a}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var NV=!1;function Xge(r){var e=window,t={},i={keydown:{},keyup:{}},n={},s;for(s=97;s<=122;s++)n[String.fromCharCode(s)]={code:65+(s-97),shift:!1};for(s=65;s<=90;s++)n[String.fromCharCode(s)]={code:s,shift:!0};for(s=0;s<=9;s++)n[""+s]={code:48+s,shift:!1};for(s=1;s<=12;s++)n["F"+s]={code:111+s,shift:!1};for(s=0;s<=9;s++)n["num"+s]={code:96+s,shift:!1};n["num*"]={code:106,shift:!1},n["num+"]={code:107,shift:!1},n["num-"]={code:109,shift:!1},n["num/"]={code:111,shift:!1},n["num."]={code:110,shift:!1},n.left={code:37,shift:!1},n.up={code:38,shift:!1},n.right={code:39,shift:!1},n.down={code:40,shift:!1},n.space={code:32,shift:!1},n.enter={code:13,shift:!1},n.shift={code:16,shift:void 0},n.esc={code:27,shift:!1},n.backspace={code:8,shift:!1},n.tab={code:9,shift:!1},n.ctrl={code:17,shift:!1},n.alt={code:18,shift:!1},n.delete={code:46,shift:!1},n.pageup={code:33,shift:!1},n.pagedown={code:34,shift:!1},n["="]={code:187,shift:!1},n["-"]={code:189,shift:!1},n["]"]={code:221,shift:!1},n["["]={code:219,shift:!1};var a=function(u){l(u,"keydown")},o=function(u){l(u,"keyup")},l=function(u,c){if(i[c][u.keyCode]!==void 0)for(var h=i[c][u.keyCode],f=0;f<h.length;f++)(h[f].shift===void 0||h[f].shift==!0&&u.shiftKey==!0||h[f].shift==!1&&u.shiftKey==!1)&&h[f].fn(u)};return t.bind=function(u,c,h){if(h===void 0&&(h="keydown"),n[u]===void 0)throw new Error("unsupported key: "+u);i[h][n[u].code]===void 0&&(i[h][n[u].code]=[]),i[h][n[u].code].push({fn:c,shift:n[u].shift})},t.bindAll=function(u,c){c===void 0&&(c="keydown");for(var h in n)n.hasOwnProperty(h)&&t.bind(h,u,c)},t.getKey=function(u){for(var c in n)if(n.hasOwnProperty(c)){if(u.shiftKey==!0&&n[c].shift==!0&&u.keyCode==n[c].code)return c;if(u.shiftKey==!1&&n[c].shift==!1&&u.keyCode==n[c].code)return c;if(u.keyCode==n[c].code&&c=="shift")return c}return"unknown key, currently not supported"},t.unbind=function(u,c,h){if(h===void 0&&(h="keydown"),n[u]===void 0)throw new Error("unsupported key: "+u);if(c!==void 0){var f=[],p=i[h][n[u].code];if(p!==void 0)for(var g=0;g<p.length;g++)p[g].fn==c&&p[g].shift==n[u].shift||f.push(i[h][n[u].code][g]);i[h][n[u].code]=f}else i[h][n[u].code]=[]},t.reset=function(){i={keydown:{},keyup:{}}},t.destroy=function(){i={keydown:{},keyup:{}},e.removeEventListener("keydown",a,!0),e.removeEventListener("keyup",o,!0)},e.addEventListener("keydown",a,!0),e.addEventListener("keyup",o,!0),t}function Bi(r){var e,t;this.active=!1,this.dom={container:r},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=Hr(this.dom.overlay),this.hammer.on("tap",se(e=this._onTapOverlay).call(e,this));var i=this,n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];ye(n).call(n,function(s){i.hammer.on(s,function(a){a.stopPropagation()})}),document&&document.body&&(this.onClick=function(s){Qge(s.target,r)||i.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=Xge(),this.escListener=se(t=this.deactivate).call(t,this)}yE(Bi.prototype),Bi.current=null,Bi.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},Bi.prototype.activate=function(){var r;Bi.current&&Bi.current.deactivate(),Bi.current=this,this.active=!0,this.dom.overlay.style.display="none",q.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),se(r=this.keycharm).call(r,"esc",this.escListener)},Bi.prototype.deactivate=function(){Bi.current===this&&(Bi.current=null),this.active=!1,this.dom.overlay.style.display="",q.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Bi.prototype._onTapOverlay=function(r){this.activate(),r.stopPropagation()};function Qge(r,e){for(;r;){if(r===e)return!0;r=r.parentNode}return!1}const w2={current:"current",time:"time",deleteSelected:"Delete selected"},Zge=w2,Jge=w2,E2={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},eve=E2,tve=E2,C2={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},rve=C2,ive=C2,LV={current:"Aktuelle",time:"Zeit",deleteSelected:"Lsche Auswahl"},nve=LV,Sf={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},sve=Sf,ave=Sf,ove=Sf,FV={current:"corriente",time:"hora",deleteSelected:"Eliminar seleccin"},lve=FV,qV={current:"",time:"",deleteSelected:" "},uve=qV,BV={current:"",time:"",deleteSelected:" "},cve=BV,UV={current:"aktualny",time:"czas",deleteSelected:"Usu wybrane"},hve=UV,D2={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},dve=D2,fve=D2,jV={current:"gncel",time:"zaman",deleteSelected:"Seileni sil"},pve=jV,HV={current:"",time:"",deleteSelected:""},mve=HV,VV={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},gve=VV,xf={current:"nvrende",time:"tid",deleteSelected:"Slett valgte"},vve=xf,yve=xf,_ve=xf,GV={current:"einamas",time:"laikas",deleteSelected:"Paalinti pasirinkt"},wl={en:w2,en_EN:Zge,en_US:Jge,it:E2,it_IT:eve,it_CH:tve,nl:C2,nl_NL:rve,nl_BE:ive,de:LV,de_DE:nve,fr:Sf,fr_FR:sve,fr_CA:ave,fr_BE:ove,es:FV,es_ES:lve,uk:qV,uk_UA:uve,ru:BV,ru_RU:cve,pl:UV,pl_PL:hve,pt:D2,pt_BR:dve,pt_PT:fve,tr:jV,tr_TR:pve,ja:HV,ja_JP:mve,lt:GV,lt_LT:GV,sv:VV,sv_SE:gve,nb:xf,nn:yve,nb_NO:vve,nn_NO:_ve};class I2 extends qs{constructor(e,t){var i;super(),this.body=e,this.defaultOptions={moment:ti,locales:wl,locale:"en",id:void 0,title:void 0},this.options=q.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=q.extend({},wl,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];ye(i=br(this.options.locales)).call(i,s=>{this.options.locales[s]=q.extend({},n,this.options.locales[s])}),t&&t.time!=null?this.customTime=t.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&q.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){var e,t,i;const n=document.createElement("div");n["custom-time"]=this,n.className="vis-custom-time ".concat(this.options.id||""),n.style.position="absolute",n.style.top="0px",n.style.height="100%",this.bar=n;const s=document.createElement("div");s.style.position="relative",s.style.top="0px",this.options.rtl?s.style.right="-10px":s.style.left="-10px",s.style.height="100%",s.style.width="20px";function a(o){this.body.range._onMouseWheel(o)}s.addEventListener?(s.addEventListener("mousewheel",se(a).call(a,this),!1),s.addEventListener("DOMMouseScroll",se(a).call(a,this),!1)):s.attachEvent("onmousewheel",se(a).call(a,this)),n.appendChild(s),this.hammer=new Hr(s),this.hammer.on("panstart",se(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",se(t=this._onDrag).call(t,this)),this.hammer.on("panend",se(i=this._onDragEnd).call(i,this)),this.hammer.get("pan").set({threshold:5,direction:Hr.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const t=this.body.util.toScreen(this.customTime);let i=this.options.locales[this.options.locale];i||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),i=this.options.locales.en);let n=this.options.title;if(n===void 0){var s;n=Jt(s="".concat(i.time,": ")).call(s,this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),n=n.charAt(0).toUpperCase()+n.substring(1)}else typeof n=="function"&&(n=n.call(this,this.customTime));return this.options.rtl?this.bar.style.right="".concat(t,"px"):this.bar.style.left="".concat(t,"px"),this.bar.title=n,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=q.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,t){if(this.marker&&this.bar.removeChild(this.marker),this.marker=document.createElement("div"),this.marker.className="vis-custom-time-marker",this.marker.innerHTML=q.xss(e),this.marker.style.position="absolute",t){var i;this.marker.setAttribute("contenteditable","true"),this.marker.addEventListener("pointerdown",()=>{this.marker.focus()}),this.marker.addEventListener("input",se(i=this._onMarkerChange).call(i,this)),this.marker.title=e,this.marker.addEventListener("blur",n=>{this.title!=n.target.innerHTML&&(this._onMarkerChanged(n),this.title=n.target.innerHTML)})}this.bar.appendChild(this.marker)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let t=this.options.rtl?-1*e.deltaX:e.deltaX;const i=this.body.util.toScreen(this.eventParams.customTime)+t,n=this.body.util.toTime(i),s=this.body.util.getScale(),a=this.body.util.getStep(),o=this.options.snap,l=o?o(n,s,a):n;this.setCustomTime(l),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"custom-time"))return t["custom-time"];t=t.parentNode}return null}}class El{_create(e){var t,i,n;this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",se(t=this._onTouch).call(t,this)),this.on("panmove",se(i=this._onDrag).call(i,this));const s=this;this._origRedraw=se(n=this._redraw).call(n,this),this._redraw=q.throttle(this._origRedraw),this.on("_change",g=>{s.itemSet&&s.itemSet.initialItemSetDrawn&&g&&g.queue==!0?s._redraw():s._origRedraw()}),this.hammer=new Hr(this.dom.root);const a=this.hammer.get("pinch").set({enable:!0});a&&Kge(a),this.hammer.get("pan").set({threshold:5,direction:Hr.DIRECTION_ALL}),this.timelineListeners={};const o=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];ye(o).call(o,g=>{const v=b=>{s.isActive()&&s.emit(g,b)};s.hammer.on(g,v),s.timelineListeners[g]=v}),$V(this.hammer,g=>{s.emit("touch",g)}),Yge(this.hammer,g=>{s.emit("release",g)});function l(g){if(!this.isActive())return;if(this.emit("mousewheel",g),this.options.preferZoom){if(!this.options.zoomKey||g[this.options.zoomKey])return}else if(this.options.zoomKey&&g[this.options.zoomKey])return;if(!this.options.verticalScroll&&!this.options.horizontalScroll)return;let v=0,b=0;"detail"in g&&(b=g.detail*-1),"wheelDelta"in g&&(b=g.wheelDelta),"wheelDeltaY"in g&&(b=g.wheelDeltaY),"wheelDeltaX"in g&&(v=g.wheelDeltaX*-1),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(v=b*-1,b=0),"deltaY"in g&&(b=g.deltaY*-1),"deltaX"in g&&(v=g.deltaX);var E=40,x=800;g.deltaMode&&(g.deltaMode===1?(v*=E,b*=E):(v*=E,b*=x));const D=this.options.verticalScroll,O=Math.abs(b)>=Math.abs(v),P=this.options.horizontalScroll&&this.options.horizontalScrollKey&&g[this.options.horizontalScrollKey];if(D&&O&&!P){const R=this.props.scrollTop,A=R+b;this._setScrollTop(A)!==R&&(this._redraw(),this.emit("scroll",g),g.preventDefault());return}if(this.options.horizontalScroll){this.range.stopRolling();let A=(O?b:v)/120*(this.range.end-this.range.start)/20;this.options.horizontalScrollInvert&&O&&(A=-A);const I=this.range.start+A,S=this.range.end+A,C={animation:!1,byUser:!0,event:g};this.range.setRange(I,S,C),g.preventDefault();return}}const u="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(u,se(l).call(l,this),!1),this.dom.top.addEventListener(u,se(l).call(l,this),!1),this.dom.bottom.addEventListener(u,se(l).call(l,this),!1);function c(g){if(s.options.verticalScroll&&(g.preventDefault(),s.isActive())){const v=-g.target.scrollTop;s._setScrollTop(v),s._redraw(),s.emit("scrollSide",g)}}this.dom.left.parentNode.addEventListener("scroll",se(c).call(c,this)),this.dom.right.parentNode.addEventListener("scroll",se(c).call(c,this));let h=!1;function f(g){var v;if(g.preventDefault&&(s.emit("dragover",s.getEventProperties(g)),g.preventDefault()),lt(v=g.target.className).call(v,"timeline")>-1&&!h)return g.dataTransfer.dropEffect="move",h=!0,!1}function p(g){g.preventDefault&&g.preventDefault(),g.stopPropagation&&g.stopPropagation();try{var v=JSON.parse(g.dataTransfer.getData("text"));if(!v||!v.content)return}catch{return!1}return h=!1,g.center={x:g.clientX,y:g.clientY},v.target!=="item"?s.itemSet._onAddItem(g):s.itemSet._onDropObjectOnItem(g),s.emit("drop",s.getEventProperties(g)),!1}if(this.dom.center.addEventListener("dragover",se(f).call(f,this),!1),this.dom.center.addEventListener("drop",se(p).call(p,this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){var t;if(e){const a=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","horizontalScrollKey","horizontalScrollInvert","verticalScroll","longSelectPressTime","snap"];if(q.selectiveExtend(a,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const o=this.timeAxis2=new Tf(this.body,this.options);o.setOptions=l=>{const u=l?q.extend({},l):{};u.orientation="top",Tf.prototype.setOptions.call(o,u)},this.components.push(o)}}else if(this.timeAxis2){var i;const o=lt(i=this.components).call(i,this.timeAxis2);if(o!==-1){var n;ri(n=this.components).call(n,o,1)}this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&m2(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new Bi(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(ye(t=this.components).call(t,a=>a.setOptions(e)),"configure"in e){var s;this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const a=q.deepExtend({},this.options);ye(s=this.components).call(s,o=>{q.deepExtend(a,o.options)}),this.configurator.setModuleOptions({global:a})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){var e;this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const t in this.timelineListeners)Object.prototype.hasOwnProperty.call(this.timelineListeners,t)&&delete this.timelineListeners[t];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,ye(e=this.components).call(e,t=>t.destroy()),this.body=null}setCustomTime(e,t){var i;const n=We(i=this.customTimes).call(i,s=>t===s.options.id);if(n.length===0)throw new Error("No custom time bar found with id ".concat(gi(t)));n.length>0&&n[0].setCustomTime(e)}getCustomTime(e){var t;const i=We(t=this.customTimes).call(t,n=>n.options.id===e);if(i.length===0)throw new Error("No custom time bar found with id ".concat(gi(e)));return i[0].getCustomTime()}setCustomTimeMarker(e,t,i){var n;const s=We(n=this.customTimes).call(n,a=>a.options.id===t);if(s.length===0)throw new Error("No custom time bar found with id ".concat(gi(t)));s.length>0&&s[0].setCustomMarker(e,i)}setCustomTimeTitle(e,t){var i;const n=We(i=this.customTimes).call(i,s=>s.options.id===t);if(n.length===0)throw new Error("No custom time bar found with id ".concat(gi(t)));if(n.length>0)return n[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,t){var i;const n=e!==void 0?q.convert(e,"Date"):new Date;if(RV(i=this.customTimes).call(i,o=>o.options.id===t))throw new Error("A custom time with id ".concat(gi(t)," already exists"));const a=new I2(this.body,q.extend({},this.options,{time:n,id:t,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(a),this.components.push(a),this._redraw(),t}removeCustomTime(e){var t;const i=We(t=this.customTimes).call(t,n=>n.options.id===e);if(i.length===0)throw new Error("No custom time bar found with id ".concat(gi(e)));ye(i).call(i,n=>{var s,a,o,l;ri(s=this.customTimes).call(s,lt(a=this.customTimes).call(a,n),1),ri(o=this.components).call(o,lt(l=this.components).call(l,n),1),n.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,t){const i=this.getDataRange();if(i.min===null&&i.max===null)return;const n=i.max-i.min,s=new Date(i.min.valueOf()-n*.01),a=new Date(i.max.valueOf()+n*.01),o=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(s,a,{animation:o},t)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,t,i,n){typeof arguments[2]=="function"&&(n=arguments[2],i={});let s,a;arguments.length==1?(a=arguments[0],s=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:s})):arguments.length==2&&typeof arguments[1]=="function"?(a=arguments[0],n=arguments[1],s=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:s},n)):(s=i&&i.animation!==void 0?i.animation:!0,this.range.setRange(e,t,{animation:s},n))}moveTo(e,t,i){typeof arguments[1]=="function"&&(i=arguments[1],t={});const n=this.range.end-this.range.start,s=q.convert(e,"Date").valueOf(),a=s-n/2,o=s+n/2,l=t&&t.animation!==void 0?t.animation:!0;this.range.setRange(a,o,{animation:l},i)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,t,i){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(i=arguments[1],t={});const n=this.getWindow(),s=n.start.valueOf(),a=n.end.valueOf(),o=a-s,l=o/(1+e),u=(o-l)/2,c=s+u,h=a-u;this.setWindow(c,h,t,i)}zoomOut(e,t,i){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(i=arguments[1],t={});const n=this.getWindow(),s=n.start.valueOf(),a=n.end.valueOf(),o=a-s,l=s-o*e/2,u=a+o*e/2;this.setWindow(l,u,t,i)}redraw(){this._redraw()}_redraw(){var e;this.redrawCount++;const t=this.dom;if(!t||!t.container||t.root.offsetWidth==0)return;let i=!1;const n=this.options,s=this.props;vf(this.options.moment,this.body,this.options.hiddenDates),n.orientation=="top"?(q.addClassName(t.root,"vis-top"),q.removeClassName(t.root,"vis-bottom")):(q.removeClassName(t.root,"vis-top"),q.addClassName(t.root,"vis-bottom")),n.rtl?(q.addClassName(t.root,"vis-rtl"),q.removeClassName(t.root,"vis-ltr")):(q.addClassName(t.root,"vis-ltr"),q.removeClassName(t.root,"vis-rtl")),t.root.style.maxHeight=q.option.asSize(n.maxHeight,""),t.root.style.minHeight=q.option.asSize(n.minHeight,""),t.root.style.width=q.option.asSize(n.width,"");const a=t.root.offsetWidth;s.border.left=1,s.border.right=1,s.border.top=1,s.border.bottom=1,s.center.height=t.center.offsetHeight,s.left.height=t.left.offsetHeight,s.right.height=t.right.offsetHeight,s.top.height=t.top.clientHeight||-s.border.top,s.bottom.height=Math.round(t.bottom.getBoundingClientRect().height)||t.bottom.clientHeight||-s.border.bottom;const o=Math.max(s.left.height,s.center.height,s.right.height),l=s.top.height+o+s.bottom.height+s.border.top+s.border.bottom;t.root.style.height=q.option.asSize(n.height,"".concat(l,"px")),s.root.height=t.root.offsetHeight,s.background.height=s.root.height;const u=s.root.height-s.top.height-s.bottom.height;s.centerContainer.height=u,s.leftContainer.height=u,s.rightContainer.height=s.leftContainer.height,s.root.width=a,s.background.width=s.root.width,this.initialDrawDone||(s.scrollbarWidth=q.getScrollBarWidth());const c=t.leftContainer.clientWidth,h=t.rightContainer.clientWidth;n.verticalScroll?n.rtl?(s.left.width=c||-s.border.left,s.right.width=h+s.scrollbarWidth||-s.border.right):(s.left.width=c+s.scrollbarWidth||-s.border.left,s.right.width=h||-s.border.right):(s.left.width=c||-s.border.left,s.right.width=h||-s.border.right),this._setDOM();let f=this._updateScrollTop();n.orientation.item!="top"&&(f+=Math.max(s.centerContainer.height-s.center.height-s.border.top-s.border.bottom,0)),t.center.style.transform="translateY(".concat(f,"px)");const p=s.scrollTop==0?"hidden":"",g=s.scrollTop==s.scrollTopMin?"hidden":"";t.shadowTop.style.visibility=p,t.shadowBottom.style.visibility=g,t.shadowTopLeft.style.visibility=p,t.shadowBottomLeft.style.visibility=g,t.shadowTopRight.style.visibility=p,t.shadowBottomRight.style.visibility=g,n.verticalScroll&&(t.rightContainer.className="vis-panel vis-right vis-vertical-scroll",t.leftContainer.className="vis-panel vis-left vis-vertical-scroll",t.shadowTopRight.style.visibility="hidden",t.shadowBottomRight.style.visibility="hidden",t.shadowTopLeft.style.visibility="hidden",t.shadowBottomLeft.style.visibility="hidden",t.left.style.top="0px",t.right.style.top="0px"),(!n.verticalScroll||s.center.height<s.centerContainer.height)&&(t.left.style.top="".concat(f,"px"),t.right.style.top="".concat(f,"px"),t.rightContainer.className=t.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),t.leftContainer.className=t.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),s.left.width=c||-s.border.left,s.right.width=h||-s.border.right,this._setDOM());const v=s.center.height>s.centerContainer.height;this.hammer.get("pan").set({direction:v?Hr.DIRECTION_ALL:Hr.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),ye(e=this.components).call(e,E=>{i=E.redraw()||i});const b=5;if(i)if(this.redrawCount<b){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,t=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const i=e.root.width-e.left.width-e.right.width;e.center.width=i,e.centerContainer.width=i,e.top.width=i,e.bottom.width=i,t.background.style.height="".concat(e.background.height,"px"),t.backgroundVertical.style.height="".concat(e.background.height,"px"),t.backgroundHorizontal.style.height="".concat(e.centerContainer.height,"px"),t.centerContainer.style.height="".concat(e.centerContainer.height,"px"),t.leftContainer.style.height="".concat(e.leftContainer.height,"px"),t.rightContainer.style.height="".concat(e.rightContainer.height,"px"),t.background.style.width="".concat(e.background.width,"px"),t.backgroundVertical.style.width="".concat(e.centerContainer.width,"px"),t.backgroundHorizontal.style.width="".concat(e.background.width,"px"),t.centerContainer.style.width="".concat(e.center.width,"px"),t.top.style.width="".concat(e.top.width,"px"),t.bottom.style.width="".concat(e.bottom.width,"px"),t.background.style.left="0",t.background.style.top="0",t.backgroundVertical.style.left="".concat(e.left.width+e.border.left,"px"),t.backgroundVertical.style.top="0",t.backgroundHorizontal.style.left="0",t.backgroundHorizontal.style.top="".concat(e.top.height,"px"),t.centerContainer.style.left="".concat(e.left.width,"px"),t.centerContainer.style.top="".concat(e.top.height,"px"),t.leftContainer.style.left="0",t.leftContainer.style.top="".concat(e.top.height,"px"),t.rightContainer.style.left="".concat(e.left.width+e.center.width,"px"),t.rightContainer.style.top="".concat(e.top.height,"px"),t.top.style.left="".concat(e.left.width,"px"),t.top.style.top="0",t.bottom.style.left="".concat(e.left.width,"px"),t.bottom.style.top="".concat(e.top.height+e.centerContainer.height,"px"),t.center.style.left="0",t.left.style.left="0",t.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return xV(this,e,this.props.center.width)}_toGlobalTime(e){return xV(this,e,this.props.root.width)}_toScreen(e){return SV(this,e,this.props.center.width)}_toGlobalScreen(e){return SV(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const t=e.dom.root.offsetHeight,i=e.dom.root.offsetWidth;(i!=e.props.lastWidth||t!=e.props.lastHeight)&&(e.props.lastWidth=i,e.props.lastHeight=t,e.props.scrollbarWidth=q.getScrollBarWidth(),e.body.emitter.emit("_change"))}},window.addEventListener("resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=Wge(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(window.removeEventListener("resize",this._onResize),this._onResize=null)}_onTouch(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const t=e.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+t);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),n!=i&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}yE(El.prototype);class WV extends qs{constructor(e,t){var i;super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:ti,locales:wl,locale:"en"},this.options=q.extend({},this.defaultOptions),this.setOptions(t),this.options.locales=q.extend({},wl,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];ye(i=br(this.options.locales)).call(i,s=>{this.options.locales[s]=q.extend({},n,this.options.locales[s])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&q.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){var e,t;const i=this.body.dom.backgroundVertical;this.bar.parentNode!=i&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),i.appendChild(this.bar),this.start());let n=this.options.moment(pi()+this.offset);this.options.alignCurrentTime&&(n=n.startOf(this.options.alignCurrentTime));const s=this.body.util.toScreen(n);let a=this.options.locales[this.options.locale];a||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),a=this.options.locales.en);let o=Jt(e=Jt(t="".concat(a.current," ")).call(t,a.time,": ")).call(e,n.format("dddd, MMMM Do YYYY, H:mm:ss"));o=o.charAt(0).toUpperCase()+o.substring(1),this.options.rtl?this.bar.style.transform="translateX(".concat(s*-1,"px)"):this.bar.style.transform="translateX(".concat(s,"px)"),this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function t(){e.stop();let n=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;n<30&&(n=30),n>1e3&&(n=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=Ur(t,n)}t()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const t=q.convert(e,"Date").valueOf(),i=pi();this.offset=t-i,this.redraw()}getCurrentTime(){return new Date(pi()+this.offset)}}var zV={},YV;function bve(){if(YV)return zV;YV=1;var r=we(),e=Ls().find,t=Qd(),i="find",n=!0;return i in[]&&Array(1)[i](function(){n=!1}),r({target:"Array",proto:!0,forced:n},{find:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),t(i),zV}var A2,KV;function Tve(){if(KV)return A2;KV=1,bve();var r=pr();return A2=r("Array","find"),A2}var O2,XV;function Sve(){if(XV)return O2;XV=1;var r=Vt(),e=Tve(),t=Array.prototype;return O2=function(i){var n=i.find;return i===t||r(t,i)&&n===t.find?e:n},O2}var P2,QV;function xve(){if(QV)return P2;QV=1;var r=Sve();return P2=r,P2}var R2,ZV;function wve(){return ZV||(ZV=1,R2=xve()),R2}var Eve=wve(),Cve=Re(Eve),JV={},eG={},k2={exports:{}},M2,tG;function Dve(){if(tG)return M2;tG=1;var r=Ge();return M2=r(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),M2}var $2,rG;function Ive(){if(rG)return $2;rG=1;var r=Ge(),e=Dr(),t=Rn(),i=Dve(),n=Object.isExtensible,s=r(function(){});return $2=s||i?function(o){return!e(o)||i&&t(o)==="ArrayBuffer"?!1:n?n(o):!0}:n,$2}var N2,iG;function Ave(){if(iG)return N2;iG=1;var r=Ge();return N2=!r(function(){return Object.isExtensible(Object.preventExtensions({}))}),N2}var nG;function sG(){if(nG)return k2.exports;nG=1;var r=we(),e=Xe(),t=tc(),i=Dr(),n=Br(),s=Ni().f,a=zd(),o=a8(),l=Ive(),u=jd(),c=Ave(),h=!1,f=u("meta"),p=0,g=function(O){s(O,f,{value:{objectID:"O"+p++,weakData:{}}})},v=function(O,P){if(!i(O))return typeof O=="symbol"?O:(typeof O=="string"?"S":"P")+O;if(!n(O,f)){if(!l(O))return"F";if(!P)return"E";g(O)}return O[f].objectID},b=function(O,P){if(!n(O,f)){if(!l(O))return!0;if(!P)return!1;g(O)}return O[f].weakData},E=function(O){return c&&h&&l(O)&&!n(O,f)&&g(O),O},x=function(){D.enable=function(){},h=!0;var O=a.f,P=e([].splice),R={};R[f]=1,O(R).length&&(a.f=function(A){for(var I=O(A),S=0,C=I.length;S<C;S++)if(I[S]===f){P(I,S,1);break}return I},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:o.f}))},D=k2.exports={enable:x,fastKey:v,getWeakData:b,onFreeze:E};return t[f]=!0,k2.exports}var L2,aG;function Ove(){if(aG)return L2;aG=1;var r=Zt(),e=hl(),t=r("iterator"),i=Array.prototype;return L2=function(n){return n!==void 0&&(e.Array===n||i[t]===n)},L2}var F2,oG;function lG(){if(oG)return F2;oG=1;var r=ec(),e=Q1(),t=Xu(),i=hl(),n=Zt(),s=n("iterator");return F2=function(a){if(!t(a))return e(a,s)||e(a,"@@iterator")||i[r(a)]},F2}var q2,uG;function Pve(){if(uG)return q2;uG=1;var r=ei(),e=Ns(),t=ss(),i=sl(),n=lG(),s=TypeError;return q2=function(a,o){var l=arguments.length<2?n(a):o;if(e(l))return t(r(l,a));throw new s(i(a)+" is not iterable")},q2}var B2,cG;function U2(){if(cG)return B2;cG=1;var r=ei(),e=ss(),t=Q1();return B2=function(i,n,s){var a,o;e(i);try{if(a=t(i,"return"),!a){if(n==="throw")throw s;return s}a=r(a,i)}catch(l){o=!0,a=l}if(n==="throw")throw s;if(o)throw a;return e(a),s},B2}var j2,hG;function dG(){if(hG)return j2;hG=1;var r=Vd(),e=ei(),t=ss(),i=sl(),n=Ove(),s=as(),a=Vt(),o=Pve(),l=lG(),u=U2(),c=TypeError,h=function(p,g){this.stopped=p,this.result=g},f=h.prototype;return j2=function(p,g,v){var b=v&&v.that,E=!!(v&&v.AS_ENTRIES),x=!!(v&&v.IS_RECORD),D=!!(v&&v.IS_ITERATOR),O=!!(v&&v.INTERRUPTED),P=r(g,b),R,A,I,S,C,$,F,j=function(J){return R&&u(R,"normal"),new h(!0,J)},z=function(J){return E?(t(J),O?P(J[0],J[1],j):P(J[0],J[1])):O?P(J,j):P(J)};if(x)R=p.iterator;else if(D)R=p;else{if(A=l(p),!A)throw new c(i(p)+" is not iterable");if(n(A)){for(I=0,S=s(p);S>I;I++)if(C=z(p[I]),C&&a(f,C))return C;return new h(!1)}R=o(p,A)}for($=x?p.next:R.next;!(F=e($,R)).done;){try{C=z(F.value)}catch(J){u(R,"throw",J)}if(typeof C=="object"&&C&&a(f,C))return C}return new h(!1)},j2}var H2,fG;function pG(){if(fG)return H2;fG=1;var r=Vt(),e=TypeError;return H2=function(t,i){if(r(i,t))return t;throw new e("Incorrect invocation")},H2}var V2,mG;function Rve(){if(mG)return V2;mG=1;var r=we(),e=Ft(),t=sG(),i=Ge(),n=ol(),s=dG(),a=pG(),o=fr(),l=Dr(),u=Xu(),c=Ia(),h=Ni().f,f=Ls().forEach,p=Ht(),g=sc(),v=g.set,b=g.getterFor;return V2=function(E,x,D){var O=E.indexOf("Map")!==-1,P=E.indexOf("Weak")!==-1,R=O?"set":"add",A=e[E],I=A&&A.prototype,S={},C;if(!p||!o(A)||!(P||I.forEach&&!i(function(){new A().entries().next()})))C=D.getConstructor(x,E,O,R),t.enable();else{C=x(function(j,z){v(a(j,$),{type:E,collection:new A}),u(z)||s(z,j[R],{that:j,AS_ENTRIES:O})});var $=C.prototype,F=b(E);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(j){var z=j==="add"||j==="set";j in I&&!(P&&j==="clear")&&n($,j,function(J,Z){var W=F(this).collection;if(!z&&P&&!l(J))return j==="get"?void 0:!1;var Y=W[j](J===0?0:J,Z);return z?this:Y})}),P||h($,"size",{configurable:!0,get:function(){return F(this).collection.size}})}return c(C,E,!1,!0),S[E]=C,r({global:!0,forced:!0},S),P||D.setStrong(C,E,O),C},V2}var G2,gG;function kve(){if(gG)return G2;gG=1;var r=nc();return G2=function(e,t,i){for(var n in t)i&&i.unsafe&&e[n]?e[n]=t[n]:r(e,n,t[n],i);return e},G2}var W2,vG;function Mve(){if(vG)return W2;vG=1;var r=$i(),e=bS(),t=Zt(),i=Ht(),n=t("species");return W2=function(s){var a=r(s);i&&a&&!a[n]&&e(a,n,{configurable:!0,get:function(){return this}})},W2}var z2,yG;function $ve(){if(yG)return z2;yG=1;var r=ic(),e=bS(),t=kve(),i=Vd(),n=pG(),s=Xu(),a=dG(),o=px(),l=gx(),u=Mve(),c=Ht(),h=sG().fastKey,f=sc(),p=f.set,g=f.getterFor;return z2={getConstructor:function(v,b,E,x){var D=v(function(I,S){n(I,O),p(I,{type:b,index:r(null),first:null,last:null,size:0}),c||(I.size=0),s(S)||a(S,I[x],{that:I,AS_ENTRIES:E})}),O=D.prototype,P=g(b),R=function(I,S,C){var $=P(I),F=A(I,S),j,z;return F?F.value=C:($.last=F={index:z=h(S,!0),key:S,value:C,previous:j=$.last,next:null,removed:!1},$.first||($.first=F),j&&(j.next=F),c?$.size++:I.size++,z!=="F"&&($.index[z]=F)),I},A=function(I,S){var C=P(I),$=h(S),F;if($!=="F")return C.index[$];for(F=C.first;F;F=F.next)if(F.key===S)return F};return t(O,{clear:function(){for(var S=this,C=P(S),$=C.first;$;)$.removed=!0,$.previous&&($.previous=$.previous.next=null),$=$.next;C.first=C.last=null,C.index=r(null),c?C.size=0:S.size=0},delete:function(I){var S=this,C=P(S),$=A(S,I);if($){var F=$.next,j=$.previous;delete C.index[$.index],$.removed=!0,j&&(j.next=F),F&&(F.previous=j),C.first===$&&(C.first=F),C.last===$&&(C.last=j),c?C.size--:S.size--}return!!$},forEach:function(S){for(var C=P(this),$=i(S,arguments.length>1?arguments[1]:void 0),F;F=F?F.next:C.first;)for($(F.value,F.key,this);F&&F.removed;)F=F.previous},has:function(S){return!!A(this,S)}}),t(O,E?{get:function(S){var C=A(this,S);return C&&C.value},set:function(S,C){return R(this,S===0?0:S,C)}}:{add:function(S){return R(this,S=S===0?0:S,S)}}),c&&e(O,"size",{configurable:!0,get:function(){return P(this).size}}),D},setStrong:function(v,b,E){var x=b+" Iterator",D=g(b),O=g(x);o(v,b,function(P,R){p(this,{type:x,target:P,state:D(P),kind:R,last:null})},function(){for(var P=O(this),R=P.kind,A=P.last;A&&A.removed;)A=A.previous;return!P.target||!(P.last=A=A?A.next:P.state.first)?(P.target=null,l(void 0,!0)):l(R==="keys"?A.key:R==="values"?A.value:[A.key,A.value],!1)},E?"entries":"values",!E,!0),u(b)}},z2}var _G;function Nve(){if(_G)return eG;_G=1;var r=Rve(),e=$ve();return r("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},e),eG}var bG;function Lve(){return bG||(bG=1,Nve()),JV}var TG={},Y2,SG;function Ua(){if(SG)return Y2;SG=1;var r=sl(),e=TypeError;return Y2=function(t){if(typeof t=="object"&&"size"in t&&"has"in t&&"add"in t&&"delete"in t&&"keys"in t)return t;throw new e(r(t)+" is not a set")},Y2}var K2,xG;function Fve(){return xG||(xG=1,K2=function(r,e){return e===1?function(t,i){return t[r](i)}:function(t,i,n){return t[r](i,n)}}),K2}var X2,wG;function ja(){if(wG)return X2;wG=1;var r=$i(),e=Fve(),t=r("Set"),i=t.prototype;return X2={Set:t,add:e("add",1),has:e("has",1),remove:e("delete",1),proto:i},X2}var Q2,EG;function Ha(){if(EG)return Q2;EG=1;var r=ei();return Q2=function(e,t,i){for(var n=i?e:e.iterator,s=e.next,a,o;!(a=r(s,n)).done;)if(o=t(a.value),o!==void 0)return o},Q2}var Z2,CG;function Ic(){if(CG)return Z2;CG=1;var r=Ha();return Z2=function(e,t,i){return i?r(e.keys(),t,!0):e.forEach(t)},Z2}var J2,DG;function eC(){if(DG)return J2;DG=1;var r=ja(),e=Ic(),t=r.Set,i=r.add;return J2=function(n){var s=new t;return e(n,function(a){i(s,a)}),s},J2}var tC,IG;function Ac(){return IG||(IG=1,tC=function(r){return r.size}),tC}var rC,AG;function qve(){return AG||(AG=1,rC=function(r){return{iterator:r,next:r.next,done:!1}}),rC}var iC,OG;function Va(){if(OG)return iC;OG=1;var r=Ns(),e=ss(),t=ei(),i=ul(),n=qve(),s="Invalid size",a=RangeError,o=TypeError,l=Math.max,u=function(c,h){this.set=c,this.size=l(h,0),this.has=r(c.has),this.keys=r(c.keys)};return u.prototype={getIterator:function(){return n(e(t(this.keys,this.set)))},includes:function(c){return t(this.has,this.set,c)}},iC=function(c){e(c);var h=+c.size;if(h!==h)throw new o(s);var f=i(h);if(f<0)throw new a(s);return new u(c,f)},iC}var nC,PG;function Bve(){if(PG)return nC;PG=1;var r=Ua(),e=ja(),t=eC(),i=Ac(),n=Va(),s=Ic(),a=Ha(),o=e.has,l=e.remove;return nC=function(c){var h=r(this),f=n(c),p=t(h);return i(h)<=f.size?s(h,function(g){f.includes(g)&&l(p,g)}):a(f.getIterator(),function(g){o(p,g)&&l(p,g)}),p},nC}var sC,RG;function Ga(){return RG||(RG=1,sC=function(){return!1}),sC}var kG;function Uve(){if(kG)return TG;kG=1;var r=we(),e=Bve(),t=Ge(),i=Ga(),n=!i("difference",function(a){return a.size===0}),s=n||t(function(){var a={size:1,has:function(){return!0},keys:function(){var l=0;return{next:function(){var u=l++>1;return o.has(1)&&o.clear(),{done:u,value:2}}}}},o=new Set([1,2,3,4]);return o.difference(a).size!==3});return r({target:"Set",proto:!0,real:!0,forced:s},{difference:e}),TG}var MG={},aC,$G;function jve(){if($G)return aC;$G=1;var r=Ua(),e=ja(),t=Ac(),i=Va(),n=Ic(),s=Ha(),a=e.Set,o=e.add,l=e.has;return aC=function(c){var h=r(this),f=i(c),p=new a;return t(h)>f.size?s(f.getIterator(),function(g){l(h,g)&&o(p,g)}):n(h,function(g){f.includes(g)&&o(p,g)}),p},aC}var NG;function Hve(){if(NG)return MG;NG=1;var r=we(),e=Ge(),t=jve(),i=Ga(),n=!i("intersection",function(s){return s.size===2&&s.has(1)&&s.has(2)})||e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});return r({target:"Set",proto:!0,real:!0,forced:n},{intersection:t}),MG}var LG={},oC,FG;function Vve(){if(FG)return oC;FG=1;var r=Ua(),e=ja().has,t=Ac(),i=Va(),n=Ic(),s=Ha(),a=U2();return oC=function(l){var u=r(this),c=i(l);if(t(u)<=c.size)return n(u,function(f){if(c.includes(f))return!1},!0)!==!1;var h=c.getIterator();return s(h,function(f){if(e(u,f))return a(h,"normal",!1)})!==!1},oC}var qG;function Gve(){if(qG)return LG;qG=1;var r=we(),e=Vve(),t=Ga(),i=!t("isDisjointFrom",function(n){return!n});return r({target:"Set",proto:!0,real:!0,forced:i},{isDisjointFrom:e}),LG}var BG={},lC,UG;function Wve(){if(UG)return lC;UG=1;var r=Ua(),e=Ac(),t=Ic(),i=Va();return lC=function(s){var a=r(this),o=i(s);return e(a)>o.size?!1:t(a,function(l){if(!o.includes(l))return!1},!0)!==!1},lC}var jG;function zve(){if(jG)return BG;jG=1;var r=we(),e=Wve(),t=Ga(),i=!t("isSubsetOf",function(n){return n});return r({target:"Set",proto:!0,real:!0,forced:i},{isSubsetOf:e}),BG}var HG={},uC,VG;function Yve(){if(VG)return uC;VG=1;var r=Ua(),e=ja().has,t=Ac(),i=Va(),n=Ha(),s=U2();return uC=function(o){var l=r(this),u=i(o);if(t(l)<u.size)return!1;var c=u.getIterator();return n(c,function(h){if(!e(l,h))return s(c,"normal",!1)})!==!1},uC}var GG;function Kve(){if(GG)return HG;GG=1;var r=we(),e=Yve(),t=Ga(),i=!t("isSupersetOf",function(n){return!n});return r({target:"Set",proto:!0,real:!0,forced:i},{isSupersetOf:e}),HG}var WG={},cC,zG;function Xve(){if(zG)return cC;zG=1;var r=Ua(),e=ja(),t=eC(),i=Va(),n=Ha(),s=e.add,a=e.has,o=e.remove;return cC=function(u){var c=r(this),h=i(u).getIterator(),f=t(c);return n(h,function(p){a(c,p)?o(f,p):s(f,p)}),f},cC}var hC,YG;function KG(){return YG||(YG=1,hC=function(r){try{var e=new Set,t={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[r](t);return i.size===1&&i.values().next().value===4}catch{return!1}}),hC}var XG;function Qve(){if(XG)return WG;XG=1;var r=we(),e=Xve(),t=KG(),i=Ga(),n=!i("symmetricDifference")||!t("symmetricDifference");return r({target:"Set",proto:!0,real:!0,forced:n},{symmetricDifference:e}),WG}var QG={},dC,ZG;function Zve(){if(ZG)return dC;ZG=1;var r=Ua(),e=ja().add,t=eC(),i=Va(),n=Ha();return dC=function(a){var o=r(this),l=i(a).getIterator(),u=t(o);return n(l,function(c){e(u,c)}),u},dC}var JG;function Jve(){if(JG)return QG;JG=1;var r=we(),e=Zve(),t=KG(),i=Ga(),n=!i("union")||!t("union");return r({target:"Set",proto:!0,real:!0,forced:n},{union:e}),QG}var fC,eW;function eye(){if(eW)return fC;eW=1,yx(),Lve(),Uve(),Hve(),Gve(),zve(),Kve(),Qve(),Jve(),hj();var r=_t();return fC=r.Set,fC}var pC,tW;function tye(){if(tW)return pC;tW=1;var r=eye();return bx(),pC=r,pC}var mC,rW;function rye(){return rW||(rW=1,mC=tye()),mC}var iye=rye(),wf=Re(iye);const yi=.001;function nye(r){gr(r).call(r,(e,t)=>e.data.start-t.data.start)}function sye(r){gr(r).call(r,(e,t)=>{const i="end"in e.data?e.data.end:e.data.start,n="end"in t.data?t.data.end:t.data.start;return i-n})}function iW(r,e,t,i){return gC(r,e.item,!1,s=>s.stack&&(t||s.top===null),s=>s.stack,()=>e.axis,i)===null}function aye(r,e,t){const i=gC(r,e.item,!1,n=>n.stack,()=>!0,n=>n.baseTop);t.height=i-t.top+.5*e.item.vertical}function oye(r,e,t,i){for(let n=0;n<r.length;n++){if(r[n].data.subgroup==null){r[n].top=e.item.vertical;continue}if(r[n].data.subgroup===void 0||!i)continue;let s=0;for(const a in t)!Object.prototype.hasOwnProperty.call(t,a)||t[a].visible!==!0||t[a].index>=t[r[n].data.subgroup].index||(s+=t[a].height,t[r[n].data.subgroup].top=s);r[n].top=s+.5*e.item.vertical}i||lye(r,e,t)}function lye(r,e,t){var i;gC(gr(i=jw(t)).call(i,(n,s)=>n.index>s.index?1:n.index<s.index?-1:0),{vertical:0},!0,()=>!0,()=>!0,()=>0);for(let n=0;n<r.length;n++)r[n].data.subgroup!==void 0&&(r[n].top=t[r[n].data.subgroup].top+.5*e.item.vertical)}function nW(r,e,t){let i=!1;const n=[];for(let s in t)Object.prototype.hasOwnProperty.call(t[s],"index")?n[t[s].index]=s:n.push(s);for(let s=0;s<n.length;s++){let a=n[s];if(!Object.prototype.hasOwnProperty.call(t,a))continue;i=i||t[a].stack,t[a].top=0;for(const l in t)t[l].visible&&t[a].index>t[l].index&&(t[a].top+=t[l].height);const o=r[a];for(let l=0;l<o.length;l++)o[l].data.subgroup!==void 0&&(o[l].top=t[o[l].data.subgroup].top+.5*e.item.vertical,t[a].stack&&(o[l].baseTop=o[l].top));i&&t[a].stack&&aye(r[a],e,t[a])}}function gC(r,e,t,i,n,s,a){let o=x=>x.start,l=x=>x.end;t||(!!(r[0]&&r[0].options.rtl)?o=D=>D.right:o=D=>D.left,l=D=>o(D)+D.width+e.horizontal);const u=[],c=[];let h=null,f=0;for(const x of r)if(i(x))u.push(x);else if(n(x)){const D=o(x);h!==null&&D<h-yi&&(f=0),h=D,f=Ef(c,O=>o(O)-yi>D,f),ri(c).call(c,f,0,x),f++}h=null;let p=null;f=0;let g=0,v=0,b=0;for(;u.length>0;){var E;const x=u.shift();x.top=s(x);const D=o(x),O=l(x);h!==null&&D<h-yi&&(g=0,v=0,f=0,p=null),(h===null||D>h+yi)&&(g=Ef(c,A=>D<l(A)-yi,g)),h=D,(p===null||p<O-yi)&&(v=Ef(c,A=>O<o(A)-yi,Math.max(g,v))),p!==null&&p-yi>O&&(v=cye(c,A=>O+yi>=o(A),g,v)+1),p=O;const P=gr(E=hye(c,A=>D<l(A)-yi,g,v)).call(E,(A,I)=>A.top-I.top);for(let A=0;A<P.length;A++){const I=P[A];uye(x,I,e)&&(x.top=I.top+I.height+e.vertical)}n(x)&&(f=Ef(c,A=>o(A)-yi>D,f),ri(c).call(c,f,0,x),f<g&&g++,f<=v&&v++,f++);const R=x.top+x.height;if(R>b&&(b=R),a&&a())return null}return b}function uye(r,e,t){return r.top-t.vertical+yi<e.top+e.height&&r.top+r.height+t.vertical-yi>e.top}function Ef(r,e,t){t||(t=0);for(let i=t;i<r.length;i++)if(e(r[i]))return i;return r.length}function cye(r,e,t,i){t||(t=0),i||(i=r.length);for(let n=i-1;n>=t;n--)if(e(r[n]))return n;return t-1}function hye(r,e,t,i){t||(t=0),i?i=Math.min(i,r.length):i=r.length;const n=[];for(let s=t;s<i;s++)e(r[s])&&n.push(r[s]);return n}const sW={BACKGROUND:"__background__"};class vC{constructor(e,t,i){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=t&&t.subgroupOrder,this.itemSet=i,this.isVisible=null,this.height=0,this.stackDirty=!0,this._disposeCallbacks=[],t&&t.nestedGroups&&(this.nestedGroups=t.nestedGroups,t.showNested==!1?this.showNested=!1:this.showNested=!0),t&&t.subgroupStack)if(typeof t.subgroupStack=="boolean")this.doInnerStack=t.subgroupStack,this.subgroupStackAll=t.subgroupStack;else for(const s in t.subgroupStack)Object.prototype.hasOwnProperty.call(t.subgroupStack,s)&&(this.subgroupStack[s]=t.subgroupStack[s],this.doInnerStack=this.doInnerStack||t.subgroupStack[s]);t&&t.heightMode?this.heightMode=t.heightMode:this.heightMode=i.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const n=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",n),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",n)}),this._create(),this.setData(t)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const t=document.createElement("div");t.className="vis-inner",e.appendChild(t),this.dom.inner=t;const i=document.createElement("div");i.className="vis-group",i["vis-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let t,i;if(e&&e.subgroupVisibility)for(const a in e.subgroupVisibility)Object.prototype.hasOwnProperty.call(e.subgroupVisibility,a)&&(this.subgroupVisibility[a]=e.subgroupVisibility[a]);if(this.itemSet.options&&this.itemSet.options.groupTemplate){var n;i=se(n=this.itemSet.options.groupTemplate).call(n,this),t=i(e,this.dom.inner)}else t=e&&e.content;if(t instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(t)}else t instanceof Object&&t.isReactComponent||(t instanceof Object?i(e,this.dom.inner):t!=null?this.dom.inner.innerHTML=q.xss(t):this.dom.inner.innerHTML=q.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?q.removeClassName(this.dom.inner,"vis-hidden"):q.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),q.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(q.removeClassName(this.dom.label,"collapsed"),q.addClassName(this.dom.label,"expanded")):(q.removeClassName(this.dom.label,"expanded"),q.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,q.removeClassName(this.dom.label,"collapsed"),q.removeClassName(this.dom.label,"expanded"),q.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(q.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?q.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):q.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):q.addClassName(this.dom.label,"vis-group-level-0");const s=e&&e.className||null;s!=this.className&&(this.className&&(q.removeClassName(this.dom.label,this.className),q.removeClassName(this.dom.foreground,this.className),q.removeClassName(this.dom.background,this.className),q.removeClassName(this.dom.axis,this.className)),q.addClassName(this.dom.label,s),q.addClassName(this.dom.foreground,s),q.addClassName(this.dom.background,s),q.addClassName(this.dom.axis,s),this.className=s),this.style&&(q.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(q.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const t={};let i=0;if(ye(q).call(q,this.items,(s,a)=>{s.dirty=!0,s.displayed&&(t[a]=s.redraw(!0),i=t[a].length)}),i>0)for(let s=0;s<i;s++)ye(q).call(q,t,a=>{a[s]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:t,offsetWidth:i}=this.dom.foreground;this.top=e,this.right=t,this.width=i}_shouldBailItemsRedraw(){const e=this,t=this.itemSet.options.onTimeout,i={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:t&&t.timeoutMs,userBailFunction:t&&t.callback,shouldBailStackItems:this.shouldBailStackItems};let n=null;if(!this.itemSet.initialDrawDone){if(i.shouldBailStackItems)return!0;Math.abs(pi()-new Date(i.relativeBailingTime))>i.bailTimeMs&&(i.userBailFunction&&this.itemSet.userContinueNotBail==null?i.userBailFunction(s=>{e.itemSet.userContinueNotBail=s,n=!s}):e.itemSet.userContinueNotBail==!1?n=!0:n=!1)}return n}_redrawItems(e,t,i,n){if(e||this.stackDirty||this.isVisible&&!t){var a,o,l,u,c,h;const E={byEnd:We(a=this.orderedItems.byEnd).call(a,P=>!P.isCluster),byStart:We(o=this.orderedItems.byStart).call(o,P=>!P.isCluster)},x={byEnd:[...new wf(We(l=mr(u=this.orderedItems.byEnd).call(u,P=>P.cluster)).call(l,P=>!!P))],byStart:[...new wf(We(c=mr(h=this.orderedItems.byStart).call(h,P=>P.cluster)).call(c,P=>!!P))]},D=()=>{var P,R;const A=this._updateItemsInRange(E,We(P=this.visibleItems).call(P,S=>!S.isCluster),n),I=this._updateClustersInRange(x,We(R=this.visibleItems).call(R,S=>S.isCluster),n);return[...A,...I]},O=P=>{let R={};for(const I in this.subgroups){var A;if(!Object.prototype.hasOwnProperty.call(this.subgroups,I))continue;const S=We(A=this.visibleItems).call(A,C=>C.data.subgroup===I);R[I]=P?gr(S).call(S,(C,$)=>P(C.data,$.data)):S}return R};if(typeof this.itemSet.options.order=="function"){const P=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const R=O(this.itemSet.options.order);nW(R,i,this.subgroups),this.visibleItems=D(),this._updateSubGroupHeights(i)}else{var f,p,g,v;this.visibleItems=D(),this._updateSubGroupHeights(i);const R=gr(f=We(p=dl(g=this.visibleItems).call(g)).call(p,A=>A.isCluster||!A.isCluster&&!A.cluster)).call(f,(A,I)=>P.itemSet.options.order(A.data,I.data));this.shouldBailStackItems=iW(R,i,!0,se(v=this._shouldBailItemsRedraw).call(v,this))}}else if(this.visibleItems=D(),this._updateSubGroupHeights(i),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const P=O();nW(P,i,this.subgroups)}else{var b;this.shouldBailStackItems=iW(this.visibleItems,i,!0,se(b=this._shouldBailItemsRedraw).call(b,this))}else oye(this.visibleItems,i,this.subgroups,this.itemSet.options.stackSubgroups);for(let P=0;P<this.visibleItems.length;P++)this.visibleItems[P].repositionX(),this.subgroupVisibility[this.visibleItems[P].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[P].data.subgroup]||this.visibleItems[P].hide());this.itemSet.options.cluster&&ye(q).call(q,this.items,P=>{P.cluster&&P.displayed&&P.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,t){e=q.updateProperty(this,"height",t)||e;const i=this.dom.inner.clientWidth,n=this.dom.inner.clientHeight;return e=q.updateProperty(this.props.label,"width",i)||e,e=q.updateProperty(this.props.label,"height",n)||e,e}_applyGroupHeight(e){this.dom.background.style.height="".concat(e,"px"),this.dom.foreground.style.height="".concat(e,"px"),this.dom.label.style.height="".concat(e,"px")}_updateItemsVerticalPosition(e){for(let t=0,i=this.visibleItems.length;t<i;t++){const n=this.visibleItems[t];n.repositionY(e),!this.isVisible&&this.groupId!=sW.BACKGROUND&&n.displayed&&n.hide()}}redraw(e,t,i,n){var s,a,o,l,u;let c=!1;const h=this.isVisible;let f;const p=[()=>{i=this._didMarkerHeightChange.call(this)||i},se(s=this._updateSubGroupHeights).call(s,this,t),se(a=this._calculateGroupSizeAndPosition).call(a,this),()=>{var g;this.isVisible=se(g=this._isGroupVisible).call(g,this)(e,t)},()=>{var g;se(g=this._redrawItems).call(g,this)(i,h,t,e)},se(o=this._updateSubgroupsSizes).call(o,this),()=>{var g;f=this.height=se(g=this._calculateHeight).call(g,this)(t)},se(l=this._calculateGroupSizeAndPosition).call(l,this),()=>{var g;c=se(g=this._didResize).call(g,this)(c,f)},()=>{var g;se(g=this._applyGroupHeight).call(g,this)(f)},()=>{var g;se(g=this._updateItemsVerticalPosition).call(g,this)(t)},se(u=()=>(!this.isVisible&&this.height&&(c=!1),c)).call(u,this)];if(n)return p;{let g;return ye(p).call(p,v=>{g=v()}),g}}_updateSubGroupHeights(e){if(br(this.subgroups).length>0){const t=this;this._resetSubgroups(),ye(q).call(q,this.visibleItems,i=>{i.data.subgroup!==void 0&&(t.subgroups[i.data.subgroup].height=Math.max(t.subgroups[i.data.subgroup].height,i.height+e.item.vertical),t.subgroups[i.data.subgroup].visible=typeof this.subgroupVisibility[i.data.subgroup]>"u"?!0:!!this.subgroupVisibility[i.data.subgroup])})}}_isGroupVisible(e,t){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+t.axis&&this.top+this.height+t.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let t,i;if(this.heightMode==="fixed"?i=q.toArray(this.items):i=this.visibleItems,!this.isVisible&&this.height)t=Math.max(this.height,this.props.label.height);else if(i.length>0){let n=i[0].top,s=i[0].top+i[0].height;if(ye(q).call(q,i,a=>{n=Math.min(n,a.top),s=Math.max(s,a.top+a.height)}),n>e.axis){const a=n-e.axis;s-=a,ye(q).call(q,i,o=>{o.top-=a})}t=Math.ceil(s+e.item.vertical/2),this.heightMode!=="fitItems"&&(t=Math.max(t,this.props.label.height))}else t=this.props.label.height;return t}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const t=this.dom.foreground;t.parentNode&&t.parentNode.removeChild(t);const i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);const n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)}add(e){var t;if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!fl(t=this.visibleItems).call(t,e)){const i=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,i)}}_addToSubgroup(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;t!=null&&this.subgroups[t]===void 0&&(this.subgroups[t]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[t]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[t].start)&&(this.subgroups[t].start=e.data.start);const i=e.data.end||e.data.start;new Date(i)>new Date(this.subgroups[t].end)&&(this.subgroups[t].end=i),this.subgroups[t].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const i in e.subgroups){var t;if(!Object.prototype.hasOwnProperty.call(e.subgroups,i))continue;const n=e.subgroups[i].items[0].data.end||e.subgroups[i].items[0].data.start;let s=e.subgroups[i].items[0].data.start,a=n-1;ye(t=e.subgroups[i].items).call(t,o=>{new Date(o.data.start)<new Date(s)&&(s=o.data.start);const l=o.data.end||o.data.start;new Date(l)>new Date(a)&&(a=l)}),e.subgroups[i].start=s,e.subgroups[i].end=new Date(a-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});gr(e).call(e,(t,i)=>t.sortField-i.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const t in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,t)&&e.push(this.subgroups[t].items[0].data);gr(e).call(e,this.subgroupOrderer)}if(e.length>0)for(let t=0;t<e.length;t++)this.subgroups[e[t].subgroup].index=t}}_resetSubgroups(){for(const e in this.subgroups)Object.prototype.hasOwnProperty.call(this.subgroups,e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){var t,i;delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const n=lt(t=this.visibleItems).call(t,e);n!=-1&&ri(i=this.visibleItems).call(i,n,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.data.subgroup;if(t!=null){const s=this.subgroups[t];if(s){var i;const a=lt(i=s.items).call(i,e);if(a>=0){var n;ri(n=s.items).call(n,a,1),s.items.length?this._updateSubgroupsSizes():delete this.subgroups[t]}}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=q.toArray(this.items),t=[],i=[];for(let n=0;n<e.length;n++)e[n].data.end!==void 0&&i.push(e[n]),t.push(e[n]);this.orderedItems={byStart:t,byEnd:i},nye(this.orderedItems.byStart),sye(this.orderedItems.byEnd)}_updateItemsInRange(e,t,i){const n=[],s={};if(!this.isVisible&&this.height!==void 0&&this.groupId!=sW.BACKGROUND){for(let b=0;b<t.length;b++){var a=t[b];a.displayed&&a.hide()}return n}const o=(i.end-i.start)/4,l=i.start-o,u=i.end+o,c=b=>b<l?-1:b<=u?0:1,h=b=>{const{start:E,end:x}=b;return x<l?-1:E<=u?0:1};if(t.length>0)for(let b=0;b<t.length;b++)this._checkIfVisibleWithReference(t[b],n,s,i);const f=q.binarySearchCustom(e.byStart,c,"data","start");if(this._traceVisible(f,e.byStart,n,s,b=>b.data.start<l||b.data.start>u),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let b=0;b<e.byEnd.length;b++)this._checkIfVisibleWithReference(e.byEnd[b],n,s,i)}else{const b=q.binarySearchCustom(e.byEnd,h,"data");this._traceVisible(b,e.byEnd,n,s,E=>E.data.end<l||E.data.start>u)}this._sortVisibleItems(e.byStart,n,s);const p={};let g=0;for(let b=0;b<n.length;b++){const E=n[b];E.displayed||(p[b]=E.redraw(!0),g=p[b].length)}if(g>0)for(let b=0;b<g;b++)ye(q).call(q,p,E=>{E[b]()});for(let b=0;b<n.length;b++)n[b].repositionX();return n}_traceVisible(e,t,i,n,s){if(e!=-1){for(let a=e;a>=0;a--){let o=t[a];if(s(o))break;!(o.isCluster&&!o.hasItems())&&!o.cluster&&n[o.id]===void 0&&(n[o.id]=!0,i.unshift(o))}for(let a=e+1;a<t.length;a++){let o=t[a];if(s(o))break;!(o.isCluster&&!o.hasItems())&&!o.cluster&&n[o.id]===void 0&&(n[o.id]=!0,i.push(o))}}}_sortVisibleItems(e,t,i){t.length=0;for(let n=0;n<e.length;n++){let s=e[n];i[s.id]&&t.push(s)}}_checkIfVisible(e,t,i){e.isVisible(i)?(e.displayed||e.show(),e.repositionX(),t.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,t,i,n){e.isVisible(n)?i[e.id]===void 0&&(i[e.id]=!0,t.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,t,i){const n=[],s={};if(t.length>0)for(let c=0;c<t.length;c++)this._checkIfVisibleWithReference(t[c],n,s,i);for(let c=0;c<e.byStart.length;c++)this._checkIfVisibleWithReference(e.byStart[c],n,s,i);for(let c=0;c<e.byEnd.length;c++)this._checkIfVisibleWithReference(e.byEnd[c],n,s,i);const a={};let o=0;for(let c=0;c<n.length;c++){const h=n[c];h.displayed||(a[c]=h.redraw(!0),o=a[c].length)}if(o>0)for(var u=0;u<o;u++)ye(q).call(q,a,function(c){c[u]()});for(let c=0;c<n.length;c++)n[c].repositionX();return n}changeSubgroup(e,t,i){this._removeFromSubgroup(e,t),this._addToSubgroup(e,i),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}}class aW extends vC{constructor(e,t,i){super(e,t,i),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,t){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let n=0,s=this.visibleItems.length;n<s;n++)this.visibleItems[n].repositionY(t);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class Cl{constructor(e,t,i){var n;this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=t||{},this.defaultOptions={locales:wl,locale:"en"},this.options=q.extend({},this.defaultOptions,i),this.options.locales=q.extend({},wl,this.options.locales);const s=this.defaultOptions.locales[this.defaultOptions.locale];ye(n=br(this.options.locales)).call(n,a=>{this.options.locales[a]=q.extend({},s,this.options.locales[a])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=i&&i.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var e,t;const i=this,n=document.createElement("div");n.className="vis-drag-center",n.dragCenterItem=this,this.hammerDragCenter=new Hr(n),this.hammerDragCenter.on("tap",s=>{i.parent.itemSet.body.emitter.emit("click",{event:s,item:i.id})}),this.hammerDragCenter.on("doubletap",s=>{s.stopPropagation(),i.parent.itemSet._onUpdateItem(i),i.parent.itemSet.body.emitter.emit("doubleClick",{event:s,item:i.id})}),this.hammerDragCenter.on("panstart",s=>{s.stopPropagation(),i.parent.itemSet._onDragStart(s)}),this.hammerDragCenter.on("panmove",se(e=i.parent.itemSet._onDrag).call(e,i.parent.itemSet)),this.hammerDragCenter.on("panend",se(t=i.parent.itemSet._onDragEnd).call(t,i.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(n,this.dom.dragLeft):this.dom.box.appendChild(n):this.dom.point&&this.dom.point.appendChild(n),this.dom.dragCenter=n}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const t=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&t&&!this.dom.deleteButton){const i=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete";let s=this.options.locales[this.options.locale];s||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),s=this.options.locales.en),n.title=s.deleteSelected,this.hammerDeleteButton=new Hr(n).on("tap",a=>{a.stopPropagation(),i.parent.removeFromDataSet(i)}),e.appendChild(n),this.dom.deleteButton=n}else(!this.selected||!t)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const t=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&t&&!this.dom.onItemUpdateTimeTooltip){const n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",e.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const n=50,s=this.parent.itemSet.body.domProps.scrollTop;let a;this.options.orientation.item=="top"?a=this.top:a=this.parent.height-this.top-this.height,a+this.parent.top-n<-s?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px"));let l,u;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){var i;u=se(i=this.options.tooltipOnItemUpdateTime.template).call(i,this),l=u(this.data)}else l="start: ".concat(ti(this.data.start).format("MM/DD/YYYY hh:mm")),this.data.end&&(l+="<br> end: ".concat(ti(this.data.end).format("MM/DD/YYYY hh:mm")));this.dom.onItemUpdateTimeTooltip.innerHTML=q.xss(l)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let t,i,n,s,a;const o=this._getItemData(),u=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var c;a=se(c=this.options.visibleFrameTemplate).call(c,this),s=q.xss(a(o,u))}else s="";if(u){if(s instanceof Object&&!(s instanceof Element))a(o,u);else if(i=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(s),i){if(s instanceof Element)u.innerHTML="",u.appendChild(s);else if(s!=null)u.innerHTML=q.xss(s);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=s}}if(this.options.template){var h;n=se(h=this.options.template).call(h,this),t=n(o,e,this.data)}else t=this.data.content;if(t instanceof Object&&!(t instanceof Element))n(o,e);else if(i=this._contentToString(this.content)!==this._contentToString(t),i){if(t instanceof Element)e.innerHTML="",e.appendChild(t);else if(t!=null)e.innerHTML=q.xss(t);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error('Property "content" missing in item '.concat(this.id));this.content=t}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let t=[];if(it(this.options.dataAttributes))t=this.options.dataAttributes;else if(this.options.dataAttributes=="all")t=br(this.data);else return;for(const i of t){const n=this.data[i];n!=null?e.setAttribute("data-".concat(i),n):e.removeAttribute("data-".concat(i))}}}_updateStyle(e){this.style&&(q.removeCssText(e,this.style),this.style=null),this.data.style&&(q.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},q.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},q.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){if(this.options.tooltip&&this.options.tooltip.template){var e;return se(e=this.options.tooltip.template).call(e,this)(this._getItemData(),this.data)}return this.data.title}}Cl.prototype.stack=!0;class dye extends Cl{constructor(e,t,i){if(super(e,t,i),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;let t;const i=this.data.align||this.options.align,n=this.width*e.getMillisecondsPerPixel();return i=="right"?t=this.data.start.getTime()>e.start&&this.data.start.getTime()-n<e.end:i=="left"?t=this.data.start.getTime()+n>e.start&&this.data.start.getTime()<e.end:t=this.data.start.getTime()+n/2>e.start&&this.data.start.getTime()-n/2<e.end,t}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(t),this.dom.line.className="vis-item vis-line".concat(t),this.dom.dot.className="vis-item vis-dot".concat(t)}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){var t,i,n,s;let a;const o=[se(t=this._createDomElement).call(t,this),se(i=this._appendDomElement).call(i,this),se(n=this._updateDirtyDomComponents).call(n,this),()=>{this.dirty&&(a=this._getDomComponentsSizes())},()=>{if(this.dirty){var l;se(l=this._updateDomComponentsSizes).call(l,this)(a)}},se(s=this._repaintDomAdditionals).call(s,this)];if(e)return o;{let l;return ye(o).call(o,u=>{l=u()}),l}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,t=function(i,n,s){var a;let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n===void 0&&s===void 0)return;const l=o?n*-1:n;if(s===void 0){i.style.transform="translateX(".concat(l,"px)");return}if(n===void 0){i.style.transform="translateY(".concat(s,"px)");return}i.style.transform=Jt(a="translate(".concat(l,"px, ")).call(a,s,"px)")};t(this.dom.box,this.boxX,this.boxY,e),t(this.dom.dot,this.dotX,this.dotY,e),t(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),t=this.data.align===void 0?this.options.align:this.data.align,i=this.props.line.width,n=this.props.dot.width;t=="right"?(this.boxX=e-this.width,this.lineX=e-i,this.dotX=e-i/2-n/2):t=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+i/2-n/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-i:e-i/2,this.dotX=e-n/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,t=this.dom.line.style;if(e=="top"){const i=this.parent.top+this.top+1;this.boxY=this.top||0,t.height="".concat(i,"px"),t.bottom="",t.top="0"}else{const n=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),t.height="".concat(n,"px"),t.top="",t.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class fye extends Cl{constructor(e,t,i){if(super(e,t,i),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error('Property "start" missing in item '.concat(e))}isVisible(e){if(this.cluster)return!1;const t=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+t>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(t),this.dom.dot.className="vis-item vis-dot".concat(t)}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight="".concat(this.props.dot.width/2,"px"):this.dom.content.style.marginLeft="".concat(this.props.dot.width/2,"px"),this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");const t=this.props.dot.width,i=this.options.rtl?t/2:t/2*-1;this.dom.dot.style.transform="translateX(".concat(i,"px"),this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){var t,i,n,s;let a;const o=[se(t=this._createDomElement).call(t,this),se(i=this._appendDomElement).call(i,this),se(n=this._updateDirtyDomComponents).call(n,this),()=>{this.dirty&&(a=this._getDomComponentsSizes())},()=>{if(this.dirty){var l;se(l=this._updateDomComponentsSizes).call(l,this)(a)}},se(s=this._repaintDomAdditionals).call(s,this)];if(e)return o;{let l;return ye(o).call(o,u=>{l=u()}),l}}repositionXY(){const e=this.options.rtl;(function(i,n,s){var a;let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n===void 0&&s===void 0)return;const l=o?n*-1:n;if(s===void 0){i.style.transform="translateX(".concat(l,"px)");return}if(n===void 0){i.style.transform="translateY(".concat(s,"px)");return}i.style.transform=Jt(a="translate(".concat(l,"px, ")).call(a,s,"px)")})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class Wa extends Cl{constructor(e,t,i){if(super(e,t,i),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+t,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){var t,i,n,s;let a;const o=[se(t=this._createDomElement).call(t,this),se(i=this._appendDomElement).call(i,this),se(n=this._updateDirtyDomComponents).call(n,this),()=>{if(this.dirty){var l;a=se(l=this._getDomComponentsSizes).call(l,this)()}},()=>{if(this.dirty){var l;se(l=this._updateDomComponentsSizes).call(l,this)(a)}},se(s=this._repaintDomAdditionals).call(s,this)];if(e)return o;{let l;return ye(o).call(o,u=>{l=u()}),l}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const t=this.parent.width;let i=this.conversion.toScreen(this.data.start),n=this.conversion.toScreen(this.data.end);const s=this.data.align===void 0?this.options.align:this.data.align;let a,o;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(i<-t&&(i=-t),n>2*t&&(n=2*t));const l=Math.max(Math.round((n-i)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=i:this.left=i,this.width=l+this.props.content.width,o=this.props.content.width):(this.options.rtl?this.right=i:this.left=i,this.width=l,o=Math.min(n-i,this.props.content.width)),this.options.rtl?this.dom.box.style.transform="translateX(".concat(this.right*-1,"px)"):this.dom.box.style.transform="translateX(".concat(this.left,"px)"),this.dom.box.style.width="".concat(l,"px"),this.whiteSpace&&(this.height=this.dom.box.offsetHeight),s){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const u=Math.max(l-o,0)*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max(l-o,0),"px)");break;case"center":if(this.options.rtl){const u=Math.max((l-o)/2,0)*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(Math.max((l-o)/2,0),"px)");break;default:if(this.overflow?n>0?a=Math.max(-i,0):a=-o:i<0?a=-i:a=0,this.options.rtl){const u=a*-1;this.dom.content.style.transform="translateX(".concat(u,"px)")}else this.dom.content.style.transform="translateX(".concat(a,"px)")}}repositionY(){const e=this.options.orientation.item,t=this.dom.box;e=="top"?t.style.top="".concat(this.top,"px"):t.style.top="".concat(this.parent.height-this.top-this.height,"px")}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}Wa.prototype.baseClassName="vis-item vis-range";class za extends Cl{constructor(e,t,i){if(super(e,t,i),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error('Property "start" missing in item '.concat(e.id));if(e.end==null)throw new Error('Property "end" missing in item '.concat(e.id))}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){var t,i,n,s;let a;const o=[se(t=this._createDomElement).call(t,this),se(i=this._appendDomElement).call(i,this),se(n=this._updateDirtyDomComponents).call(n,this),()=>{if(this.dirty){var l;a=se(l=this._getDomComponentsSizes).call(l,this)()}},()=>{if(this.dirty){var l;se(l=this._updateDomComponentsSizes).call(l,this)(a)}},se(s=this._repaintDomAdditionals).call(s,this)];if(e)return o;{let l;return ye(o).call(o,u=>{l=u()}),l}}repositionY(){let e;const t=this.options.orientation.item;if(this.data.subgroup!==void 0){const i=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[i].height,"px"),t=="top"?this.dom.box.style.top="".concat(this.parent.top+this.parent.subgroups[i].top,"px"):this.dom.box.style.top="".concat(this.parent.top+this.parent.height-this.parent.subgroups[i].top-this.parent.subgroups[i].height,"px"),this.dom.box.style.bottom=""}else this.parent instanceof aW?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=t=="bottom"?"0":"",this.dom.box.style.top=t=="top"?"0":""):(e=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="");this.dom.box.style.height="".concat(e,"px")}}za.prototype.baseClassName="vis-item vis-background",za.prototype.stack=!1,za.prototype.show=Wa.prototype.show,za.prototype.hide=Wa.prototype.hide,za.prototype.repositionX=Wa.prototype.repositionX;class pye{constructor(e,t){this.container=e,this.overflowMethod=t||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,t){this.x=mi(e),this.y=mi(t)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=q.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var t=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth,a=0,o=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let l=!1,u=!0;this.overflowMethod=="flip"&&(this.y-t<this.padding&&(u=!1),this.x+i>s-this.padding&&(l=!0)),l?a=this.x-i:a=this.x,u?o=this.y-t:o=this.y}else o=this.y-t,o+t+this.padding>n&&(o=n-t-this.padding),o<this.padding&&(o=this.padding),a=this.x,a+i+this.padding>s&&(a=s-i-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}var oW={},lW;function mye(){if(lW)return oW;lW=1;var r=we(),e=Ls().every,t=cl(),i=t("every");return r({target:"Array",proto:!0,forced:!i},{every:function(s){return e(this,s,arguments.length>1?arguments[1]:void 0)}}),oW}var yC,uW;function gye(){if(uW)return yC;uW=1,mye();var r=pr();return yC=r("Array","every"),yC}var _C,cW;function vye(){if(cW)return _C;cW=1;var r=Vt(),e=gye(),t=Array.prototype;return _C=function(i){var n=i.every;return i===t||r(t,i)&&n===t.every?e:n},_C}var bC,hW;function yye(){if(hW)return bC;hW=1;var r=vye();return bC=r,bC}var TC,dW;function _ye(){return dW||(dW=1,TC=yye()),TC}var bye=_ye(),Tye=Re(bye);class Cf extends Cl{constructor(e,t,i){const n=Aa({},{fitOnDoubleClick:!0},i,{editable:!1});if(super(e,t,n),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=Tl(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const t=this.data.end?this.data.end-this.data.start:0,i=this.width*e.getMillisecondsPerPixel(),n=Math.max(this.data.start.getTime()+t,this.data.start.getTime()+i);return this.data.start<e.end&&n>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var t,i,n,s,a,o,l,u=[se(t=this._createDomElement).call(t,this),se(i=this._appendDomElement).call(i,this),se(n=this._updateDirtyDomComponents).call(n,this),se(s=function(){this.dirty&&(l=this._getDomComponentsSizes())}).call(s,this),se(a=function(){if(this.dirty){var h;se(h=this._updateDomComponentsSizes).call(h,this)(l)}}).call(a,this),se(o=this._repaintDomAdditionals).call(o,this)];if(e)return u;var c;return ye(u).call(u,function(h){c=h()}),c}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),t=this.data.end?this.conversion.toScreen(this.data.end):0;if(t)this.repositionXWithRanges(e,t);else{let i=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,i)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,t))}repositionStype(e,t){this.dom.line.style.display="block",this.dom.dot.style.display="block";const i=this.dom.line.offsetWidth,n=this.dom.dot.offsetWidth;if(t){const s=i+e+(t-e)/2,a=s-n/2,o=this.options.rtl?s*-1:s,l=this.options.rtl?a*-1:a;this.dom.line.style.transform="translateX(".concat(o,"px)"),this.dom.dot.style.transform="translateX(".concat(l,"px)")}else{const s=this.options.rtl?e*-1:e,a=this.options.rtl?(e-n/2)*-1:e-n/2;this.dom.line.style.transform="translateX(".concat(s,"px)"),this.dom.dot.style.transform="translateX(".concat(a,"px)")}}repositionXWithoutRanges(e,t){t=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):t=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,t){let i=Math.round(Math.max(t-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(i,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=i+"px"}repositionY(){var e=this.options.orientation.item,t=this.dom.box;if(e=="top"?t.style.top=(this.top||0)+"px":t.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var i=this.parent.itemSet.props.height,n=i-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=i-n+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){var e;for(let t of this.data.uiItems)t.cluster=this;this.data.items=mr(e=this.data.uiItems).call(e,t=>t.data),this.attached=!0,this.dirty=!0}detach(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.hasItems()){for(let t of this.data.uiItems)delete t.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){var e,t,i;const n=mr(e=this.data.uiItems).call(e,o=>({start:o.data.start.valueOf(),end:o.data.end?o.data.end.valueOf():o.data.start.valueOf()}));this.data.min=Math.min(...mr(n).call(n,o=>Math.min(o.start,o.end||o.start))),this.data.max=Math.max(...mr(n).call(n,o=>Math.max(o.start,o.end||o.start)));const s=mr(t=this.data.uiItems).call(t,o=>o.center),a=Nj(s).call(s,(o,l)=>o+l,0)/this.data.uiItems.length;RV(i=this.data.uiItems).call(i,o=>o.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(a),this.data.end=null)}_getUiItems(){if(this.data.uiItems&&this.data.uiItems.length){var e;return We(e=this.data.uiItems).call(e,t=>t.cluster===this)}return[]}_createDomElement(){if(!this.dom){if(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick){var e;this.dom.box.ondblclick=se(e=Cf.prototype._onDoubleClick).call(e,this)}this.dom.box["vis-item"]=this,this.dirty=!0}}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const i=this.parent.dom.foreground;if(!i)throw new Error("Cannot redraw item: parent has no foreground container element");i.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var t=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");t.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:t}=this._getFitRange(),i={start:new Date(e),end:new Date(t),animation:!0};this.emitter.emit("fit",i)}}_getItemData(){return this.data}}Cf.prototype.baseClassName="vis-item vis-range vis-cluster";const Sye={UNGROUPED:"__ungrouped__"};class xye{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,t,i){return new Cf(e,t,i)}setItems(e,t){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,t&&t.applyOnChangedLevel&&(this.applyOnChangedLevel=t.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,t,i){let{maxItems:n,clusterCriteria:s}=typeof i=="boolean"?{}:i;s||(s=()=>!0),n=n||1;let a=-1,o=2,l=0;if(t>0){if(t>=1)return[];a=Math.abs(Math.round(Math.log(100/t)/Math.log(o))),l=Math.abs(Math.pow(o,a))}if(this.dataChanged){const c=a!=this.cacheLevel;(this.applyOnChangedLevel?c:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=a;let u=this.cache[a];if(!u){u=[];for(let c in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,c))continue;const h=this.groups[c],f=h.length;let p=0;for(;p<f;){let g=h[p],v=1,b=p-1;for(;b>=0&&g.center-h[b].center<l/2;)!h[b].cluster&&s(g.data,h[b].data)&&v++,b--;let E=p+1;for(;E<h.length&&h[E].center-g.center<l/2;)s(g.data,h[E].data)&&v++,E++;let x=u.length-1;for(;x>=0&&g.center-u[x].center<l;)g.group==u[x].group&&s(g.data,u[x].data)&&v++,x--;if(v>n){const D=v-n+1,O=[];let P=p;for(;O.length<D&&P<h.length;)s(h[p].data,h[P].data)&&O.push(h[P]),P++;const R=this.itemSet.getGroupId(g.data),A=this.itemSet.groups[R]||this.itemSet.groups[Sye.UNGROUPED];let I=this._getClusterForItems(O,A,e,i);u.push(I),p+=D}else delete g.cluster,p+=1}}this.cache[a]=u}return u}_filterData(){const e={};this.groups=e;for(const i of jw(this.items)){const n=i.parent?i.parent.groupId:"";let s=e[n];s||(s=[],e[n]=s),s.push(i),i.data.start&&(i.data.end?i.center=(i.data.start.valueOf()+i.data.end.valueOf())/2:i.center=i.data.start.valueOf())}for(let i in e){var t;Object.prototype.hasOwnProperty.call(e,i)&&gr(t=e[i]).call(t,(n,s)=>n.center-s.center)}this.dataChanged=!1}_getClusterForItems(e,t,i,n){var s;const a=mr(s=i||[]).call(s,g=>{var v;return{cluster:g,itemsIds:new wf(mr(v=g.data.uiItems).call(v,b=>b.id))}});let o;if(a.length){for(let g of a)if(g.itemsIds.size===e.length&&Tye(e).call(e,v=>g.itemsIds.has(v.id))){o=g.cluster;break}}if(o)return o.setUiItems(e),o.group!==t&&(o.group&&o.group.remove(o),t&&(t.add(o),o.group=t)),o;let l=n.titleTemplate||"";const u={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},c=l.replace(/{count}/,e.length),h='<div title="'+c+'">'+e.length+"</div>",f=Aa({},n,this.itemSet.options),p={content:h,title:c,group:t,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return o=this.createClusterItem(p,u,f),t&&(t.add(o),o.group=t),o.attach(),o}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const Dl="__ungrouped__",Bs="__background__";class Ya extends qs{constructor(e,t){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(n,s){const a=s.order;s.order=n.order,n.order=a},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:Ba.snap,onDropObjectOnItem(n,s,a){a(s)},onAdd(n,s){s(n)},onUpdate(n,s){s(n)},onMove(n,s){s(n)},onRemove(n,s){s(n)},onMoving(n,s){s(n)},onAddGroup(n,s){s(n)},onMoveGroup(n,s){s(n)},onRemoveGroup(n,s){s(n)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=q.extend({},this.defaultOptions),this.options.rtl=t.rtl,this.options.onTimeout=t.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const i=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(n,s){i._onAdd(s.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()},update(n,s){i._onUpdate(s.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()},remove(n,s){i._onRemove(s.items),i.options.cluster&&i.clusterGenerator.setItems(i.items,{applyOnChangedLevel:!1}),i.redraw()}},this.groupListeners={add(n,s,a){if(i._onAddGroups(s.items),i.groupsData&&i.groupsData.length>0){var o;const l=i.groupsData.getDataSet();ye(o=l.get()).call(o,u=>{if(u.nestedGroups){var c;u.showNested!=!1&&(u.showNested=!0);let h=[];ye(c=u.nestedGroups).call(c,f=>{const p=l.get(f);p&&(p.nestedInGroup=u.id,u.showNested==!1&&(p.visible=!1),h=Jt(h).call(h,p))}),l.update(h,a)}})}},update(n,s){i._onUpdateGroups(s.items)},remove(n,s){i._onRemoveGroups(s.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(t),this.clusters=[]}_create(){var e,t,i,n,s,a,o,l,u,c,h,f,p,g,v;const b=document.createElement("div");b.className="vis-itemset",b["vis-itemset"]=this,this.dom.frame=b;const E=document.createElement("div");E.className="vis-background",b.appendChild(E),this.dom.background=E;const x=document.createElement("div");x.className="vis-foreground",b.appendChild(x),this.dom.foreground=x;const D=document.createElement("div");D.className="vis-axis",this.dom.axis=D;const O=document.createElement("div");O.className="vis-labelset",this.dom.labelSet=O,this._updateUngrouped();const P=new aW(Bs,null,this);P.show(),this.groups[Bs]=P,this.hammer=new Hr(this.body.dom.centerContainer),this.hammer.on("hammer.input",R=>{R.isFirst&&this._onTouch(R)}),this.hammer.on("panstart",se(e=this._onDragStart).call(e,this)),this.hammer.on("panmove",se(t=this._onDrag).call(t,this)),this.hammer.on("panend",se(i=this._onDragEnd).call(i,this)),this.hammer.get("pan").set({threshold:5,direction:Hr.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",se(n=this._onSelectItem).call(n,this)),this.hammer.on("press",se(s=this._onMultiSelectItem).call(s,this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",se(a=this._onAddItem).call(a,this)),this.options.rtl?this.groupHammer=new Hr(this.body.dom.rightContainer):this.groupHammer=new Hr(this.body.dom.leftContainer),this.groupHammer.on("tap",se(o=this._onGroupClick).call(o,this)),this.groupHammer.on("panstart",se(l=this._onGroupDragStart).call(l,this)),this.groupHammer.on("panmove",se(u=this._onGroupDrag).call(u,this)),this.groupHammer.on("panend",se(c=this._onGroupDragEnd).call(c,this)),this.groupHammer.get("pan").set({threshold:5,direction:Hr.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",se(h=this._onMouseOver).call(h,this)),this.body.dom.centerContainer.addEventListener("mouseout",se(f=this._onMouseOut).call(f,this)),this.body.dom.centerContainer.addEventListener("mousemove",se(p=this._onMouseMove).call(p,this)),this.body.dom.centerContainer.addEventListener("contextmenu",se(g=this._onDragEnd).call(g,this)),this.body.dom.centerContainer.addEventListener("mousewheel",se(v=this._onMouseWheel).call(v,this)),this.show()}setOptions(e){if(e){var t,i;const n=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];q.selectiveExtend(n,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(q.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(q.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&q.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),ye(t=["locale","locales"]).call(t,a=>{a in e&&(this.options[a]=e[a])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&q.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&q.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const s=a=>{const o=e[a];if(o){if(typeof o!="function"){var l;throw new Error(Jt(l="option ".concat(a," must be a function ")).call(l,a,"(item, callback)"))}this.options[a]=o}};ye(i=["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"]).call(i,s),e.cluster?(Aa(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new xye(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&ye(q).call(q,this.items,t=>{t.dirty=!0,t.displayed&&t.redraw()}),e.restackGroups&&ye(q).call(q,this.groups,(t,i)=>{i!==Bs&&(t.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const t=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=Ur(function(){e.show()},t)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){var t;e==null&&(e=[]),it(e)||(e=[e]);const i=We(t=this.selection).call(t,n=>lt(e).call(e,n)===-1);for(let n of i){const s=this.getItemById(n);s&&s.unselect()}this.selection=[...e];for(let n of e){const s=this.getItemById(n);s&&s.select()}}getSelection(){var e;return Jt(e=this.selection).call(e,[])}getVisibleItems(){const e=this.body.range.getRange();let t,i;this.options.rtl?(t=this.body.util.toScreen(e.start),i=this.body.util.toScreen(e.end)):(i=this.body.util.toScreen(e.start),t=this.body.util.toScreen(e.end));const n=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const a=this.groups[s],o=a.isVisible?a.visibleItems:[];for(const l of o)this.options.rtl?l.right<i&&l.right+l.width>t&&n.push(l.id):l.left<t&&l.left+l.width>i&&n.push(l.id)}return n}getItemsAtCurrentTime(e){let t,i;this.options.rtl?(t=this.body.util.toScreen(e),i=this.body.util.toScreen(e)):(i=this.body.util.toScreen(e),t=this.body.util.toScreen(e));const n=[];for(const s in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,s))continue;const a=this.groups[s],o=a.isVisible?a.visibleItems:[];for(const l of o)this.options.rtl?l.right<i&&l.right+l.width>t&&n.push(l.id):l.left<t&&l.left+l.width>i&&n.push(l.id)}return n}getVisibleGroups(){const e=[];for(const t in this.groups){if(!Object.prototype.hasOwnProperty.call(this.groups,t))continue;this.groups[t].isVisible&&e.push(t)}return e}getItemById(e){var t;return this.items[e]||Cve(t=this.clusters).call(t,i=>i.id===e)}_deselect(e){const t=this.selection;for(let i=0,n=t.length;i<n;i++)if(t[i]==e){ri(t).call(t,i,1);break}}redraw(){const e=this.options.margin,t=this.body.range,i=q.option.asSize,n=this.options,s=n.orientation.item;let a=!1;const o=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,o.className="vis-itemset",this.options.cluster&&this._clusterItems(),a=this._orderGroups()||a;const l=t.end-t.start,u=l!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,c=t.start!=this.lastRangeStart,h=n.stack!=this.lastStack,f=n.stackSubgroups!=this.lastStackSubgroups,p=u||c||h||f;this.lastVisibleInterval=l,this.lastRangeStart=t.start,this.lastStack=n.stack,this.lastStackSubgroups=n.stackSubgroups,this.props.lastWidth=this.props.width;const g=this._firstGroup(),v={item:e.item,axis:e.axis},b={item:e.item,axis:e.item.vertical/2};let E=0;const x=e.axis+e.item.vertical;this.groups[Bs].redraw(t,b,p);const D={};let O=0;if(ye(q).call(q,this.groups,(R,A)=>{if(A===Bs)return;const I=R==g?v:b,S=!0;D[A]=R.redraw(t,I,p,S),O=D[A].length}),O>0){const R={};for(let A=0;A<O;A++)ye(q).call(q,D,(I,S)=>{R[S]=I[A]()});ye(q).call(q,this.groups,(A,I)=>{if(I===Bs)return;a=R[I]||a,E+=A.height}),E=Math.max(E,x)}return E=Math.max(E,x),o.style.height=i(E),this.props.width=o.offsetWidth,this.props.height=E,this.dom.axis.style.top=i(s=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,a=this._isResized()||a,a}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,t=this.groupIds[e];return this.groups[t]||this.groups[Dl]||null}_updateUngrouped(){let e=this.groups[Dl],t,i;if(this.groupsData){if(e){e.dispose(),delete this.groups[Dl];for(i in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,i))continue;t=this.items[i],t.parent&&t.parent.remove(t);const n=this.getGroupId(t.data),s=this.groups[n];s&&s.add(t)||t.hide()}}}else if(!e){e=new vC(null,null,this),this.groups[Dl]=e;for(i in this.items)Object.prototype.hasOwnProperty.call(this.items,i)&&(t=this.items[i],e.add(t));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const t=this;let i;const n=this.itemsData;if(!e)this.itemsData=null;else if(cs(e))this.itemsData=Sl(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(n&&(ye(q).call(q,this.itemListeners,(s,a)=>{n.off(a,s)}),n.dispose(),i=n.getIds(),this._onRemove(i)),this.itemsData){const s=this.id;ye(q).call(q,this.itemListeners,(a,o)=>{t.itemsData.on(o,a,s)}),i=this.itemsData.getIds(),this._onAdd(i),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const t=this;let i;if(this.groupsData&&(ye(q).call(q,this.groupListeners,(s,a)=>{t.groupsData.off(a,s)}),i=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(i)),!e)this.groupsData=null;else if(cs(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var n;const s=this.groupsData.getDataSet();ye(n=s.get()).call(n,o=>{if(o.nestedGroups){var l;ye(l=o.nestedGroups).call(l,u=>{const c=s.get(u);c.nestedInGroup=o.id,o.showNested==!1&&(c.visible=!1),s.update(c)})}});const a=this.id;ye(q).call(q,this.groupListeners,(o,l)=>{t.groupsData.on(l,o,a)}),i=this.groupsData.getIds(),this._onAddGroups(i)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const t=this.itemsData.get(e);t&&this.options.onRemove(t,i=>{i&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?Bs:this.groupsData?e.group:Dl}_onUpdate(e){const t=this;ye(e).call(e,i=>{const n=t.itemsData.get(i);let s=t.items[i];const a=n?t._getType(n):null,o=Ya.types[a];let l;if(s&&(!o||!(s instanceof o)?(l=s.selected,t._removeItem(s),s=null):t._updateItem(s,n)),!s&&n)if(o)s=new o(n,t.conversion,t.options),s.id=i,t._addItem(s),l&&(this.selection.push(i),s.select());else throw new TypeError('Unknown item type "'.concat(a,'"'))}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let t=0;const i=this;ye(e).call(e,n=>{const s=i.items[n];s&&(t++,i._removeItem(s))}),t&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){ye(q).call(q,this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const t=this;ye(e).call(e,i=>{const n=t.groupsData.get(i);let s=t.groups[i];if(s)s.setData(n);else{if(i==Dl||i==Bs)throw new Error("Illegal group id. ".concat(i," is a reserved id."));const a=ef(t.options);q.extend(a,{height:null}),s=new vC(i,n,t),t.groups[i]=s;for(const o in t.items){if(!Object.prototype.hasOwnProperty.call(t.items,o))continue;const l=t.items[o];l.data.group==i&&s.add(l)}s.order(),s.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){ye(e).call(e,t=>{const i=this.groups[t];i&&(i.dispose(),delete this.groups[t])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const t=!q.equalArray(e,this.groupIds);if(t){const i=this.groups;ye(e).call(e,n=>{i[n].hide()}),ye(e).call(e,n=>{i[n].show()}),this.groupIds=e}return t}else return!1}_orderNestedGroups(e){function t(n,s){let a=[];return ye(s).call(s,o=>{if(a.push(o),n.groupsData.get(o).nestedGroups){var u;const c=mr(u=n.groupsData.get({filter(h){return h.nestedInGroup==o},order:n.options.groupOrder})).call(u,h=>h.id);a=Jt(a).call(a,t(n,c))}}),a}const i=We(e).call(e,n=>!this.groupsData.get(n).nestedInGroup);return t(this,i)}_addItem(e){this.items[e.id]=e;const t=this.getGroupId(e.data),i=this.groups[t];i?i&&i.data&&i.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,i&&i.add(e)}_updateItem(e,t){e.setData(t);const i=this.getGroupId(e.data),n=this.groups[i];n?n&&n.data&&n.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){var t,i;e.hide(),delete this.items[e.id];const n=lt(t=this.selection).call(t,e.id);n!=-1&&ri(i=this.selection).call(i,n,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const t=[];for(let i=0;i<e.length;i++)e[i]instanceof Wa&&t.push(e[i]);return t}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let t=0;t<this.groupIds.length;t++)if(e==this.groupIds[t])return t}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const t=this.touchParams.item||null,i=this;let n;if(t&&(t.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||t.editable!=null&&!t.editable.updateTime&&!t.editable.updateGroup&&!this.options.editable.overrideItems)return;const s=this.touchParams.dragLeftItem,a=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=t,s)n={item:s,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[n];else if(a)n={item:a,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(t.data)},this.touchParams.itemProps=[n];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const o=this._getGroupIndex(t.data.group),l=this.options.itemsAlwaysDraggable.item&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=mr(l).call(l,u=>{const c=i.items[u],h=i._getGroupIndex(c.data.group);return{item:c,initialX:e.center.x,groupOffset:o-h,data:this._cloneItemData(c.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const t=this.options.snap||null,i=this.dom.frame.getBoundingClientRect(),n=this.options.rtl?i.right-e.center.x+10:e.center.x-i.left-10,s=this.body.util.toTime(n),a=this.body.util.getScale(),o=this.body.util.getStep(),l=t?t(s,a,o):s,c={type:"range",start:l,end:l,content:"new item"},h=Tl();c[this.itemsData.idProp]=h;const f=this.groupFromTarget(e);f&&(c.group=f.groupId);const p=new Wa(c,this.conversion,this.options);p.id=h,p.data=this._cloneItemData(c),this._addItem(p),this.touchParams.selectedItem=p;const g={item:p,initialX:e.center.x,data:p.data};this.options.rtl?g.dragLeft=!0:g.dragRight=!0,this.touchParams.itemProps=[g],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const i=this.body.dom.centerContainer,n=i.getBoundingClientRect();this.popup.setPosition(e.center.x-n.left+i.offsetLeft,e.center.y-n.top+i.offsetTop),this.popup.show()}if(this.touchParams.itemProps){var t;e.stopPropagation();const i=this,n=this.options.snap||null,s=this.body.dom.root.offsetLeft,a=this.options.rtl?s+this.body.domProps.right.width:s+this.body.domProps.left.width,o=this.body.util.getScale(),l=this.body.util.getStep(),u=this.touchParams.selectedItem,c=(this.options.editable.overrideItems||u.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&u.editable!=null&&u.editable.updateGroup;let h=null;if(c&&u&&u.data.group!=null){const f=i.groupFromTarget(e);f&&(h=this._getGroupIndex(f.groupId))}ye(t=this.touchParams.itemProps).call(t,f=>{const p=i.body.util.toTime(e.center.x-a),g=i.body.util.toTime(f.initialX-a);let v,b,E,x,D;this.options.rtl?v=-(p-g):v=p-g;let O=this._cloneItemData(f.item.data);if(f.item.editable!=null&&!f.item.editable.updateTime&&!f.item.editable.updateGroup&&!i.options.editable.overrideItems)return;if((this.options.editable.overrideItems||u.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&u.editable!=null&&u.editable.updateTime){if(f.dragLeft)this.options.rtl?O.end!=null&&(E=q.convert(f.data.end,"Date"),D=new Date(E.valueOf()+v),O.end=n?n(D,o,l):D):O.start!=null&&(b=q.convert(f.data.start,"Date"),x=new Date(b.valueOf()+v),O.start=n?n(x,o,l):x);else if(f.dragRight)this.options.rtl?O.start!=null&&(b=q.convert(f.data.start,"Date"),x=new Date(b.valueOf()+v),O.start=n?n(x,o,l):x):O.end!=null&&(E=q.convert(f.data.end,"Date"),D=new Date(E.valueOf()+v),O.end=n?n(D,o,l):D);else if(O.start!=null)if(b=q.convert(f.data.start,"Date").valueOf(),x=new Date(b+v),O.end!=null){E=q.convert(f.data.end,"Date");const R=E.valueOf()-b.valueOf();O.start=n?n(x,o,l):x,O.end=new Date(O.start.valueOf()+R)}else O.start=n?n(x,o,l):x}if(c&&!f.dragLeft&&!f.dragRight&&h!=null&&O.group!=null){let R=h-f.groupOffset;R=Math.max(0,R),R=Math.min(i.groupIds.length-1,R),O.group=i.groupIds[R]}O=this._cloneItemData(O),i.options.onMoving(O,R=>{R&&f.item.setData(this._cloneItemData(R,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,t){const i=this.groups[t];if(i&&i.groupId!=e.data.group){const n=e.parent;n.remove(e),n.order(),e.data.group=i.groupId,i.add(e),i.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const t=this,i=this.touchParams.itemProps;this.touchParams.itemProps=null,ye(i).call(i,n=>{const s=n.item.id;if(!(t.itemsData.get(s)!=null))t.options.onAdd(n.item.data,o=>{t._removeItem(n.item),o&&t.itemsData.add(o),t.body.emitter.emit("_change")});else{const o=this._cloneItemData(n.item.data);t.options.onMove(o,l=>{l?(l[this.itemsData.idProp]=s,this.itemsData.update(l)):(n.item.setData(n.data),t.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const t=this.groupFromTarget(e);Ur(()=>{this.toggleGroupShowNested(t)},1)}toggleGroupShowNested(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!e||!e.nestedGroups)return;const i=this.groupsData.getDataSet();t!=null?e.showNested=!!t:e.showNested=!e.showNested;let n=i.get(e.groupId);n.showNested=e.showNested;let s=e.nestedGroups,a=s;for(;a.length>0;){let c=a;a=[];for(let h=0;h<c.length;h++){let f=i.get(c[h]);f.nestedGroups&&(a=Jt(a).call(a,f.nestedGroups))}a.length>0&&(s=Jt(s).call(s,a))}var o;if(n.showNested){var l=i.get(n.nestedGroups);for(let c=0;c<l.length;c++){let h=l[c];h.nestedGroups&&h.nestedGroups.length>0&&(h.showNested==null||h.showNested==!0)&&l.push(...i.get(h.nestedGroups))}o=mr(l).call(l,function(c){return c.visible==null&&(c.visible=!0),c.visible=!!n.showNested,c})}else{var u;o=mr(u=i.get(s)).call(u,function(c){return c.visible==null&&(c.visible=!0),c.visible=!!n.showNested,c})}i.update(Jt(o).call(o,n)),n.showNested?(q.removeClassName(e.dom.label,"collapsed"),q.addClassName(e.dom.label,"expanded")):(q.removeClassName(e.dom.label,"expanded"),q.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this.groupsData.getDataSet(),i=this.groupFromTarget(e);if(i&&i.height!=this.groupTouchParams.group.height){const n=i.top<this.groupTouchParams.group.top,s=e.center?e.center.y:e.clientY,a=i.dom.foreground.getBoundingClientRect(),o=this.groupTouchParams.group.height;if(n){if(a.top+o<s)return}else{const l=i.height;if(a.top+l-o>s)return}}if(i&&i!=this.groupTouchParams.group){const n=t.get(i.groupId),s=t.get(this.groupTouchParams.group.groupId);s&&n&&(this.options.groupOrderSwap(s,n,t),t.update(s),t.update(n));const a=t.getIds({order:this.options.groupOrder});if(!q.equalArray(a,this.groupTouchParams.originalOrder)){const o=this.groupTouchParams.originalOrder,l=this.groupTouchParams.group.groupId,u=Math.min(o.length,a.length);let c=0,h=0,f=0;for(;c<u;){for(;c+h<u&&c+f<u&&a[c+h]==o[c+f];)c++;if(c+h>=u)break;if(a[c+h]==l)h=1;else if(o[c+f]==l)f=1;else{const p=lt(a).call(a,o[c+f]),g=t.get(a[c+h]),v=t.get(o[c+f]);this.options.groupOrderSwap(g,v,t),t.update(g),t.update(v);const b=a[c+h];a[c+h]=o[c+f],a[p]=b,c++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const t=this,i=t.groupTouchParams.group.groupId,n=t.groupsData.getDataSet(),s=q.extend({},n.get(i));t.options.onMoveGroup(s,a=>{if(a)a[n._idProp]=i,n.update(a);else{const o=n.getIds({order:t.options.groupOrder});if(!q.equalArray(o,t.groupTouchParams.originalOrder)){const l=t.groupTouchParams.originalOrder,u=Math.min(l.length,o.length);let c=0;for(;c<u;){for(;c<u&&o[c]==l[c];)c++;if(c>=u)break;const h=lt(o).call(o,l[c]),f=n.get(o[c]),p=n.get(l[c]);t.options.groupOrderSwap(f,p,n),n.update(f),n.update(p);const g=o[c];o[c]=l[c],o[h]=g,c++}}}}),t.body.emitter.emit("groupDragged",{groupId:i}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),i=e.srcEvent&&e.srcEvent.shiftKey;if(t||i){this._onMultiSelectItem(e);return}const n=this.getSelection(),s=this.itemFromTarget(e),a=s&&s.selectable?[s.id]:[];this.setSelection(a);const o=this.getSelection();(o.length>0||n.length>0)&&this.body.emitter.emit("select",{items:o,event:e})}_onMouseOver(e){const t=this.itemFromTarget(e);if(!t)return;const i=this.itemFromRelatedTarget(e);if(t===i)return;const n=t.getTitle();if(this.options.showTooltips&&n){this.popup==null&&(this.popup=new pye(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(n);const s=this.body.dom.centerContainer,a=s.getBoundingClientRect();this.popup.setPosition(e.clientX-a.left+s.offsetLeft,e.clientY-a.top+s.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:t.id,event:e})}_onMouseOut(e){const t=this.itemFromTarget(e);if(!t)return;const i=this.itemFromRelatedTarget(e);t!==i&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:t.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const i=this.body.dom.centerContainer,n=i.getBoundingClientRect();this.popup.setPosition(e.clientX-n.left+i.offsetLeft,e.clientY-n.top+i.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const t=this;if(e){const i=t.itemsData.get(e.id);this.options.onUpdate(i,n=>{n&&t.itemsData.update(n)})}}_onDropObjectOnItem(e){const t=this.itemFromTarget(e),i=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(i,t)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const t=this,i=this.options.snap||null,n=this.dom.frame.getBoundingClientRect(),s=this.options.rtl?n.right-e.center.x:e.center.x-n.left,a=this.body.util.toTime(s),o=this.body.util.getScale(),l=this.body.util.getStep();let u,c;e.type=="drop"?(c=JSON.parse(e.dataTransfer.getData("text")),c.content=c.content?c.content:"new item",c.start=c.start?c.start:i?i(a,o,l):a,c.type=c.type||"box",c[this.itemsData.idProp]=c.id||Tl(),c.type=="range"&&!c.end&&(u=this.body.util.toTime(s+this.props.width/5),c.end=i?i(u,o,l):u)):(c={start:i?i(a,o,l):a,content:"new item"},c[this.itemsData.idProp]=Tl(),this.options.type==="range"&&(u=this.body.util.toTime(s+this.props.width/5),c.end=i?i(u,o,l):u));const h=this.groupFromTarget(e);h&&(c.group=h.groupId),c=this._cloneItemData(c),this.options.onAdd(c,f=>{f&&(t.itemsData.add(f),e.type=="drop"&&t.setSelection([f.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const t=this.itemFromTarget(e);if(t){let i=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const a=this.itemsData.get(t.id).group;let o;this.options.multiselectPerGroup&&i.length>0&&(o=this.itemsData.get(i[0]).group),(!this.options.multiselectPerGroup||o==null||o==a)&&i.push(t.id);const l=Ya._getItemRange(this.itemsData.get(i));if(!this.options.multiselectPerGroup||o==a){i=[];for(const u in this.items){if(!Object.prototype.hasOwnProperty.call(this.items,u))continue;const c=this.items[u],h=c.data.start,f=c.data.end!==void 0?c.data.end:h;h>=l.min&&f<=l.max&&(!this.options.multiselectPerGroup||o==this.itemsData.get(c.id).group)&&!(c instanceof za)&&i.push(c.id)}}}else{const a=lt(i).call(i,t.id);a==-1?i.push(t.id):ri(i).call(i,a,1)}const s=We(i).call(i,a=>this.getItemById(a).selectable);this.setSelection(s),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let t=null,i=null;return ye(e).call(e,n=>{(i==null||n.start<i)&&(i=n.start),n.end!=null?(t==null||n.end>t)&&(t=n.end):(t==null||n.start>t)&&(t=n.start)}),{min:i,max:t}}itemFromElement(e){let t=e;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-item"))return t["vis-item"];t=t.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const t=e.center?e.center.y:e.clientY;let i=this.groupIds;i.length<=0&&this.groupsData&&(i=this.groupsData.getIds({order:this.options.groupOrder}));for(let n=0;n<i.length;n++){const s=i[n],a=this.groups[s],o=a.dom.foreground,l=o.getBoundingClientRect();if(t>=l.top&&t<l.top+o.offsetHeight)return a;if(this.options.orientation.item==="top"){if(n===this.groupIds.length-1&&t>l.top)return a}else if(n===0&&t<l.top+o.offset)return a}return null}static itemSetFromTarget(e){let t=e.target;for(;t;){if(Object.prototype.hasOwnProperty.call(t,"vis-itemset"))return t["vis-itemset"];t=t.parentNode}return null}_cloneItemData(e,t){const i=q.extend({},e);return t||(t=this.itemsData.type),i.start!=null&&(i.start=q.convert(i.start,t&&t.start||"Date")),i.end!=null&&(i.end=q.convert(i.end,t&&t.end||"Date")),i}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),t=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=t){if(this._detachAllClusters(),t){for(let i of t)i.attach();this.clusters=t}this._updateClusters(t)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){var t;const s=new wf(mr(e).call(e,l=>l.id)),a=We(t=this.clusters).call(t,l=>!s.has(l.id));let o=!1;for(let l of a){var i;const u=lt(i=this.selection).call(i,l.id);if(u!==-1){var n;l.unselect(),ri(n=this.selection).call(n,u,1),o=!0}}if(o){const l=this.getSelection();this.body.emitter.emit("select",{items:l,event})}}this.clusters=e||[]}}Ya.types={background:za,box:dye,range:Wa,point:fye},Ya.prototype._onAdd=Ya.prototype._onUpdate;let Oc=!1,fW,Df="background: #FFeeee; color: #dd0000";class It{constructor(){}static validate(e,t,i){Oc=!1,fW=t;let n=t;return i!==void 0&&(n=t[i]),It.parse(e,n,[]),Oc}static parse(e,t,i){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&It.check(n,e,t,i)}static check(e,t,i,n){if(i[e]===void 0&&i.__any__===void 0){It.getSuggestion(e,i,n);return}let s=e,a=!0;i[e]===void 0&&i.__any__!==void 0&&(s="__any__",a=It.getType(t[e])==="object");let o=i[s];a&&o.__type__!==void 0&&(o=o.__type__),It.checkFields(e,t,i,s,o,n)}static checkFields(e,t,i,n,s,a){let o=function(c){console.log("%c"+c+It.printLocation(a,e),Df)},l=It.getType(t[e]),u=s[l];u!==void 0?It.getType(u)==="array"&&lt(u).call(u,t[e])===-1?(o('Invalid option detected in "'+e+'". Allowed values are:'+It.print(u)+' not "'+t[e]+'". '),Oc=!0):l==="object"&&n!=="__any__"&&(a=q.copyAndExtendArray(a,e),It.parse(t[e],i[n],a)):s.any===void 0&&(o('Invalid type received for "'+e+'". Expected: '+It.print(br(s))+". Received ["+l+'] "'+t[e]+'"'),Oc=!0)}static getType(e){var t=typeof e;return t==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":it(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":t==="number"?"number":t==="boolean"?"boolean":t==="string"?"string":t===void 0?"undefined":t}static getSuggestion(e,t,i){let n=It.findInOptions(e,t,i,!1),s=It.findInOptions(e,fW,[],!0),a=8,o=4,l;n.indexMatch!==void 0?l=" in "+It.printLocation(n.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+n.indexMatch+`"?

`:s.distance<=o&&n.distance>s.distance?l=" in "+It.printLocation(n.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+It.printLocation(s.path,s.closestMatch,""):n.distance<=a?l='. Did you mean "'+n.closestMatch+'"?'+It.printLocation(n.path,e):l=". Did you mean one of these: "+It.print(br(t))+It.printLocation(i,e),console.log('%cUnknown option detected: "'+e+'"'+l,Df),Oc=!0}static findInOptions(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=1e9,a="",o=[],l=e.toLowerCase(),u;for(let h in t){if(!Object.prototype.hasOwnProperty.call(t,h))continue;let f;if(t[h].__type__!==void 0&&n===!0){let p=It.findInOptions(e,t[h],q.copyAndExtendArray(i,h));s>p.distance&&(a=p.closestMatch,o=p.path,s=p.distance,u=p.indexMatch)}else{var c;lt(c=h.toLowerCase()).call(c,l)!==-1&&(u=h),f=It.levenshteinDistance(e,h),s>f&&(a=h,o=q.copyArray(i),s=f)}}return{closestMatch:a,path:o,distance:s,indexMatch:u}}static printLocation(e,t){let n=`

`+(arguments.length>2&&arguments[2]!==void 0?arguments[2]:`Problem value found at: 
`)+`options = {
`;for(let s=0;s<e.length;s++){for(let a=0;a<s+1;a++)n+="  ";n+=e[s]+`: {
`}for(let s=0;s<e.length+1;s++)n+="  ";n+=t+`
`;for(let s=0;s<e.length+1;s++){for(let a=0;a<e.length-s;a++)n+="  ";n+=`}
`}return n+`

`}static print(e){return gi(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,t){if(e.length===0)return t.length;if(t.length===0)return e.length;var i=[],n;for(n=0;n<=t.length;n++)i[n]=[n];var s;for(s=0;s<=e.length;s++)i[0][s]=s;for(n=1;n<=t.length;n++)for(s=1;s<=e.length;s++)t.charAt(n-1)==e.charAt(s-1)?i[n][s]=i[n-1][s-1]:i[n][s]=Math.min(i[n-1][s-1]+1,Math.min(i[n][s-1]+1,i[n-1][s]+1));return i[t.length][e.length]}}let $e="string",ke="boolean",pt="number",pW="array",Il="date",Gt="object",wye="dom",Al="moment",mW="any",Eye={configure:{enabled:{boolean:ke},filter:{boolean:ke,function:"function"},container:{dom:wye},__type__:{object:Gt,boolean:ke,function:"function"}},align:{string:$e},alignCurrentTime:{string:$e,undefined:"undefined"},rtl:{boolean:ke,undefined:"undefined"},rollingMode:{follow:{boolean:ke},offset:{number:pt,undefined:"undefined"},__type__:{object:Gt}},onTimeout:{timeoutMs:{number:pt},callback:{function:"function"},__type__:{object:Gt}},verticalScroll:{boolean:ke,undefined:"undefined"},horizontalScroll:{boolean:ke,undefined:"undefined"},horizontalScrollKey:{string:$e,undefined:"undefined"},horizontalScrollInvert:{boolean:ke,undefined:"undefined"},autoResize:{boolean:ke},throttleRedraw:{number:pt},clickToUse:{boolean:ke},dataAttributes:{string:$e,array:pW},editable:{add:{boolean:ke,undefined:"undefined"},remove:{boolean:ke,undefined:"undefined"},updateGroup:{boolean:ke,undefined:"undefined"},updateTime:{boolean:ke,undefined:"undefined"},overrideItems:{boolean:ke,undefined:"undefined"},__type__:{boolean:ke,object:Gt}},end:{number:pt,date:Il,string:$e,moment:Al},format:{minorLabels:{millisecond:{string:$e,undefined:"undefined"},second:{string:$e,undefined:"undefined"},minute:{string:$e,undefined:"undefined"},hour:{string:$e,undefined:"undefined"},weekday:{string:$e,undefined:"undefined"},day:{string:$e,undefined:"undefined"},week:{string:$e,undefined:"undefined"},month:{string:$e,undefined:"undefined"},year:{string:$e,undefined:"undefined"},__type__:{object:Gt,function:"function"}},majorLabels:{millisecond:{string:$e,undefined:"undefined"},second:{string:$e,undefined:"undefined"},minute:{string:$e,undefined:"undefined"},hour:{string:$e,undefined:"undefined"},weekday:{string:$e,undefined:"undefined"},day:{string:$e,undefined:"undefined"},week:{string:$e,undefined:"undefined"},month:{string:$e,undefined:"undefined"},year:{string:$e,undefined:"undefined"},__type__:{object:Gt,function:"function"}},__type__:{object:Gt}},moment:{function:"function"},groupHeightMode:{string:$e},groupOrder:{string:$e,function:"function"},groupEditable:{add:{boolean:ke,undefined:"undefined"},remove:{boolean:ke,undefined:"undefined"},order:{boolean:ke,undefined:"undefined"},__type__:{boolean:ke,object:Gt}},groupOrderSwap:{function:"function"},height:{string:$e,number:pt},hiddenDates:{start:{date:Il,number:pt,string:$e,moment:Al},end:{date:Il,number:pt,string:$e,moment:Al},repeat:{string:$e},__type__:{object:Gt,array:pW}},itemsAlwaysDraggable:{item:{boolean:ke,undefined:"undefined"},range:{boolean:ke,undefined:"undefined"},__type__:{boolean:ke,object:Gt}},limitSize:{boolean:ke},locale:{string:$e},locales:{__any__:{any:mW},__type__:{object:Gt}},longSelectPressTime:{number:pt},margin:{axis:{number:pt},item:{horizontal:{number:pt,undefined:"undefined"},vertical:{number:pt,undefined:"undefined"},__type__:{object:Gt,number:pt}},__type__:{object:Gt,number:pt}},max:{date:Il,number:pt,string:$e,moment:Al},maxHeight:{number:pt,string:$e},maxMinorChars:{number:pt},min:{date:Il,number:pt,string:$e,moment:Al},minHeight:{number:pt,string:$e},moveable:{boolean:ke},multiselect:{boolean:ke},multiselectPerGroup:{boolean:ke},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:$e,undefined:"undefined"},item:{string:$e,undefined:"undefined"},__type__:{string:$e,object:Gt}},selectable:{boolean:ke},sequentialSelection:{boolean:ke},showCurrentTime:{boolean:ke},showMajorLabels:{boolean:ke},showMinorLabels:{boolean:ke},showWeekScale:{boolean:ke},stack:{boolean:ke},stackSubgroups:{boolean:ke},cluster:{maxItems:{number:pt,undefined:"undefined"},titleTemplate:{string:$e,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:ke,undefined:"undefined"},fitOnDoubleClick:{boolean:ke,undefined:"undefined"},__type__:{boolean:ke,object:Gt}},snap:{function:"function",null:"null"},start:{date:Il,number:pt,string:$e,moment:Al},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:$e,function:"function"},showTooltips:{boolean:ke},tooltip:{followMouse:{boolean:ke},overflowMethod:{string:["cap","flip","none"]},delay:{number:pt},template:{function:"function"},__type__:{object:Gt}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:ke,object:Gt}},timeAxis:{scale:{string:$e,undefined:"undefined"},step:{number:pt,undefined:"undefined"},__type__:{object:Gt}},type:{string:$e},width:{string:$e,number:pt},preferZoom:{boolean:ke},zoomable:{boolean:ke},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:pt},zoomMax:{number:pt},zoomMin:{number:pt},xss:{disabled:{boolean:ke},filterOptions:{__any__:{any:mW},__type__:{object:Gt}},__type__:{object:Gt}},__type__:{object:Gt}},Cye={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var Dye={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class Iye{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Dye[e]}setColor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e==="none")return;let i;var n=this._isColorString(e);if(n!==void 0&&(e=n),q.isString(e)===!0){if(q.isValidRGB(e)===!0){let s=e.substr(4).substr(0,e.length-5).split(",");i={r:s[0],g:s[1],b:s[2],a:1}}else if(q.isValidRGBA(e)===!0){let s=e.substr(5).substr(0,e.length-6).split(",");i={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(q.isValidHex(e)===!0){let s=q.hexToRGB(e);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let s=e.a!==void 0?e.a:"1.0";i={r:e.r,g:e.g,b:e.b,a:s}}if(i===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+gi(e));this._setColor(i,t)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)===!0&&(this.previousColor=q.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",Ur(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)===!0&&(this.initialColor=q.extend({},e)),this.color=e;let i=q.RGBToHSV(e.r,e.g,e.b),n=2*Math.PI,s=this.r*i.s,a=this.centerCoordinates.x+s*Math.sin(n*i.h),o=this.centerCoordinates.y+s*Math.cos(n*i.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let t=q.RGBToHSV(this.color.r,this.color.g,this.color.b);t.v=e/100;let i=q.HSVToRGB(t.h,t.s,t.v);i.a=this.color.a,this.color=i,this._updatePicker()}_updatePicker(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.color,t=q.RGBToHSV(e.r,e.g,e.b),i=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let n=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,s),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-t.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),V9(i).call(i),this.brightnessRange.value=100*t.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){var e,t,i,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let a=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let a=document.createElement("DIV");a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=se(e=this._hide).call(e,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=se(t=this._apply).call(t,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=se(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=se(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new Hr(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),$V(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let t=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,t,i);let n,s,a,o;this.centerCoordinates={x:t*.5,y:i*.5},this.r=.49*t;let l=2*Math.PI/360,u=1/360,c=1/this.r,h;for(a=0;a<360;a++)for(o=0;o<this.r;o++)n=this.centerCoordinates.x+o*Math.sin(l*a),s=this.centerCoordinates.y+o*Math.cos(l*a),h=q.HSVToRGB(a*u,o*c,1),e.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",e.fillRect(n-.5,s-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,t,i)}this.generated=!0}_moveSelector(e){let t=this.colorPickerDiv.getBoundingClientRect(),i=e.center.x-t.left,n=e.center.y-t.top,s=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,o=i-a,l=n-s,u=Math.atan2(o,l),c=.98*Math.min(Math.sqrt(o*o+l*l),a),h=Math.cos(u)*c+s,f=Math.sin(u)*c+a;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=u/(2*Math.PI);p=p<0?p+1:p;let g=c/this.r,v=q.RGBToHSV(this.color.r,this.color.g,this.color.b);v.h=p,v.s=g;let b=q.HSVToRGB(v.h,v.s,v.v);b.a=this.color.a,this.color=b,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class gW{constructor(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;this.parent=e,this.changedOptions=[],this.container=t,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},q.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Iye(n),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let t=!0;if(typeof e=="string")this.options.filter=e;else if(it(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),We(e)!==void 0&&(this.options.filter=We(e)),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(t=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,t=e):typeof e=="function"&&(this.options.filter=e,t=!0);We(this.options)===!1&&(t=!1),this.options.enabled=t}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=We(this.options),t=0,i=!1;for(let n in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,n)&&(this.allowCreation=!1,i=!1,typeof e=="function"?(i=e(n,[]),i=i||this._handleObject(this.configureOptions[n],[n],!0)):(e===!0||lt(e).call(e,n)!==-1)&&(i=!0),i!==!1&&(this.allowCreation=!0,t>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),t++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let t=this.moduleOptions;for(let i=0;i<e.length;i++)if(t[e[i]]!==void 0)t=t[e[i]];else{t=void 0;break}return t}_makeItem(e){if(this.allowCreation===!0){let s=document.createElement("div");s.className="vis-configuration vis-config-item vis-config-s"+e.length;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return ye(i).call(i,a=>{s.appendChild(a)}),this.domElements.push(s),this.domElements.length}return 0}_makeHeader(e){let t=document.createElement("div");t.className="vis-configuration vis-config-header",t.innerHTML=q.xss(e),this._makeItem([],t)}_makeLabel(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+t.length,i===!0?n.innerHTML=q.xss("<i><b>"+e+":</b></i>"):n.innerHTML=q.xss(e+":"),n}_makeDropdown(e,t,i){let n=document.createElement("select");n.className="vis-configuration vis-config-select";let s=0;t!==void 0&&lt(e).call(e,t)!==-1&&(s=lt(e).call(e,t));for(let l=0;l<e.length;l++){let u=document.createElement("option");u.value=e[l],l===s&&(u.selected="selected"),u.innerHTML=e[l],n.appendChild(u)}let a=this;n.onchange=function(){a._update(this.value,i)};let o=this._makeLabel(i[i.length-1],i);this._makeItem(i,o,n)}_makeRange(e,t,i){let n=e[0],s=e[1],a=e[2],o=e[3],l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range",l.min=s,l.max=a}catch{}l.step=o;let u="",c=0;if(t!==void 0){let v=1.2;t<0&&t*v<s?(l.min=Math.ceil(t*v),c=l.min,u="range increased"):t/v<s&&(l.min=Math.ceil(t/v),c=l.min,u="range increased"),t*v>a&&a!==1&&(l.max=Math.ceil(t*v),c=l.max,u="range increased"),l.value=t}else l.value=n;let h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=Number(l.value);var f=this;l.onchange=function(){h.value=this.value,f._update(Number(this.value),i)},l.oninput=function(){h.value=this.value};let p=this._makeLabel(i[i.length-1],i),g=this._makeItem(i,p,l,h);u!==""&&this.popupHistory[g]!==c&&(this.popupHistory[g]=c,this._setupPopup(u,g))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,t){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerHTML=q.xss(e),i.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:t}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let t=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=t.left+"px",this.popupDiv.html.style.top=t.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=Ur(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=Ur(()=>{this._removePopup()},1800)}}_makeCheckbox(e,t,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=e,t!==void 0&&(n.checked=t,t!==e&&(typeof e=="object"?t!==e.enabled&&this.changedOptions.push({path:i,value:t}):this.changedOptions.push({path:i,value:t})));let s=this;n.onchange=function(){s._update(this.checked,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,n)}_makeTextInput(e,t,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=t,t!==e&&this.changedOptions.push({path:i,value:t});let s=this;n.onchange=function(){s._update(this.value,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,n)}_makeColorField(e,t,i){let n=e[1],s=document.createElement("div");t=t===void 0?n:t,t!=="none"?(s.className="vis-configuration vis-config-colorBlock",s.style.backgroundColor=t):s.className="vis-configuration vis-config-colorBlock none",t=t===void 0?n:t,s.onclick=()=>{this._showColorPicker(t,s,i)};let a=this._makeLabel(i[i.length-1],i);this._makeItem(i,a,s)}_showColorPicker(e,t,i){t.onclick=function(){},this.colorPicker.insertTo(t),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(n=>{let s="rgba("+n.r+","+n.g+","+n.b+","+n.a+")";t.style.backgroundColor=s,this._update(s,i)}),this.colorPicker.setCloseCallback(()=>{t.onclick=()=>{this._showColorPicker(e,t,i)}})}_handleObject(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=!1,s=We(this.options),a=!1;for(let o in e){if(!Object.prototype.hasOwnProperty.call(e,o))continue;n=!0;let l=e[o],u=q.copyAndExtendArray(t,o);if(typeof s=="function"&&(n=s(o,t),n===!1&&!it(l)&&typeof l!="string"&&typeof l!="boolean"&&l instanceof Object&&(this.allowCreation=!1,n=this._handleObject(l,u,!0),this.allowCreation=i===!1)),n!==!1){a=!0;let c=this._getValue(u);if(it(l))this._handleArray(l,c,u);else if(typeof l=="string")this._makeTextInput(l,c,u);else if(typeof l=="boolean")this._makeCheckbox(l,c,u);else if(l instanceof Object){let h=!0;if(lt(t).call(t,"physics")!==-1&&this.moduleOptions.physics.solver!==o&&(h=!1),h===!0)if(l.enabled!==void 0){let f=q.copyAndExtendArray(u,"enabled"),p=this._getValue(f);if(p===!0){let g=this._makeLabel(o,u,!0);this._makeItem(u,g),a=this._handleObject(l,u)||a}else this._makeCheckbox(l,p,u)}else{let f=this._makeLabel(o,u,!0);this._makeItem(u,f),a=this._handleObject(l,u)||a}}else console.error("dont know how to handle",l,o,u)}}return a}_handleArray(e,t,i){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,t,i),e[1]!==t&&this.changedOptions.push({path:i,value:t})):typeof e[0]=="string"?(this._makeDropdown(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:t})):typeof e[0]=="number"&&(this._makeRange(e,t,i),e[0]!==t&&this.changedOptions.push({path:i,value:Number(t)}))}_update(e,t){let i=this._constructOptions(e,t);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}_constructOptions(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let s=0;s<t.length;s++)t[s]!=="global"&&(n[t[s]]===void 0&&(n[t[s]]={}),s!==t.length-1?n=n[t[s]]:n[t[s]]=e);return i}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+gi(e,null,2)+"</pre>"}getOptions(){let e={};for(var t=0;t<this.changedOptions.length;t++)this._constructOptions(this.changedOptions[t].value,this.changedOptions[t].path,e);return e}}class SC extends El{constructor(e,t,i,n){var s,a,o,l,u,c,h;if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof SC))throw new SyntaxError("Constructor must be called with the new operator");if(!(it(i)||cs(i))&&i instanceof Object){const b=n;n=i,i=b}n&&n.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const f=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:ti},this.options=q.deepExtend({},this.defaultOptions),n&&q.setupXSSProtection(n.xss),this._create(e),!n||n&&typeof n.rtl>"u"){this.dom.root.style.visibility="hidden";let b,E=this.dom.root;for(;!b&&E;)b=window.getComputedStyle(E,null).direction,E=E.parentElement;this.options.rtl=b&&b.toLowerCase()=="rtl"}else this.options.rtl=n.rtl;n&&(n.rollingMode&&(this.options.rollingMode=n.rollingMode),n.onInitialDrawComplete&&(this.options.onInitialDrawComplete=n.onInitialDrawComplete),n.onTimeout&&(this.options.onTimeout=n.onTimeout),n.loadingScreenTemplate&&(this.options.loadingScreenTemplate=n.loadingScreenTemplate));const p=document.createElement("div");if(this.options.loadingScreenTemplate){var g;const b=se(g=this.options.loadingScreenTemplate).call(g,this),E=b(this.dom.loadingScreen);E instanceof Object&&!(E instanceof Element)?b(p):E instanceof Element?(p.innerHTML="",p.appendChild(E)):E!=null&&(p.innerHTML=q.xss(E))}this.dom.loadingScreen.appendChild(p),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:se(s=this.on).call(s,this),off:se(a=this.off).call(a,this),emit:se(o=this.emit).call(o,this)},hiddenDates:[],util:{getScale(){return f.timeAxis.step.scale},getStep(){return f.timeAxis.step.step},toScreen:se(l=f._toScreen).call(l,f),toGlobalScreen:se(u=f._toGlobalScreen).call(u,f),toTime:se(c=f._toTime).call(c,f),toGlobalTime:se(h=f._toGlobalTime).call(h,f)}},this.range=new bf(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Tf(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new WV(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new Ya(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function v(b,E){f.hasListeners(b)&&f.emit(b,f.getEventProperties(E))}this.dom.root.onclick=b=>v("click",b),this.dom.root.ondblclick=b=>v("doubleClick",b),this.dom.root.oncontextmenu=b=>v("contextmenu",b),this.dom.root.onmouseover=b=>v("mouseOver",b),window.PointerEvent?(this.dom.root.onpointerdown=b=>v("mouseDown",b),this.dom.root.onpointermove=b=>v("mouseMove",b),this.dom.root.onpointerup=b=>v("mouseUp",b)):(this.dom.root.onmousemove=b=>v("mouseMove",b),this.dom.root.onmousedown=b=>v("mouseDown",b),this.dom.root.onmouseup=b=>v("mouseUp",b)),this.initialFitDone=!1,this.on("changed",()=>{if(f.itemsData!=null){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,f.options.start!=null||f.options.end!=null){if(f.options.start==null||f.options.end==null)var b=f.getItemRange();const E=f.options.start!=null?f.options.start:b.min,x=f.options.end!=null?f.options.end:b.max;f.setWindow(E,x,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&(f.initialRangeChangeDone||!f.options.start&&!f.options.end||f.options.rollingMode)&&(f.initialDrawDone=!0,f.itemSet.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&Ur(()=>f.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{f.destroy()}),n&&this.setOptions(n),this.body.emitter.on("fit",b=>{this._onFit(b),this.redraw()}),i&&this.setGroups(i),t&&this.setItems(t),this._redraw()}_createConfigurator(){return new gW(this,this.dom.container,Cye)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(It.validate(e,Eye)===!0&&console.log("%cErrors have been found in the supplied options object.",Df),El.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const i=this.itemsData;if(i){const n=this.getSelection();this.setItems(null),this.setItems(i.rawDS),this.setSelection(n)}}}setItems(e){this.itemsDone=!1;let t;e?cs(e)?t=Sl(e):t=Sl(new Ms(e)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.itemSet&&this.itemSet.setItems(t!=null?t.rawDS:null)}setGroups(e){let t;const i=n=>n.visible!==!1;e?(it(e)&&(e=new Ms(e)),t=new kue(e,{filter:i})):t=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=t,this.itemSet.setGroups(t)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,t){this.itemSet&&this.itemSet.setSelection(e),t&&t.focus&&this.focus(e,t)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,t){if(!this.itemsData||e==null)return;const i=it(e)?e:[e],n=this.itemsData.get(i);let s=null,a=null;if(ye(n).call(n,o=>{const l=o.start.valueOf(),u="end"in o?o.end.valueOf():o.start.valueOf();(s===null||l<s)&&(s=l),(a===null||u>a)&&(a=u)}),s!==null&&a!==null){const o=this,l=this.itemSet.items[i[0]];let u=this._getScrollTop()*-1,c=null;const h=(x,D,O)=>{const P=vW(o,l);if(P===!1||(c||(c=P),c.itemTop==P.itemTop&&!c.shouldScroll))return;c.itemTop!=P.itemTop&&P.shouldScroll&&(c=P,u=o._getScrollTop()*-1);const R=u,A=c.scrollOffset,I=O?A:R+(A-R)*x;o._setScrollTop(-I),D||o._redraw()},f=()=>{const x=vW(o,l);x.shouldScroll&&x.itemTop!=c.itemTop&&(o._setScrollTop(-x.scrollOffset),o._redraw())},p=()=>{f(),Ur(f,100)},g=t&&t.zoom!==void 0?t.zoom:!0,v=(s+a)/2,b=g?(a-s)*1.1:Math.max(this.range.end-this.range.start,(a-s)*1.1),E=t&&t.animation!==void 0?t.animation:!0;E||(c={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.stopRolling(),this.range.setRange(v-b/2,v+b/2,{animation:E},p,h)}}fit(e,t){const i=e&&e.animation!==void 0?e.animation:!0;let n;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(n=this.getDataRange(),this.moveTo(n.min.valueOf(),{animation:i},t)):(n=this.getItemRange(),this.range.setRange(n.min,n.max,{animation:i},t))}getItemRange(){const e=this.getDataRange();let t=e.min!==null?e.min.valueOf():null,i=e.max!==null?e.max.valueOf():null,n=null,s=null;if(t!=null&&i!=null){let a=i-t;a<=0&&(a=10);const o=a/this.props.center.width,l={};let u=0;if(ye(q).call(q,this.itemSet.items,(h,f)=>{h.groupShowing&&(l[f]=h.redraw(!0),u=l[f].length)}),u>0)for(let h=0;h<u;h++)ye(q).call(q,l,f=>{f[h]()});if(ye(q).call(q,this.itemSet.items,h=>{const f=xC(h),p=wC(h);let g,v;this.options.rtl?(g=f-(h.getWidthRight()+10)*o,v=p+(h.getWidthLeft()+10)*o):(g=f-(h.getWidthLeft()+10)*o,v=p+(h.getWidthRight()+10)*o),g<t&&(t=g,n=h),v>i&&(i=v,s=h)}),n&&s){const h=n.getWidthLeft()+10,f=s.getWidthRight()+10,p=this.props.center.width-h-f;p>0&&(this.options.rtl?(t=xC(n)-f*a/p,i=wC(s)+h*a/p):(t=xC(n)-h*a/p,i=wC(s)+f*a/p))}}return{min:t!=null?new Date(t):null,max:i!=null?new Date(i):null}}getDataRange(){let e=null,t=null;if(this.itemsData){var i;ye(i=this.itemsData).call(i,n=>{const s=q.convert(n.start,"Date").valueOf(),a=q.convert(n.end!=null?n.end:n.start,"Date").valueOf();(e===null||s<e)&&(e=s),(t===null||a>t)&&(t=a)})}return{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}}getEventProperties(e){const t=e.center?e.center.x:e.clientX,i=e.center?e.center.y:e.clientY,n=this.dom.centerContainer.getBoundingClientRect(),s=this.options.rtl?n.right-t:t-n.left,a=i-n.top,o=this.itemSet.itemFromTarget(e),l=this.itemSet.groupFromTarget(e),u=I2.customTimeFromTarget(e),c=this.itemSet.options.snap||null,h=this.body.util.getScale(),f=this.body.util.getStep(),p=this._toTime(s),g=c?c(p,h,f):p,v=q.getTarget(e);let b=null;return o!=null?b="item":u!=null?b="custom-time":q.hasParent(v,this.timeAxis.dom.foreground)||this.timeAxis2&&q.hasParent(v,this.timeAxis2.dom.foreground)?b="axis":q.hasParent(v,this.itemSet.dom.labelSet)?b="group-label":q.hasParent(v,this.currentTime.bar)?b="current-time":q.hasParent(v,this.dom.center)&&(b="background"),{event:e,item:o?o.id:null,isCluster:o?!!o.isCluster:!1,items:o?o.items||[]:null,group:l?l.groupId:null,customTime:u?u.options.id:null,what:b,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:s,y:a,time:p,snappedTime:g}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){El.prototype._redraw.call(this)}_onFit(e){const{start:t,end:i,animation:n}=e;i?this.range.setRange(t,i,{animation:n}):this.moveTo(t.valueOf(),{animation:n})}}function xC(r){return q.convert(r.data.start,"Date").valueOf()}function wC(r){const e=r.data.end!=null?r.data.end:r.data.start;return q.convert(e,"Date").valueOf()}function vW(r,e){if(!e.parent)return!1;const t=r.options.rtl?r.props.rightContainer.height:r.props.leftContainer.height,i=r.props.center.height,n=e.parent;let s=n.top,a=!0;const o=r.timeAxis.options.orientation.axis,l=()=>o=="bottom"?n.height-e.top-e.height:e.top,u=r._getScrollTop()*-1,c=s+l(),h=e.height;return c<u?s+t<=s+l()+h&&(s+=l()-r.itemSet.options.margin.item.vertical):c+h>u+t?s+=l()+h-t+r.itemSet.options.margin.item.vertical:a=!1,s=Math.min(s,i-t),{shouldScroll:a,scrollOffset:s,itemTop:c}}function Us(r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(r[e].redundant=r[e].used,r[e].used=[])}function Ui(r){for(var e in r){if(!Object.prototype.hasOwnProperty.call(r,e))continue;const i=r[e];for(var t=0;t<i.redundant.length;t++)i.redundant[t].parentNode.removeChild(i.redundant[t]);i.redundant=[]}}function Aye(r){Us(r),Ui(r),Us(r)}function nn(r,e,t){var i;return Object.prototype.hasOwnProperty.call(e,r)?e[r].redundant.length>0?(i=e[r].redundant[0],e[r].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",r),t.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",r),e[r]={used:[],redundant:[]},t.appendChild(i)),e[r].used.push(i),i}function EC(r,e,t,i){var n;return Object.prototype.hasOwnProperty.call(e,r)?e[r].redundant.length>0?(n=e[r].redundant[0],e[r].redundant.shift()):(n=document.createElement(r),t.appendChild(n)):(n=document.createElement(r),e[r]={used:[],redundant:[]},t.appendChild(n)),e[r].used.push(n),n}function Ol(r,e,t,i,n,s){var a;if(t.style=="circle"?(a=nn("circle",i,n),a.setAttributeNS(null,"cx",r),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*t.size)):(a=nn("rect",i,n),a.setAttributeNS(null,"x",r-.5*t.size),a.setAttributeNS(null,"y",e-.5*t.size),a.setAttributeNS(null,"width",t.size),a.setAttributeNS(null,"height",t.size)),t.styles!==void 0&&a.setAttributeNS(null,"style",t.styles),a.setAttributeNS(null,"class",t.className+" vis-point"),s){var o=nn("text",i,n);s.xOffset&&(r=r+s.xOffset),s.yOffset&&(e=e+s.yOffset),s.content&&(o.textContent=s.content),s.className&&o.setAttributeNS(null,"class",s.className+" vis-label"),o.setAttributeNS(null,"x",r),o.setAttributeNS(null,"y",e)}return a}function CC(r,e,t,i,n,s,a,o){if(i!=0){i<0&&(i*=-1,e-=i);var l=nn("rect",s,a);l.setAttributeNS(null,"x",r-.5*t),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",t),l.setAttributeNS(null,"height",i),l.setAttributeNS(null,"class",n),o&&l.setAttributeNS(null,"style",o)}}function Oye(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}class Pye{constructor(e,t,i,n,s,a){let o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=s,this.majorCharHeight=a,this._start=e,this._end=t,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=o,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=l,i||n){const u=this,c=h=>{const f=h-h%(u.magnitudefactor*u.minorSteps[u.minorStepIdx]);return h%(u.magnitudefactor*u.minorSteps[u.minorStepIdx])>.5*(u.magnitudefactor*u.minorSteps[u.minorStepIdx])?f+u.magnitudefactor*u.minorSteps[u.minorStepIdx]:f};i&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=c(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=c(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const t=this.majorCharHeight/this.scale,i=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);let n=0;i<0&&(n=i);let s=!1;for(let a=n;Math.abs(a)<=Math.abs(i);a++){this.magnitudefactor=Math.pow(10,a);for(let o=0;o<this.minorSteps.length;o++)if(this.magnitudefactor*this.minorSteps[o]>=t){s=!0,this.minorStepIdx=o;break}if(s===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let t=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(t=this.formattingFunction(e)),typeof t=="number"?"".concat(t):typeof t=="string"?t:e.toPrecision(5)}getLines(){const e=[],t=this.getStep(),i=(t-this._start%t)%t;for(let n=this._start+i;this._end-n>1e-5;n+=t)n!=this._start&&e.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return e}followScale(e){const t=this.minorStepIdx,i=this._start,n=this._end,s=this,a=()=>{s.magnitudefactor*=2},o=()=>{s.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,t==2||a(),a()):(this.minorStepIdx=2,t==1||o(),o()));const l=e.convertValue(0),u=e.getStep()*e.scale;let c=!1,h=0;for(;!c&&h++<5;){this.scale=u/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const f=this.containerHeight/this.scale;this._start=i,this._end=this._start+f;const p=this._end*this.scale,g=this.magnitudefactor*this.majorSteps[this.minorStepIdx],v=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const b=l-p;this._end+=b/this.scale,this._start=this._end-f}else this.autoScaleStart?(this._start-=v/this.scale,this._end=this._start+f):(this._start+=g-v/this.scale,this._end=this._start+f);if(!this.autoScaleEnd&&this._end>n+1e-5){o(),c=!1;continue}if(!this.autoScaleStart&&this._start<i-1e-5)if(this.zeroAlign&&i>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{o(),c=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&f<n-i){a(),c=!1;continue}c=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class yW extends qs{constructor(e,t,i,n){super(),this.id=Tl(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(a){return"".concat(gf(a.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(a){return"".concat(gf(a.toPrecision(3)))},title:{text:void 0,style:void 0}}},this.linegraphOptions=n,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=q.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(t),this.width=Number("".concat(this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const s=this;this.body.emitter.on("verticalDrag",()=>{s.dom.lineContainer.style.top="".concat(s.body.domProps.scrollTop,"px")})}addGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.groups[e]=t),this.amountOfGroups+=1}updateGroup(e,t){Object.prototype.hasOwnProperty.call(this.groups,e)||(this.amountOfGroups+=1),this.groups[e]=t}removeGroup(e){Object.prototype.hasOwnProperty.call(this.groups,e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let t=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(t=!0);const i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];q.selectiveDeepExtend(i,this.options,e),this.minWidth=Number("".concat(this.options.width).replace("px","")),t===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){Us(this.svgElements);let e;const t=this.options.iconWidth,i=15,n=4;let s=n+.5*i;this.options.orientation==="left"?e=n:e=this.width-t-n;const a=br(this.groups);gr(a).call(a,(o,l)=>o<l?-1:1);for(const o of a)this.groups[o].visible===!0&&(this.linegraphOptions.visibility[o]===void 0||this.linegraphOptions.visibility[o]===!0)&&(this.groups[o].getLegend(t,i,this.framework,e,s),s+=i+n);Ui(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(Us(this.svgElements),Ui(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,t){this.range.start=e,this.range.end=t}redraw(){let e=!1,t=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(const i in this.groups)Object.prototype.hasOwnProperty.call(this.groups,i)&&this.groups[i].visible===!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]===!0)&&t++;if(this.amountOfGroups===0||t===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height="".concat(this.height,"px"),this.width=this.options.visible===!0?Number("".concat(this.options.width).replace("px","")):0;const i=this.props,n=this.dom.frame;n.className="vis-data-axis",this._calculateCharSize();const s=this.options.orientation,a=this.options.showMinorLabels,o=this.options.showMajorLabels,l=this.body.dom.backgroundHorizontal.offsetWidth;i.minorLabelHeight=a?i.minorCharHeight:0,i.majorLabelHeight=o?i.majorCharHeight:0,i.minorLineWidth=l-this.lineOffset-this.width+2*this.options.minorLinesOffset,i.minorLineHeight=1,i.majorLineWidth=l-this.lineOffset-this.width+2*this.options.majorLinesOffset,i.majorLineHeight=1,s==="left"?(n.style.top="0",n.style.left="0",n.style.bottom="",n.style.width="".concat(this.width,"px"),n.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(n.style.top="",n.style.bottom="0",n.style.left="0",n.style.width="".concat(this.width,"px"),n.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(s)}return e}_redrawLabels(){let e=!1;Us(this.DOMelements.lines),Us(this.DOMelements.labels);const t=this.options.orientation,i=this.options[t].range!=null?this.options[t].range:{};let n=!0;i.max!=null&&(this.range.end=i.max,n=!1);let s=!0;i.min!=null&&(this.range.start=i.min,s=!1),this.scale=new Pye(this.range.start,this.range.end,s,n,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[t].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0;const a=this.scale.getLines();ye(a).call(a,u=>{const c=u.y,h=u.major;this.options.showMinorLabels&&h===!1&&this._redrawLabel(c-2,u.val,t,"vis-y-axis vis-minor",this.props.minorCharHeight),h&&c>=0&&this._redrawLabel(c-2,u.val,t,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(h?this._redrawLine(c,t,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(c,t,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let o=0;this.options[t].title!==void 0&&this.options[t].title.text!==void 0&&(o=this.props.titleCharHeight);const l=this.options.icons===!0?Math.max(this.options.iconWidth,o)+this.options.labelOffsetX+15:o+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-l&&this.options.visible===!0?(this.width=this.maxLabelSize+l,this.options.width="".concat(this.width,"px"),Ui(this.DOMelements.lines),Ui(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-l&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+l),this.options.width="".concat(this.width,"px"),Ui(this.DOMelements.lines),Ui(this.DOMelements.labels),this.redraw(),e=!0):(Ui(this.DOMelements.lines),Ui(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,t,i,n,s){const a=EC("div",this.DOMelements.labels,this.dom.frame);a.className=n,a.innerHTML=q.xss(t),i==="left"?(a.style.left="-".concat(this.options.labelOffsetX,"px"),a.style.textAlign="right"):(a.style.right="-".concat(this.options.labelOffsetX,"px"),a.style.textAlign="left"),a.style.top="".concat(e-.5*s+this.options.labelOffsetY,"px"),t+="";const o=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<t.length*o&&(this.maxLabelSize=t.length*o)}_redrawLine(e,t,i,n,s){if(this.master===!0){const a=EC("div",this.DOMelements.lines,this.dom.lineContainer);a.className=i,a.innerHTML="",t==="left"?a.style.left="".concat(this.width-n,"px"):a.style.right="".concat(this.width-n,"px"),a.style.width="".concat(s,"px"),a.style.top="".concat(e,"px")}}_redrawTitle(e){if(Us(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const t=EC("div",this.DOMelements.title,this.dom.frame);t.className="vis-y-axis vis-title vis-".concat(e),t.innerHTML=q.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&q.addCssText(t,this.options[e].title.style),e==="left"?t.style.left="".concat(this.props.titleCharHeight,"px"):t.style.right="".concat(this.props.titleCharHeight,"px"),t.style.width="".concat(this.height,"px")}Ui(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.minorCharHeight=t.clientHeight,this.props.minorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-major vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.majorCharHeight=t.clientHeight,this.props.majorCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),t=document.createElement("div");t.className="vis-y-axis vis-title vis-measure",t.appendChild(e),this.dom.frame.appendChild(t),this.props.titleCharHeight=t.clientHeight,this.props.titleCharWidth=t.clientWidth,this.dom.frame.removeChild(t)}}}function Pc(){}Pc.draw=function(r,e,t,i){i=i||0;for(var n=Rye(t,e),s=0;s<r.length;s++)if(!n)Ol(r[s].screen_x+i,r[s].screen_y,DC(e),t.svgElements,t.svg,r[s].label);else{var a=n(r[s],e);(a===!0||typeof a=="object")&&Ol(r[s].screen_x+i,r[s].screen_y,DC(e,a),t.svgElements,t.svg,r[s].label)}},Pc.drawIcon=function(r,e,t,i,n,s){var a=n*.5,o=nn("rect",s.svgElements,s.svg);o.setAttributeNS(null,"x",e),o.setAttributeNS(null,"y",t-a),o.setAttributeNS(null,"width",i),o.setAttributeNS(null,"height",2*a),o.setAttributeNS(null,"class","vis-outline"),Ol(e+.5*i,t,DC(r),s.svgElements,s.svg)};function DC(r,e){return e=typeof e>"u"?{}:e,{style:e.style||r.options.drawPoints.style,styles:e.styles||r.options.drawPoints.styles,size:e.size||r.options.drawPoints.size,className:e.className||r.className}}function Rye(r,e){var t=void 0;return r.options&&r.options.drawPoints&&r.options.drawPoints.onRender&&typeof r.options.drawPoints.onRender=="function"&&(t=r.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(t=e.group.options.drawPoints.onRender),t}function Vr(){}Vr.drawIcon=function(r,e,t,i,n,s){var a=n*.5,o=nn("rect",s.svgElements,s.svg);o.setAttributeNS(null,"x",e),o.setAttributeNS(null,"y",t-a),o.setAttributeNS(null,"width",i),o.setAttributeNS(null,"height",2*a),o.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*i),u=r.options.barChart.width,c=u/l,h=Math.round(.4*n),f=Math.round(.75*n),p=Math.round((i-2*l)/3);if(CC(e+.5*l+p,t+a-h-1,l,h,r.className+" vis-bar",s.svgElements,s.svg,r.style),CC(e+1.5*l+p+2,t+a-f-1,l,f,r.className+" vis-bar",s.svgElements,s.svg,r.style),r.options.drawPoints.enabled==!0){var g={style:r.options.drawPoints.style,styles:r.options.drawPoints.styles,size:r.options.drawPoints.size/c,className:r.className};Ol(e+.5*l+p,t+a-h-1,g,s.svgElements,s.svg),Ol(e+1.5*l+p+2,t+a-f-1,g,s.svgElements,s.svg)}},Vr.draw=function(r,e,t){var i=[],n={},s,a,o,l,u,c,h=0;for(u=0;u<r.length;u++)if(l=t.groups[r[u]],l.options.style==="bar"&&l.visible===!0&&(t.options.groups.visibility[r[u]]===void 0||t.options.groups.visibility[r[u]]===!0))for(c=0;c<e[r[u]].length;c++)i.push({screen_x:e[r[u]][c].screen_x,screen_end:e[r[u]][c].screen_end,screen_y:e[r[u]][c].screen_y,x:e[r[u]][c].x,end:e[r[u]][c].end,y:e[r[u]][c].y,groupId:r[u],label:e[r[u]][c].label}),h+=1;if(h!==0)for(gr(i).call(i,function(v,b){return v.screen_x===b.screen_x?v.groupId<b.groupId?-1:1:v.screen_x-b.screen_x}),Vr._getDataIntersections(n,i),u=0;u<i.length;u++){l=t.groups[i[u].groupId];var f=l.options.barChart.minWidth!=null?l.options.barChart.minWidth:.1*l.options.barChart.width;a=i[u].screen_x;var p=0;if(n[a]===void 0)u+1<i.length&&(s=Math.abs(i[u+1].screen_x-a)),o=Vr._getSafeDrawData(s,l,f);else{var g=u+(n[a].amount-n[a].resolved);g<i.length&&(s=Math.abs(i[g].screen_x-a)),o=Vr._getSafeDrawData(s,l,f),n[a].resolved+=1,l.options.stack===!0&&l.options.excludeFromStacking!==!0?i[u].screen_y<l.zeroPosition?(p=n[a].accumulatedNegative,n[a].accumulatedNegative+=l.zeroPosition-i[u].screen_y):(p=n[a].accumulatedPositive,n[a].accumulatedPositive+=l.zeroPosition-i[u].screen_y):l.options.barChart.sideBySide===!0&&(o.width=o.width/n[a].amount,o.offset+=n[a].resolved*o.width-.5*o.width*(n[a].amount+1))}let v=o.width,b=i[u].screen_x;if(i[u].screen_end!=null?(v=i[u].screen_end-i[u].screen_x,b+=v*.5):b+=o.offset,CC(b,i[u].screen_y-p,v,l.zeroPosition-i[u].screen_y,l.className+" vis-bar",t.svgElements,t.svg,l.style),l.options.drawPoints.enabled===!0){let E={screen_x:i[u].screen_x,screen_y:i[u].screen_y-p,x:i[u].x,y:i[u].y,groupId:i[u].groupId,label:i[u].label};Pc.draw([E],l,t,o.offset)}}},Vr._getDataIntersections=function(r,e){for(var t,i=0;i<e.length;i++)i+1<e.length&&(t=Math.abs(e[i+1].screen_x-e[i].screen_x)),i>0&&(t=Math.min(t,Math.abs(e[i-1].screen_x-e[i].screen_x))),t===0&&(r[e[i].screen_x]===void 0&&(r[e[i].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),r[e[i].screen_x].amount+=1)},Vr._getSafeDrawData=function(r,e,t){var i,n;return r<e.options.barChart.width&&r>0?(i=r<t?t:r,n=0,e.options.barChart.align==="left"?n-=.5*r:e.options.barChart.align==="right"&&(n+=.5*r)):(i=e.options.barChart.width,n=0,e.options.barChart.align==="left"?n-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(n+=.5*e.options.barChart.width)),{width:i,offset:n}},Vr.getStackedYRange=function(r,e,t,i,n){if(r.length>0){gr(r).call(r,function(a,o){return a.screen_x===o.screen_x?a.groupId<o.groupId?-1:1:a.screen_x-o.screen_x});var s={};Vr._getDataIntersections(s,r),e[i]=Vr._getStackedYRange(s,r),e[i].yAxisOrientation=n,t.push(i)}},Vr._getStackedYRange=function(r,e){for(var t,i=e[0].screen_y,n=e[0].screen_y,s=0;s<e.length;s++)t=e[s].screen_x,r[t]===void 0?(i=i>e[s].screen_y?e[s].screen_y:i,n=n<e[s].screen_y?e[s].screen_y:n):e[s].screen_y<0?r[t].accumulatedNegative+=e[s].screen_y:r[t].accumulatedPositive+=e[s].screen_y;for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i=i>r[a].accumulatedNegative?r[a].accumulatedNegative:i,i=i>r[a].accumulatedPositive?r[a].accumulatedPositive:i,n=n<r[a].accumulatedNegative?r[a].accumulatedNegative:n,n=n<r[a].accumulatedPositive?r[a].accumulatedPositive:n);return{min:i,max:n}};function Sr(){}Sr.calcPath=function(r,e){if(r!=null&&r.length>0){var t=[];return e.options.interpolation.enabled==!0?t=Sr._catmullRom(r,e):t=Sr._linear(r),t}},Sr.drawIcon=function(r,e,t,i,n,s){var a=n*.5,o,l,u=nn("rect",s.svgElements,s.svg);if(u.setAttributeNS(null,"x",e),u.setAttributeNS(null,"y",t-a),u.setAttributeNS(null,"width",i),u.setAttributeNS(null,"height",2*a),u.setAttributeNS(null,"class","vis-outline"),o=nn("path",s.svgElements,s.svg),o.setAttributeNS(null,"class",r.className),r.style!==void 0&&o.setAttributeNS(null,"style",r.style),o.setAttributeNS(null,"d","M"+e+","+t+" L"+(e+i)+","+t),r.options.shaded.enabled==!0&&(l=nn("path",s.svgElements,s.svg),r.options.shaded.orientation=="top"?l.setAttributeNS(null,"d","M"+e+", "+(t-a)+"L"+e+","+t+" L"+(e+i)+","+t+" L"+(e+i)+","+(t-a)):l.setAttributeNS(null,"d","M"+e+","+t+" L"+e+","+(t+a)+" L"+(e+i)+","+(t+a)+"L"+(e+i)+","+t),l.setAttributeNS(null,"class",r.className+" vis-icon-fill"),r.options.shaded.style!==void 0&&r.options.shaded.style!==""&&l.setAttributeNS(null,"style",r.options.shaded.style)),r.options.drawPoints.enabled==!0){var c={style:r.options.drawPoints.style,styles:r.options.drawPoints.styles,size:r.options.drawPoints.size,className:r.className};Ol(e+.5*i,t,c,s.svgElements,s.svg)}},Sr.drawShading=function(r,e,t,i){if(e.options.shaded.enabled==!0){var n=Number(i.svg.style.height.replace("px","")),s=nn("path",i.svgElements,i.svg),a="L";e.options.interpolation.enabled==!0&&(a="C");var o,l=0;e.options.shaded.orientation=="top"?l=0:e.options.shaded.orientation=="bottom"?l=n:l=Math.min(Math.max(0,e.zeroPosition),n),e.options.shaded.orientation=="group"&&t!=null&&t!=null?o="M"+r[0][0]+","+r[0][1]+" "+this.serializePath(r,a,!1)+" L"+t[t.length-1][0]+","+t[t.length-1][1]+" "+this.serializePath(t,a,!0)+t[0][0]+","+t[0][1]+" Z":o="M"+r[0][0]+","+r[0][1]+" "+this.serializePath(r,a,!1)+" V"+l+" H"+r[0][0]+" Z",s.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&s.setAttributeNS(null,"style",e.options.shaded.style),s.setAttributeNS(null,"d",o)}},Sr.draw=function(r,e,t){if(r!=null&&r!=null){var i=nn("path",t.svgElements,t.svg);i.setAttributeNS(null,"class",e.className),e.style!==void 0&&i.setAttributeNS(null,"style",e.style);var n="L";e.options.interpolation.enabled==!0&&(n="C"),i.setAttributeNS(null,"d","M"+r[0][0]+","+r[0][1]+" "+this.serializePath(r,n,!1))}},Sr.serializePath=function(r,e,t){if(r.length<2)return"";var i=e,n;if(t)for(n=r.length-2;n>0;n--)i+=r[n][0]+","+r[n][1]+" ";else for(n=1;n<r.length;n++)i+=r[n][0]+","+r[n][1]+" ";return i},Sr._catmullRomUniform=function(r){var e,t,i,n,s,a,o=[];o.push([Math.round(r[0].screen_x),Math.round(r[0].screen_y)]);for(var l=1/6,u=r.length,c=0;c<u-1;c++)e=c==0?r[0]:r[c-1],t=r[c],i=r[c+1],n=c+2<u?r[c+2]:i,s={screen_x:(-e.screen_x+6*t.screen_x+i.screen_x)*l,screen_y:(-e.screen_y+6*t.screen_y+i.screen_y)*l},a={screen_x:(t.screen_x+6*i.screen_x-n.screen_x)*l,screen_y:(t.screen_y+6*i.screen_y-n.screen_y)*l},o.push([s.screen_x,s.screen_y]),o.push([a.screen_x,a.screen_y]),o.push([i.screen_x,i.screen_y]);return o},Sr._catmullRom=function(r,e){var t=e.options.interpolation.alpha;if(t==0||t===void 0)return this._catmullRomUniform(r);var i,n,s,a,o,l,u,c,h,f,p,g,v,b,E,x,D,O,P,R=[];R.push([Math.round(r[0].screen_x),Math.round(r[0].screen_y)]);for(var A=r.length,I=0;I<A-1;I++)i=I==0?r[0]:r[I-1],n=r[I],s=r[I+1],a=I+2<A?r[I+2]:s,u=Math.sqrt(Math.pow(i.screen_x-n.screen_x,2)+Math.pow(i.screen_y-n.screen_y,2)),c=Math.sqrt(Math.pow(n.screen_x-s.screen_x,2)+Math.pow(n.screen_y-s.screen_y,2)),h=Math.sqrt(Math.pow(s.screen_x-a.screen_x,2)+Math.pow(s.screen_y-a.screen_y,2)),b=Math.pow(h,t),x=Math.pow(h,2*t),E=Math.pow(c,t),D=Math.pow(c,2*t),P=Math.pow(u,t),O=Math.pow(u,2*t),f=2*O+3*P*E+D,p=2*x+3*b*E+D,g=3*P*(P+E),g>0&&(g=1/g),v=3*b*(b+E),v>0&&(v=1/v),o={screen_x:(-D*i.screen_x+f*n.screen_x+O*s.screen_x)*g,screen_y:(-D*i.screen_y+f*n.screen_y+O*s.screen_y)*g},l={screen_x:(x*n.screen_x+p*s.screen_x-D*a.screen_x)*v,screen_y:(x*n.screen_y+p*s.screen_y-D*a.screen_y)*v},o.screen_x==0&&o.screen_y==0&&(o=n),l.screen_x==0&&l.screen_y==0&&(l=s),R.push([o.screen_x,o.screen_y]),R.push([l.screen_x,l.screen_y]),R.push([s.screen_x,s.screen_y]);return R},Sr._linear=function(r){for(var e=[],t=0;t<r.length;t++)e.push([r[t].screen_x,r[t].screen_y]);return e};function js(r,e,t,i){this.id=e;var n=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=q.selectiveBridgeObject(n,t),this.usingDefaultStyle=r.className===void 0,this.groupsUsingDefaultStyles=i,this.zeroPosition=0,this.update(r),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=r.visible===void 0?!0:r.visible}js.prototype.setItems=function(r){r!=null?(this.itemsData=r,gr(this.options)==!0&&q.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})):this.itemsData=[]},js.prototype.getItems=function(){return this.itemsData},js.prototype.setZeroPosition=function(r){this.zeroPosition=r},js.prototype.setOptions=function(r){if(r!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];q.selectiveDeepExtend(e,this.options,r),typeof r.drawPoints=="function"&&(r.drawPoints={onRender:r.drawPoints}),q.mergeOptions(this.options,r,"interpolation"),q.mergeOptions(this.options,r,"drawPoints"),q.mergeOptions(this.options,r,"shaded"),r.interpolation&&typeof r.interpolation=="object"&&r.interpolation.parametrization&&(r.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:r.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},js.prototype.update=function(r){this.group=r,this.content=r.content||"graph",this.className=r.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=r.visible===void 0?!0:r.visible,this.style=r.style,this.setOptions(r.options)},js.prototype.getLegend=function(r,e,t,i,n){if(t==null||t==null){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");t={svg:s,svgElements:{},options:this.options,groups:[this]}}switch((i==null||i==null)&&(i=0),(n==null||n==null)&&(n=.5*e),this.options.style){case"line":Sr.drawIcon(this,i,n,r,e,t);break;case"points":case"point":Pc.drawIcon(this,i,n,r,e,t);break;case"bar":Vr.drawIcon(this,i,n,r,e,t);break}return{icon:t.svg,label:this.content,orientation:this.options.yAxisOrientation}},js.prototype.getYRange=function(r){for(var e=r[0].y,t=r[0].y,i=0;i<r.length;i++)e=e>r[i].y?r[i].y:e,t=t<r[i].y?r[i].y:t;return{min:e,max:t,yAxisOrientation:this.options.yAxisOrientation}};function _i(r,e,t,i){this.body=r,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=t,this.options=q.extend({},this.defaultOptions),this.linegraphOptions=i,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}_i.prototype=new qs,_i.prototype.clear=function(){this.groups={},this.amountOfGroups=0},_i.prototype.addGroup=function(r,e){e.options.excludeFromLegend!=!0&&(Object.prototype.hasOwnProperty.call(this.groups,r)||(this.groups[r]=e),this.amountOfGroups+=1)},_i.prototype.updateGroup=function(r,e){this.groups[r]=e},_i.prototype.removeGroup=function(r){Object.prototype.hasOwnProperty.call(this.groups,r)&&(delete this.groups[r],this.amountOfGroups-=1)},_i.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},_i.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},_i.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},_i.prototype.setOptions=function(r){var e=["enabled","orientation","icons","left","right"];q.selectiveDeepExtend(e,this.options,r)},_i.prototype.redraw=function(){var r=0,e=br(this.groups);gr(e).call(e,function(a,o){return a<o?-1:1});for(var t=0;t<e.length;t++){var i=e[t];this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&r++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||r==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var n=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+n+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var s="";for(t=0;t<e.length;t++)i=e[t],this.groups[i].visible==!0&&(this.linegraphOptions.visibility[i]===void 0||this.linegraphOptions.visibility[i]==!0)&&(s+=this.groups[i].content+"<br />");this.dom.textArea.innerHTML=q.xss(s),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},_i.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var r=br(this.groups);gr(r).call(r,function(u,c){return u<c?-1:1}),Aye(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,t=Number(e.replace("px","")),i=t,n=this.options.iconSize,s=.75*this.options.iconSize,a=t+.5*s+3;this.svg.style.width=n+5+t+"px";for(var o=0;o<r.length;o++){var l=r[o];this.groups[l].visible==!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]==!0)&&(this.groups[l].getLegend(n,s,this.framework,i,a),a+=s+this.options.iconSpacing)}}};var If="__ungrouped__";function ut(r,e){this.id=Tl(),this.body=r,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=q.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var t=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(i,n){t._onAdd(n.items)},update:function(i,n){t._onUpdate(n.items)},remove:function(i,n){t._onRemove(n.items)}},this.groupListeners={add:function(i,n){t._onAddGroups(n.items)},update:function(i,n){t._onUpdateGroups(n.items)},remove:function(i,n){t._onRemoveGroups(n.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){t.svg.style.left=q.option.asSize(-t.props.width),t.forceGraphUpdate=!0,t.redraw.call(t)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}ut.prototype=new qs,ut.prototype._create=function(){var r=document.createElement("div");r.className="vis-line-graph",this.dom.frame=r,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",r.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new yW(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new yW(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new _i(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new _i(this.body,this.options.legend,"right",this.options.groups),this.show()},ut.prototype.setOptions=function(r){if(r){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];r.graphHeight===void 0&&r.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&r.graphHeight!==void 0&&mi((r.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),q.selectiveDeepExtend(e,this.options,r),q.mergeOptions(this.options,r,"interpolation"),q.mergeOptions(this.options,r,"drawPoints"),q.mergeOptions(this.options,r,"shaded"),q.mergeOptions(this.options,r,"legend"),r.interpolation&&typeof r.interpolation=="object"&&r.interpolation.parametrization&&(r.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:r.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&r.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&r.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),Object.prototype.hasOwnProperty.call(this.groups,If)&&this.groups[If].setOptions(r)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},ut.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},ut.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},ut.prototype.setItems=function(r){var e=this,t,i=this.itemsData;if(!r)this.itemsData=null;else if(cs(r))this.itemsData=Sl(r);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(i&&(ye(q).call(q,this.itemListeners,function(s,a){i.off(a,s)}),i.dispose(),t=i.getIds(),this._onRemove(t)),this.itemsData){var n=this.id;ye(q).call(q,this.itemListeners,function(s,a){e.itemsData.on(a,s,n)}),t=this.itemsData.getIds(),this._onAdd(t)}},ut.prototype.setGroups=function(r){var e=this,t;if(this.groupsData){ye(q).call(q,this.groupListeners,function(s,a){e.groupsData.off(a,s)}),t=this.groupsData.getIds(),this.groupsData=null;for(var i=0;i<t.length;i++)this._removeGroup(t[i])}if(!r)this.groupsData=null;else if(cs(r))this.groupsData=r;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var n=this.id;ye(q).call(q,this.groupListeners,function(s,a){e.groupsData.on(a,s,n)}),t=this.groupsData.getIds(),this._onAddGroups(t)}},ut.prototype._onUpdate=function(r){this._updateAllGroupData(r)},ut.prototype._onAdd=function(r){this._onUpdate(r)},ut.prototype._onRemove=function(r){this._onUpdate(r)},ut.prototype._onUpdateGroups=function(r){this._updateAllGroupData(null,r)},ut.prototype._onAddGroups=function(r){this._onUpdateGroups(r)},ut.prototype._onRemoveGroups=function(r){for(var e=0;e<r.length;e++)this._removeGroup(r[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},ut.prototype._removeGroup=function(r){Object.prototype.hasOwnProperty.call(this.groups,r)&&(this.groups[r].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(r),this.legendRight.removeGroup(r),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(r),this.legendLeft.removeGroup(r),this.legendLeft.redraw()),delete this.groups[r])},ut.prototype._updateGroup=function(r,e){Object.prototype.hasOwnProperty.call(this.groups,e)?(this.groups[e].update(r),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new js(r,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},ut.prototype._updateAllGroupData=function(r,e){if(this.itemsData!=null){var t={},i=this.itemsData.get(),n=this.itemsData.idProp,s={};r&&mr(r).call(r,function(b){s[b]=b});for(var a={},o=0;o<i.length;o++){var l=i[o],u=l.group;u==null&&(u=If),Object.prototype.hasOwnProperty.call(a,u)?a[u]++:a[u]=1}var c={};if(!e&&r){for(u in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,u)){v=this.groups[u];var h=v.getItems();t[u]=We(h).call(h,function(b){return c[b[n]]=b[n],b[n]!==s[b[n]]});var f=a[u];a[u]-=t[u].length,t[u].length<f&&(t[u][f-1]={})}}for(o=0;o<i.length;o++)if(l=i[o],u=l.group,u==null&&(u=If),!(!e&&r&&l[n]!==s[l[n]]&&Object.prototype.hasOwnProperty.call(c,l[n]))){Object.prototype.hasOwnProperty.call(t,u)||(t[u]=new Array(a[u]));var p=q.bridgeObject(l);p.x=q.convert(l.x,"Date"),p.end=q.convert(l.end,"Date"),p.orginalY=l.y,p.y=Number(l.y),p[n]=l[n];var g=t[u].length-a[u]--;t[u][g]=p}for(u in this.groups)!Object.prototype.hasOwnProperty.call(this.groups,u)||Object.prototype.hasOwnProperty.call(t,u)||(t[u]=new Array(0));for(u in t)if(Object.prototype.hasOwnProperty.call(t,u))if(t[u].length==0)Object.prototype.hasOwnProperty.call(this.groups,u)&&this._removeGroup(u);else{var v=void 0;this.groupsData!=null&&(v=this.groupsData.get(u)),v==null&&(v={id:u,content:this.options.defaultGroup+u}),this._updateGroup(v,u),this.groups[u].setItems(t[u])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},ut.prototype.redraw=function(){var r=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,r=this._isResized()||r;var e=this.body.range.end-this.body.range.start,t=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,r==!0){var i;this.svg.style.width=q.option.asSize(3*this.props.width),this.svg.style.left=q.option.asSize(-this.props.width),(lt(i=this.options.height+"").call(i,"%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)}if(this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",r==!0||t==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)r=this._updateGraph()||r,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,s=this.body.range.end-this.body.range.start;if(this.props.width!=0){var a=this.props.width/s,o=n*a;this.svg.style.left=-this.props.width-o+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),r},ut.prototype._getSortedGroupIds=function(){var r=[];for(var e in this.groups)if(Object.prototype.hasOwnProperty.call(this.groups,e)){var t=this.groups[e];t.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&r.push({id:e,zIndex:t.options.zIndex})}q.insertSort(r,function(s,a){var o=s.zIndex,l=a.zIndex;return o===void 0&&(o=0),l===void 0&&(l=0),o==l?0:o<l?-1:1});for(var i=new Array(r.length),n=0;n<r.length;n++)i[n]=r[n].id;return i},ut.prototype._updateGraph=function(){if(Us(this.svgElements),this.props.width!=0&&this.itemsData!=null){var r,e,t={},i=!1,n=this.body.util.toGlobalTime(-this.body.domProps.root.width),s=this.body.util.toGlobalTime(2*this.body.domProps.root.width),a=this._getSortedGroupIds();if(a.length>0){var o={};for(this._getRelevantData(a,o,n,s),this._applySampling(a,o),e=0;e<a.length;e++)this._convertXcoordinates(o[a[e]]);if(this._getYRanges(a,o,t),i=this._updateYAxis(a,t),i==!0)return Ui(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var l=void 0;for(e=0;e<a.length;e++)r=this.groups[a[e]],this.options.stack===!0&&this.options.style==="line"&&(r.options.excludeFromStacking==null||!r.options.excludeFromStacking)&&(l!=null&&(this._stack(o[r.id],o[l.id]),r.options.shaded.enabled==!0&&r.options.shaded.orientation!=="group"&&(r.options.shaded.orientation=="top"&&l.options.shaded.orientation!=="group"?(l.options.shaded.orientation="group",l.options.shaded.groupId=r.id):(r.options.shaded.orientation="group",r.options.shaded.groupId=l.id))),l=r),this._convertYcoordinates(o[a[e]],r);var u={};for(e=0;e<a.length;e++)if(r=this.groups[a[e]],r.options.style==="line"&&r.options.shaded.enabled==!0){var c=o[a[e]];if(c==null||c.length==0)continue;if(Object.prototype.hasOwnProperty.call(u,a[e])||(u[a[e]]=Sr.calcPath(c,r)),r.options.shaded.orientation==="group"){var h=r.options.shaded.groupId;if(lt(a).call(a,h)===-1){console.log(r.id+": Unknown shading group target given:"+h);continue}Object.prototype.hasOwnProperty.call(u,h)||(u[h]=Sr.calcPath(o[h],this.groups[h])),Sr.drawShading(u[a[e]],r,u[h],this.framework)}else Sr.drawShading(u[a[e]],r,void 0,this.framework)}for(Vr.draw(a,o,this.framework),e=0;e<a.length;e++)if(r=this.groups[a[e]],o[a[e]].length>0)switch(r.options.style){case"line":Object.prototype.hasOwnProperty.call(u,a[e])||(u[a[e]]=Sr.calcPath(o[a[e]],r)),Sr.draw(u[a[e]],r,this.framework);case"point":case"points":(r.options.style=="point"||r.options.style=="points"||r.options.drawPoints.enabled==!0)&&Pc.draw(o[a[e]],r,this.framework);break}}}return Ui(this.svgElements),!1},ut.prototype._stack=function(r,e){var t,i,n,s,a;t=0;for(var o=0;o<r.length;o++){s=void 0,a=void 0;for(var l=t;l<e.length;l++)if(e[l].x===r[o].x){s=e[l],a=e[l],t=l;break}else if(e[l].x>r[o].x){a=e[l],l==0?s=a:s=e[l-1],t=l;break}a===void 0&&(s=e[e.length-1],a=e[e.length-1]),i=a.x-s.x,n=a.y-s.y,i==0?r[o].y=r[o].orginalY+a.y:r[o].y=r[o].orginalY+n/i*(r[o].x-s.x)+s.y}},ut.prototype._getRelevantData=function(r,e,t,i){var n,s,a,o;if(r.length>0)for(s=0;s<r.length;s++){n=this.groups[r[s]];var l=n.getItems();if(gr(n.options)==!0){var u=function(p,g){return p.getTime()==g.getTime()?0:p<g?-1:1},c=Math.max(0,q.binarySearchValue(l,t,"x","before",u)),h=Math.min(l.length,q.binarySearchValue(l,i,"x","after",u)+1);h<=0&&(h=l.length);var f=new Array(h-c);for(a=c;a<h;a++)o=n.itemsData[a],f[a-c]=o;e[r[s]]=f}else e[r[s]]=n.itemsData}},ut.prototype._applySampling=function(r,e){var t;if(r.length>0){for(var i=0;i<r.length;i++)if(t=this.groups[r[i]],t.options.sampling==!0){var n=e[r[i]];if(n.length>0){var s=1,a=n.length,o=this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x),l=a/o;s=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(l)));for(var u=new Array(a),c=0;c<a;c+=s){var h=Math.round(c/s);u[h]=n[c]}e[r[i]]=ri(u).call(u,0,Math.round(a/s))}}}},ut.prototype._getYRanges=function(r,e,t){var i,n,s,a=[],o=[],l;if(r.length>0){for(s=0;s<r.length;s++)i=e[r[s]],l=this.groups[r[s]].options,i.length>0&&(n=this.groups[r[s]],l.stack===!0&&l.style==="bar"?l.yAxisOrientation==="left"?a=Jt(a).call(a,i):o=Jt(o).call(o,i):t[r[s]]=n.getYRange(i,r[s]));Vr.getStackedYRange(a,t,r,"__barStackLeft","left"),Vr.getStackedYRange(o,t,r,"__barStackRight","right")}},ut.prototype._updateYAxis=function(r,e){var t=!1,i=!1,n=!1,s=1e9,a=1e9,o=-1e9,l=-1e9,u,c;if(r.length>0){for(var h=0;h<r.length;h++){var f=this.groups[r[h]];f&&f.options.yAxisOrientation!="right"?(i=!0,s=1e9,o=-1e9):f&&f.options.yAxisOrientation&&(n=!0,a=1e9,l=-1e9)}for(h=0;h<r.length;h++)!Object.prototype.hasOwnProperty.call(e,r[h])||e[r[h]].ignore===!0||(u=e[r[h]].min,c=e[r[h]].max,e[r[h]].yAxisOrientation!="right"?(i=!0,s=s>u?u:s,o=o<c?c:o):(n=!0,a=a>u?u:a,l=l<c?c:l));i==!0&&this.yAxisLeft.setRange(s,o),n==!0&&this.yAxisRight.setRange(a,l)}t=this._toggleAxisVisiblity(i,this.yAxisLeft)||t,t=this._toggleAxisVisiblity(n,this.yAxisRight)||t,n==!0&&i==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!i,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(n==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,t=this.yAxisLeft.redraw()||t,t=this.yAxisRight.redraw()||t):t=this.yAxisRight.redraw()||t;var p=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(h=0;h<p.length;h++)lt(r).call(r,p[h])!=-1&&ri(r).call(r,lt(r).call(r,p[h]),1);return t},ut.prototype._toggleAxisVisiblity=function(r,e){var t=!1;return r==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),t=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),t=!0),t},ut.prototype._convertXcoordinates=function(r){for(var e=this.body.util.toScreen,t=0;t<r.length;t++)r[t].screen_x=e(r[t].x)+this.props.width,r[t].screen_y=r[t].y,r[t].end!=null?r[t].screen_end=e(r[t].end)+this.props.width:r[t].screen_end=void 0},ut.prototype._convertYcoordinates=function(r,e){var t=this.yAxisLeft,i=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(t=this.yAxisRight);for(var n=0;n<r.length;n++)r[n].screen_y=Math.round(t.convertValue(r[n].y));e.setZeroPosition(Math.min(i,t.convertValue(0)))};let Ne="string",ze="boolean",ct="number",kye="array",Pl="date",At="object",Mye="dom",Rl="moment",_W="any",$ye={configure:{enabled:{boolean:ze},filter:{boolean:ze,function:"function"},container:{dom:Mye},__type__:{object:At,boolean:ze,function:"function"}},alignCurrentTime:{string:Ne,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:Ne},sort:{boolean:ze},sampling:{boolean:ze},stack:{boolean:ze},graphHeight:{string:Ne,number:ct},shaded:{enabled:{boolean:ze},orientation:{string:["bottom","top","zero","group"]},groupId:{object:At},__type__:{boolean:ze,object:At}},style:{string:["line","bar","points"]},barChart:{width:{number:ct},minWidth:{number:ct},sideBySide:{boolean:ze},align:{string:["left","center","right"]},__type__:{object:At}},interpolation:{enabled:{boolean:ze},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:ct},__type__:{object:At,boolean:ze}},drawPoints:{enabled:{boolean:ze},onRender:{function:"function"},size:{number:ct},style:{string:["square","circle"]},__type__:{object:At,boolean:ze,function:"function"}},dataAxis:{showMinorLabels:{boolean:ze},showMajorLabels:{boolean:ze},showWeekScale:{boolean:ze},icons:{boolean:ze},width:{string:Ne,number:ct},visible:{boolean:ze},alignZeros:{boolean:ze},left:{range:{min:{number:ct,undefined:"undefined"},max:{number:ct,undefined:"undefined"},__type__:{object:At}},format:{function:"function"},title:{text:{string:Ne,number:ct,undefined:"undefined"},style:{string:Ne,undefined:"undefined"},__type__:{object:At}},__type__:{object:At}},right:{range:{min:{number:ct,undefined:"undefined"},max:{number:ct,undefined:"undefined"},__type__:{object:At}},format:{function:"function"},title:{text:{string:Ne,number:ct,undefined:"undefined"},style:{string:Ne,undefined:"undefined"},__type__:{object:At}},__type__:{object:At}},__type__:{object:At}},legend:{enabled:{boolean:ze},icons:{boolean:ze},left:{visible:{boolean:ze},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:At}},right:{visible:{boolean:ze},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:At}},__type__:{object:At,boolean:ze}},groups:{visibility:{any:_W},__type__:{object:At}},autoResize:{boolean:ze},throttleRedraw:{number:ct},clickToUse:{boolean:ze},end:{number:ct,date:Pl,string:Ne,moment:Rl},format:{minorLabels:{millisecond:{string:Ne,undefined:"undefined"},second:{string:Ne,undefined:"undefined"},minute:{string:Ne,undefined:"undefined"},hour:{string:Ne,undefined:"undefined"},weekday:{string:Ne,undefined:"undefined"},day:{string:Ne,undefined:"undefined"},week:{string:Ne,undefined:"undefined"},month:{string:Ne,undefined:"undefined"},quarter:{string:Ne,undefined:"undefined"},year:{string:Ne,undefined:"undefined"},__type__:{object:At}},majorLabels:{millisecond:{string:Ne,undefined:"undefined"},second:{string:Ne,undefined:"undefined"},minute:{string:Ne,undefined:"undefined"},hour:{string:Ne,undefined:"undefined"},weekday:{string:Ne,undefined:"undefined"},day:{string:Ne,undefined:"undefined"},week:{string:Ne,undefined:"undefined"},month:{string:Ne,undefined:"undefined"},quarter:{string:Ne,undefined:"undefined"},year:{string:Ne,undefined:"undefined"},__type__:{object:At}},__type__:{object:At}},moment:{function:"function"},height:{string:Ne,number:ct},hiddenDates:{start:{date:Pl,number:ct,string:Ne,moment:Rl},end:{date:Pl,number:ct,string:Ne,moment:Rl},repeat:{string:Ne},__type__:{object:At,array:kye}},locale:{string:Ne},locales:{__any__:{any:_W},__type__:{object:At}},max:{date:Pl,number:ct,string:Ne,moment:Rl},maxHeight:{number:ct,string:Ne},maxMinorChars:{number:ct},min:{date:Pl,number:ct,string:Ne,moment:Rl},minHeight:{number:ct,string:Ne},moveable:{boolean:ze},multiselect:{boolean:ze},orientation:{string:Ne},showCurrentTime:{boolean:ze},showMajorLabels:{boolean:ze},showMinorLabels:{boolean:ze},showWeekScale:{boolean:ze},snap:{function:"function",null:"null"},start:{date:Pl,number:ct,string:Ne,moment:Rl},timeAxis:{scale:{string:Ne,undefined:"undefined"},step:{number:ct,undefined:"undefined"},__type__:{object:At}},width:{string:Ne,number:ct},zoomable:{boolean:ze},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:ct},zoomMin:{number:ct},zIndex:{number:ct},__type__:{object:At}},Nye={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function hs(r,e,t,i){var n,s,a,o,l,u,c;if(!(it(t)||cs(t))&&t instanceof Object){var h=i;i=t,t=h}i&&i.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var f=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:ti,width:null,height:null,maxHeight:null,minHeight:null},this.options=q.deepExtend({},this.defaultOptions),this._create(r),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:se(n=this.on).call(n,this),off:se(s=this.off).call(s,this),emit:se(a=this.emit).call(a,this)},hiddenDates:[],util:{getScale(){return f.timeAxis.step.scale},getStep(){return f.timeAxis.step.step},toScreen:se(o=f._toScreen).call(o,f),toGlobalScreen:se(l=f._toGlobalScreen).call(l,f),toTime:se(u=f._toTime).call(u,f),toGlobalTime:se(c=f._toGlobalTime).call(c,f)}},this.range=new bf(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new Tf(this.body),this.components.push(this.timeAxis),this.currentTime=new WV(this.body),this.components.push(this.currentTime),this.linegraph=new ut(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(p){f.emit("click",f.getEventProperties(p))}),this.on("doubletap",function(p){f.emit("doubleClick",f.getEventProperties(p))}),this.dom.root.oncontextmenu=function(p){f.emit("contextmenu",f.getEventProperties(p))},this.initialFitDone=!1,this.on("changed",function(){if(f.itemsData!=null){if(!f.initialFitDone&&!f.options.rollingMode)if(f.initialFitDone=!0,f.options.start!=null||f.options.end!=null){if(f.options.start==null||f.options.end==null)var p=f.getItemRange();var g=f.options.start!=null?f.options.start:p.min,v=f.options.end!=null?f.options.end:p.max;f.setWindow(g,v,{animation:!1})}else f.fit({animation:!1});!f.initialDrawDone&&(f.initialRangeChangeDone||!f.options.start&&!f.options.end||f.options.rollingMode)&&(f.initialDrawDone=!0,f.dom.root.style.visibility="visible",f.dom.loadingScreen.parentNode.removeChild(f.dom.loadingScreen),f.options.onInitialDrawComplete&&Ur(()=>f.options.onInitialDrawComplete(),0))}}),i&&this.setOptions(i),t&&this.setGroups(t),e&&this.setItems(e),this._redraw()}hs.prototype=new El,hs.prototype.setOptions=function(r){It.validate(r,$ye)===!0&&console.log("%cErrors have been found in the supplied options object.",Df),El.prototype.setOptions.call(this,r)},hs.prototype.setItems=function(r){var e=this.itemsData==null,t;if(r?cs(r)?t=Sl(r):t=Sl(new Ms(r)):t=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=t,this.linegraph&&this.linegraph.setItems(t!=null?t.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var i=this.options.start!=null?this.options.start:null,n=this.options.end!=null?this.options.end:null;this.setWindow(i,n,{animation:!1})}else this.fit({animation:!1})},hs.prototype.setGroups=function(r){var e;r?cs(r)?e=r:e=new Ms(r):e=null,this.groupsData=e,this.linegraph.setGroups(e)},hs.prototype.getLegend=function(r,e,t){return e===void 0&&(e=15),t===void 0&&(t=15),this.linegraph.groups[r]!==void 0?this.linegraph.groups[r].getLegend(e,t):"cannot find group:'"+r+"'"},hs.prototype.isGroupVisible=function(r){return this.linegraph.groups[r]!==void 0?this.linegraph.groups[r].visible&&(this.linegraph.options.groups.visibility[r]===void 0||this.linegraph.options.groups.visibility[r]==!0):!1},hs.prototype.getDataRange=function(){var r=null,e=null;for(var t in this.linegraph.groups)if(!(!Object.prototype.hasOwnProperty.call(this.linegraph.groups,t)||this.linegraph.groups[t].visible!==!0))for(var i=0;i<this.linegraph.groups[t].itemsData.length;i++){var n=this.linegraph.groups[t].itemsData[i],s=q.convert(n.x,"Date").valueOf();r=r==null||r>s?s:r,e=e==null||e<s?s:e}return{min:r!=null?new Date(r):null,max:e!=null?new Date(e):null}},hs.prototype.getEventProperties=function(r){var e=r.center?r.center.x:r.clientX,t=r.center?r.center.y:r.clientY,i=e-q.getAbsoluteLeft(this.dom.centerContainer),n=t-q.getAbsoluteTop(this.dom.centerContainer),s=this._toTime(i),a=I2.customTimeFromTarget(r),o=q.getTarget(r),l=null;q.hasParent(o,this.timeAxis.dom.foreground)||this.timeAxis2&&q.hasParent(o,this.timeAxis2.dom.foreground)?l="axis":q.hasParent(o,this.linegraph.yAxisLeft.dom.frame)||q.hasParent(o,this.linegraph.yAxisRight.dom.frame)?l="data-axis":q.hasParent(o,this.linegraph.legendLeft.dom.frame)||q.hasParent(o,this.linegraph.legendRight.dom.frame)?l="legend":a!=null?l="custom-time":q.hasParent(o,this.currentTime.bar)?l="current-time":q.hasParent(o,this.dom.center)&&(l="background");var u=[],c=this.linegraph.yAxisLeft,h=this.linegraph.yAxisRight;return!c.hidden&&this.itemsData.length>0&&u.push(c.screenToValue(n)),!h.hidden&&this.itemsData.length>0&&u.push(h.screenToValue(n)),{event:r,customTime:a?a.options.id:null,what:l,pageX:r.srcEvent?r.srcEvent.pageX:r.pageX,pageY:r.srcEvent?r.srcEvent.pageY:r.pageY,x:i,y:n,time:s,value:u}},hs.prototype._createConfigurator=function(){return new gW(this,this.dom.container,Nye)};const Lye=Oye();ce.locale(Lye);class bW extends HTMLElement{static get observedAttributes(){return["iiif-annotation-list-url","media-url","media-type","wave-form-url","subtitle-files-url","waveform-stroke-color","waveform-stroke-width","annotation-min-time-to-display","annotation-properties-to-display","can-add-annotation","can-edit-all-annotation","can-update-annotation-for-author-name"]}constructor(){super(),this._iiifAnnotationListUrl=null,this._mediaUrl=null,this._mediaType="audio",this._waveFormUrl=null,this._subtitleFilesUrl=null,this._waveformStrokeColor="rgba(0, 0, 0, 0.48)",this._waveformStrokeWidth=1,this._annotationMinTimeToDisplay=15,this._annotationPropertiesToDisplay=["time","text","author"],this._canAddAnnotation=!0,this._canEditAllAnnotation=!0,this._canUpdateAnnotationForAuthorName=null,this.player=null,this.timeline=null,this.items=new Ms([]),this.groups=new Ms([{id:0,content:"Annotations"}]),this.clickTimeout=null,this.startClickTime=0,this.startClickPos={x:0,y:0}}connectedCallback(){this.render(),this.initPlayer(),this.initTimeline(),this.loadData()}disconnectedCallback(){this.player&&this.player.dispose(),this.timeline&&this.timeline.destroy()}attributeChangedCallback(e,t,i){if(t!==i)switch(e){case"iiif-annotation-list-url":this._iiifAnnotationListUrl=i,this.loadIIIFAnnotations(i);break;case"media-url":this._mediaUrl=i;break;case"media-type":this._mediaType=i;break;case"wave-form-url":this._waveFormUrl=i,this.loadWaveform(i);break;case"subtitle-files-url":this._subtitleFilesUrl=JSON.parse(i||"[]");break;case"waveform-stroke-color":this._waveformStrokeColor=i,this.drawWaveform();break;case"waveform-stroke-width":this._waveformStrokeWidth=parseFloat(i),this.drawWaveform();break;case"annotation-min-time-to-display":this._annotationMinTimeToDisplay=parseFloat(i);break;case"annotation-properties-to-display":this._annotationPropertiesToDisplay=i.split(",").map(n=>n.trim());break;case"can-add-annotation":this._canAddAnnotation=i!=="false",this.updateUI();break;case"can-edit-all-annotation":this._canEditAllAnnotation=i!=="false";break;case"can-update-annotation-for-author-name":this._canUpdateAnnotationForAuthorName=i;break}}get iiifAnnotationListUrl(){return this._iiifAnnotationListUrl}set iiifAnnotationListUrl(e){this.setAttribute("iiif-annotation-list-url",e)}get mediaUrl(){return this._mediaUrl}set mediaUrl(e){this.setAttribute("media-url",e)}render(){this.innerHTML=`
            <div class="player-container">
                <audio class="video-js vjs-default-skin"></audio>
                <div class="visualization"></div>
                <div class="controls">
                    <button class="add-annotation-btn">
                        + Ajouter une annotation
                    </button>
                    <input type="text" class="annotation-search" placeholder="Rechercher une annotation...">
                </div>
                <div class="annotation-display"></div>
            </div>

            <!-- Modal -->
            <div class="modal-overlay">
                <div class="annotation-form">
                    <h3>Edit Annotation</h3>
                    <div class="form-group">
                        <label>Type:</label>
                        <select class="annotation-type">
                            <option value="point">Point</option>
                            <option value="range">Range</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Start Time (s):</label>
                        <input type="number" class="start-time" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" class="annotation-title">
                    </div>
                    <div class="form-group end-time-group" style="display:none;">
                        <label>End Time (s):</label>
                        <input type="number" class="end-time" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Text:</label>
                        <textarea class="annotation-text" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button class="cancel-annotation">Cancel</button>
                        <button class="save-annotation">Save</button>
                    </div>
                </div>
            </div>
        `,this.updateUI(),this.bindEvents()}updateUI(){const e=this.querySelector(".add-annotation-btn");e&&(e.style.display=this._canAddAnnotation?"inline-block":"none")}initPlayer(){const e=this.querySelector(".video-js");let t=30;e&&(this._mediaUrl&&(e.src=this._mediaUrl),this._subtitleFilesUrl&&Array.isArray(this._subtitleFilesUrl)&&this._subtitleFilesUrl.forEach(i=>{const n=document.createElement("track");n.kind="subtitles",n.label=i.label||i.language,n.srclang=i.language,n.src=i.url,e.appendChild(n),t=90}),this._mediaType==="video"&&(t=300),this.player=K(e,{controls:!0,autoplay:!1,preload:"auto",fluid:!1,width:"100%",height:t,loadingSpinner:!1,bigPlayButton:!1,inactivityTimeout:0}),this.player.on("ready",()=>{}),this.player.on("loadedmetadata",()=>{const i=this.player.duration()*1e3;this.timeline&&(console.log("Setting timeline options with duration:",i),this.timeline.setOptions({min:new Date(0),max:new Date(i),end:new Date(i),zoomMax:i}),this.timeline.setWindow(new Date(0),new Date(i)))}),this.player.on("timeupdate",()=>{const i=this.player.currentTime()*1e3;this.timeline&&this.timeline.setCustomTime(i,"videoProgress"),this.updateAnnotationDisplay(i)}))}initTimeline(){const e=this.querySelector(".visualization"),t={width:"100%",height:"200px",stack:!0,showCurrentTime:!0,start:0,zoomMin:2e4,selectable:!0,editable:{add:this._canAddAnnotation,updateTime:!0,updateGroup:!1,remove:!0},template:(i,n,s)=>(i.type==="point"&&n.classList.add("point-annotation"),i.content),multiselect:!1,moment:function(i){return ce(i).utc()},format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"HH:mm",minute:"",hour:"",weekday:"",day:"",week:"",month:"",year:""}},onAdd:(i,n)=>{this.showAnnotationForm(i,n)},onMove:(i,n)=>{this.canEditItem(i)?n(i):n(null)},onRemove:(i,n)=>{this.canEditItem(i)?n(i):n(null)},onUpdate:(i,n)=>{this.canEditItem(i)?this.showAnnotationForm(i,n):n(null)}};this.timeline=new SC(e,this.items,this.groups,t),this.timeline.addCustomTime(0,"videoProgress"),this.items.on("*",()=>{this.player&&this.updateAnnotationDisplay(this.player.currentTime()*1e3)}),this.timeline.on("mouseDown",i=>this.handleMouseDown(i)),this.timeline.on("click",i=>this.handleClick(i)),this.timeline.on("rangechanged",()=>this.drawWaveform()),this.timeline.on("changed",()=>this.drawWaveform()),this.timeline.on("doubleClick",i=>{if(i.item){const n=this.items.get(i.item);this.canEditItem(n)&&this.showAnnotationForm(n,s=>{s&&this.items.update(s)})}})}canEditItem(e){return!!(this._canEditAllAnnotation||this._canUpdateAnnotationForAuthorName&&e.author===this._canUpdateAnnotationForAuthorName)}handleMouseDown(e){this.startClickTime=new Date().getTime(),e.event&&(this.startClickPos={x:e.event.clientX,y:e.event.clientY})}handleClick(e){if(e.item)return;const i=new Date().getTime()-this.startClickTime,n=e.event;if(Math.sqrt(Math.pow(n.clientX-this.startClickPos.x,2)+Math.pow(n.clientY-this.startClickPos.y,2))>5||i>500)return;const a=e.time?e.time.getTime()/1e3:null;this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(()=>{this.clickTimeout=null,a!==null&&this.player&&(this.player.currentTime(a),this.player.paused()||this.player.play())},250)}bindEvents(){const e=this.querySelector(".add-annotation-btn");e&&e.addEventListener("click",()=>{if(!this.player)return;const i=this.player.currentTime()*1e3,n={id:new Date().getTime(),start:new Date(i),end:null,content:"",group:0,type:"point"};this.showAnnotationForm(n,s=>{s&&this.items.add(s)})});const t=this.querySelector(".annotation-search");t&&t.addEventListener("input",()=>{this.player&&this.updateAnnotationDisplay(this.player.currentTime()*1e3)})}loadData(){this._iiifAnnotationListUrl&&this.loadIIIFAnnotations(this._iiifAnnotationListUrl),this._waveFormUrl&&this.loadWaveform(this._waveFormUrl)}async loadIIIFAnnotations(e){try{const i=await(await fetch(e)).json();let n=[];const s=(a,o)=>{const l=a.target||a.on,c=(typeof l=="string"?l:l.id||"").match(/t=([\d\.]+)(,([\d\.]+))?/);let h=0,f=null,p="point";if(c&&(h=parseFloat(c[1])*1e3,c[3])){const v=parseFloat(c[3])*1e3;v>h&&v>0&&(f=v,p="range")}let g="";return a.creator&&(a.creator.label&&a.creator.label.none?g=Array.isArray(a.creator.label.none)?a.creator.label.none.join(", "):a.creator.label.none:a.creator.name?g=a.creator.name:a.creator.id&&(g=a.creator.id)),{id:a["@id"]||a.id||o+1,group:0,content:a.body&&a.body.label?a.body.label:a.body&&a.body.value?a.body.value:"",value:a.body&&a.body.value?a.body.value:"",label:a.body&&a.body.label?a.body.label:"",start:h,end:f,type:p,author:g,created:a.created||""}};i["@type"]==="sc:AnnotationList"&&i.resources?n=i.resources.map(s):(i.items||i.type==="AnnotationPage"&&i.items)&&(n=i.items.map(s)),this.items.clear(),this.items.add(n),this.timeline&&this.timeline.fit(),this.updateAnnotationDisplay(0)}catch(t){console.error("Error loading IIIF annotations:",t)}}async loadWaveform(e){try{const t=await fetch(e);this.waveformData=await t.json(),this.drawWaveform()}catch(t){console.error("Error loading waveform:",t)}}drawWaveform(){if(!this.waveformData||!this.timeline)return;const e=this.querySelector(".vis-panel.vis-center");if(!e)return;let t=e.querySelector(".waveform-canvas");t||(t=document.createElement("canvas"),t.className="waveform-canvas",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.zIndex="-1",t.style.pointerEvents="none",e.insertBefore(t,e.firstChild));const i=t.getContext("2d"),n=this.timeline.getWindow(),s=n.start.getTime(),a=n.end.getTime(),o=e.offsetWidth,l=e.offsetHeight;(t.width!==o||t.height!==l)&&(t.width=o,t.height=l),i.clearRect(0,0,o,l),i.beginPath(),i.strokeStyle=this._waveformStrokeColor,i.lineWidth=this._waveformStrokeWidth;const u=this.waveformData.samples_per_pixel/this.waveformData.sample_rate,c=Math.floor(s/1e3/u),h=Math.ceil(a/1e3/u),f=Math.max(0,c),p=Math.min(this.waveformData.data.length-1,h),g=l/2,v=this.waveformData.bits||16,b=Math.pow(2,v-1),E=l/2/b*.8;for(let x=f;x<=p;x++){const D=this.waveformData.data[x],P=(x*u*1e3-s)/(a-s)*o,R=g-D*E;x===f?i.moveTo(P,R):i.lineTo(P,R)}i.stroke()}updateAnnotationDisplay(e){const t=this.querySelector(".annotation-display"),i=this.querySelector(".annotation-search"),n=i?i.value.toLowerCase():"";if(!t)return;const s=this.items.get({filter:a=>n?(a.content+" "+a.value+" "+a.label).toLowerCase().includes(n):!0});s.sort((a,o)=>a.start-o.start),(t.children.length!==s.length||t.dataset.lastSearch!==n)&&(this.renderAnnotationList(t,s),t.dataset.lastSearch=n),this.updateActiveAnnotations(t,s,e)}renderAnnotationList(e,t){e.innerHTML="",t.forEach(i=>{const n=document.createElement("div");n.className="annotation-card",n.dataset.id=i.id,n.onclick=()=>{this.player&&(this.player.currentTime(i.start/1e3),this.player.play())};let a=this.formatTime(i.start/1e3);i.type==="range"&&i.end&&(a+=` - ${this.formatTime(i.end/1e3)}`);let o=`
                <div class="annotation-header">
                    <span class="annotation-time">${a}</span>
                    <span class="annotation-label">${this.escapeHtml(i.label||i.content)}</span>
                </div>
                <div class="annotation-body">
                    ${this.escapeHtml(i.value)}
                </div>
                <div class="annotation-footer">
                    <span class="annotation-creator">${this.escapeHtml(i.author)}</span>
                    <span class="annotation-date">${this.escapeHtml(i.created)}</span>
                </div>
                <div class="annotation-progress-bar"></div>
            `;n.innerHTML=o,e.appendChild(n)})}updateActiveAnnotations(e,t,i){let n=!1,s=e.matches(":hover");Array.from(e.children).forEach((a,o)=>{const l=t[o];if(!l)return;const u=l.start;let c=l.end;if(c||(c=u+1e3),l.type==="point"&&(c=u+2e3),i>=u&&i<=c){if(a.classList.add("active"),l.type==="point"?a.classList.add("pulse-effect"):a.classList.remove("pulse-effect"),l.type==="range"){const f=c-u,p=Math.min(100,Math.max(0,(i-u)/f*100)),g=a.querySelector(".annotation-progress-bar");g&&(g.style.width=`${p}%`)}!n&&!s&&(a.scrollIntoView({behavior:"smooth",block:"center"}),n=!0)}else{a.classList.remove("active","pulse-effect");const f=a.querySelector(".annotation-progress-bar");f&&(f.style.width="0%")}})}showAnnotationForm(e,t){const i=this.querySelector(".modal-overlay"),n=this.querySelector(".annotation-type"),s=this.querySelector(".start-time"),a=this.querySelector(".annotation-title"),o=this.querySelector(".end-time"),l=this.querySelector(".end-time-group"),u=this.querySelector(".annotation-text"),c=this.querySelector(".save-annotation"),h=this.querySelector(".cancel-annotation"),f=e.start.getTime()/1e3;s.value=f,e.end?(n.value="range",o.value=e.end.getTime()/1e3,l.style.display="block"):(n.value="point",o.value="",l.style.display="none"),a.value=e.label||"",u.value=e.value||e.content||"",i.style.display="flex",n.onchange=()=>{n.value==="range"?(l.style.display="block",o.value||(o.value=parseFloat(s.value)+5)):l.style.display="none"};const p=c.cloneNode(!0);c.parentNode.replaceChild(p,c);const g=h.cloneNode(!0);h.parentNode.replaceChild(g,h),p.onclick=()=>{const v=n.value,b=parseFloat(s.value)*1e3,E=a.value,x=u.value;if(e.label=E,e.value=x,e.content=E||x,e.start=b,e.type=v,e.group=0,v==="range"){const D=parseFloat(o.value)*1e3;if(isNaN(D)||D<=b){alert("Invalid End Time");return}e.end=D}else e.end=null;t(e),i.style.display="none"},g.onclick=()=>{t(null),i.style.display="none"}}formatTime(e){const t=Math.floor(e/60),i=Math.floor(e%60);return`${t}:${i.toString().padStart(2,"0")}`}escapeHtml(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}}return customElements.define("annotation-player-iiif",bW),bW}));
